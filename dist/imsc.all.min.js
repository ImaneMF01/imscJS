/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource>  http://mths.be/fromcodepoint v0.1.0 by @mathias */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(g,t,p){g!=Array.prototype&&g!=Object.prototype&&(g[t]=p.value)};$jscomp.getGlobal=function(g){return"undefined"!=typeof window&&window===g?g:"undefined"!=typeof global&&null!=global?global:g};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(g,t,p,n){if(t){p=$jscomp.global;g=g.split(".");for(n=0;n<g.length-1;n++){var k=g[n];k in p||(p[k]={});p=p[k]}g=g[g.length-1];n=p[g];t=t(n);t!=n&&null!=t&&$jscomp.defineProperty(p,g,{configurable:!0,writable:!0,value:t})}};$jscomp.polyfill("Array.prototype.fill",function(g){return g?g:function(g,p,n){var k=this.length||0;0>p&&(p=Math.max(0,k+p));if(null==n||n>k)n=k;n=Number(n);0>n&&(n=Math.max(0,k+n));for(p=Number(p||0);p<n;p++)this[p]=g;return this}},"es6","es3");
$jscomp.polyfill("Number.isNaN",function(g){return g?g:function(g){return"number"===typeof g&&isNaN(g)}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var g=0;return function(t){return $jscomp.SYMBOL_PREFIX+(t||"")+g++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var g=$jscomp.global.Symbol.iterator;g||(g=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[g]&&$jscomp.defineProperty(Array.prototype,g,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var g=$jscomp.global.Symbol.asyncIterator;g||(g=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(g){var t=0;return $jscomp.iteratorPrototype(function(){return t<g.length?{done:!1,value:g[t++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(g){$jscomp.initSymbolIterator();g={next:g};g[$jscomp.global.Symbol.iterator]=function(){return this};return g};$jscomp.iteratorFromArray=function(g,t){$jscomp.initSymbolIterator();g instanceof String&&(g+="");var p=0,n={next:function(){if(p<g.length){var k=p++;return{value:t(k,g[k]),done:!1}}n.next=function(){return{done:!0,value:void 0}};return n.next()}};n[Symbol.iterator]=function(){return n};return n};
$jscomp.polyfill("Array.prototype.keys",function(g){return g?g:function(){return $jscomp.iteratorFromArray(this,function(g){return g})}},"es6","es3");$jscomp.makeIterator=function(g){$jscomp.initSymbolIterator();var t=g[Symbol.iterator];return t?t.call(g):$jscomp.arrayIterator(g)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(g){function t(){this.batch_=null}function p(d){return d instanceof k?d:new k(function(l,r){l(d)})}if(g&&!$jscomp.FORCE_POLYFILL_PROMISE)return g;t.prototype.asyncExecute=function(d){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(d);return this};t.prototype.asyncExecuteBatch_=function(){var d=this;this.asyncExecuteFunction(function(){d.executeBatch_()})};var n=$jscomp.global.setTimeout;t.prototype.asyncExecuteFunction=function(d){n(d,
0)};t.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var d=this.batch_;this.batch_=[];for(var l=0;l<d.length;++l){var r=d[l];d[l]=null;try{r()}catch(b){this.asyncThrow_(b)}}}this.batch_=null};t.prototype.asyncThrow_=function(d){this.asyncExecuteFunction(function(){throw d;})};var k=function(d){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var l=this.createResolveAndReject_();try{d(l.resolve,l.reject)}catch(r){l.reject(r)}};k.prototype.createResolveAndReject_=
function(){function d(b){return function(d){r||(r=!0,b.call(l,d))}}var l=this,r=!1;return{resolve:d(this.resolveTo_),reject:d(this.reject_)}};k.prototype.resolveTo_=function(d){if(d===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(d instanceof k)this.settleSameAsPromise_(d);else{a:switch(typeof d){case "object":var l=null!=d;break a;case "function":l=!0;break a;default:l=!1}l?this.resolveToNonPromiseObj_(d):this.fulfill_(d)}};k.prototype.resolveToNonPromiseObj_=function(d){var l=
void 0;try{l=d.then}catch(r){this.reject_(r);return}"function"==typeof l?this.settleSameAsThenable_(l,d):this.fulfill_(d)};k.prototype.reject_=function(d){this.settle_(2,d)};k.prototype.fulfill_=function(d){this.settle_(1,d)};k.prototype.settle_=function(d,l){if(0!=this.state_)throw Error("Cannot settle("+d+", "+l+"): Promise already settled in state"+this.state_);this.state_=d;this.result_=l;this.executeOnSettledCallbacks_()};k.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var k=
0;k<this.onSettledCallbacks_.length;++k)d.asyncExecute(this.onSettledCallbacks_[k]);this.onSettledCallbacks_=null}};var d=new t;k.prototype.settleSameAsPromise_=function(d){var l=this.createResolveAndReject_();d.callWhenSettled_(l.resolve,l.reject)};k.prototype.settleSameAsThenable_=function(d,l){var r=this.createResolveAndReject_();try{d.call(l,r.resolve,r.reject)}catch(b){r.reject(b)}};k.prototype.then=function(d,l){function r(d,l){return"function"==typeof d?function(e){try{b(d(e))}catch(G){h(G)}}:
l}var b,h,x=new k(function(d,l){b=d;h=l});this.callWhenSettled_(r(d,b),r(l,h));return x};k.prototype.catch=function(d){return this.then(void 0,d)};k.prototype.callWhenSettled_=function(k,l){function r(){switch(b.state_){case 1:k(b.result_);break;case 2:l(b.result_);break;default:throw Error("Unexpected state: "+b.state_);}}var b=this;null==this.onSettledCallbacks_?d.asyncExecute(r):this.onSettledCallbacks_.push(r)};k.resolve=p;k.reject=function(d){return new k(function(l,r){r(d)})};k.race=function(d){return new k(function(l,
r){for(var b=$jscomp.makeIterator(d),h=b.next();!h.done;h=b.next())p(h.value).callWhenSettled_(l,r)})};k.all=function(d){var l=$jscomp.makeIterator(d),r=l.next();return r.done?p([]):new k(function(b,d){function h(d){return function(h){e[d]=h;k--;0==k&&b(e)}}var e=[],k=0;do e.push(void 0),k++,p(r.value).callWhenSettled_(h(e.length-1),d),r=l.next();while(!r.done)})};return k},"es6","es3");$jscomp.underscoreProtoCanBeSet=function(){var g={a:!0},t={};try{return t.__proto__=g,t.a}catch(p){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(g,t){g.__proto__=t;if(g.__proto__!==t)throw new TypeError(g+" is not extensible");return g}:null;$jscomp.polyfill("Object.setPrototypeOf",function(g){return g||$jscomp.setPrototypeOf},"es6","es5");
$jscomp.polyfill("String.fromCodePoint",function(g){return g?g:function(g){for(var p="",n=0;n<arguments.length;n++){var k=Number(arguments[n]);if(0>k||1114111<k||k!==Math.floor(k))throw new RangeError("invalid_code_point "+k);65535>=k?p+=String.fromCharCode(k):(k-=65536,p+=String.fromCharCode(k>>>10&1023|55296),p+=String.fromCharCode(k&1023|56320))}return p}},"es6","es3");$jscomp.owns=function(g,t){return Object.prototype.hasOwnProperty.call(g,t)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(g,t){for(var p=1;p<arguments.length;p++){var n=arguments[p];if(n)for(var k in n)$jscomp.owns(n,k)&&(g[k]=n[k])}return g};$jscomp.polyfill("Object.assign",function(g){return g||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.entries",function(g){return g?g:function(g){var p=[],n;for(n in g)$jscomp.owns(g,n)&&p.push([n,g[n]]);return p}},"es8","es3");
$jscomp.polyfill("Math.sign",function(g){return g?g:function(g){g=Number(g);return 0===g||isNaN(g)?g:0<g?1:-1}},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var g={},t=Object.create(new $jscomp.global.Proxy(g,{get:function(p,n,k){return p==g&&"q"==n&&k==t}}));return!0===t.q}catch(p){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.polyfill("WeakMap",function(g){function t(){if(!g||!Object.seal)return!1;try{var d=Object.seal({}),r=Object.seal({}),b=new g([[d,2],[r,3]]);if(2!=b.get(d)||3!=b.get(r))return!1;b.delete(d);b.set(r,4);return!b.has(d)&&4==b.get(r)}catch(h){return!1}}function p(d){$jscomp.owns(d,k)||$jscomp.defineProperty(d,k,{value:{}})}function n(d){var r=Object[d];r&&(Object[d]=function(b){p(b);return r(b)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(g&&$jscomp.ES6_CONFORMANCE)return g}else if(t())return g;
var k="$jscomp_hidden_"+Math.random();n("freeze");n("preventExtensions");n("seal");var d=0,u=function(l){this.id_=(d+=Math.random()+1).toString();if(l){$jscomp.initSymbol();$jscomp.initSymbolIterator();l=$jscomp.makeIterator(l);for(var r;!(r=l.next()).done;)r=r.value,this.set(r[0],r[1])}};u.prototype.set=function(d,r){p(d);if(!$jscomp.owns(d,k))throw Error("WeakMap key fail: "+d);d[k][this.id_]=r;return this};u.prototype.get=function(d){return $jscomp.owns(d,k)?d[k][this.id_]:void 0};u.prototype.has=
function(d){return $jscomp.owns(d,k)&&$jscomp.owns(d[k],this.id_)};u.prototype.delete=function(d){return $jscomp.owns(d,k)&&$jscomp.owns(d[k],this.id_)?delete d[k][this.id_]:!1};return u},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(g){function t(){if($jscomp.ASSUME_NO_NATIVE_MAP||!g||"function"!=typeof g||!g.prototype.entries||"function"!=typeof Object.seal)return!1;try{var d=Object.seal({x:4}),b=new g($jscomp.makeIterator([[d,"s"]]));if("s"!=b.get(d)||1!=b.size||b.get({x:4})||b.set({x:4},"t")!=b||2!=b.size)return!1;var h=b.entries(),x=h.next();if(x.done||x.value[0]!=d||"s"!=x.value[1])return!1;x=h.next();return x.done||4!=x.value[0].x||"t"!=x.value[1]||!h.next().done?!1:!0}catch(e){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(g&&$jscomp.ES6_CONFORMANCE)return g}else if(t())return g;$jscomp.initSymbol();$jscomp.initSymbolIterator();var p=new WeakMap,n=function(d){this.data_={};this.head_=u();this.size=0;if(d){d=$jscomp.makeIterator(d);for(var b;!(b=d.next()).done;)b=b.value,this.set(b[0],b[1])}};n.prototype.set=function(d,b){d=0===d?0:d;var h=k(this,d);h.list||(h.list=this.data_[h.id]=[]);h.entry?h.entry.value=b:(h.entry={next:this.head_,previous:this.head_.previous,head:this.head_,
key:d,value:b},h.list.push(h.entry),this.head_.previous.next=h.entry,this.head_.previous=h.entry,this.size++);return this};n.prototype.delete=function(d){d=k(this,d);return d.entry&&d.list?(d.list.splice(d.index,1),d.list.length||delete this.data_[d.id],d.entry.previous.next=d.entry.next,d.entry.next.previous=d.entry.previous,d.entry.head=null,this.size--,!0):!1};n.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=u();this.size=0};n.prototype.has=function(d){return!!k(this,d).entry};
n.prototype.get=function(d){return(d=k(this,d).entry)&&d.value};n.prototype.entries=function(){return d(this,function(d){return[d.key,d.value]})};n.prototype.keys=function(){return d(this,function(d){return d.key})};n.prototype.values=function(){return d(this,function(d){return d.value})};n.prototype.forEach=function(d,b){for(var h=this.entries(),x;!(x=h.next()).done;)x=x.value,d.call(b,x[1],x[0],this)};n.prototype[Symbol.iterator]=n.prototype.entries;var k=function(d,b){var h=b&&typeof b;"object"==
h||"function"==h?p.has(b)?h=p.get(b):(h=""+ ++l,p.set(b,h)):h="p_"+b;var x=d.data_[h];if(x&&$jscomp.owns(d.data_,h))for(d=0;d<x.length;d++){var e=x[d];if(b!==b&&e.key!==e.key||b===e.key)return{id:h,list:x,index:d,entry:e}}return{id:h,list:x,index:-1,entry:void 0}},d=function(d,b){var h=d.head_;return $jscomp.iteratorPrototype(function(){if(h){for(;h.head!=d.head_;)h=h.previous;for(;h.next!=h.head;)return h=h.next,{done:!1,value:b(h)};h=null}return{done:!0,value:void 0}})},u=function(){var d={};return d.previous=
d.next=d.head=d},l=0;return n},"es6","es3");
$jscomp.polyfill("Set",function(g){function t(){if($jscomp.ASSUME_NO_NATIVE_SET||!g||"function"!=typeof g||!g.prototype.entries||"function"!=typeof Object.seal)return!1;try{var n=Object.seal({x:4}),k=new g($jscomp.makeIterator([n]));if(!k.has(n)||1!=k.size||k.add(n)!=k||1!=k.size||k.add({x:4})!=k||2!=k.size)return!1;var d=k.entries(),u=d.next();if(u.done||u.value[0]!=n||u.value[1]!=n)return!1;u=d.next();return u.done||u.value[0]==n||4!=u.value[0].x||u.value[1]!=u.value[0]?!1:d.next().done}catch(l){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(g&&$jscomp.ES6_CONFORMANCE)return g}else if(t())return g;$jscomp.initSymbol();$jscomp.initSymbolIterator();var p=function(g){this.map_=new Map;if(g){g=$jscomp.makeIterator(g);for(var k;!(k=g.next()).done;)this.add(k.value)}this.size=this.map_.size};p.prototype.add=function(g){g=0===g?0:g;this.map_.set(g,g);this.size=this.map_.size;return this};p.prototype.delete=function(g){g=this.map_.delete(g);this.size=this.map_.size;return g};p.prototype.clear=
function(){this.map_.clear();this.size=0};p.prototype.has=function(g){return this.map_.has(g)};p.prototype.entries=function(){return this.map_.entries()};p.prototype.values=function(){return this.map_.values()};p.prototype.keys=p.prototype.values;p.prototype[Symbol.iterator]=p.prototype.values;p.prototype.forEach=function(g,k){var d=this;this.map_.forEach(function(n){return g.call(k,n,n,d)})};return p},"es6","es3");
(function(g){"object"===typeof exports&&"undefined"!==typeof module?module.exports=g():"function"===typeof define&&define.amd?define([],g):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=g()})(function(){return function(){function g(t,p,n){function k(l,r){if(!p[l]){if(!t[l]){var b="function"==typeof require&&require;if(!r&&b)return b(l,!0);if(d)return d(l,!0);r=Error("Cannot find module '"+l+"'");throw r.code="MODULE_NOT_FOUND",r;}r=
p[l]={exports:{}};t[l][0].call(r.exports,function(d){return k(t[l][1][d]||d)},r,r.exports,g,t,p,n)}return p[l].exports}for(var d="function"==typeof require&&require,u=0;u<n.length;u++)k(n[u]);return k}return g}()({1:[function(g,t,p){function n(d){var b=d.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");d=d.indexOf("=");-1===d&&(d=b);return[d,d===b?0:4-d%4]}function k(l,b,h){for(var x=[],e=b;e<h;e+=3)b=(l[e]<<16&16711680)+(l[e+1]<<8&65280)+(l[e+2]&255),x.push(d[b>>18&63]+
d[b>>12&63]+d[b>>6&63]+d[b&63]);return x.join("")}p.byteLength=function(d){d=n(d);var b=d[1];return 3*(d[0]+b)/4-b};p.toByteArray=function(d){var b=n(d);var h=b[0];b=b[1];var x=new l(3*(h+b)/4-b),e=0,g=0<b?h-4:h,k;for(k=0;k<g;k+=4)h=u[d.charCodeAt(k)]<<18|u[d.charCodeAt(k+1)]<<12|u[d.charCodeAt(k+2)]<<6|u[d.charCodeAt(k+3)],x[e++]=h>>16&255,x[e++]=h>>8&255,x[e++]=h&255;2===b&&(h=u[d.charCodeAt(k)]<<2|u[d.charCodeAt(k+1)]>>4,x[e++]=h&255);1===b&&(h=u[d.charCodeAt(k)]<<10|u[d.charCodeAt(k+1)]<<4|u[d.charCodeAt(k+
2)]>>2,x[e++]=h>>8&255,x[e++]=h&255);return x};p.fromByteArray=function(l){for(var b=l.length,h=b%3,x=[],e=0,g=b-h;e<g;e+=16383)x.push(k(l,e,e+16383>g?g:e+16383));1===h?(l=l[b-1],x.push(d[l>>2]+d[l<<4&63]+"==")):2===h&&(l=(l[b-2]<<8)+l[b-1],x.push(d[l>>10]+d[l>>4&63]+d[l<<2&63]+"="));return x.join("")};var d=[],u=[],l="undefined"!==typeof Uint8Array?Uint8Array:Array;for(g=0;64>g;++g)d[g]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g],u["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(g)]=
g;u[45]=62;u[95]=63},{}],2:[function(g,t,p){},{}],3:[function(g,t,p){(function(n){(function(){function k(m){if(m>R)throw new RangeError('The value "'+m+'" is invalid for option "size"');m=new Uint8Array(m);m.__proto__=d.prototype;return m}function d(m,d,b){if("number"===typeof m){if("string"===typeof d)throw new TypeError('The "string" argument must be of type string. Received type number');return r(m)}return n(m,d,b)}function n(m,y,f){if("string"===typeof m){var M=y;if("string"!==typeof M||""===
M)M="utf8";if(!d.isEncoding(M))throw new TypeError("Unknown encoding: "+M);y=e(m,M)|0;f=k(y);m=f.write(m,M);m!==y&&(f=f.slice(0,m));return f}if(ArrayBuffer.isView(m))return b(m);if(null==m)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(t(m,ArrayBuffer)||m&&t(m.buffer,ArrayBuffer)){if(0>y||m.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<y+(f||0))throw new RangeError('"length" is outside of buffer bounds');
m=void 0===y&&void 0===f?new Uint8Array(m):void 0===f?new Uint8Array(m,y):new Uint8Array(m,y,f);m.__proto__=d.prototype;return m}if("number"===typeof m)throw new TypeError('The "value" argument must not be of type number. Received type number');M=m.valueOf&&m.valueOf();if(null!=M&&M!==m)return d.from(M,y,f);if(M=h(m))return M;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof m[Symbol.toPrimitive])return d.from(m[Symbol.toPrimitive]("string"),y,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof m);}function l(m){if("number"!==typeof m)throw new TypeError('"size" argument must be of type number');if(0>m)throw new RangeError('The value "'+m+'" is invalid for option "size"');}function r(m){l(m);return k(0>m?0:x(m)|0)}function b(m){for(var d=0>m.length?0:x(m.length)|0,b=k(d),f=0;f<d;f+=1)b[f]=m[f]&255;return b}function h(m){if(d.isBuffer(m)){var y=x(m.length)|0,f=k(y);if(0===f.length)return f;m.copy(f,0,0,y);return f}if(void 0!==m.length)return(y="number"!==typeof m.length)||(y=m.length,
y=y!==y),y?k(0):b(m);if("Buffer"===m.type&&Array.isArray(m.data))return b(m.data)}function x(m){if(m>=R)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+R.toString(16)+" bytes");return m|0}function e(m,y){if(d.isBuffer(m))return m.length;if(ArrayBuffer.isView(m)||t(m,ArrayBuffer))return m.byteLength;if("string"!==typeof m)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);var b=m.length,f=2<arguments.length&&
!0===arguments[2];if(!f&&0===b)return 0;for(var e=!1;;)switch(y){case "ascii":case "latin1":case "binary":return b;case "utf8":case "utf-8":return K(m).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*b;case "hex":return b>>>1;case "base64":return L.toByteArray(J(m)).length;default:if(e)return f?-1:K(m).length;y=(""+y).toLowerCase();e=!0}}function A(m,d,b){var y=!1;if(void 0===d||0>d)d=0;if(d>this.length)return"";if(void 0===b||b>this.length)b=this.length;if(0>=b)return"";b>>>=
0;d>>>=0;if(b<=d)return"";for(m||(m="utf8");;)switch(m){case "hex":m=d;d=b;b=this.length;if(!m||0>m)m=0;if(!d||0>d||d>b)d=b;y="";for(b=m;b<d;++b)m=y,y=this[b],y=16>y?"0"+y.toString(16):y.toString(16),y=m+y;return y;case "utf8":case "utf-8":return F(this,d,b);case "ascii":m="";for(b=Math.min(this.length,b);d<b;++d)m+=String.fromCharCode(this[d]&127);return m;case "latin1":case "binary":m="";for(b=Math.min(this.length,b);d<b;++d)m+=String.fromCharCode(this[d]);return m;case "base64":return d=0===d&&
b===this.length?L.fromByteArray(this):L.fromByteArray(this.slice(d,b)),d;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=this.slice(d,b);b="";for(m=0;m<d.length;m+=2)b+=String.fromCharCode(d[m]+256*d[m+1]);return b;default:if(y)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase();y=!0}}function w(m,d,b){var y=m[d];m[d]=m[b];m[b]=y}function G(m,y,b,f,e){if(0===m.length)return-1;"string"===typeof b?(f=b,b=0):2147483647<b?b=2147483647:-2147483648>b&&(b=-2147483648);b=+b;b!==b&&
(b=e?0:m.length-1);0>b&&(b=m.length+b);if(b>=m.length){if(e)return-1;b=m.length-1}else if(0>b)if(e)b=0;else return-1;"string"===typeof y&&(y=d.from(y,f));if(d.isBuffer(y))return 0===y.length?-1:I(m,y,b,f,e);if("number"===typeof y)return y&=255,"function"===typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(m,y,b):Uint8Array.prototype.lastIndexOf.call(m,y,b):I(m,[y],b,f,e);throw new TypeError("val must be string, number or Buffer");}function I(m,d,b,f,e){function y(m,d){return 1===
q?m[d]:m.readUInt16BE(d*q)}var q=1,h=m.length,l=d.length;if(void 0!==f&&(f=String(f).toLowerCase(),"ucs2"===f||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(2>m.length||2>d.length)return-1;q=2;h/=2;l/=2;b/=2}if(e)for(f=-1;b<h;b++)if(y(m,b)===y(d,-1===f?0:b-f)){if(-1===f&&(f=b),b-f+1===l)return f*q}else-1!==f&&(b-=b-f),f=-1;else for(b+l>h&&(b=h-l);0<=b;b--){h=!0;for(f=0;f<l;f++)if(y(m,b+f)!==y(d,f)){h=!1;break}if(h)return b}return-1}function F(m,d,b){b=Math.min(m.length,b);for(var y=[];d<b;){var f=
m[d],e=null,q=239<f?4:223<f?3:191<f?2:1;if(d+q<=b)switch(q){case 1:128>f&&(e=f);break;case 2:var h=m[d+1];128===(h&192)&&(f=(f&31)<<6|h&63,127<f&&(e=f));break;case 3:h=m[d+1];var l=m[d+2];128===(h&192)&&128===(l&192)&&(f=(f&15)<<12|(h&63)<<6|l&63,2047<f&&(55296>f||57343<f)&&(e=f));break;case 4:h=m[d+1];l=m[d+2];var U=m[d+3];128===(h&192)&&128===(l&192)&&128===(U&192)&&(f=(f&15)<<18|(h&63)<<12|(l&63)<<6|U&63,65535<f&&1114112>f&&(e=f))}null===e?(e=65533,q=1):65535<e&&(e-=65536,y.push(e>>>10&1023|55296),
e=56320|e&1023);y.push(e);d+=q}m=y.length;if(m<=N)y=String.fromCharCode.apply(String,y);else{b="";for(d=0;d<m;)b+=String.fromCharCode.apply(String,y.slice(d,d+=N));y=b}return y}function B(m,d,b){if(0!==m%1||0>m)throw new RangeError("offset is not uint");if(m+d>b)throw new RangeError("Trying to access beyond buffer length");}function H(m,b,f,e,h,q){if(!d.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>h||b<q)throw new RangeError('"value" argument is out of bounds');
if(f+e>m.length)throw new RangeError("Index out of range");}function f(m,d,b,f,e,h){if(b+f>m.length)throw new RangeError("Index out of range");if(0>b)throw new RangeError("Index out of range");}function z(m,d,b,e,h){d=+d;b>>>=0;h||f(m,d,b,4,3.4028234663852886E38,-3.4028234663852886E38);D.write(m,d,b,e,23,4);return b+4}function q(m,d,b,e,h){d=+d;b>>>=0;h||f(m,d,b,8,1.7976931348623157E308,-1.7976931348623157E308);D.write(m,d,b,e,52,8);return b+8}function J(m){m=m.split("=")[0];m=m.trim().replace(P,
"");if(2>m.length)return"";for(;0!==m.length%4;)m+="=";return m}function K(m,d){d=d||Infinity;for(var b,f=m.length,y=null,e=[],h=0;h<f;++h){b=m.charCodeAt(h);if(55295<b&&57344>b){if(!y){if(56319<b){-1<(d-=3)&&e.push(239,191,189);continue}else if(h+1===f){-1<(d-=3)&&e.push(239,191,189);continue}y=b;continue}if(56320>b){-1<(d-=3)&&e.push(239,191,189);y=b;continue}b=(y-55296<<10|b-56320)+65536}else y&&-1<(d-=3)&&e.push(239,191,189);y=null;if(128>b){if(0>--d)break;e.push(b)}else if(2048>b){if(0>(d-=2))break;
e.push(b>>6|192,b&63|128)}else if(65536>b){if(0>(d-=3))break;e.push(b>>12|224,b>>6&63|128,b&63|128)}else if(1114112>b){if(0>(d-=4))break;e.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw Error("Invalid code point");}return e}function E(m){for(var d=[],b=0;b<m.length;++b)d.push(m.charCodeAt(b)&255);return d}function O(m,d,b,f){for(var y=0;y<f&&!(y+b>=d.length||y>=m.length);++y)d[y+b]=m[y];return y}function t(m,d){return m instanceof d||null!=m&&null!=m.constructor&&null!=m.constructor.name&&
m.constructor.name===d.name}var L=g("base64-js"),D=g("ieee754");p.Buffer=d;p.SlowBuffer=function(m){+m!=m&&(m=0);return d.alloc(+m)};p.INSPECT_MAX_BYTES=50;var R=2147483647;p.kMaxLength=R;d.TYPED_ARRAY_SUPPORT=function(){try{var m=new Uint8Array(1);m.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===m.foo()}catch(y){return!1}}();d.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}});Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});d.poolSize=8192;d.from=function(m,d,b){return n(m,d,b)};d.prototype.__proto__=Uint8Array.prototype;
d.__proto__=Uint8Array;d.alloc=function(d,b,f){l(d);d=0>=d?k(d):void 0!==b?"string"===typeof f?k(d).fill(b,f):k(d).fill(b):k(d);return d};d.allocUnsafe=function(d){return r(d)};d.allocUnsafeSlow=function(d){return r(d)};d.isBuffer=function(m){return null!=m&&!0===m._isBuffer&&m!==d.prototype};d.compare=function(m,b){t(m,Uint8Array)&&(m=d.from(m,m.offset,m.byteLength));t(b,Uint8Array)&&(b=d.from(b,b.offset,b.byteLength));if(!d.isBuffer(m)||!d.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(m===b)return 0;for(var f=m.length,y=b.length,e=0,h=Math.min(f,y);e<h;++e)if(m[e]!==b[e]){f=m[e];y=b[e];break}return f<y?-1:y<f?1:0};d.isEncoding=function(d){switch(String(d).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};d.concat=function(m,b){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(0===m.length)return d.alloc(0);
var f;if(void 0===b)for(f=b=0;f<m.length;++f)b+=m[f].length;b=d.allocUnsafe(b);var y=0;for(f=0;f<m.length;++f){var e=m[f];t(e,Uint8Array)&&(e=d.from(e));if(!d.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(b,y);y+=e.length}return b};d.byteLength=e;d.prototype._isBuffer=!0;d.prototype.swap16=function(){var d=this.length;if(0!==d%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<d;b+=2)w(this,b,b+1);return this};d.prototype.swap32=
function(){var d=this.length;if(0!==d%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<d;b+=4)w(this,b,b+3),w(this,b+1,b+2);return this};d.prototype.swap64=function(){var d=this.length;if(0!==d%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<d;b+=8)w(this,b,b+7),w(this,b+1,b+6),w(this,b+2,b+5),w(this,b+3,b+4);return this};d.prototype.toString=function(){var d=this.length;return 0===d?"":0===arguments.length?F(this,0,d):A.apply(this,
arguments)};d.prototype.toLocaleString=d.prototype.toString;d.prototype.equals=function(b){if(!d.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===d.compare(this,b)};d.prototype.inspect=function(){var d=p.INSPECT_MAX_BYTES;var b=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim();this.length>d&&(b+=" ... ");return"<Buffer "+b+">"};d.prototype.compare=function(b,f,e,h,q){t(b,Uint8Array)&&(b=d.from(b,b.offset,b.byteLength));if(!d.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof b);void 0===f&&(f=0);void 0===e&&(e=b?b.length:0);void 0===h&&(h=0);void 0===q&&(q=this.length);if(0>f||e>b.length||0>h||q>this.length)throw new RangeError("out of range index");if(h>=q&&f>=e)return 0;if(h>=q)return-1;if(f>=e)return 1;f>>>=0;e>>>=0;h>>>=0;q>>>=0;if(this===b)return 0;var m=q-h,y=e-f,l=Math.min(m,y);h=this.slice(h,q);b=b.slice(f,e);for(f=0;f<l;++f)if(h[f]!==b[f]){m=h[f];y=b[f];break}return m<y?-1:y<m?1:0};d.prototype.includes=function(d,b,f){return-1!==this.indexOf(d,b,f)};d.prototype.indexOf=
function(d,b,f){return G(this,d,b,f,!0)};d.prototype.lastIndexOf=function(d,b,f){return G(this,d,b,f,!1)};d.prototype.write=function(d,b,f,e){if(void 0===b)e="utf8",f=this.length,b=0;else if(void 0===f&&"string"===typeof b)e=b,f=this.length,b=0;else if(isFinite(b))b>>>=0,isFinite(f)?(f>>>=0,void 0===e&&(e="utf8")):(e=f,f=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var m=this.length-b;if(void 0===f||f>m)f=m;if(0<d.length&&(0>f||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");
e||(e="utf8");for(m=!1;;)switch(e){case "hex":a:{b=Number(b)||0;e=this.length-b;f?(f=Number(f),f>e&&(f=e)):f=e;e=d.length;f>e/2&&(f=e/2);for(e=0;e<f;++e){m=parseInt(d.substr(2*e,2),16);if(m!==m){d=e;break a}this[b+e]=m}d=e}return d;case "utf8":case "utf-8":return O(K(d,this.length-b),this,b,f);case "ascii":return O(E(d),this,b,f);case "latin1":case "binary":return O(E(d),this,b,f);case "base64":return O(L.toByteArray(J(d)),this,b,f);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=d;m=this.length-
b;for(var y=[],h=0;h<e.length&&!(0>(m-=2));++h){var q=e.charCodeAt(h);d=q>>8;q%=256;y.push(q);y.push(d)}return O(y,this,b,f);default:if(m)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase();m=!0}};d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;d.prototype.slice=function(b,f){var m=this.length;b=~~b;f=void 0===f?m:~~f;0>b?(b+=m,0>b&&(b=0)):b>m&&(b=m);0>f?(f+=m,0>f&&(f=0)):f>m&&(f=m);f<b&&(f=b);b=this.subarray(b,f);b.__proto__=
d.prototype;return b};d.prototype.readUIntLE=function(b,d,f){b>>>=0;d>>>=0;f||B(b,d,this.length);f=this[b];for(var m=1,e=0;++e<d&&(m*=256);)f+=this[b+e]*m;return f};d.prototype.readUIntBE=function(b,d,f){b>>>=0;d>>>=0;f||B(b,d,this.length);f=this[b+--d];for(var m=1;0<d&&(m*=256);)f+=this[b+--d]*m;return f};d.prototype.readUInt8=function(b,d){b>>>=0;d||B(b,1,this.length);return this[b]};d.prototype.readUInt16LE=function(b,d){b>>>=0;d||B(b,2,this.length);return this[b]|this[b+1]<<8};d.prototype.readUInt16BE=
function(b,d){b>>>=0;d||B(b,2,this.length);return this[b]<<8|this[b+1]};d.prototype.readUInt32LE=function(b,d){b>>>=0;d||B(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};d.prototype.readUInt32BE=function(b,d){b>>>=0;d||B(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};d.prototype.readIntLE=function(b,d,f){b>>>=0;d>>>=0;f||B(b,d,this.length);f=this[b];for(var m=1,e=0;++e<d&&(m*=256);)f+=this[b+e]*m;f>=128*m&&(f-=Math.pow(2,8*d));return f};
d.prototype.readIntBE=function(b,d,f){b>>>=0;d>>>=0;f||B(b,d,this.length);f=d;for(var m=1,e=this[b+--f];0<f&&(m*=256);)e+=this[b+--f]*m;e>=128*m&&(e-=Math.pow(2,8*d));return e};d.prototype.readInt8=function(b,d){b>>>=0;d||B(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};d.prototype.readInt16LE=function(b,d){b>>>=0;d||B(b,2,this.length);b=this[b]|this[b+1]<<8;return b&32768?b|4294901760:b};d.prototype.readInt16BE=function(b,d){b>>>=0;d||B(b,2,this.length);b=this[b+1]|this[b]<<8;return b&
32768?b|4294901760:b};d.prototype.readInt32LE=function(b,d){b>>>=0;d||B(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};d.prototype.readInt32BE=function(b,d){b>>>=0;d||B(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};d.prototype.readFloatLE=function(b,d){b>>>=0;d||B(b,4,this.length);return D.read(this,b,!0,23,4)};d.prototype.readFloatBE=function(b,d){b>>>=0;d||B(b,4,this.length);return D.read(this,b,!1,23,4)};d.prototype.readDoubleLE=function(b,
d){b>>>=0;d||B(b,8,this.length);return D.read(this,b,!0,52,8)};d.prototype.readDoubleBE=function(b,d){b>>>=0;d||B(b,8,this.length);return D.read(this,b,!1,52,8)};d.prototype.writeUIntLE=function(b,d,f,e){b=+b;d>>>=0;f>>>=0;e||H(this,b,d,f,Math.pow(2,8*f)-1,0);e=1;var m=0;for(this[d]=b&255;++m<f&&(e*=256);)this[d+m]=b/e&255;return d+f};d.prototype.writeUIntBE=function(b,d,f,e){b=+b;d>>>=0;f>>>=0;e||H(this,b,d,f,Math.pow(2,8*f)-1,0);e=f-1;var m=1;for(this[d+e]=b&255;0<=--e&&(m*=256);)this[d+e]=b/m&
255;return d+f};d.prototype.writeUInt8=function(b,d,f){b=+b;d>>>=0;f||H(this,b,d,1,255,0);this[d]=b&255;return d+1};d.prototype.writeUInt16LE=function(b,d,f){b=+b;d>>>=0;f||H(this,b,d,2,65535,0);this[d]=b&255;this[d+1]=b>>>8;return d+2};d.prototype.writeUInt16BE=function(b,d,f){b=+b;d>>>=0;f||H(this,b,d,2,65535,0);this[d]=b>>>8;this[d+1]=b&255;return d+2};d.prototype.writeUInt32LE=function(b,d,f){b=+b;d>>>=0;f||H(this,b,d,4,4294967295,0);this[d+3]=b>>>24;this[d+2]=b>>>16;this[d+1]=b>>>8;this[d]=b&
255;return d+4};d.prototype.writeUInt32BE=function(b,d,f){b=+b;d>>>=0;f||H(this,b,d,4,4294967295,0);this[d]=b>>>24;this[d+1]=b>>>16;this[d+2]=b>>>8;this[d+3]=b&255;return d+4};d.prototype.writeIntLE=function(b,d,f,e){b=+b;d>>>=0;e||(e=Math.pow(2,8*f-1),H(this,b,d,f,e-1,-e));e=0;var m=1,h=0;for(this[d]=b&255;++e<f&&(m*=256);)0>b&&0===h&&0!==this[d+e-1]&&(h=1),this[d+e]=(b/m>>0)-h&255;return d+f};d.prototype.writeIntBE=function(b,d,f,e){b=+b;d>>>=0;e||(e=Math.pow(2,8*f-1),H(this,b,d,f,e-1,-e));e=f-
1;var m=1,h=0;for(this[d+e]=b&255;0<=--e&&(m*=256);)0>b&&0===h&&0!==this[d+e+1]&&(h=1),this[d+e]=(b/m>>0)-h&255;return d+f};d.prototype.writeInt8=function(b,d,f){b=+b;d>>>=0;f||H(this,b,d,1,127,-128);0>b&&(b=255+b+1);this[d]=b&255;return d+1};d.prototype.writeInt16LE=function(b,d,f){b=+b;d>>>=0;f||H(this,b,d,2,32767,-32768);this[d]=b&255;this[d+1]=b>>>8;return d+2};d.prototype.writeInt16BE=function(b,d,f){b=+b;d>>>=0;f||H(this,b,d,2,32767,-32768);this[d]=b>>>8;this[d+1]=b&255;return d+2};d.prototype.writeInt32LE=
function(b,d,f){b=+b;d>>>=0;f||H(this,b,d,4,2147483647,-2147483648);this[d]=b&255;this[d+1]=b>>>8;this[d+2]=b>>>16;this[d+3]=b>>>24;return d+4};d.prototype.writeInt32BE=function(b,d,f){b=+b;d>>>=0;f||H(this,b,d,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);this[d]=b>>>24;this[d+1]=b>>>16;this[d+2]=b>>>8;this[d+3]=b&255;return d+4};d.prototype.writeFloatLE=function(b,d,f){return z(this,b,d,!0,f)};d.prototype.writeFloatBE=function(b,d,f){return z(this,b,d,!1,f)};d.prototype.writeDoubleLE=function(b,
d,f){return q(this,b,d,!0,f)};d.prototype.writeDoubleBE=function(b,d,f){return q(this,b,d,!1,f)};d.prototype.copy=function(b,f,e,h){if(!d.isBuffer(b))throw new TypeError("argument should be a Buffer");e||(e=0);h||0===h||(h=this.length);f>=b.length&&(f=b.length);f||(f=0);0<h&&h<e&&(h=e);if(h===e||0===b.length||0===this.length)return 0;if(0>f)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("sourceEnd out of bounds");
h>this.length&&(h=this.length);b.length-f<h-e&&(h=b.length-f+e);var m=h-e;if(this===b&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(f,e,h);else if(this===b&&e<f&&f<h)for(h=m-1;0<=h;--h)b[h+f]=this[h+e];else Uint8Array.prototype.set.call(b,this.subarray(e,h),f);return m};d.prototype.fill=function(b,f,e,h){if("string"===typeof b){"string"===typeof f?(h=f,f=0,e=this.length):"string"===typeof e&&(h=e,e=this.length);if(void 0!==h&&"string"!==typeof h)throw new TypeError("encoding must be a string");
if("string"===typeof h&&!d.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(1===b.length){var m=b.charCodeAt(0);if("utf8"===h&&128>m||"latin1"===h)b=m}}else"number"===typeof b&&(b&=255);if(0>f||this.length<f||this.length<e)throw new RangeError("Out of range index");if(e<=f)return this;f>>>=0;e=void 0===e?this.length:e>>>0;b||(b=0);if("number"===typeof b)for(h=f;h<e;++h)this[h]=b;else{m=d.isBuffer(b)?b:d.from(b,h);var q=m.length;if(0===q)throw new TypeError('The value "'+b+'" is invalid for argument "value"');
for(h=0;h<e-f;++h)this[h+f]=m[h%q]}return this};var P=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,g("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:20}],4:[function(g,t,p){function n(){n.init.call(this)}function k(b){if("function"!==typeof b)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof b);}function d(b,d,e,f){k(e);var h=b._events;if(void 0===h)h=b._events=Object.create(null),b._eventsCount=0;else{void 0!==h.newListener&&(b.emit("newListener",d,
e.listener?e.listener:e),h=b._events);var q=h[d]}void 0===q?(h[d]=e,++b._eventsCount):("function"===typeof q?q=h[d]=f?[e,q]:[q,e]:f?q.unshift(e):q.push(e),e=void 0===b._maxListeners?n.defaultMaxListeners:b._maxListeners,0<e&&q.length>e&&!q.warned&&(q.warned=!0,e=Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(d)+" listeners added. Use emitter.setMaxListeners() to increase limit"),e.name="MaxListenersExceededWarning",e.emitter=b,e.type=d,e.count=q.length,console&&console.warn&&
console.warn(e)));return b}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(b,d,e){b={fired:!1,wrapFn:void 0,target:b,type:d,listener:e};d=u.bind(b);d.listener=e;return b.wrapFn=d}function r(b,d,e){b=b._events;if(void 0===b)return[];d=b[d];if(void 0===d)return[];if("function"===typeof d)return e?[d.listener||d]:[d];if(e)for(e=Array(d.length),
b=0;b<e.length;++b)e[b]=d[b].listener||d[b];else e=h(d,d.length);return e}function b(b){var d=this._events;if(void 0!==d){b=d[b];if("function"===typeof b)return 1;if(void 0!==b)return b.length}return 0}function h(b,d){for(var e=Array(d),f=0;f<d;++f)e[f]=b[f];return e}function x(b,d,h){"function"===typeof b.on&&e(b,"error",d,h)}function e(b,d,e,f){if("function"===typeof b.on)if(f.once)b.once(d,e);else b.on(d,e);else if("function"===typeof b.addEventListener)b.addEventListener(d,function J(h){f.once&&
b.removeEventListener(d,J);e(h)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof b);}var A=(g="object"===typeof Reflect?Reflect:null)&&"function"===typeof g.apply?g.apply:function(b,d,e){return Function.prototype.apply.call(b,d,e)};var w=g&&"function"===typeof g.ownKeys?g.ownKeys:Object.getOwnPropertySymbols?function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:function(b){return Object.getOwnPropertyNames(b)};
var G=Number.isNaN||function(b){return b!==b};t.exports=n;t.exports.once=function(b,d){return new Promise(function(h,f){function l(e){b.removeListener(d,q);f(e)}function q(){"function"===typeof b.removeListener&&b.removeListener("error",l);h([].slice.call(arguments))}e(b,d,q,{once:!0});"error"!==d&&x(b,l,{once:!0})})};n.EventEmitter=n;n.prototype._events=void 0;n.prototype._eventsCount=0;n.prototype._maxListeners=void 0;var I=10;Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return I},
set:function(b){if("number"!==typeof b||0>b||G(b))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+b+".");I=b}});n.init=function(){if(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)this._events=Object.create(null),this._eventsCount=0;this._maxListeners=this._maxListeners||void 0};n.prototype.setMaxListeners=function(b){if("number"!==typeof b||0>b||G(b))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+
b+".");this._maxListeners=b;return this};n.prototype.getMaxListeners=function(){return void 0===this._maxListeners?n.defaultMaxListeners:this._maxListeners};n.prototype.emit=function(b){for(var d=[],e=1;e<arguments.length;e++)d.push(arguments[e]);e="error"===b;var f=this._events;if(void 0!==f)e=e&&void 0===f.error;else if(!e)return!1;if(e){var l;0<d.length&&(l=d[0]);if(l instanceof Error)throw l;d=Error("Unhandled error."+(l?" ("+l.message+")":""));d.context=l;throw d;}e=f[b];if(void 0===e)return!1;
if("function"===typeof e)A(e,this,d);else for(l=e.length,f=h(e,l),e=0;e<l;++e)A(f[e],this,d);return!0};n.prototype.addListener=function(b,e){return d(this,b,e,!1)};n.prototype.on=n.prototype.addListener;n.prototype.prependListener=function(b,e){return d(this,b,e,!0)};n.prototype.once=function(b,d){k(d);this.on(b,l(this,b,d));return this};n.prototype.prependOnceListener=function(b,d){k(d);this.prependListener(b,l(this,b,d));return this};n.prototype.removeListener=function(b,d){var e;k(d);var f=this._events;
if(void 0===f)return this;var h=f[b];if(void 0===h)return this;if(h===d||h.listener===d)0===--this._eventsCount?this._events=Object.create(null):(delete f[b],f.removeListener&&this.emit("removeListener",b,h.listener||d));else if("function"!==typeof h){var q=-1;for(e=h.length-1;0<=e;e--)if(h[e]===d||h[e].listener===d){var l=h[e].listener;q=e;break}if(0>q)return this;if(0===q)h.shift();else{for(;q+1<h.length;q++)h[q]=h[q+1];h.pop()}1===h.length&&(f[b]=h[0]);void 0!==f.removeListener&&this.emit("removeListener",
b,l||d)}return this};n.prototype.off=n.prototype.removeListener;n.prototype.removeAllListeners=function(b){var d=this._events;if(void 0===d)return this;if(void 0===d.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==d[b]&&(0===--this._eventsCount?this._events=Object.create(null):delete d[b]),this;if(0===arguments.length){var e=Object.keys(d);for(d=0;d<e.length;++d){var f=e[d];"removeListener"!==f&&this.removeAllListeners(f)}this.removeAllListeners("removeListener");
this._events=Object.create(null);this._eventsCount=0;return this}e=d[b];if("function"===typeof e)this.removeListener(b,e);else if(void 0!==e)for(d=e.length-1;0<=d;d--)this.removeListener(b,e[d]);return this};n.prototype.listeners=function(b){return r(this,b,!0)};n.prototype.rawListeners=function(b){return r(this,b,!1)};n.listenerCount=function(d,e){return"function"===typeof d.listenerCount?d.listenerCount(e):b.call(d,e)};n.prototype.listenerCount=b;n.prototype.eventNames=function(){return 0<this._eventsCount?
w(this._events):[]}},{}],5:[function(g,t,p){function n(){k.call(this)}t.exports=n;var k=g("events").EventEmitter;g("inherits")(n,k);n.Readable=g("readable-stream/lib/_stream_readable.js");n.Writable=g("readable-stream/lib/_stream_writable.js");n.Duplex=g("readable-stream/lib/_stream_duplex.js");n.Transform=g("readable-stream/lib/_stream_transform.js");n.PassThrough=g("readable-stream/lib/_stream_passthrough.js");n.finished=g("readable-stream/lib/internal/streams/end-of-stream.js");n.pipeline=g("readable-stream/lib/internal/streams/pipeline.js");
n.Stream=n;n.prototype.pipe=function(d,g){function l(b){d.writable&&!1===d.write(b)&&A.pause&&A.pause()}function n(){A.readable&&A.resume&&A.resume()}function b(){w||(w=!0,d.end())}function h(){w||(w=!0,"function"===typeof d.destroy&&d.destroy())}function x(b){e();if(0===k.listenerCount(this,"error"))throw b;}function e(){A.removeListener("data",l);d.removeListener("drain",n);A.removeListener("end",b);A.removeListener("close",h);A.removeListener("error",x);d.removeListener("error",x);A.removeListener("end",
e);A.removeListener("close",e);d.removeListener("close",e)}var A=this;A.on("data",l);d.on("drain",n);d._isStdio||g&&!1===g.end||(A.on("end",b),A.on("close",h));var w=!1;A.on("error",x);d.on("error",x);A.on("end",e);A.on("close",e);d.on("close",e);d.emit("pipe",A);return d}},{events:4,inherits:21,"readable-stream/lib/_stream_duplex.js":7,"readable-stream/lib/_stream_passthrough.js":8,"readable-stream/lib/_stream_readable.js":9,"readable-stream/lib/_stream_transform.js":10,"readable-stream/lib/_stream_writable.js":11,
"readable-stream/lib/internal/streams/end-of-stream.js":15,"readable-stream/lib/internal/streams/pipeline.js":17}],6:[function(g,t,p){function n(d,k){d.prototype=Object.create(k.prototype);d.prototype.constructor=d;d.__proto__=k}function k(d,k,b){b||(b=Error);var h=function(b){function d(d,e,h){return b.call(this,"string"===typeof k?k:k(d,e,h))||this}n(d,b);return d}(b);h.prototype.name=b.name;h.prototype.code=d;u[d]=h}function d(d,k){if(Array.isArray(d)){var b=d.length;d=d.map(function(b){return String(b)});
return 2<b?"one of ".concat(k," ").concat(d.slice(0,b-1).join(", "),", or ")+d[b-1]:2===b?"one of ".concat(k," ").concat(d[0]," or ").concat(d[1]):"of ".concat(k," ").concat(d[0])}return"of ".concat(k," ").concat(String(d))}var u={};k("ERR_INVALID_OPT_VALUE",function(d,k){return'The value "'+k+'" is invalid for option "'+d+'"'},TypeError);k("ERR_INVALID_ARG_TYPE",function(l,k,b){var h;if(h="string"===typeof k)h="not "===k.substr(0,4);h?(h="must not be",k=k.replace(/^not /,"")):h="must be";var x=void 0;
if(void 0===x||x>l.length)x=l.length;" argument"===l.substring(x-9,x)?l="The ".concat(l," ").concat(h," ").concat(d(k,"type")):(x=void 0,"number"!==typeof x&&(x=0),x=x+1>l.length?!1:-1!==l.indexOf(".",x),x=x?"property":"argument",l='The "'.concat(l,'" ').concat(x," ").concat(h," ").concat(d(k,"type")));return l+=". Received type ".concat(typeof b)},TypeError);k("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");k("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+d+" method is not implemented"});
k("ERR_STREAM_PREMATURE_CLOSE","Premature close");k("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"});k("ERR_MULTIPLE_CALLBACK","Callback called multiple times");k("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");k("ERR_STREAM_WRITE_AFTER_END","write after end");k("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);k("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError);k("ERR_STREAM_UNSHIFT_AFTER_END_EVENT",
"stream.unshift() after end event");t.exports.codes=u},{}],7:[function(g,t,p){(function(n){(function(){function k(e){if(!(this instanceof k))return new k(e);r.call(this,e);b.call(this,e);this.allowHalfOpen=!0;e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||n.nextTick(u,this)}function u(b){b.end()}var l=Object.keys||function(b){var d=[],e;for(e in b)d.push(e);return d};
t.exports=k;var r=g("./_stream_readable"),b=g("./_stream_writable");g("inherits")(k,r);l=l(b.prototype);for(var h=0;h<l.length;h++){var x=l[h];k.prototype[x]||(k.prototype[x]=b.prototype[x])}Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(k.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(b){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=b,this._writableState.destroyed=b)}})}).call(this)}).call(this,g("_process"))},{"./_stream_readable":9,
"./_stream_writable":11,_process:22,inherits:21}],8:[function(g,t,p){function n(d){if(!(this instanceof n))return new n(d);k.call(this,d)}t.exports=n;var k=g("./_stream_transform");g("inherits")(n,k);n.prototype._transform=function(d,k,l){l(null,d)}},{"./_stream_transform":10,inherits:21}],9:[function(g,t,p){(function(n,k){(function(){function d(b,d,f){if("function"===typeof b.prependListener)return b.prependListener(d,f);if(b._events&&b._events[d])Array.isArray(b._events[d])?b._events[d].unshift(f):
b._events[d]=[f,b._events[d]];else b.on(d,f)}function u(b,d,f){K=K||g("./_stream_duplex");b=b||{};"boolean"!==typeof f&&(f=d instanceof K);this.objectMode=!!b.objectMode;f&&(this.objectMode=this.objectMode||!!b.readableObjectMode);this.highWaterMark=N(this,b,"readableHighWaterMark",f);this.buffer=new R;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=
!1;this.paused=!0;this.emitClose=!1!==b.emitClose;this.autoDestroy=!!b.autoDestroy;this.destroyed=!1;this.defaultEncoding=b.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;b.encoding&&(X||(X=g("string_decoder/").StringDecoder),this.decoder=new X(b.encoding),this.encoding=b.encoding)}function l(b){K=K||g("./_stream_duplex");if(!(this instanceof l))return new l(b);this._readableState=new u(b,this,this instanceof K);this.readable=!0;b&&("function"===typeof b.read&&
(this._read=b.read),"function"===typeof b.destroy&&(this._destroy=b.destroy));E.call(this)}function r(d,f,h,q,k){D("readableAddChunk",f);var C=d._readableState;if(null===f)C.reading=!1,D("onEofChunk"),C.ended||(C.decoder&&(f=C.decoder.end())&&f.length&&(C.buffer.push(f),C.length+=C.objectMode?1:f.length),C.ended=!0,C.sync?x(d):(C.needReadable=!1,C.emittedReadable||(C.emittedReadable=!0,e(d))));else{if(!k){k=f;var l;O.isBuffer(k)||k instanceof T||"string"===typeof k||void 0===k||C.objectMode||(l=new m("chunk",
["string","Buffer","Uint8Array"],k));var g=l}if(g)W(d,g);else if(C.objectMode||f&&0<f.length)if("string"===typeof f||C.objectMode||Object.getPrototypeOf(f)===O.prototype||(f=O.from(f)),q)C.endEmitted?W(d,new S):b(d,C,f,!0);else if(C.ended)W(d,new y);else{if(C.destroyed)return!1;C.reading=!1;C.decoder&&!h?(f=C.decoder.write(f),C.objectMode||0!==f.length?b(d,C,f,!1):A(d,C)):b(d,C,f,!1)}else q||(C.reading=!1,A(d,C))}return!C.ended&&(C.length<C.highWaterMark||0===C.length)}function b(b,d,f,e){d.flowing&&
0===d.length&&!d.sync?(d.awaitDrain=0,b.emit("data",f)):(d.length+=d.objectMode?1:f.length,e?d.buffer.unshift(f):d.buffer.push(f),d.needReadable&&x(b));A(b,d)}function h(b,d){if(0>=b||0===d.length&&d.ended)return 0;if(d.objectMode)return 1;if(b!==b)return d.flowing&&d.length?d.buffer.head.data.length:d.length;if(b>d.highWaterMark){var f=b;1073741824<=f?f=1073741824:(f--,f|=f>>>1,f|=f>>>2,f|=f>>>4,f|=f>>>8,f|=f>>>16,f++);d.highWaterMark=f}return b<=d.length?b:d.ended?d.length:(d.needReadable=!0,0)}
function x(b){var d=b._readableState;D("emitReadable",d.needReadable,d.emittedReadable);d.needReadable=!1;d.emittedReadable||(D("emitReadable",d.flowing),d.emittedReadable=!0,n.nextTick(e,b))}function e(b){var d=b._readableState;D("emitReadable_",d.destroyed,d.length,d.ended);d.destroyed||!d.length&&!d.ended||(b.emit("readable"),d.emittedReadable=!1);d.needReadable=!d.flowing&&!d.ended&&d.length<=d.highWaterMark;H(b)}function A(b,d){d.readingMore||(d.readingMore=!0,n.nextTick(w,b,d))}function w(b,
d){for(;!d.reading&&!d.ended&&(d.length<d.highWaterMark||d.flowing&&0===d.length);){var f=d.length;D("maybeReadMore read 0");b.read(0);if(f===d.length)break}d.readingMore=!1}function p(b){return function(){var d=b._readableState;D("pipeOnDrain",d.awaitDrain);d.awaitDrain&&d.awaitDrain--;0===d.awaitDrain&&b.listeners("data").length&&(d.flowing=!0,H(b))}}function I(b){var d=b._readableState;d.readableListening=0<b.listenerCount("readable");d.resumeScheduled&&!d.paused?d.flowing=!0:0<b.listenerCount("data")&&
b.resume()}function F(b){D("readable nexttick read 0");b.read(0)}function B(b,d){D("resume",d.reading);d.reading||b.read(0);d.resumeScheduled=!1;b.emit("resume");H(b);d.flowing&&!d.reading&&b.read(0)}function H(b){var d=b._readableState;for(D("flow",d.flowing);d.flowing&&null!==b.read(););}function f(b,d){if(0===d.length)return null;d.objectMode?b=d.buffer.shift():!b||b>=d.length?(b=d.decoder?d.buffer.join(""):1===d.buffer.length?d.buffer.first():d.buffer.concat(d.length),d.buffer.clear()):b=d.buffer.consume(b,
d.decoder);return b}function z(b){var d=b._readableState;D("endReadable",d.endEmitted);d.endEmitted||(d.ended=!0,n.nextTick(q,d,b))}function q(b,d){D("endReadableNT",b.endEmitted,b.length);b.endEmitted||0!==b.length||(b.endEmitted=!0,d.readable=!1,d.emit("end"),b.autoDestroy&&(b=d._writableState,(!b||b.autoDestroy&&b.finished)&&d.destroy()))}function J(b,d){for(var f=0,e=b.length;f<e;f++)if(b[f]===d)return f;return-1}t.exports=l;var K;l.ReadableState=u;g("events");var E=g("./internal/streams/stream"),
O=g("buffer").Buffer,T=k.Uint8Array||function(){},L=g("util");var D=L&&L.debuglog?L.debuglog("stream"):function(){};var R=g("./internal/streams/buffer_list");L=g("./internal/streams/destroy");var N=g("./internal/streams/state").getHighWaterMark,P=g("../errors").codes,m=P.ERR_INVALID_ARG_TYPE,y=P.ERR_STREAM_PUSH_AFTER_EOF,M=P.ERR_METHOD_NOT_IMPLEMENTED,S=P.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,X,Y,v;g("inherits")(l,E);var W=L.errorOrDestroy,V=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,
"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(b){this._readableState&&(this._readableState.destroyed=b)}});l.prototype.destroy=L.destroy;l.prototype._undestroy=L.undestroy;l.prototype._destroy=function(b,d){d(b)};l.prototype.push=function(b,d){var f=this._readableState;if(f.objectMode)var e=!0;else"string"===typeof b&&(d=d||f.defaultEncoding,d!==f.encoding&&(b=O.from(b,d),d=""),e=!0);return r(this,b,d,!1,e)};l.prototype.unshift=
function(b){return r(this,b,null,!0,!1)};l.prototype.isPaused=function(){return!1===this._readableState.flowing};l.prototype.setEncoding=function(b){X||(X=g("string_decoder/").StringDecoder);b=new X(b);this._readableState.decoder=b;this._readableState.encoding=this._readableState.decoder.encoding;for(var d=this._readableState.buffer.head,f="";null!==d;)f+=b.write(d.data),d=d.next;this._readableState.buffer.clear();""!==f&&this._readableState.buffer.push(f);this._readableState.length=f.length;return this};
l.prototype.read=function(b){D("read",b);b=parseInt(b,10);var d=this._readableState,e=b;0!==b&&(d.emittedReadable=!1);if(0===b&&d.needReadable&&((0!==d.highWaterMark?d.length>=d.highWaterMark:0<d.length)||d.ended))return D("read: emitReadable",d.length,d.ended),0===d.length&&d.ended?z(this):x(this),null;b=h(b,d);if(0===b&&d.ended)return 0===d.length&&z(this),null;var m=d.needReadable;D("need readable",m);if(0===d.length||d.length-b<d.highWaterMark)m=!0,D("length less than watermark",m);d.ended||d.reading?
D("reading or ended",!1):m&&(D("do read"),d.reading=!0,d.sync=!0,0===d.length&&(d.needReadable=!0),this._read(d.highWaterMark),d.sync=!1,d.reading||(b=h(e,d)));m=0<b?f(b,d):null;null===m?(d.needReadable=d.length<=d.highWaterMark,b=0):(d.length-=b,d.awaitDrain=0);0===d.length&&(d.ended||(d.needReadable=!0),e!==b&&d.ended&&z(this));null!==m&&this.emit("data",m);return m};l.prototype._read=function(b){W(this,new M("_read()"))};l.prototype.pipe=function(b,f){function e(d,f){D("onunpipe");d===g&&f&&!1===
f.hasUnpiped&&(f.hasUnpiped=!0,D("cleanup"),b.removeListener("close",k),b.removeListener("finish",l),b.removeListener("drain",V),b.removeListener("error",q),b.removeListener("unpipe",e),g.removeListener("end",h),g.removeListener("end",x),g.removeListener("data",m),z=!0,!C.awaitDrain||b._writableState&&!b._writableState.needDrain||V())}function h(){D("onend");b.end()}function m(d){D("ondata");d=b.write(d);D("dest.write",d);!1===d&&((1===C.pipesCount&&C.pipes===b||1<C.pipesCount&&-1!==J(C.pipes,b))&&
!z&&(D("false write response, pause",C.awaitDrain),C.awaitDrain++),g.pause())}function q(d){D("onerror",d);x();b.removeListener("error",q);0===b.listeners("error").length&&W(b,d)}function k(){b.removeListener("finish",l);x()}function l(){D("onfinish");b.removeListener("close",k);x()}function x(){D("unpipe");g.unpipe(b)}var g=this,C=this._readableState;switch(C.pipesCount){case 0:C.pipes=b;break;case 1:C.pipes=[C.pipes,b];break;default:C.pipes.push(b)}C.pipesCount+=1;D("pipe count=%d opts=%j",C.pipesCount,
f);f=f&&!1===f.end||b===n.stdout||b===n.stderr?x:h;if(C.endEmitted)n.nextTick(f);else g.once("end",f);b.on("unpipe",e);var V=p(g);b.on("drain",V);var z=!1;g.on("data",m);d(b,"error",q);b.once("close",k);b.once("finish",l);b.emit("pipe",g);C.flowing||(D("pipe resume"),g.resume());return b};l.prototype.unpipe=function(b){var d=this._readableState,f={hasUnpiped:!1};if(0===d.pipesCount)return this;if(1===d.pipesCount){if(b&&b!==d.pipes)return this;b||(b=d.pipes);d.pipes=null;d.pipesCount=0;d.flowing=
!1;b&&b.emit("unpipe",this,f);return this}if(!b){b=d.pipes;f=d.pipesCount;d.pipes=null;d.pipesCount=0;d.flowing=!1;for(d=0;d<f;d++)b[d].emit("unpipe",this,{hasUnpiped:!1});return this}var e=J(d.pipes,b);if(-1===e)return this;d.pipes.splice(e,1);--d.pipesCount;1===d.pipesCount&&(d.pipes=d.pipes[0]);b.emit("unpipe",this,f);return this};l.prototype.on=function(b,d){d=E.prototype.on.call(this,b,d);var f=this._readableState;"data"===b?(f.readableListening=0<this.listenerCount("readable"),!1!==f.flowing&&
this.resume()):"readable"!==b||f.endEmitted||f.readableListening||(f.readableListening=f.needReadable=!0,f.flowing=!1,f.emittedReadable=!1,D("on readable",f.length,f.reading),f.length?x(this):f.reading||n.nextTick(F,this));return d};l.prototype.addListener=l.prototype.on;l.prototype.removeListener=function(b,d){d=E.prototype.removeListener.call(this,b,d);"readable"===b&&n.nextTick(I,this);return d};l.prototype.removeAllListeners=function(b){var d=E.prototype.removeAllListeners.apply(this,arguments);
"readable"!==b&&void 0!==b||n.nextTick(I,this);return d};l.prototype.resume=function(){var b=this._readableState;b.flowing||(D("resume"),b.flowing=!b.readableListening,b.resumeScheduled||(b.resumeScheduled=!0,n.nextTick(B,this,b)));b.paused=!1;return this};l.prototype.pause=function(){D("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(D("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};l.prototype.wrap=function(b){var d=
this,f=this._readableState,e=!1;b.on("end",function(){D("wrapped end");if(f.decoder&&!f.ended){var b=f.decoder.end();b&&b.length&&d.push(b)}d.push(null)});b.on("data",function(h){D("wrapped data");f.decoder&&(h=f.decoder.write(h));f.objectMode&&(null===h||void 0===h)||!(f.objectMode||h&&h.length)||d.push(h)||(e=!0,b.pause())});for(var h in b)void 0===this[h]&&"function"===typeof b[h]&&(this[h]=function(d){return function(){return b[d].apply(b,arguments)}}(h));for(h=0;h<V.length;h++)b.on(V[h],this.emit.bind(this,
V[h]));this._read=function(d){D("wrapped _read",d);e&&(e=!1,b.resume())};return this};"function"===typeof Symbol&&(l.prototype[Symbol.asyncIterator]=function(){void 0===Y&&(Y=g("./internal/streams/async_iterator"));return Y(this)});Object.defineProperty(l.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(l.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});
Object.defineProperty(l.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(b){this._readableState&&(this._readableState.flowing=b)}});l._fromList=f;Object.defineProperty(l.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(l.from=function(b,d){void 0===v&&(v=g("./internal/streams/from"));return v(l,b,d)})}).call(this)}).call(this,g("_process"),"undefined"!==typeof global?
global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":6,"./_stream_duplex":7,"./internal/streams/async_iterator":12,"./internal/streams/buffer_list":13,"./internal/streams/destroy":14,"./internal/streams/from":16,"./internal/streams/state":18,"./internal/streams/stream":19,_process:22,buffer:3,events:4,inherits:21,"string_decoder/":25,util:2}],10:[function(g,t,p){function n(b,d){var e=this._transformState;e.transforming=!1;var h=e.writecb;if(null===h)return this.emit("error",
new r);e.writechunk=null;e.writecb=null;null!=d&&this.push(d);h(b);b=this._readableState;b.reading=!1;(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function k(b){if(!(this instanceof k))return new k(b);x.call(this,b);this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;b&&("function"===typeof b.transform&&(this._transform=b.transform),
"function"===typeof b.flush&&(this._flush=b.flush));this.on("prefinish",d)}function d(){var b=this;"function"!==typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush(function(d,e){u(b,d,e)})}function u(d,k,l){if(k)return d.emit("error",k);null!=l&&d.push(l);if(d._writableState.length)throw new h;if(d._transformState.transforming)throw new b;return d.push(null)}t.exports=k;t=g("../errors").codes;var l=t.ERR_METHOD_NOT_IMPLEMENTED,r=t.ERR_MULTIPLE_CALLBACK,b=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,
h=t.ERR_TRANSFORM_WITH_LENGTH_0,x=g("./_stream_duplex");g("inherits")(k,x);k.prototype.push=function(b,d){this._transformState.needTransform=!1;return x.prototype.push.call(this,b,d)};k.prototype._transform=function(b,d,h){h(new l("_transform()"))};k.prototype._write=function(b,d,h){var e=this._transformState;e.writecb=h;e.writechunk=b;e.writeencoding=d;e.transforming||(b=this._readableState,(e.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark))};k.prototype._read=
function(b){b=this._transformState;null===b.writechunk||b.transforming?b.needTransform=!0:(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform))};k.prototype._destroy=function(b,d){x.prototype._destroy.call(this,b,function(b){d(b)})}},{"../errors":6,"./_stream_duplex":7,inherits:21}],11:[function(g,t,p){(function(n,k){(function(){function d(b){var d=this;this.entry=this.next=null;this.finish=function(){var f=d.entry;for(d.entry=null;f;){var e=f.callback;b.pendingcb--;e(void 0);
f=f.next}b.corkedRequestsFree.next=d}}function u(){}function l(b,f,q){p=p||g("./_stream_duplex");b=b||{};"boolean"!==typeof q&&(q=f instanceof p);this.objectMode=!!b.objectMode;q&&(this.objectMode=this.objectMode||!!b.writableObjectMode);this.highWaterMark=z(this,b,"writableHighWaterMark",q);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==b.decodeStrings;this.defaultEncoding=b.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=
0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(b){var d=f._writableState,q=d.sync,m=d.writecb;if("function"!==typeof m)throw new E;d.writing=!1;d.writecb=null;d.length-=d.writelen;d.writelen=0;b?(--d.pendingcb,q?(n.nextTick(m,b),n.nextTick(w,f,d),f._writableState.errorEmitted=!0,N(f,b)):(m(b),f._writableState.errorEmitted=!0,N(f,b),w(f,d))):((b=e(d)||f.destroyed)||d.corked||d.bufferProcessing||!d.bufferedRequest||x(f,d),q?n.nextTick(h,f,d,b,m):h(f,d,b,m))};this.writecb=null;this.writelen=
0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==b.emitClose;this.autoDestroy=!!b.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new d(this)}function r(b){p=p||g("./_stream_duplex");var d=this instanceof p;if(!d&&!P.call(r,this))return new r(b);this._writableState=new l(b,this,d);this.writable=!0;b&&("function"===typeof b.write&&(this._write=b.write),"function"===typeof b.writev&&(this._writev=b.writev),
"function"===typeof b.destroy&&(this._destroy=b.destroy),"function"===typeof b.final&&(this._final=b.final));F.call(this)}function b(b,d,f,e,h,q,k){d.writelen=e;d.writecb=k;d.writing=!0;d.sync=!0;if(d.destroyed)d.onwrite(new T("write"));else f?b._writev(h,d.onwrite):b._write(h,q,d.onwrite);d.sync=!1}function h(b,d,f,e){!f&&0===d.length&&d.needDrain&&(d.needDrain=!1,b.emit("drain"));d.pendingcb--;e();w(b,d)}function x(f,e){e.bufferProcessing=!0;var h=e.bufferedRequest;if(f._writev&&h&&h.next){var q=
Array(e.bufferedRequestCount),m=e.corkedRequestsFree;m.entry=h;for(var k=0,l=!0;h;)q[k]=h,h.isBuf||(l=!1),h=h.next,k+=1;q.allBuffers=l;b(f,e,!0,e.length,q,"",m.finish);e.pendingcb++;e.lastBufferedRequest=null;m.next?(e.corkedRequestsFree=m.next,m.next=null):e.corkedRequestsFree=new d(e);e.bufferedRequestCount=0}else{for(;h&&(q=h.chunk,b(f,e,!1,e.objectMode?1:q.length,q,h.encoding,h.callback),h=h.next,e.bufferedRequestCount--,!e.writing););null===h&&(e.lastBufferedRequest=null)}e.bufferedRequest=h;
e.bufferProcessing=!1}function e(b){return b.ending&&0===b.length&&null===b.bufferedRequest&&!b.finished&&!b.writing}function A(b,d){b._final(function(f){d.pendingcb--;f&&N(b,f);d.prefinished=!0;b.emit("prefinish");w(b,d)})}function w(b,d){var f=e(d);f&&(d.prefinished||d.finalCalled||("function"!==typeof b._final||d.destroyed?(d.prefinished=!0,b.emit("prefinish")):(d.pendingcb++,d.finalCalled=!0,n.nextTick(A,b,d))),0===d.pendingcb&&(d.finished=!0,b.emit("finish"),d.autoDestroy&&(d=b._readableState,
(!d||d.autoDestroy&&d.endEmitted)&&b.destroy())));return f}t.exports=r;var p;r.WritableState=l;var I={deprecate:g("util-deprecate")},F=g("./internal/streams/stream"),B=g("buffer").Buffer,H=k.Uint8Array||function(){},f=g("./internal/streams/destroy"),z=g("./internal/streams/state").getHighWaterMark,q=g("../errors").codes,J=q.ERR_INVALID_ARG_TYPE,K=q.ERR_METHOD_NOT_IMPLEMENTED,E=q.ERR_MULTIPLE_CALLBACK,O=q.ERR_STREAM_CANNOT_PIPE,T=q.ERR_STREAM_DESTROYED,L=q.ERR_STREAM_NULL_VALUES,D=q.ERR_STREAM_WRITE_AFTER_END,
R=q.ERR_UNKNOWN_ENCODING,N=f.errorOrDestroy;g("inherits")(r,F);l.prototype.getBuffer=function(){for(var b=this.bufferedRequest,d=[];b;)d.push(b),b=b.next;return d};(function(){try{Object.defineProperty(l.prototype,"buffer",{get:I.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(m){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var P=Function.prototype[Symbol.hasInstance];
Object.defineProperty(r,Symbol.hasInstance,{value:function(b){return P.call(this,b)?!0:this!==r?!1:b&&b._writableState instanceof l}})}else P=function(b){return b instanceof this};r.prototype.pipe=function(){N(this,new O)};r.prototype.write=function(d,f,e){var h=this._writableState,q=!1,k;if(k=!h.objectMode)k=d,k=B.isBuffer(k)||k instanceof H;k&&!B.isBuffer(d)&&(d=B.from(d));"function"===typeof f&&(e=f,f=null);k?f="buffer":f||(f=h.defaultEncoding);"function"!==typeof e&&(e=u);if(h.ending)h=e,e=new D,
N(this,e),n.nextTick(h,e);else{var l;if(!(l=k)){l=d;var m=e,g;null===l?g=new L:"string"===typeof l||h.objectMode||(g=new J("chunk",["string","Buffer"],l));g?(N(this,g),n.nextTick(m,g),l=!1):l=!0}l&&(h.pendingcb++,q=k,q||(g=d,h.objectMode||!1===h.decodeStrings||"string"!==typeof g||(g=B.from(g,f)),d!==g&&(q=!0,f="buffer",d=g)),k=h.objectMode?1:d.length,h.length+=k,g=h.length<h.highWaterMark,g||(h.needDrain=!0),h.writing||h.corked?(k=h.lastBufferedRequest,h.lastBufferedRequest={chunk:d,encoding:f,isBuf:q,
callback:e,next:null},k?k.next=h.lastBufferedRequest:h.bufferedRequest=h.lastBufferedRequest,h.bufferedRequestCount+=1):b(this,h,!1,k,d,f,e),q=g)}return q};r.prototype.cork=function(){this._writableState.corked++};r.prototype.uncork=function(){var b=this._writableState;b.corked&&(b.corked--,b.writing||b.corked||b.bufferProcessing||!b.bufferedRequest||x(this,b))};r.prototype.setDefaultEncoding=function(b){"string"===typeof b&&(b=b.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((b+
"").toLowerCase())))throw new R(b);this._writableState.defaultEncoding=b;return this};Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});r.prototype._write=function(b,d,f){f(new K("_write()"))};r.prototype._writev=null;r.prototype.end=function(b,d,f){var e=this._writableState;
"function"===typeof b?(f=b,d=b=null):"function"===typeof d&&(f=d,d=null);null!==b&&void 0!==b&&this.write(b,d);e.corked&&(e.corked=1,this.uncork());if(!e.ending){b=f;e.ending=!0;w(this,e);if(b)if(e.finished)n.nextTick(b);else this.once("finish",b);e.ended=!0;this.writable=!1}return this};Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?
!1:this._writableState.destroyed},set:function(b){this._writableState&&(this._writableState.destroyed=b)}});r.prototype.destroy=f.destroy;r.prototype._undestroy=f.undestroy;r.prototype._destroy=function(b,d){d(b)}}).call(this)}).call(this,g("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":6,"./_stream_duplex":7,"./internal/streams/destroy":14,"./internal/streams/state":18,"./internal/streams/stream":19,_process:22,buffer:3,
inherits:21,"util-deprecate":26}],12:[function(g,t,p){(function(n){(function(){function k(b,d,e){d in b?Object.defineProperty(b,d,{value:e,enumerable:!0,configurable:!0,writable:!0}):b[d]=e;return b}function d(b,d){return{value:b,done:d}}function u(b){var f=b[x];if(null!==f){var h=b[F].read();null!==h&&(b[p]=null,b[x]=null,b[e]=null,f(d(h,!1)))}}function l(b){n.nextTick(u,b)}function r(b,e){return function(f,h){b.then(function(){if(e[w])f(d(void 0,!0));else e[I](f,h)},h)}}var b,h=g("./end-of-stream"),
x=Symbol("lastResolve"),e=Symbol("lastReject"),A=Symbol("error"),w=Symbol("ended"),p=Symbol("lastPromise"),I=Symbol("handlePromise"),F=Symbol("stream"),B=Object.getPrototypeOf(function(){}),H=Object.setPrototypeOf((b={get stream(){return this[F]},next:function(){var b=this,e=this[A];if(null!==e)return Promise.reject(e);if(this[w])return Promise.resolve(d(void 0,!0));if(this[F].destroyed)return new Promise(function(f,e){n.nextTick(function(){b[A]?e(b[A]):f(d(void 0,!0))})});if(e=this[p])e=new Promise(r(e,
this));else{e=this[F].read();if(null!==e)return Promise.resolve(d(e,!1));e=new Promise(this[I])}return this[p]=e}},k(b,Symbol.asyncIterator,function(){return this}),k(b,"return",function(){var b=this;return new Promise(function(f,e){b[F].destroy(null,function(b){b?e(b):f(d(void 0,!0))})})}),b),B);t.exports=function(b){var f,q=Object.create(H,(f={},k(f,F,{value:b,writable:!0}),k(f,x,{value:null,writable:!0}),k(f,e,{value:null,writable:!0}),k(f,A,{value:null,writable:!0}),k(f,w,{value:b._readableState.endEmitted,
writable:!0}),k(f,I,{value:function(b,f){var h=q[F].read();h?(q[p]=null,q[x]=null,q[e]=null,b(d(h,!1))):(q[x]=b,q[e]=f)},writable:!0}),f));q[p]=null;h(b,function(b){if(b&&"ERR_STREAM_PREMATURE_CLOSE"!==b.code){var f=q[e];null!==f&&(q[p]=null,q[x]=null,q[e]=null,f(b));q[A]=b}else b=q[x],null!==b&&(q[p]=null,q[x]=null,q[e]=null,b(d(void 0,!0))),q[w]=!0});b.on("readable",l.bind(null,q));return q}}).call(this)}).call(this,g("_process"))},{"./end-of-stream":15,_process:22}],13:[function(g,t,p){function n(b,
d){var e=Object.keys(b);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(b);d&&(h=h.filter(function(d){return Object.getOwnPropertyDescriptor(b,d).enumerable}));e.push.apply(e,h)}return e}function k(b){for(var d=1;d<arguments.length;d++){var e=null!=arguments[d]?arguments[d]:{};d%2?n(Object(e),!0).forEach(function(d){var h=e[d];d in b?Object.defineProperty(b,d,{value:h,enumerable:!0,configurable:!0,writable:!0}):b[d]=h}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,
Object.getOwnPropertyDescriptors(e)):n(Object(e)).forEach(function(d){Object.defineProperty(b,d,Object.getOwnPropertyDescriptor(e,d))})}return b}function d(b,d){for(var e=0;e<d.length;e++){var h=d[e];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(b,h.key,h)}}function u(b,k,e){k&&d(b.prototype,k);e&&d(b,e);return b}var l=g("buffer").Buffer,r=g("util").inspect,b=r&&r.custom||"inspect";t.exports=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");
this.tail=this.head=null;this.length=0}u(d,[{key:"push",value:function(b){b={data:b,next:null};0<this.length?this.tail.next=b:this.head=b;this.tail=b;++this.length}},{key:"unshift",value:function(b){b={data:b,next:this.head};0===this.length&&(this.tail=b);this.head=b;++this.length}},{key:"shift",value:function(){if(0!==this.length){var b=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return b}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=
0}},{key:"join",value:function(b){if(0===this.length)return"";for(var d=this.head,h=""+d.data;d=d.next;)h+=b+d.data;return h}},{key:"concat",value:function(b){if(0===this.length)return l.alloc(0);b=l.allocUnsafe(b>>>0);for(var d=this.head,h=0;d;)l.prototype.copy.call(d.data,b,h),h+=d.data.length,d=d.next;return b}},{key:"consume",value:function(b,d){b<this.head.data.length?(d=this.head.data.slice(0,b),this.head.data=this.head.data.slice(b)):d=b===this.head.data.length?this.shift():d?this._getString(b):
this._getBuffer(b);return d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(b){var d=this.head,h=1,k=d.data;for(b-=k.length;d=d.next;){var l=d.data,g=b>l.length?l.length:b;k=g===l.length?k+l:k+l.slice(0,b);b-=g;if(0===b){g===l.length?(++h,this.head=d.next?d.next:this.tail=null):(this.head=d,d.data=l.slice(g));break}++h}this.length-=h;return k}},{key:"_getBuffer",value:function(b){var d=l.allocUnsafe(b),h=this.head,k=1;h.data.copy(d);for(b-=h.data.length;h=
h.next;){var g=h.data,n=b>g.length?g.length:b;g.copy(d,d.length-b,0,n);b-=n;if(0===b){n===g.length?(++k,this.head=h.next?h.next:this.tail=null):(this.head=h,h.data=g.slice(n));break}++k}this.length-=k;return d}},{key:b,value:function(b,d){return r(this,k({},d,{depth:0,customInspect:!1}))}}]);return d}()},{buffer:3,util:2}],14:[function(g,t,p){(function(g){(function(){function k(k,g){n(k,g);d(k)}function d(d){d._writableState&&!d._writableState.emitClose||d._readableState&&!d._readableState.emitClose||
d.emit("close")}function n(d,k){d.emit("error",k)}t.exports={destroy:function(l,r){var b=this,h=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||h)return r?r(l):l&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,g.nextTick(n,this,l)):g.nextTick(n,this,l)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(l||null,function(h){!r&&
h?b._writableState?b._writableState.errorEmitted?g.nextTick(d,b):(b._writableState.errorEmitted=!0,g.nextTick(k,b,h)):g.nextTick(k,b,h):r?(g.nextTick(d,b),r(h)):g.nextTick(d,b)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=
!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(d,k){var b=d._readableState,h=d._writableState;b&&b.autoDestroy||h&&h.autoDestroy?d.destroy(k):d.emit("error",k)}}}).call(this)}).call(this,g("_process"))},{_process:22}],15:[function(g,t,p){function n(d){var k=!1;return function(){if(!k){k=!0;for(var b=arguments.length,h=Array(b),g=0;g<b;g++)h[g]=arguments[g];d.apply(this,h)}}}function k(){}function d(g,r,b){if("function"===
typeof r)return d(g,null,r);r||(r={});b=n(b||k);var h=r.readable||!1!==r.readable&&g.readable,l=r.writable||!1!==r.writable&&g.writable,e=function(){g.writable||w()},A=g._writableState&&g._writableState.finished,w=function(){l=!1;A=!0;h||b.call(g)},p=g._readableState&&g._readableState.endEmitted,I=function(){h=!1;p=!0;l||b.call(g)},F=function(d){b.call(g,d)},B=function(){var d;if(h&&!p)return g._readableState&&g._readableState.ended||(d=new u),b.call(g,d);if(l&&!A)return g._writableState&&g._writableState.ended||
(d=new u),b.call(g,d)},t=function(){g.req.on("finish",w)};if(g.setHeader&&"function"===typeof g.abort)if(g.on("complete",w),g.on("abort",B),g.req)t();else g.on("request",t);else l&&!g._writableState&&(g.on("end",e),g.on("close",e));g.on("end",I);g.on("finish",w);if(!1!==r.error)g.on("error",F);g.on("close",B);return function(){g.removeListener("complete",w);g.removeListener("abort",B);g.removeListener("request",t);g.req&&g.req.removeListener("finish",w);g.removeListener("end",e);g.removeListener("close",
e);g.removeListener("finish",w);g.removeListener("end",I);g.removeListener("error",F);g.removeListener("close",B)}}var u=g("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;t.exports=d},{"../../../errors":6}],16:[function(g,t,p){t.exports=function(){throw Error("Readable.from is not available in the browser");}},{}],17:[function(g,t,p){function n(b){var d=!1;return function(){d||(d=!0,b.apply(void 0,arguments))}}function k(b){if(b)throw b;}function d(b,d,k,l){l=n(l);var e=!1;b.on("close",function(){e=
!0});void 0===r&&(r=g("./end-of-stream"));r(b,{readable:d,writable:k},function(b){if(b)return l(b);e=!0;l()});var x=!1;return function(d){if(!e&&!x){x=!0;if(b.setHeader&&"function"===typeof b.abort)return b.abort();if("function"===typeof b.destroy)return b.destroy();l(d||new h("pipe"))}}}function u(b){b()}function l(b,d){return b.pipe(d)}var r;p=g("../../../errors").codes;var b=p.ERR_MISSING_ARGS,h=p.ERR_STREAM_DESTROYED;t.exports=function(){for(var h=arguments.length,e=Array(h),g=0;g<h;g++)e[g]=
arguments[g];var n=e.length?"function"!==typeof e[e.length-1]?k:e.pop():k;Array.isArray(e[0])&&(e=e[0]);if(2>e.length)throw new b("streams");var r,I=e.map(function(b,h){var g=h<e.length-1;return d(b,g,0<h,function(b){r||(r=b);b&&I.forEach(u);g||(I.forEach(u),n(r))})});return e.reduce(l)}},{"../../../errors":6,"./end-of-stream":15}],18:[function(g,t,p){var n=g("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(g,d,u,l){d=null!=d.highWaterMark?d.highWaterMark:l?d[u]:
null;if(null!=d){if(!isFinite(d)||Math.floor(d)!==d||0>d)throw new n(l?u:"highWaterMark",d);return Math.floor(d)}return g.objectMode?16:16384}}},{"../../../errors":6}],19:[function(g,t,p){t.exports=g("events").EventEmitter},{events:4}],20:[function(g,t,p){p.read=function(g,k,d,u,l){var n=8*l-u-1;var b=(1<<n)-1,h=b>>1,x=-7;l=d?l-1:0;var e=d?-1:1,p=g[k+l];l+=e;d=p&(1<<-x)-1;p>>=-x;for(x+=n;0<x;d=256*d+g[k+l],l+=e,x-=8);n=d&(1<<-x)-1;d>>=-x;for(x+=u;0<x;n=256*n+g[k+l],l+=e,x-=8);if(0===d)d=1-h;else{if(d===
b)return n?NaN:Infinity*(p?-1:1);n+=Math.pow(2,u);d-=h}return(p?-1:1)*n*Math.pow(2,d-u)};p.write=function(g,k,d,u,l,r){var b,h=8*r-l-1,n=(1<<h)-1,e=n>>1,p=23===l?Math.pow(2,-24)-Math.pow(2,-77):0;r=u?0:r-1;var w=u?1:-1,t=0>k||0===k&&0>1/k?1:0;k=Math.abs(k);isNaN(k)||Infinity===k?(k=isNaN(k)?1:0,u=n):(u=Math.floor(Math.log(k)/Math.LN2),1>k*(b=Math.pow(2,-u))&&(u--,b*=2),k=1<=u+e?k+p/b:k+p*Math.pow(2,1-e),2<=k*b&&(u++,b/=2),u+e>=n?(k=0,u=n):1<=u+e?(k=(k*b-1)*Math.pow(2,l),u+=e):(k=k*Math.pow(2,e-1)*
Math.pow(2,l),u=0));for(;8<=l;g[d+r]=k&255,r+=w,k/=256,l-=8);u=u<<l|k;for(h+=l;0<h;g[d+r]=u&255,r+=w,u/=256,h-=8);g[d+r-w]|=128*t}},{}],21:[function(g,t,p){t.exports="function"===typeof Object.create?function(g,k){k&&(g.super_=k,g.prototype=Object.create(k.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:function(g,k){if(k){g.super_=k;var d=function(){};d.prototype=k.prototype;g.prototype=new d;g.prototype.constructor=g}}},{}],22:[function(g,t,p){function n(){throw Error("setTimeout has not been defined");
}function k(){throw Error("clearTimeout has not been defined");}function d(b){if(x===setTimeout)return setTimeout(b,0);if((x===n||!x)&&setTimeout)return x=setTimeout,setTimeout(b,0);try{return x(b,0)}catch(B){try{return x.call(null,b,0)}catch(H){return x.call(this,b,0)}}}function u(b){if(e===clearTimeout)return clearTimeout(b);if((e===k||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(b);try{return e(b)}catch(B){try{return e.call(null,b)}catch(H){return e.call(this,b)}}}function l(){w&&G&&(w=
!1,G.length?A=G.concat(A):I=-1,A.length&&r())}function r(){if(!w){var b=d(l);w=!0;for(var e=A.length;e;){G=A;for(A=[];++I<e;)G&&G[I].run();I=-1;e=A.length}G=null;w=!1;u(b)}}function b(b,d){this.fun=b;this.array=d}function h(){}g=t.exports={};try{var x="function"===typeof setTimeout?setTimeout:n}catch(F){x=n}try{var e="function"===typeof clearTimeout?clearTimeout:k}catch(F){e=k}var A=[],w=!1,G,I=-1;g.nextTick=function(e){var h=Array(arguments.length-1);if(1<arguments.length)for(var g=1;g<arguments.length;g++)h[g-
1]=arguments[g];A.push(new b(e,h));1!==A.length||w||d(r)};b.prototype.run=function(){this.fun.apply(null,this.array)};g.title="browser";g.browser=!0;g.env={};g.argv=[];g.version="";g.versions={};g.on=h;g.addListener=h;g.once=h;g.off=h;g.removeListener=h;g.removeAllListeners=h;g.emit=h;g.prependListener=h;g.prependOnceListener=h;g.listeners=function(b){return[]};g.binding=function(b){throw Error("process.binding is not supported");};g.cwd=function(){return"/"};g.chdir=function(b){throw Error("process.chdir is not supported");
};g.umask=function(){return 0}},{}],23:[function(g,t,p){function n(d,g){for(var b in d)g[b]=d[b]}function k(d,g,b){return u(d,g,b)}var d=g("buffer"),u=d.Buffer;u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?t.exports=d:(n(d,p),p.Buffer=k);k.prototype=Object.create(u.prototype);n(u,k);k.from=function(d,g,b){if("number"===typeof d)throw new TypeError("Argument must not be a number");return u(d,g,b)};k.alloc=function(d,g,b){if("number"!==typeof d)throw new TypeError("Argument must be a number");d=
u(d);void 0!==g?"string"===typeof b?d.fill(g,b):d.fill(g):d.fill(0);return d};k.allocUnsafe=function(d){if("number"!==typeof d)throw new TypeError("Argument must be a number");return u(d)};k.allocUnsafeSlow=function(g){if("number"!==typeof g)throw new TypeError("Argument must be a number");return d.SlowBuffer(g)}},{buffer:3}],24:[function(g,t,p){(function(n){(function(){(function(k){function d(b,f){if(!(this instanceof d))return new d(b,f);for(var e=0,h=q.length;e<h;e++)this[q[e]]="";this.q=this.c=
"";this.bufferCheckPosition=k.MAX_BUFFER_LENGTH;this.opt=f||{};this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags;this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase";this.tags=[];this.closed=this.closedRoot=this.sawRoot=!1;this.tag=this.error=null;this.strict=!!b;this.noscript=!(!b&&!this.opt.noscript);this.state=v.BEGIN;this.ENTITIES=(this.strictEntities=this.opt.strictEntities)?Object.create(k.XML_ENTITIES):Object.create(k.ENTITIES);this.attribList=[];this.opt.xmlns&&(this.ns=
Object.create(y));if(this.trackPosition=!1!==this.opt.position)this.position=this.line=this.column=0;this.onready&&this.onready(void 0)}function u(b,f){if(!(this instanceof u))return new u(b,f);J.apply(this);this._parser=new d(b,f);this.readable=this.writable=!0;var e=this;this._parser.onend=function(){e.emit("end")};this._parser.onerror=function(b){e.emit("error",b);e._parser.error=null};this._decoder=null;K.forEach(function(b){Object.defineProperty(e,"on"+b,{get:function(){return e._parser["on"+
b]},set:function(d){if(!d)return e.removeAllListeners(b),e._parser["on"+b]=d;e.on(b,d)},enumerable:!0,configurable:!1})})}function l(b){return b.split("").reduce(function(b,d){b[d]=!0;return b},{})}function r(b,d){return"[object RegExp]"===Object.prototype.toString.call(b)?!!d.match(b):b[d]}function b(b,d,f){b.textNode&&h(b);b[d]&&b[d](f)}function h(b){b.textNode=x(b.opt,b.textNode);b.textNode&&b.ontext&&b.ontext(b.textNode);b.textNode=""}function x(b,d){b.trim&&(d=d.trim());b.normalize&&(d=d.replace(/\s+/g,
" "));return d}function e(b,d){h(b);b.trackPosition&&(d+="\nLine: "+b.line+"\nColumn: "+b.column+"\nChar: "+b.c);d=Error(d);b.error=d;b.onerror&&b.onerror(d);return b}function p(b){b.sawRoot&&!b.closedRoot&&w(b,"Unclosed root tag");b.state!==v.BEGIN&&b.state!==v.BEGIN_WHITESPACE&&b.state!==v.TEXT&&e(b,"Unexpected end");h(b);b.c="";b.closed=!0;b.onend&&b.onend(void 0);d.call(b,b.strict,b.opt);return b}function w(b,f){if("object"!==typeof b||!(b instanceof d))throw Error("bad call to strictFail");b.strict&&
e(b,f)}function t(b,d){var f=0>b.indexOf(":")?["",b]:b.split(":"),e=f[0];f=f[1];d&&"xmlns"===b&&(e="xmlns",f="");return{prefix:e,local:f}}function I(d){d.strict||(d.attribName=d.attribName[d.looseCase]());if(-1===d.attribList.indexOf(d.attribName)&&!d.tag.attributes.hasOwnProperty(d.attribName))if(d.opt.xmlns){var f=t(d.attribName,!0),e=f.local;if("xmlns"===f.prefix)if("xml"===e&&d.attribValue!==P)w(d,"xml: prefix must be bound to "+P+"\nActual: "+d.attribValue);else if("xmlns"===e&&d.attribValue!==
m)w(d,"xmlns: prefix must be bound to "+m+"\nActual: "+d.attribValue);else{f=d.tag;var h=d.tags[d.tags.length-1]||d;f.ns===h.ns&&(f.ns=Object.create(h.ns));f.ns[e]=d.attribValue}d.attribList.push([d.attribName,d.attribValue])}else d.tag.attributes[d.attribName]=d.attribValue,b(d,"onattribute",{name:d.attribName,value:d.attribValue});d.attribName=d.attribValue=""}function F(d,f){if(d.opt.xmlns){var e=d.tag,h=t(d.tagName);e.prefix=h.prefix;e.local=h.local;e.uri=e.ns[h.prefix]||"";e.prefix&&!e.uri&&
(w(d,"Unbound namespace prefix: "+JSON.stringify(d.tagName)),e.uri=h.prefix);h=d.tags[d.tags.length-1]||d;e.ns&&h.ns!==e.ns&&Object.keys(e.ns).forEach(function(f){b(d,"onopennamespace",{prefix:f,uri:e.ns[f]})});h=0;for(var g=d.attribList.length;h<g;h++){var k=d.attribList[h],q=k[0],m=k[1],l=t(q,!0);k=l.prefix;var n=""===k?"":e.ns[k]||"";m={name:q,value:m,prefix:k,local:l.local,uri:n};k&&"xmlns"!==k&&!n&&(w(d,"Unbound namespace prefix: "+JSON.stringify(k)),m.uri=k);d.tag.attributes[q]=m;b(d,"onattribute",
m)}d.attribList.length=0}d.tag.isSelfClosing=!!f;d.sawRoot=!0;d.tags.push(d.tag);b(d,"onopentag",d.tag);f||(d.noscript||"script"!==d.tagName.toLowerCase()?d.state=v.TEXT:d.state=v.SCRIPT,d.tag=null,d.tagName="");d.attribName=d.attribValue="";d.attribList.length=0}function B(d){if(d.tagName){if(d.script){if("script"!==d.tagName){d.script+="</"+d.tagName+">";d.tagName="";d.state=v.SCRIPT;return}b(d,"onscript",d.script);d.script=""}var f=d.tags.length,e=d.tagName;d.strict||(e=e[d.looseCase]());for(var h=
e;f--;)if(d.tags[f].name!==h)w(d,"Unexpected close tag");else break;if(0>f)w(d,"Unmatched closing tag: "+d.tagName),d.textNode+="</"+d.tagName+">";else{d.tagName=e;for(e=d.tags.length;e-- >f;){var g=d.tag=d.tags.pop();d.tagName=d.tag.name;b(d,"onclosetag",d.tagName);for(var k in g.ns);h=d.tags[d.tags.length-1]||d;d.opt.xmlns&&g.ns!==h.ns&&Object.keys(g.ns).forEach(function(f){b(d,"onclosenamespace",{prefix:f,uri:g.ns[f]})})}0===f&&(d.closedRoot=!0);d.tagName=d.attribValue=d.attribName="";d.attribList.length=
0}}else w(d,"Weird empty close tag."),d.textNode+="</>";d.state=v.TEXT}function H(b){var d=b.entity,f=d.toLowerCase(),e="";if(b.ENTITIES[d])return b.ENTITIES[d];if(b.ENTITIES[f])return b.ENTITIES[f];d=f;if("#"===d.charAt(0))if("x"===d.charAt(1)){d=d.slice(2);var h=parseInt(d,16);e=h.toString(16)}else d=d.slice(1),h=parseInt(d,10),e=h.toString(10);d=d.replace(/^0+/,"");return e.toLowerCase()!==d?(w(b,"Invalid character entity"),"&"+b.entity+";"):String.fromCodePoint(h)}function f(b,d){"<"===d?(b.state=
v.OPEN_WAKA,b.startTagPosition=b.position):r(E,d)||(w(b,"Non-whitespace before first tag."),b.textNode=d,b.state=v.TEXT)}function z(b,d){var f="";d<b.length&&(f=b.charAt(d));return f}k.parser=function(b,f){return new d(b,f)};k.SAXParser=d;k.SAXStream=u;k.createStream=function(b,d){return new u(b,d)};k.MAX_BUFFER_LENGTH=65536;var q="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" ");k.EVENTS="text processinginstruction sgmldeclaration doctype comment opentagstart attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" ");
Object.create||(Object.create=function(b){function d(){}d.prototype=b;return new d});Object.keys||(Object.keys=function(b){var d=[],f;for(f in b)b.hasOwnProperty(f)&&d.push(f);return d});d.prototype={end:function(){p(this)},write:function(d){if(this.error)throw this.error;if(this.closed)return e(this,"Cannot write after close. Assign an onready handler.");if(null===d)return p(this);"object"===typeof d&&(d=d.toString());for(var g=0,m;;){this.c=m=z(d,g++);if(!m)break;this.trackPosition&&(this.position++,
"\n"===m?(this.line++,this.column=0):this.column++);switch(this.state){case v.BEGIN:this.state=v.BEGIN_WHITESPACE;if("\ufeff"===m)continue;f(this,m);continue;case v.BEGIN_WHITESPACE:f(this,m);continue;case v.TEXT:if(this.sawRoot&&!this.closedRoot){for(var l=g-1;m&&"<"!==m&&"&"!==m;)(m=z(d,g++))&&this.trackPosition&&(this.position++,"\n"===m?(this.line++,this.column=0):this.column++);this.textNode+=d.substring(l,g-1)}"<"!==m||this.sawRoot&&this.closedRoot&&!this.strict?(r(E,m)||this.sawRoot&&!this.closedRoot||
w(this,"Text data outside of root node."),"&"===m?this.state=v.TEXT_ENTITY:this.textNode+=m):(this.state=v.OPEN_WAKA,this.startTagPosition=this.position);continue;case v.SCRIPT:"<"===m?this.state=v.SCRIPT_ENDING:this.script+=m;continue;case v.SCRIPT_ENDING:"/"===m?this.state=v.CLOSE_TAG:(this.script+="<"+m,this.state=v.SCRIPT);continue;case v.OPEN_WAKA:"!"===m?(this.state=v.SGML_DECL,this.sgmlDecl=""):r(E,m)||(r(M,m)?(this.state=v.OPEN_TAG,this.tagName=m):"/"===m?(this.state=v.CLOSE_TAG,this.tagName=
""):"?"===m?(this.state=v.PROC_INST,this.procInstName=this.procInstBody=""):(w(this,"Unencoded <"),this.startTagPosition+1<this.position&&(m=Array(this.position-this.startTagPosition).join(" ")+m),this.textNode+="<"+m,this.state=v.TEXT));continue;case v.SGML_DECL:(this.sgmlDecl+m).toUpperCase()===R?(b(this,"onopencdata"),this.state=v.CDATA,this.cdata=this.sgmlDecl=""):"--"===this.sgmlDecl+m?(this.state=v.COMMENT,this.sgmlDecl=this.comment=""):(this.sgmlDecl+m).toUpperCase()===N?(this.state=v.DOCTYPE,
(this.doctype||this.sawRoot)&&w(this,"Inappropriately located doctype declaration"),this.sgmlDecl=this.doctype=""):">"===m?(b(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=v.TEXT):(r(L,m)&&(this.state=v.SGML_DECL_QUOTED),this.sgmlDecl+=m);continue;case v.SGML_DECL_QUOTED:m===this.q&&(this.state=v.SGML_DECL,this.q="");this.sgmlDecl+=m;continue;case v.DOCTYPE:">"===m?(this.state=v.TEXT,b(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=m,"["===m?this.state=v.DOCTYPE_DTD:
r(L,m)&&(this.state=v.DOCTYPE_QUOTED,this.q=m));continue;case v.DOCTYPE_QUOTED:this.doctype+=m;m===this.q&&(this.q="",this.state=v.DOCTYPE);continue;case v.DOCTYPE_DTD:this.doctype+=m;"]"===m?this.state=v.DOCTYPE:r(L,m)&&(this.state=v.DOCTYPE_DTD_QUOTED,this.q=m);continue;case v.DOCTYPE_DTD_QUOTED:this.doctype+=m;m===this.q&&(this.state=v.DOCTYPE_DTD,this.q="");continue;case v.COMMENT:"-"===m?this.state=v.COMMENT_ENDING:this.comment+=m;continue;case v.COMMENT_ENDING:"-"===m?(this.state=v.COMMENT_ENDED,
(this.comment=x(this.opt,this.comment))&&b(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+m,this.state=v.COMMENT);continue;case v.COMMENT_ENDED:">"!==m?(w(this,"Malformed comment"),this.comment+="--"+m,this.state=v.COMMENT):this.state=v.TEXT;continue;case v.CDATA:"]"===m?this.state=v.CDATA_ENDING:this.cdata+=m;continue;case v.CDATA_ENDING:"]"===m?this.state=v.CDATA_ENDING_2:(this.cdata+="]"+m,this.state=v.CDATA);continue;case v.CDATA_ENDING_2:">"===m?(this.cdata&&b(this,"oncdata",
this.cdata),b(this,"onclosecdata"),this.cdata="",this.state=v.TEXT):"]"===m?this.cdata+="]":(this.cdata+="]]"+m,this.state=v.CDATA);continue;case v.PROC_INST:"?"===m?this.state=v.PROC_INST_ENDING:r(E,m)?this.state=v.PROC_INST_BODY:this.procInstName+=m;continue;case v.PROC_INST_BODY:if(!this.procInstBody&&r(E,m))continue;else"?"===m?this.state=v.PROC_INST_ENDING:this.procInstBody+=m;continue;case v.PROC_INST_ENDING:">"===m?(b(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),
this.procInstName=this.procInstBody="",this.state=v.TEXT):(this.procInstBody+="?"+m,this.state=v.PROC_INST_BODY);continue;case v.OPEN_TAG:if(r(S,m))this.tagName+=m;else{this.strict||(this.tagName=this.tagName[this.looseCase]());l=this.tags[this.tags.length-1]||this;var n=this.tag={name:this.tagName,attributes:{}};this.opt.xmlns&&(n.ns=l.ns);this.attribList.length=0;b(this,"onopentagstart",n);">"===m?F(this):"/"===m?this.state=v.OPEN_TAG_SLASH:(r(E,m)||w(this,"Invalid character in tag name"),this.state=
v.ATTRIB)}continue;case v.OPEN_TAG_SLASH:">"===m?(F(this,!0),B(this)):(w(this,"Forward-slash in opening tag not followed by >"),this.state=v.ATTRIB);continue;case v.ATTRIB:if(r(E,m))continue;else">"===m?F(this):"/"===m?this.state=v.OPEN_TAG_SLASH:r(M,m)?(this.attribName=m,this.attribValue="",this.state=v.ATTRIB_NAME):w(this,"Invalid attribute name");continue;case v.ATTRIB_NAME:"="===m?this.state=v.ATTRIB_VALUE:">"===m?(w(this,"Attribute without value"),this.attribValue=this.attribName,I(this),F(this)):
r(E,m)?this.state=v.ATTRIB_NAME_SAW_WHITE:r(S,m)?this.attribName+=m:w(this,"Invalid attribute name");continue;case v.ATTRIB_NAME_SAW_WHITE:if("="===m)this.state=v.ATTRIB_VALUE;else if(r(E,m))continue;else w(this,"Attribute without value"),this.attribValue=this.tag.attributes[this.attribName]="",b(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===m?F(this):r(M,m)?(this.attribName=m,this.state=v.ATTRIB_NAME):(w(this,"Invalid attribute name"),this.state=v.ATTRIB);continue;
case v.ATTRIB_VALUE:if(r(E,m))continue;else r(L,m)?(this.q=m,this.state=v.ATTRIB_VALUE_QUOTED):(w(this,"Unquoted attribute value"),this.state=v.ATTRIB_VALUE_UNQUOTED,this.attribValue=m);continue;case v.ATTRIB_VALUE_QUOTED:if(m!==this.q){"&"===m?this.state=v.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=m;continue}I(this);this.q="";this.state=v.ATTRIB_VALUE_CLOSED;continue;case v.ATTRIB_VALUE_CLOSED:r(E,m)?this.state=v.ATTRIB:">"===m?F(this):"/"===m?this.state=v.OPEN_TAG_SLASH:r(M,m)?(w(this,"No whitespace between attributes"),
this.attribName=m,this.attribValue="",this.state=v.ATTRIB_NAME):w(this,"Invalid attribute name");continue;case v.ATTRIB_VALUE_UNQUOTED:if(!r(D,m)){"&"===m?this.state=v.ATTRIB_VALUE_ENTITY_U:this.attribValue+=m;continue}I(this);">"===m?F(this):this.state=v.ATTRIB;continue;case v.CLOSE_TAG:if(this.tagName)">"===m?B(this):r(S,m)?this.tagName+=m:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=v.SCRIPT):(r(E,m)||w(this,"Invalid tagname in closing tag"),this.state=v.CLOSE_TAG_SAW_WHITE);
else if(r(E,m))continue;else r(M,m)?this.tagName=m:this.script?(this.script+="</"+m,this.state=v.SCRIPT):w(this,"Invalid tagname in closing tag.");continue;case v.CLOSE_TAG_SAW_WHITE:if(r(E,m))continue;">"===m?B(this):w(this,"Invalid characters in closing tag");continue;case v.TEXT_ENTITY:case v.ATTRIB_VALUE_ENTITY_Q:case v.ATTRIB_VALUE_ENTITY_U:switch(this.state){case v.TEXT_ENTITY:var J=v.TEXT;var Z="textNode";break;case v.ATTRIB_VALUE_ENTITY_Q:J=v.ATTRIB_VALUE_QUOTED;Z="attribValue";break;case v.ATTRIB_VALUE_ENTITY_U:J=
v.ATTRIB_VALUE_UNQUOTED,Z="attribValue"}";"===m?(this[Z]+=H(this),this.entity="",this.state=J):r(this.entity.length?Y:X,m)?this.entity+=m:(w(this,"Invalid character in entity name"),this[Z]+="&"+this.entity+m,this.entity="",this.state=J);continue;default:throw Error(this,"Unknown state: "+this.state);}}if(this.position>=this.bufferCheckPosition){d=Math.max(k.MAX_BUFFER_LENGTH,10);m=g=0;for(J=q.length;m<J;m++){Z=this[q[m]].length;if(Z>d)switch(q[m]){case "textNode":h(this);break;case "cdata":b(this,
"oncdata",this.cdata);this.cdata="";break;case "script":b(this,"onscript",this.script);this.script="";break;default:e(this,"Max buffer length exceeded: "+q[m])}g=Math.max(g,Z)}this.bufferCheckPosition=k.MAX_BUFFER_LENGTH-g+this.position}return this},resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){h(this);""!==this.cdata&&(b(this,"oncdata",this.cdata),this.cdata="");""!==this.script&&(b(this,"onscript",this.script),this.script="")}};try{var J=
g("stream").Stream}catch(V){J=function(){}}var K=k.EVENTS.filter(function(b){return"error"!==b&&"end"!==b});u.prototype=Object.create(J.prototype,{constructor:{value:u}});u.prototype.write=function(b){"function"===typeof n&&"function"===typeof n.isBuffer&&n.isBuffer(b)&&(this._decoder||(this._decoder=new (g("string_decoder").StringDecoder)("utf8")),b=this._decoder.write(b));this._parser.write(b.toString());this.emit("data",b);return!0};u.prototype.end=function(b){b&&b.length&&this.write(b);this._parser.end();
return!0};u.prototype.on=function(b,d){var f=this;f._parser["on"+b]||-1===K.indexOf(b)||(f._parser["on"+b]=function(){var d=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);d.splice(0,0,b);f.emit.apply(f,d)});return J.prototype.on.call(f,b,d)};var E="\r\n\t ",O="0124356789",T="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",L="'\"",D=E+">",R="[CDATA[",N="DOCTYPE",P="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",y={xml:P,xmlns:m};E=l(E);O=l(O);T=l(T);
var M=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,X=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
Y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;L=l(L);D=l(D);var v=0;k.STATE={BEGIN:v++,BEGIN_WHITESPACE:v++,TEXT:v++,TEXT_ENTITY:v++,OPEN_WAKA:v++,SGML_DECL:v++,SGML_DECL_QUOTED:v++,DOCTYPE:v++,DOCTYPE_QUOTED:v++,DOCTYPE_DTD:v++,DOCTYPE_DTD_QUOTED:v++,COMMENT_STARTING:v++,COMMENT:v++,COMMENT_ENDING:v++,COMMENT_ENDED:v++,CDATA:v++,CDATA_ENDING:v++,CDATA_ENDING_2:v++,
PROC_INST:v++,PROC_INST_BODY:v++,PROC_INST_ENDING:v++,OPEN_TAG:v++,OPEN_TAG_SLASH:v++,ATTRIB:v++,ATTRIB_NAME:v++,ATTRIB_NAME_SAW_WHITE:v++,ATTRIB_VALUE:v++,ATTRIB_VALUE_QUOTED:v++,ATTRIB_VALUE_CLOSED:v++,ATTRIB_VALUE_UNQUOTED:v++,ATTRIB_VALUE_ENTITY_Q:v++,ATTRIB_VALUE_ENTITY_U:v++,CLOSE_TAG:v++,CLOSE_TAG_SAW_WHITE:v++,SCRIPT:v++,SCRIPT_ENDING:v++};k.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};k.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,
Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,
ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,
Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,
zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,
ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(k.ENTITIES).forEach(function(b){var d=k.ENTITIES[b];d="number"===
typeof d?String.fromCharCode(d):d;k.ENTITIES[b]=d});for(var W in k.STATE)k.STATE[k.STATE[W]]=W;v=k.STATE;String.fromCodePoint||function(){var b=String.fromCharCode,d=Math.floor,f=function(){var f=[],e=-1,h=arguments.length;if(!h)return"";for(var g="";++e<h;){var m=Number(arguments[e]);if(!isFinite(m)||0>m||1114111<m||d(m)!==m)throw RangeError("Invalid code point: "+m);if(65535>=m)f.push(m);else{m-=65536;var k=(m>>10)+55296;m=m%1024+56320;f.push(k,m)}if(e+1===h||16384<f.length)g+=b.apply(null,f),f.length=
0}return g};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:f,configurable:!0,writable:!0}):String.fromCodePoint=f}()})("undefined"===typeof p?this.sax={}:p)}).call(this)}).call(this,g("buffer").Buffer)},{buffer:3,stream:5,string_decoder:25}],25:[function(g,t,p){function n(b){if(!b)return"utf8";for(var d;;)switch(b){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return b;
default:if(d)return;b=(""+b).toLowerCase();d=!0}}function k(d){var g=n(d);if("string"!==typeof g&&(w.isEncoding===G||!G(d)))throw Error("Unknown encoding: "+d);this.encoding=g||d;switch(this.encoding){case "utf16le":this.text=r;this.end=b;d=4;break;case "utf8":this.fillLast=l;d=4;break;case "base64":this.text=h;this.end=x;d=3;break;default:this.write=e;this.end=A;return}this.lastTotal=this.lastNeed=0;this.lastChar=w.allocUnsafe(d)}function d(b){return 127>=b?0:6===b>>5?2:14===b>>4?3:30===b>>3?4:2===
b>>6?-1:-2}function u(b,e,h){var g=e.length-1;if(g<h)return 0;var f=d(e[g]);if(0<=f)return 0<f&&(b.lastNeed=f-1),f;if(--g<h||-2===f)return 0;f=d(e[g]);if(0<=f)return 0<f&&(b.lastNeed=f-2),f;if(--g<h||-2===f)return 0;f=d(e[g]);return 0<=f?(0<f&&(2===f?f=0:b.lastNeed=f-3),f):0}function l(b){var d=this.lastTotal-this.lastNeed;a:if(128!==(b[0]&192)){this.lastNeed=0;var e="\ufffd"}else{if(1<this.lastNeed&&1<b.length){if(128!==(b[1]&192)){this.lastNeed=1;e="\ufffd";break a}if(2<this.lastNeed&&2<b.length&&
128!==(b[2]&192)){this.lastNeed=2;e="\ufffd";break a}}e=void 0}if(void 0!==e)return e;if(this.lastNeed<=b.length)return b.copy(this.lastChar,d,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,d,0,b.length);this.lastNeed-=b.length}function r(b,d){if(0===(b.length-d)%2){if(d=b.toString("utf16le",d)){var e=d.charCodeAt(d.length-1);if(55296<=e&&56319>=e)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],d.slice(0,
-1)}return d}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=b[b.length-1];return b.toString("utf16le",d,b.length-1)}function b(b){b=b&&b.length?this.write(b):"";return this.lastNeed?b+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):b}function h(b,d){var e=(b.length-d)%3;if(0===e)return b.toString("base64",d);this.lastNeed=3-e;this.lastTotal=3;1===e?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]);return b.toString("base64",d,b.length-
e)}function x(b){b=b&&b.length?this.write(b):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function e(b){return b.toString(this.encoding)}function A(b){return b&&b.length?this.write(b):""}var w=g("safe-buffer").Buffer,G=w.isEncoding||function(b){b=""+b;switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};p.StringDecoder=
k;k.prototype.write=function(b){if(0===b.length)return"";if(this.lastNeed){var d=this.fillLast(b);if(void 0===d)return"";var e=this.lastNeed;this.lastNeed=0}else e=0;return e<b.length?d?d+this.text(b,e):this.text(b,e):d||""};k.prototype.end=function(b){b=b&&b.length?this.write(b):"";return this.lastNeed?b+"\ufffd":b};k.prototype.text=function(b,d){var e=u(this,b,d);if(!this.lastNeed)return b.toString("utf8",d);this.lastTotal=e;e=b.length-(e-this.lastNeed);b.copy(this.lastChar,0,e);return b.toString("utf8",
d,e)};k.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length);this.lastNeed-=b.length}},{"safe-buffer":23}],26:[function(g,t,p){(function(g){(function(){function k(d){try{if(!g.localStorage)return!1}catch(u){return!1}d=g.localStorage[d];return null==d?!1:"true"===String(d).toLowerCase()}t.exports=function(d,
g){if(k("noDeprecation"))return d;var l=!1;return function(){if(!l){if(k("throwDeprecation"))throw Error(g);k("traceDeprecation")?console.trace(g):console.warn(g);l=!0}return d.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],27:[function(g,t,p){(function(g,k,d,u,l){function n(b,d){var f=b.styleAttrs&&b.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===b.kind)!f&&
d&&(b.styleAttrs||(b.styleAttrs={}),b.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=d);else if(f&&delete b.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],b.contents)for(var e=0;e<b.contents.length;e++)n(b.contents[e],f||d)}function b(d){if("contents"in d){var f="styleAttrs"in d?d.styleAttrs[u.byName.ruby.qname]:null;f="span"===d.kind&&("container"===f||"textContainer"===f||"baseContainer"===f);for(var e=d.contents.length-1;0<=e;e--)!f||"styleAttrs"in d.contents[e]&&
u.byName.ruby.qname in d.contents[e].styleAttrs?b(d.contents[e]):delete d.contents[e]}}function h(b,d,f,e){var g=e&&"seq"===e.timeContainer,m=0;e&&(m=g&&f?f.end:e.begin);d.begin=d.explicit_begin?d.explicit_begin+m:m;f=d.begin;e=null;for(var k in d.sets)h(b,d.sets[k],e,d),f="seq"===d.timeContainer?d.sets[k].end:Math.max(f,d.sets[k].end),e=d.sets[k];if("contents"in d)for(var q in d.contents)h(b,d.contents[q],e,d),f="seq"===d.timeContainer?d.contents[q].end:Math.max(f,d.contents[q].end),e=d.contents[q];
else f=g?d.begin:Number.POSITIVE_INFINITY;d.end=null!==d.explicit_end&&null!==d.explicit_dur?Math.min(d.begin+d.explicit_dur,m+d.explicit_end):null===d.explicit_end&&null!==d.explicit_dur?d.begin+d.explicit_dur:null!==d.explicit_end&&null===d.explicit_dur?m+d.explicit_end:f;delete d.explicit_begin;delete d.explicit_dur;delete d.explicit_end;b._registerEvent(d)}function x(b){this.node=b}function e(){this.events=[];this.head=new p;this.body=null}function p(){this.styling=new w;this.layout=new F}function w(){this.styles=
{};this.initials={}}function t(){this.styleRefs=this.styleAttrs=this.id=null}function I(){this.styleAttrs=null}function F(){this.regions={}}function B(b,d){this.kind="image";this.src=b;this.type=d}function H(b){this.id=b}function f(b){this.regionID=b}function z(b){this.styleAttrs=b}function q(b){this.sets=b}function J(b){this.contents=b}function K(b,d,f){this.explicit_begin=b;this.explicit_end=d;this.explicit_dur=f}function E(){this.kind="body"}function O(){this.kind="div"}function T(){this.kind=
"p"}function L(){this.kind="span"}function D(){this.kind="span"}function R(){this.kind="br"}function N(){}function P(){}function m(b){var d=null;b&&(b=b.attributes["xml:id"]||b.attributes.id)&&(d=b.value||null);return d}function y(b){return b&&"style"in b.attributes?b.attributes.style.value.split(" "):[]}function M(b,d){var f={};if(null!==b)for(var e in b.attributes){var h=b.attributes[e].uri+" "+b.attributes[e].local,g=u.byQName[h];if(void 0!==g){var m=g.parse(b.attributes[e].value);null!==m?(f[h]=
m,g===u.byName.zIndex&&U(d,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):C(d,"Cannot parse styling attribute "+h+" --\x3e "+b.attributes[e].value)}}return f}function S(b,d,f){for(var e in b.attributes)if(b.attributes[e].uri===d&&b.attributes[e].local===f)return b.attributes[e].value;return null}function X(b,f){b=S(b,d.ns_tts,"extent");if(null===b)return null;var e=b.split(" ");if(2!==e.length)return U(f,"Malformed extent (ignoring)"),null;b=l.parseLength(e[0]);e=
l.parseLength(e[1]);return e&&b?{h:e,w:b}:(U(f,"Malformed extent values (ignoring)"),null)}function Y(b,d,f){var e=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,h=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,g=/^(\d+(?:\.\d+)?)t$/,m=/^(\d+(?:\.\d+)?)ms$/,k=/^(\d+(?:\.\d+)?)s$/,q=/^(\d+(?:\.\d+)?)h$/,l=/^(\d+(?:\.\d+)?)m$/,n,J=null;null!==(n=/^(\d+(?:\.\d+)?)f$/.exec(f))?null!==d&&(J=parseFloat(n[1])/d):null!==(n=g.exec(f))?null!==b&&(J=parseFloat(n[1])/b):null!==(n=m.exec(f))?J=parseFloat(n[1])/1E3:null!==(n=k.exec(f))?
J=parseFloat(n[1]):null!==(n=q.exec(f))?J=3600*parseFloat(n[1]):null!==(n=l.exec(f))?J=60*parseFloat(n[1]):null!==(n=e.exec(f))?J=3600*parseInt(n[1])+60*parseInt(n[2])+parseFloat(n[3]):null!==(n=h.exec(f))&&null!==d&&(J=3600*parseInt(n[1])+60*parseInt(n[2])+parseInt(n[3])+(null===n[4]?0:parseInt(n[4])/d));return J}function v(b,d,f){for(;0<d.styleRefs.length;){var e=d.styleRefs.pop();e in b.styles?(v(b,b.styles[e],f),V(b.styles[e].styleAttrs,d.styleAttrs)):C(f,"Non-existant style id referenced")}}
function W(b,d,f,e){for(var h=d.length-1;0<=h;h--){var g=d[h];g in b.styles?V(b.styles[g].styleAttrs,f):C(e,"Non-existant style id referenced")}}function V(b,d){for(var f in b)f in d||(d[f]=b[f])}function U(b,d){if(b&&b.warn&&b.warn(d))throw d;}function C(b,d){if(b&&b.error&&b.error(d))throw d;}function Q(b,d){b&&b.fatal&&b.fatal(d);throw d;}function aa(b,d){for(var f=0,e=b.length-1,h;f<=e;){h=Math.floor((f+e)/2);var g=b[h];if(g<d)f=h+1;else if(g>d)e=h-1;else return{found:!0,index:h}}return{found:!1,
index:f}}g.fromXML=function(f,g,m){var q=k.parser(!0,{xmlns:!0}),l=[],J=[],z=[],K=0,r=null;q.onclosetag=function(b){if(l[0]instanceof N)null!==r.head&&null!==r.head.styling&&W(r.head.styling,l[0].styleRefs,l[0].styleAttrs,g),delete l[0].styleRefs;else if(l[0]instanceof w)for(var f in l[0].styles)v(l[0],l[0].styles[f],g);else if(l[0]instanceof T||l[0]instanceof L){if(1<l[0].contents.length){b=[l[0].contents[0]];for(f=1;f<l[0].contents.length;f++)l[0].contents[f]instanceof D&&b[b.length-1]instanceof
D?b[b.length-1].text+=l[0].contents[f].text:b.push(l[0].contents[f]);l[0].contents=b}l[0]instanceof L&&1===l[0].contents.length&&l[0].contents[0]instanceof D&&(l[0].text=l[0].contents[0].text,delete l[0].contents)}else if(l[0]instanceof x)if(l[0].node.uri===d.ns_tt&&"metadata"===l[0].node.local)K--;else if(0<K&&m&&"onCloseTag"in m)m.onCloseTag();z.shift();J.shift();l.shift()};q.ontext=function(b){if(void 0!==l[0])if(l[0]instanceof L||l[0]instanceof T){if(l[0]instanceof L){var d=l[0].styleAttrs[u.byName.ruby.qname];
if("container"===d||"textContainer"===d||"baseContainer"===d)return}d=new D;d.initFromText(r,l[0],b,z[0],g);l[0].contents.push(d)}else if(l[0]instanceof x&&0<K&&m&&"onText"in m)m.onText(b)};q.onopentag=function(b){function f(b){d.ttaf_map[b.uri]&&(b.uri=d.ttaf_map[b.uri])}var h=b.attributes["xml:space"];h?z.unshift(h.value):0===z.length?z.unshift("default"):z.unshift(z[0]);(h=b.attributes["xml:lang"])?J.unshift(h.value):0===J.length?J.unshift(""):J.unshift(J[0]);f(b);if(b.attributes)for(var k in b.attributes)b.attributes.hasOwnProperty(k)&&
f(b.attributes[k]);if(b.uri===d.ns_tt)if("tt"===b.local)null!==r&&Q(g,"Two <tt> elements at ("+this.line+","+this.column+")"),r=new e,r.initFromNode(b,g),l.unshift(r);else if("head"===b.local)l[0]instanceof e||Q(g,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),l.unshift(r.head);else if("styling"===b.local)l[0]instanceof p||Q(g,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),l.unshift(r.head.styling);else if("style"===b.local)if(l[0]instanceof
w){var q=new t;q.initFromNode(b,g);q.id?r.head.styling.styles[q.id]=q:C(g,"<style> element missing @id attribute");l.unshift(q)}else l[0]instanceof N?(q=new t,q.initFromNode(b,g),V(q.styleAttrs,l[0].styleAttrs),l.unshift(q)):Q(g,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===b.local)if(l[0]instanceof w){k=new I;k.initFromNode(b,g);for(q in k.styleAttrs)r.head.styling.initials[q]=k.styleAttrs[q];l.unshift(k)}else Q(g,"Parent of <initial> element is not <styling> at ("+
this.line+","+this.column+")");else if("layout"===b.local)l[0]instanceof p||Q(g,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),l.unshift(r.head.layout);else if("region"===b.local)l[0]instanceof F||Q(g,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),q=new N,q.initFromNode(r,b,g),!q.id||q.id in r.head.layout.regions?C(g,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):r.head.layout.regions[q.id]=q,l.unshift(q);
else if("body"===b.local)l[0]instanceof e||Q(g,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==r.body&&Q(g,"Second <body> element at "+this.line+","+this.column+")"),q=new E,q.initFromNode(r,b,g),r.body=q,l.unshift(q);else if("div"===b.local){l[0]instanceof O||l[0]instanceof E||Q(g,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");q=new O;q.initFromNode(r,l[0],b,g);if(k=q.styleAttrs[u.byName.backgroundImage.qname])q.contents.push(new B(k)),
delete q.styleAttrs[u.byName.backgroundImage.qname];l[0].contents.push(q);l.unshift(q)}else"image"===b.local?(l[0]instanceof O||Q(g,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),q=new B,q.initFromNode(r,l[0],b,g),l[0].contents.push(q),l.unshift(q)):"p"===b.local?(l[0]instanceof O||Q(g,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),q=new T,q.initFromNode(r,l[0],b,g),l[0].contents.push(q),l.unshift(q)):"span"===b.local?(l[0]instanceof L||l[0]instanceof
T||Q(g,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),q=new L,q.initFromNode(r,l[0],b,z[0],g),l[0].contents.push(q),l.unshift(q)):"br"===b.local?(l[0]instanceof L||l[0]instanceof T||Q(g,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),q=new R,q.initFromNode(r,l[0],b,g),l[0].contents.push(q),l.unshift(q)):"set"===b.local?(l[0]instanceof L||l[0]instanceof T||l[0]instanceof O||l[0]instanceof E||l[0]instanceof N||l[0]instanceof R||Q(g,
"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),q=new P,q.initFromNode(r,l[0],b,g),l[0].sets.push(q),l.unshift(q)):l.unshift(new x(b));else l.unshift(new x(b));if(l[0]instanceof x)if(b.uri===d.ns_tt&&"metadata"===b.local)K++;else if(0<K&&m&&"onOpenTag"in m){q=[];for(var n in b.attributes)q[b.attributes[n].uri+" "+b.attributes[n].local]={uri:b.attributes[n].uri,local:b.attributes[n].local,value:b.attributes[n].value};m.onOpenTag(b.uri,b.local,q)}};
q.write(f).close();delete r.head.styling.styles;f=!1;for(var A in r.head.layout.regions){f=!0;break}f||(A=N.prototype.createDefaultRegion(r,g),r.head.layout.regions[A.id]=A);for(var y in r.head.layout.regions)h(r,r.head.layout.regions[y],null,null);r.body&&h(r,r.body,null,null);r.body&&b(r.body);r.body&&n(r.body);return r};e.prototype.initFromNode=function(b,f){var e=S(b,d.ns_ttp,"cellResolution"),h=15;var g=32;null!==e&&(e=/(\d+) (\d+)/.exec(e),null!==e?(g=parseInt(e[1]),h=parseInt(e[2])):U(f,"Malformed cellResolution value (using initial value instead)"));
this.cellLength={h:new l.ComputedLength(0,1/h),w:new l.ComputedLength(1/g,0)};h=S(b,d.ns_ttp,"frameRate");e=30;null!==h&&(g=/(\d+)/.exec(h),null!==g?e=parseInt(g[1]):U(f,"Malformed frame rate attribute (using initial value instead)"));g=S(b,d.ns_ttp,"frameRateMultiplier");var m=1;null!==g&&(g=/(\d+) (\d+)/.exec(g),null!==g?m=parseInt(g[1])/parseInt(g[2]):U(f,"Malformed frame rate multiplier attribute (using initial value instead)"));e*=m;m=1;g=S(b,d.ns_ttp,"tickRate");null===g?null!==h&&(m=e):(g=
/(\d+)/.exec(g),null!==g?m=parseInt(g[1]):U(f,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=e;this.tickRate=m;g=S(b,d.ns_ittp,"aspectRatio");null===g&&(g=S(b,d.ns_ttp,"displayAspectRatio"));h=null;null!==g&&(e=/(\d+)\s+(\d+)/.exec(g),null!==e?(g=parseInt(e[1]),e=parseInt(e[2]),0!==g&&0!==e?h=g/e:C(f,"Illegal aspectRatio values (ignoring)")):C(f,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=h;h=S(b,d.ns_ttp,"timeBase");null!==h&&"media"!==
h&&Q(f,"Unsupported time base");b=X(b,f);null===b?this.pxLength={h:null,w:null}:("px"===b.h.unit&&"px"===b.w.unit||Q(f,"Extent on TT must be in px or absent"),this.pxLength={h:new l.ComputedLength(0,1/b.h.value),w:new l.ComputedLength(1/b.w.value,0)});this.dimensions={h:new l.ComputedLength(0,1),w:new l.ComputedLength(1,0)}};e.prototype._registerEvent=function(b){if(!(b.end<=b.begin)){var d=aa(this.events,b.begin);d.found||this.events.splice(d.index,0,b.begin);b.end!==Number.POSITIVE_INFINITY&&(d=
aa(this.events,b.end),d.found||this.events.splice(d.index,0,b.end))}};e.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]};e.prototype.getMediaTimeEvents=function(){return this.events};t.prototype.initFromNode=function(b,d){this.id=m(b);this.styleAttrs=M(b,d);this.styleRefs=y(b)};I.prototype.initFromNode=function(b,f){this.styleAttrs={};for(var e in b.attributes)if(b.attributes[e].uri===d.ns_itts||b.attributes[e].uri===d.ns_ebutts||b.attributes[e].uri===
d.ns_tts)this.styleAttrs[b.attributes[e].uri+" "+b.attributes[e].local]=b.attributes[e].value};B.prototype.initFromNode=function(b,d,e,h){(this.src="src"in e.attributes?e.attributes.src.value:null)||C(h,"Invalid image@src attribute");(this.type="type"in e.attributes?e.attributes.type.value:null)||C(h,"Invalid image@type attribute");z.prototype.initFromNode.call(this,b,d,e,h);K.prototype.initFromNode.call(this,b,d,e,h);q.prototype.initFromNode.call(this,b,d,e,h);f.prototype.initFromNode.call(this,
b,d,e,h)};H.prototype.initFromNode=function(b,d,f,e){this.id=m(f)};f.prototype.initFromNode=function(b,d,f,e){this.regionID=f&&"region"in f.attributes?f.attributes.region.value:""};z.prototype.initFromNode=function(b,d,f,e){this.styleAttrs=M(f,e);null!==b.head&&null!==b.head.styling&&W(b.head.styling,y(f),this.styleAttrs,e)};q.prototype.initFromNode=function(b,d,f,e){this.sets=[]};J.prototype.initFromNode=function(b,d,f,e){this.contents=[]};K.prototype.initFromNode=function(b,d,f,e){d=null;f&&"begin"in
f.attributes&&(d=Y(b.tickRate,b.effectiveFrameRate,f.attributes.begin.value),null===d&&U(e,"Malformed begin value "+f.attributes.begin.value+" (using 0)"));var h=null;f&&"dur"in f.attributes&&(h=Y(b.tickRate,b.effectiveFrameRate,f.attributes.dur.value),null===h&&U(e,"Malformed dur value "+f.attributes.dur.value+" (ignoring)"));var g=null;f&&"end"in f.attributes&&(g=Y(b.tickRate,b.effectiveFrameRate,f.attributes.end.value),null===g&&U(e,"Malformed end value (ignoring)"));this.explicit_begin=d;this.explicit_end=
g;this.explicit_dur=h;(b=f&&"timeContainer"in f.attributes?f.attributes.timeContainer.value:null)&&"par"!==b?"seq"===b?e="seq":(C(e,"Illegal value of timeContainer (assuming 'par')"),e="par"):e="par";this.timeContainer=e};E.prototype.initFromNode=function(b,d,e){z.prototype.initFromNode.call(this,b,null,d,e);K.prototype.initFromNode.call(this,b,null,d,e);q.prototype.initFromNode.call(this,b,null,d,e);f.prototype.initFromNode.call(this,b,null,d,e);J.prototype.initFromNode.call(this,b,null,d,e)};O.prototype.initFromNode=
function(b,d,e,h){z.prototype.initFromNode.call(this,b,d,e,h);K.prototype.initFromNode.call(this,b,d,e,h);q.prototype.initFromNode.call(this,b,d,e,h);f.prototype.initFromNode.call(this,b,d,e,h);J.prototype.initFromNode.call(this,b,d,e,h)};T.prototype.initFromNode=function(b,d,e,h){z.prototype.initFromNode.call(this,b,d,e,h);K.prototype.initFromNode.call(this,b,d,e,h);q.prototype.initFromNode.call(this,b,d,e,h);f.prototype.initFromNode.call(this,b,d,e,h);J.prototype.initFromNode.call(this,b,d,e,h)};
L.prototype.initFromNode=function(b,d,e,h,g){z.prototype.initFromNode.call(this,b,d,e,g);K.prototype.initFromNode.call(this,b,d,e,g);q.prototype.initFromNode.call(this,b,d,e,g);f.prototype.initFromNode.call(this,b,d,e,g);J.prototype.initFromNode.call(this,b,d,e,g);this.space=h};D.prototype.initFromText=function(b,d,f,e,h){K.prototype.initFromNode.call(this,b,d,null,h);this.text=f;this.space=e};R.prototype.initFromNode=function(b,d,e,h){f.prototype.initFromNode.call(this,b,d,e,h);K.prototype.initFromNode.call(this,
b,d,e,h)};N.prototype.createDefaultRegion=function(b,d){var f=new N;f.id="";z.prototype.initFromNode.call(f,b,null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",value:"after",prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},
"tts:overflow":{name:"tts:overflow",value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",ebutts:"urn:ebu:tt:style",ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",
local:"region",uri:"http://www.w3.org/ns/ttml",isSelfClosing:!0},d);f.sets=[];K.call(f,0,Number.POSITIVE_INFINITY,null);return f};N.prototype.initFromNode=function(b,d,f){H.prototype.initFromNode.call(this,b,null,d,f);K.prototype.initFromNode.call(this,b,null,d,f);q.prototype.initFromNode.call(this,b,null,d,f);this.styleAttrs=M(d,f);this.styleRefs=y(d)};P.prototype.initFromNode=function(b,d,f,e){K.prototype.initFromNode.call(this,b,d,f,e);b=M(f,e);this.value=this.qname=null;for(var h in b){if(this.qname){C(e,
"More than one style specified on set");break}this.qname=h;this.value=b[h]}}})("undefined"===typeof p?this.imscDoc={}:p,"undefined"===typeof sax?g("sax"):sax,"undefined"===typeof imscNames?g("./names"):imscNames,"undefined"===typeof imscStyles?g("./styles"):imscStyles,"undefined"===typeof imscUtils?g("./utils"):imscUtils)},{"./names":31,"./styles":32,"./utils":33,sax:24}],28:[function(g,t,p){(function(g,k,d,u){function l(b){var d={};b=Object.entries(b);for(var f in b){var e=u.parseColor(b[f][0]),
h=u.parseColor(b[f][1]);e&&h&&(d[e.toString()]=h)}return d}function n(f,g,q){if("region"===q.kind){var k=document.createElement("div");k.style.position="absolute"}else if("body"===q.kind)k=document.createElement("div");else if("div"===q.kind)k=document.createElement("div");else if("image"===q.kind){if(k=document.createElement("img"),null!==f.imgResolver&&null!==q.src){var l=f.imgResolver(q.src,k);l&&(k.src=l);k.height=f.regionH;k.width=f.regionW}}else if("p"===q.kind)k=document.createElement("p");
else if("span"===q.kind)if("container"===q.styleAttrs[d.byName.ruby.qname])k=document.createElement("ruby"),f.ruby=!0;else if("base"===q.styleAttrs[d.byName.ruby.qname])k=document.createElement("rb");else if("text"===q.styleAttrs[d.byName.ruby.qname])k=document.createElement("rt");else if("baseContainer"===q.styleAttrs[d.byName.ruby.qname])k=document.createElement("rbc");else if("textContainer"===q.styleAttrs[d.byName.ruby.qname])k=document.createElement("rtc");else{if("delimiter"===q.styleAttrs[d.byName.ruby.qname])return;
k=document.createElement("span")}else"br"===q.kind&&(k=document.createElement("br"));if(k){g.appendChild(k);k.style.margin="0";if("region"===q.kind)if(g=q.styleAttrs[d.byName.writingMode.qname],"lrtb"===g||"lr"===g)f.ipd="lr",f.bpd="tb";else if("rltb"===g||"rl"===g)f.ipd="rl",f.bpd="tb";else if("tblr"===g)f.ipd="tb",f.bpd="lr";else{if("tbrl"===g||"tb"===g)f.ipd="tb",f.bpd="rl"}else"p"===q.kind&&"tb"===f.bpd&&(f.ipd="ltr"===q.styleAttrs[d.byName.direction.qname]?"lr":"rl");for(var r in w)g=w[r],l=
q.styleAttrs[g.qname],void 0!==l&&null!==g.map&&g.map(f,k,q,l);r=k;(g=q.styleAttrs[d.byName.linePadding.qname])&&!g.isZero()&&(l=g.multiply(g.toUsedLength(f.w,f.h),f.options.sizeAdjust),0<l&&(l=Math.ceil(l)+"px","tb"===f.bpd?(r.style.paddingLeft=l,r.style.paddingRight=l):(r.style.paddingTop=l,r.style.paddingBottom=l),f.lp=g));(g=q.styleAttrs[d.byName.multiRowAlign.qname])&&"auto"!==g&&(r=document.createElement("span"),r.style.display="inline-block",r.style.textAlign=g,k.appendChild(r),f.mra=g);(g=
q.styleAttrs[d.byName.rubyReserve.qname])&&"none"!==g[0]&&(f.rubyReserve=g);q.styleAttrs[d.byName.fillLineGap.qname]&&(f.flg=!0);if("span"===q.kind&&q.text)if((g=q.styleAttrs[d.byName.textEmphasis.qname])&&"none"!==g.style&&(f.textEmphasis=!0),d.byName.textCombine.qname in q.styleAttrs&&"all"===q.styleAttrs[d.byName.textCombine.qname][0])k.textContent=q.text,g&&e(f,k,q,g);else{l="";for(var p=0;p<q.text.length;p++){l+=q.text.charAt(p);var u=q.text.charCodeAt(p);if(55296>u||56319<u||p===q.text.length)u=
document.createElement("span"),u.textContent=l,g&&e(f,u,q,g),k.appendChild(u),l=""}}for(var z in q.contents)n(f,r,q.contents[z]);z=[];if((f.lp||f.mra||f.flg||f.ruby||f.textEmphasis||f.rubyReserve)&&"p"===q.kind){x(f,r,z,null);if(f.rubyReserve){for(g=0;g<z.length;g++){l=document.createElement("ruby");p=document.createElement("rb");p.textContent="\u200b";l.appendChild(p);var t=f.rubyReserve[1].toUsedLength(f.w,f.h)+"px";"both"===f.rubyReserve[0]||"outside"===f.rubyReserve[0]&&1==z.length?(p=document.createElement("rtc"),
p.style[F]=I?"after":"under",p.textContent="\u200b",p.style.fontSize=t,u=document.createElement("rtc"),u.style[F]=I?"before":"over",u.textContent="\u200b",u.style.fontSize=t,l.appendChild(p),l.appendChild(u)):(p=document.createElement("rtc"),p.textContent="\u200b",p.style.fontSize=t,p.style[F]="after"===f.rubyReserve[0]||"outside"===f.rubyReserve[0]&&0<g?I?"after":"tb"===f.bpd||"rl"===f.bpd?"under":"over":I?"before":"tb"===f.bpd||"rl"===f.bpd?"over":"under",l.appendChild(p));p=null;for(u=0;u<z[g].rbc.length;u++)if("ruby"===
z[g].rbc[u].localName){p=z[g].rbc[u];for(u=0;u<p.style.length;u++)l.style.setProperty(p.style.item(u),p.style.getPropertyValue(p.style.item(u)));break}p=p||z[g].elements[0].node;p.parentElement.insertBefore(l,p)}f.rubyReserve=null}if(f.ruby||f.rubyReserve){for(g=0;g<z.length;g++)for(l=0;l<z[g].rbc.length;l++)z[g].rbc[l].style[F]||(z[g].rbc[l].style[F]=I?0===g?"before":"after":"tb"===f.bpd?0===g?"over":"under":"rl"===f.bpd?0===g?"over":"under":0===g?"under":"over");f.ruby=null}if(f.textEmphasis){for(g=
0;g<z.length;g++)for(l=0;l<z[g].te.length;l++)z[g].te[l].style[H]&&"none"!==z[g].te[l].style[H]||(z[g].te[l].style[H]="tb"===f.bpd?0===g?"left over":"left under":"rl"===f.bpd?0===g?"right under":"left under":0===g?"left under":"right under");f.textEmphasis=null}if(f.mra){for(g=0;g<z.length-1;g++)p=z[g].elements.length,0!==p&&!1===z[g].br&&(l=document.createElement("br"),p=z[g].elements[p-1].node,p.parentElement.insertBefore(l,p.nextSibling));f.mra=null}if(f.lp){g=f.lp.multiply(f.lp.toUsedLength(f.w,
f.h),f.options.sizeAdjust);for(var A in z)l=z[A].elements[z[A].start_elem],p=z[A].elements[z[A].end_elem],u=Math.ceil(g)+"px",t="-"+Math.ceil(g)+"px",0!==z[A].elements.length&&("lr"===f.ipd?(l.node.style.borderLeftColor=l.bgcolor||"#00000000",l.node.style.borderLeftStyle="solid",l.node.style.borderLeftWidth=u,l.node.style.marginLeft=t):"rl"===f.ipd?(l.node.style.borderRightColor=l.bgcolor||"#00000000",l.node.style.borderRightStyle="solid",l.node.style.borderRightWidth=u,l.node.style.marginRight=t):
"tb"===f.ipd&&(l.node.style.borderTopColor=l.bgcolor||"#00000000",l.node.style.borderTopStyle="solid",l.node.style.borderTopWidth=u,l.node.style.marginTop=t),"lr"===f.ipd?(p.node.style.borderRightColor=p.bgcolor||"#00000000",p.node.style.borderRightStyle="solid",p.node.style.borderRightWidth=u,p.node.style.marginRight=t):"rl"===f.ipd?(p.node.style.borderLeftColor=p.bgcolor||"#00000000",p.node.style.borderLeftStyle="solid",p.node.style.borderLeftWidth=u,p.node.style.marginLeft=t):"tb"===f.ipd&&(p.node.style.borderBottomColor=
p.bgcolor||"#00000000",p.node.style.borderBottomStyle="solid",p.node.style.borderBottomWidth=u,p.node.style.marginBottom=t));f.lp=null}if(f.flg){g=h(r.getBoundingClientRect(),f);A=g.before;g=g.after;l=Math.sign(g-A);for(p=0;p<=z.length;p++){u=0===p?A:p===z.length?g:(z[p].before+z[p-1].after)/2;if(0<p)for(var B=0;B<z[p-1].elements.length;B++)if(null!==z[p-1].elements[B].bgcolor){var G=z[p-1].elements[B];0>l*(G.after-u)&&(t=Math.ceil(Math.abs(u-G.after))+"px",G.node.style.backgroundColor=G.bgcolor,
"lr"===f.bpd?G.node.style.paddingRight=t:"rl"===f.bpd?G.node.style.paddingLeft=t:"tb"===f.bpd&&(G.node.style.paddingBottom=t))}if(p<z.length)for(B=0;B<z[p].elements.length;B++)G=z[p].elements[B],null!==G.bgcolor&&0<l*(G.before-u)&&(t=Math.ceil(Math.abs(G.before-u))+"px",G.node.style.backgroundColor=G.bgcolor,"lr"===f.bpd?G.node.style.paddingLeft=t:"rl"===f.bpd?G.node.style.paddingRight=t:"tb"===f.bpd&&(G.node.style.paddingTop=t))}f.flg=null}}"region"===q.kind&&(x(f,r,z),"tb"===f.bpd&&f.enableRollUp&&
0<q.contents.length&&"after"===q.styleAttrs[d.byName.displayAlign.qname]&&(q=new b(""===q.id?"_":q.id,z),f.currentISDState[q.id]=q,f.previousISDState&&q.id in f.previousISDState&&0<f.previousISDState[q.id].plist.length&&1<q.plist.length&&q.plist[q.plist.length-2].text===f.previousISDState[q.id].plist[f.previousISDState[q.id].plist.length-1].text&&(f=k.firstElementChild,q=q.plist[q.plist.length-1].after-q.plist[q.plist.length-1].before,f.style.bottom="-"+q+"px",f.style.transition="transform 0.4s",
f.style.position="relative",f.style.transform="translateY(-"+q+"px)")))}else if(f=f.errorHandler,q="Error processing ISD element kind: "+q.kind,f&&f.error&&f.error(q))throw q;}function b(b,d){this.id=b;this.plist=d}function h(b,d){var f={before:null,after:null,start:null,end:null};"tb"===d.bpd?(f.before=b.top,f.after=b.bottom,"lr"===d.ipd?(f.start=b.left,f.end=b.right):(f.start=b.right,f.end=b.left)):"lr"===d.bpd?(f.before=b.left,f.after=b.right,f.start=b.top,f.end=b.bottom):"rl"===d.bpd&&(f.before=
b.right,f.after=b.left,f.start=b.top,f.end=b.bottom);return f}function x(b,d,e,g){if("rt"!==d.localName&&"rtc"!==d.localName)if(g=d.style.backgroundColor||g,0===d.childElementCount)if("span"===d.localName||"rb"===d.localName){var f=d.getBoundingClientRect();if(0!==f.height&&0!==f.width){b=h(f,b);if(!(f=0===e.length)){f=b.before;var k=b.after,l=e[e.length-1].before,q=e[e.length-1].after;f=!(k<q&&f>l||q<=k&&l>=f)}f?e.push({before:b.before,after:b.after,start:b.start,end:b.end,start_elem:0,end_elem:0,
elements:[],rbc:[],te:[],text:"",br:!1}):(f=Math.sign(b.after-b.before),k=Math.sign(b.end-b.start),0>f*(b.before-e[e.length-1].before)&&(e[e.length-1].before=b.before),0<f*(b.after-e[e.length-1].after)&&(e[e.length-1].after=b.after),0>k*(b.start-e[e.length-1].start)&&(e[e.length-1].start=b.start,e[e.length-1].start_elem=e[e.length-1].elements.length),0<k*(b.end-e[e.length-1].end)&&(e[e.length-1].end=b.end,e[e.length-1].end_elem=e[e.length-1].elements.length));e[e.length-1].text+=d.textContent;e[e.length-
1].elements.push({node:d,bgcolor:g,before:b.before,after:b.after})}}else"br"===d.localName&&0!==e.length&&(e[e.length-1].br=!0);else for(d=d.firstChild;d;)d.nodeType===Node.ELEMENT_NODE&&(x(b,d,e,g),"ruby"===d.localName||"rtc"===d.localName?0<e.length&&e[e.length-1].rbc.push(d):"span"===d.localName&&d.style[B]&&"none"!==d.style[B]&&0<e.length&&e[e.length-1].te.push(d)),d=d.nextSibling}function e(b,d,e,h){if("none"===h.style)d.style[B]="none";else if(d.style[B]="auto"===h.style?"filled":h.style+" "+
h.symbol,"before"===h.position||"after"===h.position)d.style[H]="tb"===b.bpd?"before"===h.position?"left over":"left under":"rl"===b.bpd?"before"===h.position?"right under":"left under":"before"===h.position?"left under":"right under"}function p(b,d){this.qname=b;this.map=d}g.render=function(b,d,e,h,g,k,p,x,r,u){h=h||d.clientHeight;var f=g||d.clientWidth;null!==b.aspectRatio&&(g=h*b.aspectRatio,g>f?h=Math.round(f/b.aspectRatio):f=g);g=document.createElement("div");g.style.position="relative";g.style.width=
f+"px";g.style.height=h+"px";g.style.margin="auto";g.style.top=0;g.style.bottom=0;g.style.left=0;g.style.right=0;g.style.zIndex=0;e={h:h,w:f,regionH:null,regionW:null,imgResolver:e,displayForcedOnlyMode:k||!1,isd:b,errorHandler:p,previousISDState:x,enableRollUp:r||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null,options:Object.assign({},u)||{}};e.options.colorAdjust&&(e.options.colorAdjust=l(e.options.colorAdjust));k=["region","body","div",
"p","span"];for(var q in k)p=k[q]+"BackgroundColorAdjust",e.options[p]&&(e.options[p]=l(e.options[p]));d.appendChild(g);for(var J in b.contents)n(e,g,b.contents[J]);return e.currentISDState};var w=[new p("http://www.w3.org/ns/ttml#styling backgroundColor",function(b,d,e,h){(e=(e=b.options[e.kind+"BackgroundColorAdjust"])&&e[h.toString()])&&(h=e);e=h[3];0!==e&&(void 0!=b.options.backgroundOpacityScale&&(e*=b.options.backgroundOpacityScale),d.style.backgroundColor="rgba("+h[0].toString()+","+h[1].toString()+
","+h[2].toString()+","+(e/255).toString()+")")}),new p("http://www.w3.org/ns/ttml#styling color",function(b,d,e,h){e=b.options.colorOpacityScale||1;var f=b.options.colorAdjust;void 0!=f&&(f=f[h.toString()])&&(h=f);var g=h[0],k=h[1];f=h[2];h=h[3];b.options.hdr?(b=Math.pow(g/255,2),e=Math.pow(k/255,2),f=Math.pow(f/255,2),b=.627403895934699*b+.3292830383778848*e+.0433130656874172*f,e=.0690972893582321*b+.919540395075459*e+.0113623155663092*f,f=.0163914388751502*b+.0880133078772256*e+.895595253247623*
f,b*=.265,e*=.265,f*=.265,a=.17883277,bb=1-4*a,c=.5-a*Math.log(4*a),b=b<=1/12?Math.pow(3*b,.5):a*Math.log(12*b-bb)+c,e=e<=1/12?Math.pow(3*e,.5):a*Math.log(12*e-bb)+c,f=f<=1/12?Math.pow(3*f,.5):a*Math.log(12*f-bb)+c,h=[b,e,f,h],b="color(display-p3 "+h[0].toString()+" "+h[1].toString()+" "+h[2].toString()+")",d.style.color=b,console.log(b)):(h=[g,k,f,h],d.style.color="rgba("+h[0].toString()+","+h[1].toString()+","+h[2].toString()+","+(e*h[3]/255).toString()+")")}),new p("http://www.w3.org/ns/ttml#styling direction",
function(b,d,e,h){d.style.direction=h}),new p("http://www.w3.org/ns/ttml#styling display",function(b,d,e,h){}),new p("http://www.w3.org/ns/ttml#styling displayAlign",function(b,d,e,h){d.style.display="flex";d.style.flexDirection="column";"before"===h?d.style.justifyContent="flex-start":"center"===h?d.style.justifyContent="center":"after"===h&&(d.style.justifyContent="flex-end")}),new p("http://www.w3.org/ns/ttml#styling extent",function(b,d,e,h){b.regionH=h.h.toUsedLength(b.w,b.h);b.regionW=h.w.toUsedLength(b.w,
b.h);var f=h=0;if(e=e.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])h=e[0].toUsedLength(b.w,b.h)+e[2].toUsedLength(b.w,b.h),f=e[1].toUsedLength(b.w,b.h)+e[3].toUsedLength(b.w,b.h);d.style.height=b.regionH-h+"px";d.style.width=b.regionW-f+"px"}),new p("http://www.w3.org/ns/ttml#styling fontFamily",function(b,d,e,h){e=[];b.options.fontFamily&&(h=b.options.fontFamily.split(","));for(var f in h)h[f]=h[f].trim(),"monospaceSerif"===h[f]?(e.push("Courier New"),e.push('"Liberation Mono"'),e.push("Courier"),
e.push("monospace")):"proportionalSansSerif"===h[f]||"default"===h[f]?(e.push("Arial"),e.push("Helvetica"),e.push('"Liberation Sans"'),e.push("sans-serif")):"monospace"===h[f]?e.push("monospace"):"sansSerif"===h[f]?e.push("sans-serif"):"serif"===h[f]?e.push("serif"):"monospaceSansSerif"===h[f]?(e.push("Consolas"),e.push("monospace")):"proportionalSerif"===h[f]?e.push("serif"):e.push(h[f]);d.style.fontFamily=e.join(",")}),new p("http://www.w3.org/ns/ttml#styling shear",function(b,d,e,h){0!==h&&(e=
-.9*h,d.style.transform="tb"===b.bpd?"skewX("+e+"deg)":"skewY("+e+"deg)")}),new p("http://www.w3.org/ns/ttml#styling fontSize",function(b,d,e,h){d.style.fontSize=h.multiply(h.toUsedLength(b.w,b.h),b.options.sizeAdjust)+"px"}),new p("http://www.w3.org/ns/ttml#styling fontStyle",function(b,d,e,h){d.style.fontStyle=h}),new p("http://www.w3.org/ns/ttml#styling fontWeight",function(b,d,e,h){d.style.fontWeight=h}),new p("http://www.w3.org/ns/ttml#styling lineHeight",function(b,d,e,h){d.style.lineHeight=
"normal"===h?"normal":h.multiply(h.multiply(h.toUsedLength(b.w,b.h),b.options.sizeAdjust),b.options.lineHeightAdjust)+"px"}),new p("http://www.w3.org/ns/ttml#styling opacity",function(b,d,e,h){e=h;void 0!=b.options.regionOpacityScale&&(e*=b.options.regionOpacityScale);d.style.opacity=e}),new p("http://www.w3.org/ns/ttml#styling origin",function(b,d,e,h){d.style.top=h.h.toUsedLength(b.w,b.h)+"px";d.style.left=h.w.toUsedLength(b.w,b.h)+"px"}),new p("http://www.w3.org/ns/ttml#styling overflow",function(b,
d,e,h){d.style.overflow=h}),new p("http://www.w3.org/ns/ttml#styling padding",function(b,d,e,h){e=[];e[0]=h[0].toUsedLength(b.w,b.h)+"px";e[1]=h[3].toUsedLength(b.w,b.h)+"px";e[2]=h[2].toUsedLength(b.w,b.h)+"px";e[3]=h[1].toUsedLength(b.w,b.h)+"px";d.style.padding=e.join(" ")}),new p("http://www.w3.org/ns/ttml#styling position",function(b,d,e,h){d.style.top=h.h.toUsedLength(b.w,b.h)+"px";d.style.left=h.w.toUsedLength(b.w,b.h)+"px"}),new p("http://www.w3.org/ns/ttml#styling rubyAlign",function(b,d,
e,h){d.style.rubyAlign="spaceAround"===h?"space-around":"center"}),new p("http://www.w3.org/ns/ttml#styling rubyPosition",function(b,d,e,h){if("before"===h||"after"===h)d.parentElement.style[F]=I?h:"tb"===b.bpd?"before"===h?"over":"under":"rl"===b.bpd?"before"===h?"over":"under":"before"===h?"under":"over"}),new p("http://www.w3.org/ns/ttml#styling showBackground",null),new p("http://www.w3.org/ns/ttml#styling textAlign",function(b,d,e,h){d.style.textAlign="start"===h?"rl"===b.ipd?"right":"left":
"end"===h?"rl"===b.ipd?"left":"right":h}),new p("http://www.w3.org/ns/ttml#styling textDecoration",function(b,d,e,h){d.style.textDecoration=h.join(" ").replace("lineThrough","line-through")}),new p("http://www.w3.org/ns/ttml#styling textOutline",function(b,d,e,h){}),new p("http://www.w3.org/ns/ttml#styling textShadow",function(b,e,h,g){h=h.styleAttrs[d.byName.textOutline.qname];var f=b.options.textOutline;if(f)if("none"===f)h=f;else{var k={};f=f.split(" ");if(0!==f.length&&2>=f.length){var l=u.parseColor(f[0]);
k.color=l;null!==l&&f.shift();1===f.length&&(f=u.parseLength(f[0]))&&(k.thickness=f,h=k)}}if("none"===g&&"none"===h)e.style.textShadow="";else{k=[];"none"!==h&&(h="rgba("+h.color[0].toString()+","+h.color[1].toString()+","+h.color[2].toString()+","+(h.color[3]/255).toString()+")",k.push("1px 1px 1px "+h),k.push("-1px 1px 1px "+h),k.push("1px -1px 1px "+h),k.push("-1px -1px 1px "+h));if("none"!==g)for(var n in g)k.push(g[n].x_off.toUsedLength(b.w,b.h)+"px "+g[n].y_off.toUsedLength(b.w,b.h)+"px "+g[n].b_radius.toUsedLength(b.w,
b.h)+"px rgba("+g[n].color[0].toString()+","+g[n].color[1].toString()+","+g[n].color[2].toString()+","+(g[n].color[3]/255).toString()+")");e.style.textShadow=k.join(",")}}),new p("http://www.w3.org/ns/ttml#styling textCombine",function(b,d,e,h){d.style.textCombineUpright=h.join(" ")}),new p("http://www.w3.org/ns/ttml#styling textEmphasis",function(b,d,e,h){}),new p("http://www.w3.org/ns/ttml#styling unicodeBidi",function(b,d,e,h){d.style.unicodeBidi="bidiOverride"===h?"bidi-override":h}),new p("http://www.w3.org/ns/ttml#styling visibility",
function(b,d,e,h){d.style.visibility=h}),new p("http://www.w3.org/ns/ttml#styling wrapOption",function(b,d,e,h){d.style.whiteSpace="wrap"===h?"preserve"===e.space?"pre-wrap":"normal":"preserve"===e.space?"pre":"noWrap"}),new p("http://www.w3.org/ns/ttml#styling writingMode",function(b,d,e,h){if("lrtb"===h||"lr"===h)d.style.writingMode="horizontal-tb";else if("rltb"===h||"rl"===h)d.style.writingMode="horizontal-tb";else if("tblr"===h)d.style.writingMode="vertical-lr";else if("tbrl"===h||"tb"===h)d.style.writingMode=
"vertical-rl"}),new p("http://www.w3.org/ns/ttml#styling zIndex",function(b,d,e,h){d.style.zIndex=h}),new p("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(b,d,e,h){b.displayForcedOnlyMode&&!1===h&&(d.style.visibility="hidden")})],t;for(t in w);var I="webkitRubyPosition"in window.getComputedStyle(document.documentElement),F=I?"webkitRubyPosition":"rubyPosition",B="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",
H="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition"})("undefined"===typeof p?this.imscHTML={}:p,"undefined"===typeof imscNames?g("./names"):imscNames,"undefined"===typeof imscStyles?g("./styles"):imscStyles,"undefined"===typeof imscUtils?g("./utils"):imscUtils)},{"./names":31,"./styles":32,"./utils":33}],29:[function(g,t,p){(function(g,k,d,p){function l(g,k,x,r,t,A,f,z,q){if(k<f.begin||k>=f.end)return null;A="regionID"in
f&&""!==f.regionID?f.regionID:A;if(null!==t&&A!==x.id&&(!("contents"in f)||"contents"in f&&0===f.contents.length||""!==A))return null;var w=new e(f);for(B in f.sets)k<f.sets[B].begin||k>=f.sets[B].end||(w.styleAttrs[f.sets[B].qname]=f.sets[B].value);var B={};for(var E in w.styleAttrs)if(B[E]=!0,"region"===w.kind&&E===d.byName.writingMode.qname&&!(d.byName.direction.qname in w.styleAttrs)){var F=w.styleAttrs[E];if("lrtb"===F||"lr"===F)w.styleAttrs[d.byName.direction.qname]="ltr";else if("rltb"===F||
"rl"===F)w.styleAttrs[d.byName.direction.qname]="rtl"}if(null!==t)for(var G in d.all)if(E=d.all[G],E.qname===d.byName.textDecoration.qname){F=t.styleAttrs[E.qname];var I=w.styleAttrs[E.qname],D=[];void 0===I?D=F:-1===I.indexOf("none")?((-1===I.indexOf("noUnderline")&&-1!==F.indexOf("underline")||-1!==I.indexOf("underline"))&&D.push("underline"),(-1===I.indexOf("noLineThrough")&&-1!==F.indexOf("lineThrough")||-1!==I.indexOf("lineThrough"))&&D.push("lineThrough"),(-1===I.indexOf("noOverline")&&-1!==
F.indexOf("overline")||-1!==I.indexOf("overline"))&&D.push("overline")):D.push("none");w.styleAttrs[E.qname]=D}else E.qname!==d.byName.fontSize.qname||E.qname in w.styleAttrs||"span"!==w.kind||"textContainer"!==w.styleAttrs[d.byName.ruby.qname]?E.qname!==d.byName.fontSize.qname||E.qname in w.styleAttrs||"span"!==w.kind||"text"!==w.styleAttrs[d.byName.ruby.qname]?E.inherit&&E.qname in t.styleAttrs&&!(E.qname in w.styleAttrs)&&(w.styleAttrs[E.qname]=t.styleAttrs[E.qname]):(F=t.styleAttrs[d.byName.fontSize.qname],
w.styleAttrs[E.qname]="textContainer"===t.styleAttrs[d.byName.ruby.qname]?F:new p.ComputedLength(.5*F.rw,.5*F.rh)):(F=t.styleAttrs[d.byName.fontSize.qname],w.styleAttrs[E.qname]=new p.ComputedLength(.5*F.rw,.5*F.rh));for(var H in d.all)if(G=d.all[H],!(G.qname in w.styleAttrs||G.qname===d.byName.position.qname&&d.byName.origin.qname in w.styleAttrs||G.qname===d.byName.origin.qname&&d.byName.position.qname in w.styleAttrs)&&(E=g.head.styling.initials[G.qname]||G.initial,null!==E&&("region"===w.kind||
!1===G.inherit&&null!==E)))if(E=G.parse(E),null!==E)w.styleAttrs[G.qname]=E,B[G.qname]=!0;else if(G="Invalid initial value for '"+G.qname+"' on element '"+w.kind,z&&z.error&&z.error(G))throw G;for(var N in d.all)if(H=d.all[N],H.qname in B&&null!==H.compute)if(G=H.compute(g,t,w,w.styleAttrs[H.qname],q),null!==G)w.styleAttrs[H.qname]=G;else if(w.styleAttrs[H.qname]=H.compute(g,t,w,H.parse(H.initial),q),H="Style '"+H.qname+"' on element '"+w.kind+"' cannot be computed",z&&z.error&&z.error(H))throw H;
if("none"===w.styleAttrs[d.byName.display.qname])return null;if(null===t)var P=null===r?[]:[r];else"contents"in f&&(P=f.contents);for(var m in P)t=l(g,k,x,r,w,A,P[m],z,q),null!==t&&w.contents.push(t.element);for(var y in w.styleAttrs)g=!1,"span"===w.kind&&(k=w.styleAttrs[d.byName.ruby.qname],(g=("container"===k||"textContainer"===k||"baseContainer"===k)&&-1!==u.indexOf(y))||(g="container"!==k&&y===d.byName.rubyAlign.qname),g||(g=!("textContainer"===k||"text"===k)&&y===d.byName.rubyPosition.qname)),
g||(g=-1===d.byQName[y].applies.indexOf(w.kind)),g&&delete w.styleAttrs[y];y=w.styleAttrs[d.byName.ruby.qname];if("p"===w.kind||"span"===w.kind&&("textContainer"===y||"text"===y))y=[],b(w,y),n(y),h(w);return"div"===w.kind&&d.byName.backgroundImage.qname in w.styleAttrs||"br"===w.kind||"image"===w.kind||"contents"in w&&0<w.contents.length||"span"===w.kind&&null!==w.text||"region"===w.kind&&"always"===w.styleAttrs[d.byName.showBackground.qname]?{region_id:A,element:w}:null}function n(b){function d(b){return"br"===
b.kind||/[\r\n\t ]$/.test(b.text)}function e(b){return"br"===b.kind||"preserve"===b.space&&/^[\r\n]/.test(b.text)}for(var h,g=0;g<b.length;)if(h=b[g],"br"===h.kind||"preserve"===h.space)g++;else{var k=h.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(k)&&(0===g||d(b[g-1]))&&(k=k.substring(1));h.text=k;0===k.length?b.splice(g,1):g++}for(g=0;g<b.length;g++)h=b[g],"br"===h.kind||"preserve"===h.space?g++:/[ ]$/.test(h.text)&&(g===b.length-1||e(b[g+1]))&&(h.text=h.text.slice(0,-1))}function b(e,h){for(var g in e.contents){var k=
e.contents[g],l=k.styleAttrs[d.byName.ruby.qname];if("span"!==k.kind||"textContainer"!==l&&"text"!==l)"contents"in k?b(k,h):("span"===k.kind&&0!==k.text.length||"br"===k.kind)&&h.push(k)}}function h(b){if("br"===b.kind)return!1;if("text"in b)return 0===b.text.length;if("contents"in b){for(var d=b.contents.length;d--;)h(b.contents[d])&&b.contents.splice(d,1);return 0===b.contents.length}}function x(b){this.contents=[];this.aspectRatio=b.aspectRatio}function e(b){this.kind=b.kind||"region";b.id&&(this.id=
b.id);this.styleAttrs={};for(var d in b.styleAttrs)this.styleAttrs[d]=b.styleAttrs[d];"src"in b&&(this.src=b.src);"type"in b&&(this.type=b.type);if("text"in b)this.text=b.text;else if("region"===this.kind||"contents"in b)this.contents=[];"space"in b&&(this.space=b.space)}g.generateISD=function(b,d,e){function h(b,d){function e(d){return!(b<d.begin||b>=d.end)}if(d.contents){var f={},g;for(g in d)f[g]=d[g];f.contents=[];d.contents.filter(e).forEach(function(d){d=h(b,d);d.regionID&&n.add(d.regionID);
null!==d&&f.contents.push(d)});return f}return d}var g=new x(b),k={},f={},n=new Set;f=h(d,b.body);0===n.size&&b.head.layout.regions.hasOwnProperty("")&&n.add("");n.forEach(function(h){h=l(b,d,b.head.layout.regions[h],f,null,"",b.head.layout.regions[h],e,k);null!==h&&g.contents.push(h.element)});return g};var u=[d.byName.color.qname,d.byName.textCombine.qname,d.byName.textDecoration.qname,d.byName.textEmphasis.qname,d.byName.textOutline.qname,d.byName.textShadow.qname]})("undefined"===typeof p?this.imscISD=
{}:p,"undefined"===typeof imscNames?g("./names"):imscNames,"undefined"===typeof imscStyles?g("./styles"):imscStyles,"undefined"===typeof imscUtils?g("./utils"):imscUtils)},{"./names":31,"./styles":32,"./utils":33}],30:[function(g,t,p){p.generateISD=g("./isd").generateISD;p.fromXML=g("./doc").fromXML;p.renderHTML=g("./html").render},{"./doc":27,"./html":28,"./isd":29}],31:[function(g,t,p){g="undefined"===typeof p?this.imscNames={}:p;g.ns_tt="http://www.w3.org/ns/ttml";g.ns_tts="http://www.w3.org/ns/ttml#styling";
g.ns_ttp="http://www.w3.org/ns/ttml#parameter";g.ns_xml="http://www.w3.org/XML/1998/namespace";g.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";g.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";g.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";g.ns_ebutts="urn:ebu:tt:style";g.ttaf_map={"http://www.w3.org/2006/10/ttaf1":g.ns_tt,"http://www.w3.org/2006/10/ttaf1#style":g.ns_tts,"http://www.w3.org/2006/10/ttaf1#parameter":g.ns_ttp}},{}],32:[function(g,t,p){(function(g,
k,d){function n(b,d,g,e,k,l,n,p){this.name=d;this.ns=b;this.qname=b+" "+d;this.inherit=k;this.animatable=l;this.initial=g;this.applies=e;this.parse=n;this.compute=p}g.all=[new n(k.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,d.parseColor,null),new n(k.ns_tts,"color","white",["span"],!0,!0,d.parseColor,null),new n(k.ns_tts,"direction","ltr",["p","span"],!0,!0,function(b){return b},null),new n(k.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(b){return b},
null),new n(k.ns_tts,"displayAlign","before",["region"],!1,!0,function(b){return b},null),new n(k.ns_tts,"extent","auto",["tt","region"],!1,!0,function(b){if("auto"===b)return b;var h=b.split(" ");if(2!==h.length)return null;b=d.parseLength(h[0]);return(h=d.parseLength(h[1]))&&b?{h:h,w:b}:null},function(b,h,g,e,k){if("auto"===e)h=new d.ComputedLength(0,1);else if(h=d.toComputedLength(e.h.value,e.h.unit,null,b.dimensions.h,null,b.pxLength.h),null===h)return null;if("auto"===e)b=new d.ComputedLength(1,
0);else if(b=d.toComputedLength(e.w.value,e.w.unit,null,b.dimensions.w,null,b.pxLength.w),null===b)return null;return{h:h,w:b}}),new n(k.ns_tts,"fontFamily","default",["p","span"],!0,!0,function(b){b=b.split(",");var d=[],g;for(g in b)"'"!==b[g].charAt(0)&&'"'!==b[g].charAt(0)?"default"===b[g]?d.push("monospaceSerif"):d.push(b[g]):d.push(b[g]);return d},null),new n(k.ns_tts,"shear","0%",["p"],!0,!0,d.parseLength,function(b,d,g,e){if("%"===e.unit)b=100<Math.abs(e.value)?100*Math.sign(e.value):e.value;
else return null;return b}),new n(k.ns_tts,"fontSize","1c",["p","span"],!0,!0,d.parseLength,function(b,h,k,e,l){return d.toComputedLength(e.value,e.unit,null!==h?h.styleAttrs[g.byName.fontSize.qname]:b.cellLength.h,null!==h?h.styleAttrs[g.byName.fontSize.qname]:b.cellLength.h,b.cellLength.h,b.pxLength.h)}),new n(k.ns_tts,"fontStyle","normal",["span"],!0,!0,function(b){return b},null),new n(k.ns_tts,"fontWeight","normal",["span"],!0,!0,function(b){return b},null),new n(k.ns_tts,"lineHeight","normal",
["p"],!0,!0,function(b){return"normal"===b?b:d.parseLength(b)},function(b,h,k,e,l){if("normal"===e)b=e;else if(b=d.toComputedLength(e.value,e.unit,k.styleAttrs[g.byName.fontSize.qname],k.styleAttrs[g.byName.fontSize.qname],b.cellLength.h,b.pxLength.h),null===b)return null;return b}),new n(k.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new n(k.ns_tts,"origin","auto",["region"],!1,!0,function(b){if("auto"===b)return b;var h=b.split(" ");if(2!==h.length)return null;b=d.parseLength(h[0]);return(h=
d.parseLength(h[1]))&&b?{h:h,w:b}:null},function(b,h,g,e,k){if("auto"===e)h=new d.ComputedLength(0,0);else if(h=d.toComputedLength(e.h.value,e.h.unit,null,b.dimensions.h,null,b.pxLength.h),null===h)return null;if("auto"===e)b=new d.ComputedLength(0,0);else if(b=d.toComputedLength(e.w.value,e.w.unit,null,b.dimensions.w,null,b.pxLength.w),null===b)return null;return{h:h,w:b}}),new n(k.ns_tts,"overflow","hidden",["region"],!1,!0,function(b){return b},null),new n(k.ns_tts,"padding","0px",["region"],!1,
!0,function(b){b=b.split(" ");if(4<b.length)return null;var h=[],g;for(g in b){var e=d.parseLength(b[g]);if(!e)return null;h.push(e)}return h},function(b,h,k,e,l){if(1===e.length)h=[e[0],e[0],e[0],e[0]];else if(2===e.length)h=[e[0],e[1],e[0],e[1]];else if(3===e.length)h=[e[0],e[1],e[2],e[1]];else if(4===e.length)h=[e[0],e[1],e[2],e[3]];else return null;e=k.styleAttrs[g.byName.writingMode.qname];if("lrtb"===e||"lr"===e)h=[h[0],h[3],h[2],h[1]];else if("rltb"===e||"rl"===e)h=[h[0],h[1],h[2],h[3]];else if("tblr"===
e)h=[h[3],h[0],h[1],h[2]];else if("tbrl"===e||"tb"===e)h=[h[3],h[2],h[1],h[0]];else return null;e=[];for(var n in h)if(0===h[n].value)e[n]=new d.ComputedLength(0,0);else if(e[n]=d.toComputedLength(h[n].value,h[n].unit,k.styleAttrs[g.byName.fontSize.qname],"0"===n||"2"===n?k.styleAttrs[g.byName.extent.qname].h:k.styleAttrs[g.byName.extent.qname].w,"0"===n||"2"===n?b.cellLength.h:b.cellLength.w,"0"===n||"2"===n?b.pxLength.h:b.pxLength.w),null===e[n])return null;return e}),new n(k.ns_tts,"position",
"top left",["region"],!1,!0,function(b){return d.parsePosition(b)},function(b,h,k,e){h=d.toComputedLength(e.v.offset.value,e.v.offset.unit,null,new d.ComputedLength(-k.styleAttrs[g.byName.extent.qname].h.rw,b.dimensions.h.rh-k.styleAttrs[g.byName.extent.qname].h.rh),null,b.pxLength.h);if(null===h)return null;"bottom"===e.v.edge&&(h=new d.ComputedLength(-h.rw-k.styleAttrs[g.byName.extent.qname].h.rw,b.dimensions.h.rh-h.rh-k.styleAttrs[g.byName.extent.qname].h.rh));var l=d.toComputedLength(e.h.offset.value,
e.h.offset.unit,null,new d.ComputedLength(b.dimensions.w.rw-k.styleAttrs[g.byName.extent.qname].w.rw,-k.styleAttrs[g.byName.extent.qname].w.rh),null,b.pxLength.w);if(null===h)return null;"right"===e.h.edge&&(l=new d.ComputedLength(b.dimensions.w.rw-l.rw-k.styleAttrs[g.byName.extent.qname].w.rw,-l.rh-k.styleAttrs[g.byName.extent.qname].w.rh));return{h:h,w:l}}),new n(k.ns_tts,"ruby","none",["span"],!1,!0,function(b){return b},null),new n(k.ns_tts,"rubyAlign","center",["span"],!0,!0,function(b){return"center"!==
b&&"spaceAround"!==b?null:b},null),new n(k.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(b){return b},null),new n(k.ns_tts,"rubyReserve","none",["p"],!0,!0,function(b){var h=b.split(" ");b=[null,null];if(0===h.length||2<h.length||"none"!==h[0]&&"both"!==h[0]&&"after"!==h[0]&&"before"!==h[0]&&"outside"!==h[0])return null;b[0]=h[0];if(2===h.length&&"none"!==h[0])if(h=d.parseLength(h[1]))b[1]=h;else return null;return b},function(b,h,k,e,l){if("none"===e[0])return e;b=null===e[1]?new d.ComputedLength(.5*
k.styleAttrs[g.byName.fontSize.qname].rw,.5*k.styleAttrs[g.byName.fontSize.qname].rh):d.toComputedLength(e[1].value,e[1].unit,k.styleAttrs[g.byName.fontSize.qname],k.styleAttrs[g.byName.fontSize.qname],b.cellLength.h,b.pxLength.h);return null===b?null:[e[0],b]}),new n(k.ns_tts,"showBackground","whenActive",["region"],!1,!0,function(b){return b},null),new n(k.ns_tts,"textAlign","start",["p"],!0,!0,function(b){return b},function(b,d,g,e,k){return"left"===e?"start":"right"===e?"end":e}),new n(k.ns_tts,
"textCombine","none",["span"],!0,!0,function(b){b=b.split(" ");return 1!==b.length||"none"!==b[0]&&"all"!==b[0]?null:[b[0]]},null),new n(k.ns_tts,"textDecoration","none",["span"],!0,!0,function(b){return b.split(" ")},null),new n(k.ns_tts,"textEmphasis","none",["span"],!0,!0,function(b){b=b.split(" ");var h={style:null,symbol:null,color:null,position:null},g;for(g in b)if("none"===b[g]||"auto"===b[g])h.style=b[g];else if("filled"===b[g]||"open"===b[g])h.style=b[g];else if("circle"===b[g]||"dot"===
b[g]||"sesame"===b[g])h.symbol=b[g];else if("current"===b[g])h.color=b[g];else if("outside"===b[g]||"before"===b[g]||"after"===b[g])h.position=b[g];else if(h.color=d.parseColor(b[g]),null===h.color)return null;null==h.style&&null==h.symbol?h.style="auto":(h.symbol=h.symbol||"circle",h.style=h.style||"filled");h.position=h.position||"outside";h.color=h.color||"current";return h},null),new n(k.ns_tts,"textOutline","none",["span"],!0,!0,function(b){if("none"===b)return b;var h={};b=b.split(" ");if(0===
b.length||2<b.length)return null;var g=d.parseColor(b[0]);h.color=g;null!==g&&b.shift();if(1!==b.length)return null;b=d.parseLength(b[0]);if(!b)return null;h.thickness=b;return h},function(b,h,k,e,l){if("none"===e)return e;h={};h.color=null===e.color?k.styleAttrs[g.byName.color.qname]:e.color;h.thickness=d.toComputedLength(e.thickness.value,e.thickness.unit,k.styleAttrs[g.byName.fontSize.qname],k.styleAttrs[g.byName.fontSize.qname],b.cellLength.h,b.pxLength.h);return null===h.thickness?null:h}),new n(k.ns_tts,
"textShadow","none",["span"],!0,!0,d.parseTextShadow,function(b,h,k,e){if("none"===e)return e;h=[];for(var l in e){var n={};n.x_off=d.toComputedLength(e[l][0].value,e[l][0].unit,null,k.styleAttrs[g.byName.fontSize.qname],null,b.pxLength.w);if(null===n.x_off)return null;n.y_off=d.toComputedLength(e[l][1].value,e[l][1].unit,null,k.styleAttrs[g.byName.fontSize.qname],null,b.pxLength.h);if(null===n.y_off)return null;if(null===e[l][2])n.b_radius=0;else if(n.b_radius=d.toComputedLength(e[l][2].value,e[l][2].unit,
null,k.styleAttrs[g.byName.fontSize.qname],null,b.pxLength.h),null===n.b_radius)return null;n.color=null===e[l][3]?k.styleAttrs[g.byName.color.qname]:e[l][3];h.push(n)}return h}),new n(k.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(b){return b},null),new n(k.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(b){return b},null),new n(k.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(b){return b},null),new n(k.ns_tts,"writingMode","lrtb",["region"],!1,!0,
function(b){return b},null),new n(k.ns_tts,"zIndex","auto",["region"],!1,!0,function(b){"auto"!==b&&(b=parseInt(b),isNaN(b)&&(b=null));return b},null),new n(k.ns_ebutts,"linePadding","0c",["p"],!0,!1,d.parseLength,function(b,h,g,e,k){return d.toComputedLength(e.value,e.unit,null,null,b.cellLength.w,null)}),new n(k.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(b){return b},null),new n(k.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(b){return b},null),new n(k.ns_itts,"forcedDisplay",
"false",["body","div","p","region","span"],!0,!0,function(b){return"true"===b?!0:!1},null),new n(k.ns_itts,"fillLineGap","true",["p"],!0,!0,function(b){return"true"===b?!0:!1},null)];g.byQName={};for(var l in g.all)g.byQName[g.all[l].qname]=g.all[l];g.byName={};for(var p in g.all)g.byName[g.all[p].name]=g.all[p]})("undefined"===typeof p?this.imscStyles={}:p,"undefined"===typeof imscNames?g("./names"):imscNames,"undefined"===typeof imscUtils?g("./utils"):imscUtils)},{"./names":31,"./utils":33}],33:[function(g,
t,p){(function(g){var k=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,d=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,n=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,l={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,
255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};g.parseColor=function(b){var h,g=null,e=l[b.toLowerCase()];void 0!==e?g=e:null!==(h=k.exec(b))?g=[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16),void 0!==h[4]?parseInt(h[4],16):255]:null!==(h=d.exec(b))?g=[parseInt(h[1]),parseInt(h[2]),parseInt(h[3]),255]:null!==(h=n.exec(b))&&(g=[parseInt(h[1]),parseInt(h[2]),parseInt(h[3]),parseInt(h[4])]);return g};var p=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;
g.parseLength=function(b){var d,g=null;null!==(d=p.exec(b))&&(g={value:parseFloat(d[1]),unit:d[2]});return g};g.parseTextShadow=function(b){b=b.split(",");var d=[],k;for(k in b){var e=b[k].split(" ");if(1===e.length&&"none"===e[0])return"none";if(1<e.length&&5>e.length){var l=[null,null,null,null],n=g.parseLength(e.shift());if(null===n)return null;l[0]=n;n=g.parseLength(e.shift());if(null===n)return null;l[1]=n;if(0!==e.length&&(n=g.parseLength(e[0]),null!==n&&(l[2]=n,e.shift()),0!==e.length)){e=
g.parseColor(e[0]);if(null===e)return null;l[3]=e}d.push(l)}}return d};g.parsePosition=function(b){b=b.split(" ");var d=function(b){return"center"===b||"left"===b||"top"===b||"bottom"===b||"right"===b};if(4<b.length)return null;for(var k in b)if(!d(b[k])){var e=g.parseLength(b[k]);if(null===e)return null;b[k]=e}k={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(e=0;e<b.length;){var l=b[e++];if(d(l)){var n={value:0,unit:"%"};2!==b.length&&e<b.length&&!d(b[e])&&
(n=b[e++]);"right"===l?(k.h.edge=l,k.h.offset=n):"bottom"===l?(k.v.edge=l,k.v.offset=n):"left"===l?k.h.offset=n:"top"===l&&(k.v.offset=n)}else if(1===b.length||2===b.length)1===e?k.h.offset=l:k.v.offset=l;else return null}return k};g.ComputedLength=function(b,d){this.rw=b;this.rh=d};g.ComputedLength.prototype.toUsedLength=function(b,d){return b*this.rw+d*this.rh};g.ComputedLength.prototype.multiply=function(b,d){return d?b*d:b};g.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===
this.rh};g.toComputedLength=function(b,d,k,e,l,n){return"%"===d&&e?new g.ComputedLength(e.rw*b/100,e.rh*b/100):"em"===d&&k?new g.ComputedLength(k.rw*b,k.rh*b):"c"===d&&l?new g.ComputedLength(b*l.rw,b*l.rh):"px"===d&&n?new g.ComputedLength(b*n.rw,b*n.rh):"rh"===d?new g.ComputedLength(0,b/100):"rw"===d?new g.ComputedLength(b/100,0):null}})("undefined"===typeof p?this.imscUtils={}:p)},{}]},{},[30])(30)});
