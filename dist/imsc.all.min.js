/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 Determine if an object is a Buffer

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource>  http://mths.be/fromcodepoint v0.1.0 by @mathias */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,h,k){d!=Array.prototype&&d!=Object.prototype&&(d[h]=k.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(d,h,k,b){if(h){k=$jscomp.global;d=d.split(".");for(b=0;b<d.length-1;b++){var e=d[b];e in k||(k[e]={});k=k[e]}d=d[d.length-1];b=k[d];h=h(b);h!=b&&null!=h&&$jscomp.defineProperty(k,d,{configurable:!0,writable:!0,value:h})}};$jscomp.polyfill("Array.prototype.fill",function(d){return d?d:function(d,k,b){var e=this.length||0;0>k&&(k=Math.max(0,e+k));if(null==b||b>e)b=e;b=Number(b);0>b&&(b=Math.max(0,e+b));for(k=Number(k||0);k<b;k++)this[k]=d;return this}},"es6","es3");
$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var d=0;return function(h){return $jscomp.SYMBOL_PREFIX+(h||"")+d++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.asyncIterator;d||(d=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(d){var h=0;return $jscomp.iteratorPrototype(function(){return h<d.length?{done:!1,value:d[h++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};$jscomp.iteratorFromArray=function(d,h){$jscomp.initSymbolIterator();d instanceof String&&(d+="");var k=0,b={next:function(){if(k<d.length){var e=k++;return{value:h(e,d[e]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};
$jscomp.polyfill("Array.prototype.keys",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(d){return d?d:function(){return[]}},"es6","es5");
$jscomp.polyfill("Reflect.ownKeys",function(d){return d?d:function(d){var k=[],b=Object.getOwnPropertyNames(d);d=Object.getOwnPropertySymbols(d);for(var e=0;e<b.length;e++)("jscomp_symbol_"==b[e].substring(0,14)?d:k).push(b[e]);return k.concat(d)}},"es6","es5");
$jscomp.polyfill("String.fromCodePoint",function(d){return d?d:function(d){for(var k="",b=0;b<arguments.length;b++){var e=Number(arguments[b]);if(0>e||1114111<e||e!==Math.floor(e))throw new RangeError("invalid_code_point "+e);65535>=e?k+=String.fromCharCode(e):(e-=65536,k+=String.fromCharCode(e>>>10&1023|55296),k+=String.fromCharCode(e&1023|56320))}return k}},"es6","es3");$jscomp.owns=function(d,h){return Object.prototype.hasOwnProperty.call(d,h)};
$jscomp.polyfill("Object.entries",function(d){return d?d:function(d){var k=[],b;for(b in d)$jscomp.owns(d,b)&&k.push([b,d[b]]);return k}},"es8","es3");$jscomp.polyfill("Math.sign",function(d){return d?d:function(d){d=Number(d);return 0===d||isNaN(d)?d:0<d?1:-1}},"es6","es3");
(function(d){"object"===typeof exports&&"undefined"!==typeof module?module.exports=d():"function"===typeof define&&define.amd?define([],d):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=d()})(function(){return function(){function d(h,k,b){function e(u,D){if(!k[u]){if(!h[u]){var a="function"==typeof require&&require;if(!D&&a)return a(u,!0);if(p)return p(u,!0);D=Error("Cannot find module '"+u+"'");throw D.code="MODULE_NOT_FOUND",D;}D=
k[u]={exports:{}};h[u][0].call(D.exports,function(a){return e(h[u][1][a]||a)},D,D.exports,d,h,k,b)}return k[u].exports}for(var p="function"==typeof require&&require,u=0;u<b.length;u++)e(b[u]);return e}return d}()({1:[function(d,h,k){function b(b){var a=b.length;if(0<a%4)throw Error("Invalid string. Length must be a multiple of 4");b=b.indexOf("=");-1===b&&(b=a);return[b,b===a?0:4-b%4]}function e(b,a,e){for(var d=[],q=a;q<e;q+=3)a=(b[q]<<16&16711680)+(b[q+1]<<8&65280)+(b[q+2]&255),d.push(p[a>>18&63]+
p[a>>12&63]+p[a>>6&63]+p[a&63]);return d.join("")}k.byteLength=function(e){e=b(e);var a=e[1];return 3*(e[0]+a)/4-a};k.toByteArray=function(e){var a=b(e);var q=a[0];a=a[1];var d=new v(3*(q+a)/4-a),p=0,D=0<a?q-4:q,x;for(x=0;x<D;x+=4)q=u[e.charCodeAt(x)]<<18|u[e.charCodeAt(x+1)]<<12|u[e.charCodeAt(x+2)]<<6|u[e.charCodeAt(x+3)],d[p++]=q>>16&255,d[p++]=q>>8&255,d[p++]=q&255;2===a&&(q=u[e.charCodeAt(x)]<<2|u[e.charCodeAt(x+1)]>>4,d[p++]=q&255);1===a&&(q=u[e.charCodeAt(x)]<<10|u[e.charCodeAt(x+1)]<<4|u[e.charCodeAt(x+
2)]>>2,d[p++]=q>>8&255,d[p++]=q&255);return d};k.fromByteArray=function(b){for(var a=b.length,d=a%3,u=[],A=0,D=a-d;A<D;A+=16383)u.push(e(b,A,A+16383>D?D:A+16383));1===d?(b=b[a-1],u.push(p[b>>2]+p[b<<4&63]+"==")):2===d&&(b=(b[a-2]<<8)+b[a-1],u.push(p[b>>10]+p[b>>4&63]+p[b<<2&63]+"="));return u.join("")};var p=[],u=[],v="undefined"!==typeof Uint8Array?Uint8Array:Array;for(d=0;64>d;++d)p[d]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d],u["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(d)]=
d;u[45]=62;u[95]=63},{}],2:[function(d,h,k){},{}],3:[function(d,h,k){(function(b){function e(g){if(2147483647<g)throw new RangeError('The value "'+g+'" is invalid for option "size"');g=new Uint8Array(g);g.__proto__=b.prototype;return g}function b(g,r,f){if("number"===typeof g){if("string"===typeof r)throw new TypeError('The "string" argument must be of type string. Received type number');return v(g)}return p(g,r,f)}function p(g,r,f){if("string"===typeof g){var l=r;if("string"!==typeof l||""===l)l=
"utf8";if(!b.isEncoding(l))throw new TypeError("Unknown encoding: "+l);r=w(g,l)|0;f=e(r);g=f.write(g,l);g!==r&&(f=f.slice(0,g));return f}if(ArrayBuffer.isView(g))return D(g);if(null==g)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(M(g,ArrayBuffer)||g&&M(g.buffer,ArrayBuffer)){if(0>r||g.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<r+(f||0))throw new RangeError('"length" is outside of buffer bounds');
g=void 0===r&&void 0===f?new Uint8Array(g):void 0===f?new Uint8Array(g,r):new Uint8Array(g,r,f);g.__proto__=b.prototype;return g}if("number"===typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');l=g.valueOf&&g.valueOf();if(null!=l&&l!==g)return b.from(l,r,f);if(l=a(g))return l;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof g[Symbol.toPrimitive])return b.from(g[Symbol.toPrimitive]("string"),r,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof g);}function u(g){if("number"!==typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+g+'" is invalid for option "size"');}function v(g){u(g);return e(0>g?0:q(g)|0)}function D(g){for(var r=0>g.length?0:q(g.length)|0,f=e(r),l=0;l<r;l+=1)f[l]=g[l]&255;return f}function a(g){if(b.isBuffer(g)){var r=q(g.length)|0,f=e(r);if(0===f.length)return f;g.copy(f,0,0,r);return f}if(void 0!==g.length)return(r="number"!==typeof g.length)||(r=g.length,
r=r!==r),r?e(0):D(g);if("Buffer"===g.type&&Array.isArray(g.data))return D(g.data)}function q(g){if(2147483647<=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return g|0}function w(g,r){if(b.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||M(g,ArrayBuffer))return g.byteLength;if("string"!==typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);var f=
g.length,l=2<arguments.length&&!0===arguments[2];if(!l&&0===f)return 0;for(var a=!1;;)switch(r){case "ascii":case "latin1":case "binary":return f;case "utf8":case "utf-8":return m(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*f;case "hex":return f>>>1;case "base64":return N.toByteArray(n(g)).length;default:if(a)return l?-1:m(g).length;r=(""+r).toLowerCase();a=!0}}function A(g,r,f){var l=!1;if(void 0===r||0>r)r=0;if(r>this.length)return"";if(void 0===f||f>this.length)f=
this.length;if(0>=f)return"";f>>>=0;r>>>=0;if(f<=r)return"";for(g||(g="utf8");;)switch(g){case "hex":g=r;r=f;f=this.length;if(!g||0>g)g=0;if(!r||0>r||r>f)r=f;l="";for(f=g;f<r;++f)g=l,l=this[f],l=16>l?"0"+l.toString(16):l.toString(16),l=g+l;return l;case "utf8":case "utf-8":return F(this,r,f);case "ascii":g="";for(f=Math.min(this.length,f);r<f;++r)g+=String.fromCharCode(this[r]&127);return g;case "latin1":case "binary":g="";for(f=Math.min(this.length,f);r<f;++r)g+=String.fromCharCode(this[r]);return g;
case "base64":return r=0===r&&f===this.length?N.fromByteArray(this):N.fromByteArray(this.slice(r,f)),r;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":r=this.slice(r,f);f="";for(g=0;g<r.length;g+=2)f+=String.fromCharCode(r[g]+256*r[g+1]);return f;default:if(l)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase();l=!0}}function y(g,r,f){var l=g[r];g[r]=g[f];g[f]=l}function x(g,r,f,l,a){if(0===g.length)return-1;"string"===typeof f?(l=f,f=0):2147483647<f?f=2147483647:-2147483648>
f&&(f=-2147483648);f=+f;f!==f&&(f=a?0:g.length-1);0>f&&(f=g.length+f);if(f>=g.length){if(a)return-1;f=g.length-1}else if(0>f)if(a)f=0;else return-1;"string"===typeof r&&(r=b.from(r,l));if(b.isBuffer(r))return 0===r.length?-1:h(g,r,f,l,a);if("number"===typeof r)return r&=255,"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(g,r,f):Uint8Array.prototype.lastIndexOf.call(g,r,f):h(g,[r],f,l,a);throw new TypeError("val must be string, number or Buffer");}function h(g,
r,f,l,a){function c(g,f){return 1===b?g[f]:g.readUInt16BE(f*b)}var b=1,n=g.length,e=r.length;if(void 0!==l&&(l=String(l).toLowerCase(),"ucs2"===l||"ucs-2"===l||"utf16le"===l||"utf-16le"===l)){if(2>g.length||2>r.length)return-1;b=2;n/=2;e/=2;f/=2}if(a)for(l=-1;f<n;f++)if(c(g,f)===c(r,-1===l?0:f-l)){if(-1===l&&(l=f),f-l+1===e)return l*b}else-1!==l&&(f-=f-l),l=-1;else for(f+e>n&&(f=n-e);0<=f;f--){n=!0;for(l=0;l<e;l++)if(c(g,f+l)!==c(r,l)){n=!1;break}if(n)return f}return-1}function F(g,r,f){f=Math.min(g.length,
f);for(var l=[];r<f;){var a=g[r],c=null,b=239<a?4:223<a?3:191<a?2:1;if(r+b<=f)switch(b){case 1:128>a&&(c=a);break;case 2:var n=g[r+1];128===(n&192)&&(a=(a&31)<<6|n&63,127<a&&(c=a));break;case 3:n=g[r+1];var e=g[r+2];128===(n&192)&&128===(e&192)&&(a=(a&15)<<12|(n&63)<<6|e&63,2047<a&&(55296>a||57343<a)&&(c=a));break;case 4:n=g[r+1];e=g[r+2];var m=g[r+3];128===(n&192)&&128===(e&192)&&128===(m&192)&&(a=(a&15)<<18|(n&63)<<12|(e&63)<<6|m&63,65535<a&&1114112>a&&(c=a))}null===c?(c=65533,b=1):65535<c&&(c-=
65536,l.push(c>>>10&1023|55296),c=56320|c&1023);l.push(c);r+=b}g=l.length;if(g<=E)l=String.fromCharCode.apply(String,l);else{f="";for(r=0;r<g;)f+=String.fromCharCode.apply(String,l.slice(r,r+=E));l=f}return l}function z(g,a,f){if(0!==g%1||0>g)throw new RangeError("offset is not uint");if(g+a>f)throw new RangeError("Trying to access beyond buffer length");}function C(g,a,f,l,c,n){if(!b.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>c||a<n)throw new RangeError('"value" argument is out of bounds');
if(f+l>g.length)throw new RangeError("Index out of range");}function I(g,a,f,l,c,b){if(f+l>g.length)throw new RangeError("Index out of range");if(0>f)throw new RangeError("Index out of range");}function c(g,a,f,l,c){a=+a;f>>>=0;c||I(g,a,f,4,3.4028234663852886E38,-3.4028234663852886E38);K.write(g,a,f,l,23,4);return f+4}function B(g,a,f,l,c){a=+a;f>>>=0;c||I(g,a,f,8,1.7976931348623157E308,-1.7976931348623157E308);K.write(g,a,f,l,52,8);return f+8}function n(g){g=g.split("=")[0];g=g.trim().replace(S,
"");if(2>g.length)return"";for(;0!==g.length%4;)g+="=";return g}function m(g,a){a=a||Infinity;for(var f,l=g.length,r=null,c=[],b=0;b<l;++b){f=g.charCodeAt(b);if(55295<f&&57344>f){if(!r){if(56319<f){-1<(a-=3)&&c.push(239,191,189);continue}else if(b+1===l){-1<(a-=3)&&c.push(239,191,189);continue}r=f;continue}if(56320>f){-1<(a-=3)&&c.push(239,191,189);r=f;continue}f=(r-55296<<10|f-56320)+65536}else r&&-1<(a-=3)&&c.push(239,191,189);r=null;if(128>f){if(0>--a)break;c.push(f)}else if(2048>f){if(0>(a-=2))break;
c.push(f>>6|192,f&63|128)}else if(65536>f){if(0>(a-=3))break;c.push(f>>12|224,f>>6&63|128,f&63|128)}else if(1114112>f){if(0>(a-=4))break;c.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw Error("Invalid code point");}return c}function H(g){for(var a=[],f=0;f<g.length;++f)a.push(g.charCodeAt(f)&255);return a}function J(g,a,f,l){for(var r=0;r<l&&!(r+f>=a.length||r>=g.length);++r)a[r+f]=g[r];return r}function M(g,a){return g instanceof a||null!=g&&null!=g.constructor&&null!=g.constructor.name&&
g.constructor.name===a.name}var N=d("base64-js"),K=d("ieee754");k.Buffer=b;k.SlowBuffer=function(g){+g!=g&&(g=0);return b.alloc(+g)};k.INSPECT_MAX_BYTES=50;k.kMaxLength=2147483647;b.TYPED_ARRAY_SUPPORT=function(){try{var g=new Uint8Array(1);g.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===g.foo()}catch(r){return!1}}();b.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}});Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});b.poolSize=8192;b.from=function(g,a,f){return p(g,a,f)};b.prototype.__proto__=Uint8Array.prototype;
b.__proto__=Uint8Array;b.alloc=function(g,a,f){u(g);g=0>=g?e(g):void 0!==a?"string"===typeof f?e(g).fill(a,f):e(g).fill(a):e(g);return g};b.allocUnsafe=function(g){return v(g)};b.allocUnsafeSlow=function(g){return v(g)};b.isBuffer=function(g){return null!=g&&!0===g._isBuffer&&g!==b.prototype};b.compare=function(g,a){M(g,Uint8Array)&&(g=b.from(g,g.offset,g.byteLength));M(a,Uint8Array)&&(a=b.from(a,a.offset,a.byteLength));if(!b.isBuffer(g)||!b.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(g===a)return 0;for(var f=g.length,l=a.length,c=0,r=Math.min(f,l);c<r;++c)if(g[c]!==a[c]){f=g[c];l=a[c];break}return f<l?-1:l<f?1:0};b.isEncoding=function(g){switch(String(g).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};b.concat=function(g,a){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(0===g.length)return b.alloc(0);
var f;if(void 0===a)for(f=a=0;f<g.length;++f)a+=g[f].length;a=b.allocUnsafe(a);var l=0;for(f=0;f<g.length;++f){var c=g[f];M(c,Uint8Array)&&(c=b.from(c));if(!b.isBuffer(c))throw new TypeError('"list" argument must be an Array of Buffers');c.copy(a,l);l+=c.length}return a};b.byteLength=w;b.prototype._isBuffer=!0;b.prototype.swap16=function(){var g=this.length;if(0!==g%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<g;a+=2)y(this,a,a+1);return this};b.prototype.swap32=
function(){var g=this.length;if(0!==g%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<g;a+=4)y(this,a,a+3),y(this,a+1,a+2);return this};b.prototype.swap64=function(){var g=this.length;if(0!==g%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<g;a+=8)y(this,a,a+7),y(this,a+1,a+6),y(this,a+2,a+5),y(this,a+3,a+4);return this};b.prototype.toString=function(){var g=this.length;return 0===g?"":0===arguments.length?F(this,0,g):A.apply(this,
arguments)};b.prototype.toLocaleString=b.prototype.toString;b.prototype.equals=function(g){if(!b.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:0===b.compare(this,g)};b.prototype.inspect=function(){var g=k.INSPECT_MAX_BYTES;var a=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim();this.length>g&&(a+=" ... ");return"<Buffer "+a+">"};b.prototype.compare=function(g,a,f,l,c){M(g,Uint8Array)&&(g=b.from(g,g.offset,g.byteLength));if(!b.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof g);void 0===a&&(a=0);void 0===f&&(f=g?g.length:0);void 0===l&&(l=0);void 0===c&&(c=this.length);if(0>a||f>g.length||0>l||c>this.length)throw new RangeError("out of range index");if(l>=c&&a>=f)return 0;if(l>=c)return-1;if(a>=f)return 1;a>>>=0;f>>>=0;l>>>=0;c>>>=0;if(this===g)return 0;var r=c-l,n=f-a,e=Math.min(r,n);l=this.slice(l,c);g=g.slice(a,f);for(a=0;a<e;++a)if(l[a]!==g[a]){r=l[a];n=g[a];break}return r<n?-1:n<r?1:0};b.prototype.includes=function(g,a,f){return-1!==this.indexOf(g,a,f)};b.prototype.indexOf=
function(g,a,f){return x(this,g,a,f,!0)};b.prototype.lastIndexOf=function(g,a,f){return x(this,g,a,f,!1)};b.prototype.write=function(g,a,f,l){if(void 0===a)l="utf8",f=this.length,a=0;else if(void 0===f&&"string"===typeof a)l=a,f=this.length,a=0;else if(isFinite(a))a>>>=0,isFinite(f)?(f>>>=0,void 0===l&&(l="utf8")):(l=f,f=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var c=this.length-a;if(void 0===f||f>c)f=c;if(0<g.length&&(0>f||0>a)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");
l||(l="utf8");for(c=!1;;)switch(l){case "hex":a:{a=Number(a)||0;l=this.length-a;f?(f=Number(f),f>l&&(f=l)):f=l;l=g.length;f>l/2&&(f=l/2);for(l=0;l<f;++l){c=parseInt(g.substr(2*l,2),16);if(c!==c){g=l;break a}this[a+l]=c}g=l}return g;case "utf8":case "utf-8":return J(m(g,this.length-a),this,a,f);case "ascii":return J(H(g),this,a,f);case "latin1":case "binary":return J(H(g),this,a,f);case "base64":return J(N.toByteArray(n(g)),this,a,f);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":l=g;c=this.length-
a;for(var b=[],r=0;r<l.length&&!(0>(c-=2));++r){var e=l.charCodeAt(r);g=e>>8;e%=256;b.push(e);b.push(g)}return J(b,this,a,f);default:if(c)throw new TypeError("Unknown encoding: "+l);l=(""+l).toLowerCase();c=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;b.prototype.slice=function(a,c){var g=this.length;a=~~a;c=void 0===c?g:~~c;0>a?(a+=g,0>a&&(a=0)):a>g&&(a=g);0>c?(c+=g,0>c&&(c=0)):c>g&&(c=g);c<a&&(c=a);a=this.subarray(a,c);a.__proto__=
b.prototype;return a};b.prototype.readUIntLE=function(a,c,f){a>>>=0;c>>>=0;f||z(a,c,this.length);f=this[a];for(var g=1,b=0;++b<c&&(g*=256);)f+=this[a+b]*g;return f};b.prototype.readUIntBE=function(a,c,f){a>>>=0;c>>>=0;f||z(a,c,this.length);f=this[a+--c];for(var g=1;0<c&&(g*=256);)f+=this[a+--c]*g;return f};b.prototype.readUInt8=function(a,c){a>>>=0;c||z(a,1,this.length);return this[a]};b.prototype.readUInt16LE=function(a,c){a>>>=0;c||z(a,2,this.length);return this[a]|this[a+1]<<8};b.prototype.readUInt16BE=
function(a,c){a>>>=0;c||z(a,2,this.length);return this[a]<<8|this[a+1]};b.prototype.readUInt32LE=function(a,c){a>>>=0;c||z(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};b.prototype.readUInt32BE=function(a,c){a>>>=0;c||z(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};b.prototype.readIntLE=function(a,c,f){a>>>=0;c>>>=0;f||z(a,c,this.length);f=this[a];for(var g=1,b=0;++b<c&&(g*=256);)f+=this[a+b]*g;f>=128*g&&(f-=Math.pow(2,8*c));return f};
b.prototype.readIntBE=function(a,c,f){a>>>=0;c>>>=0;f||z(a,c,this.length);f=c;for(var g=1,b=this[a+--f];0<f&&(g*=256);)b+=this[a+--f]*g;b>=128*g&&(b-=Math.pow(2,8*c));return b};b.prototype.readInt8=function(a,c){a>>>=0;c||z(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};b.prototype.readInt16LE=function(a,c){a>>>=0;c||z(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};b.prototype.readInt16BE=function(a,c){a>>>=0;c||z(a,2,this.length);a=this[a+1]|this[a]<<8;return a&
32768?a|4294901760:a};b.prototype.readInt32LE=function(a,c){a>>>=0;c||z(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};b.prototype.readInt32BE=function(a,c){a>>>=0;c||z(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};b.prototype.readFloatLE=function(a,c){a>>>=0;c||z(a,4,this.length);return K.read(this,a,!0,23,4)};b.prototype.readFloatBE=function(a,c){a>>>=0;c||z(a,4,this.length);return K.read(this,a,!1,23,4)};b.prototype.readDoubleLE=function(a,
c){a>>>=0;c||z(a,8,this.length);return K.read(this,a,!0,52,8)};b.prototype.readDoubleBE=function(a,c){a>>>=0;c||z(a,8,this.length);return K.read(this,a,!1,52,8)};b.prototype.writeUIntLE=function(a,c,f,l){a=+a;c>>>=0;f>>>=0;l||C(this,a,c,f,Math.pow(2,8*f)-1,0);l=1;var g=0;for(this[c]=a&255;++g<f&&(l*=256);)this[c+g]=a/l&255;return c+f};b.prototype.writeUIntBE=function(a,c,f,l){a=+a;c>>>=0;f>>>=0;l||C(this,a,c,f,Math.pow(2,8*f)-1,0);l=f-1;var g=1;for(this[c+l]=a&255;0<=--l&&(g*=256);)this[c+l]=a/g&
255;return c+f};b.prototype.writeUInt8=function(a,c,f){a=+a;c>>>=0;f||C(this,a,c,1,255,0);this[c]=a&255;return c+1};b.prototype.writeUInt16LE=function(a,c,f){a=+a;c>>>=0;f||C(this,a,c,2,65535,0);this[c]=a&255;this[c+1]=a>>>8;return c+2};b.prototype.writeUInt16BE=function(a,c,f){a=+a;c>>>=0;f||C(this,a,c,2,65535,0);this[c]=a>>>8;this[c+1]=a&255;return c+2};b.prototype.writeUInt32LE=function(a,c,f){a=+a;c>>>=0;f||C(this,a,c,4,4294967295,0);this[c+3]=a>>>24;this[c+2]=a>>>16;this[c+1]=a>>>8;this[c]=a&
255;return c+4};b.prototype.writeUInt32BE=function(a,c,f){a=+a;c>>>=0;f||C(this,a,c,4,4294967295,0);this[c]=a>>>24;this[c+1]=a>>>16;this[c+2]=a>>>8;this[c+3]=a&255;return c+4};b.prototype.writeIntLE=function(a,c,f,l){a=+a;c>>>=0;l||(l=Math.pow(2,8*f-1),C(this,a,c,f,l-1,-l));l=0;var g=1,b=0;for(this[c]=a&255;++l<f&&(g*=256);)0>a&&0===b&&0!==this[c+l-1]&&(b=1),this[c+l]=(a/g>>0)-b&255;return c+f};b.prototype.writeIntBE=function(a,c,f,l){a=+a;c>>>=0;l||(l=Math.pow(2,8*f-1),C(this,a,c,f,l-1,-l));l=f-
1;var g=1,b=0;for(this[c+l]=a&255;0<=--l&&(g*=256);)0>a&&0===b&&0!==this[c+l+1]&&(b=1),this[c+l]=(a/g>>0)-b&255;return c+f};b.prototype.writeInt8=function(a,c,f){a=+a;c>>>=0;f||C(this,a,c,1,127,-128);0>a&&(a=255+a+1);this[c]=a&255;return c+1};b.prototype.writeInt16LE=function(a,c,f){a=+a;c>>>=0;f||C(this,a,c,2,32767,-32768);this[c]=a&255;this[c+1]=a>>>8;return c+2};b.prototype.writeInt16BE=function(a,c,f){a=+a;c>>>=0;f||C(this,a,c,2,32767,-32768);this[c]=a>>>8;this[c+1]=a&255;return c+2};b.prototype.writeInt32LE=
function(a,c,f){a=+a;c>>>=0;f||C(this,a,c,4,2147483647,-2147483648);this[c]=a&255;this[c+1]=a>>>8;this[c+2]=a>>>16;this[c+3]=a>>>24;return c+4};b.prototype.writeInt32BE=function(a,c,f){a=+a;c>>>=0;f||C(this,a,c,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);this[c]=a>>>24;this[c+1]=a>>>16;this[c+2]=a>>>8;this[c+3]=a&255;return c+4};b.prototype.writeFloatLE=function(a,b,f){return c(this,a,b,!0,f)};b.prototype.writeFloatBE=function(a,b,f){return c(this,a,b,!1,f)};b.prototype.writeDoubleLE=function(a,
c,f){return B(this,a,c,!0,f)};b.prototype.writeDoubleBE=function(a,c,f){return B(this,a,c,!1,f)};b.prototype.copy=function(a,c,f,l){if(!b.isBuffer(a))throw new TypeError("argument should be a Buffer");f||(f=0);l||0===l||(l=this.length);c>=a.length&&(c=a.length);c||(c=0);0<l&&l<f&&(l=f);if(l===f||0===a.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>f||f>=this.length)throw new RangeError("Index out of range");if(0>l)throw new RangeError("sourceEnd out of bounds");
l>this.length&&(l=this.length);a.length-c<l-f&&(l=a.length-c+f);var g=l-f;if(this===a&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(c,f,l);else if(this===a&&f<c&&c<l)for(l=g-1;0<=l;--l)a[l+c]=this[l+f];else Uint8Array.prototype.set.call(a,this.subarray(f,l),c);return g};b.prototype.fill=function(a,c,f,l){if("string"===typeof a){"string"===typeof c?(l=c,c=0,f=this.length):"string"===typeof f&&(l=f,f=this.length);if(void 0!==l&&"string"!==typeof l)throw new TypeError("encoding must be a string");
if("string"===typeof l&&!b.isEncoding(l))throw new TypeError("Unknown encoding: "+l);if(1===a.length){var g=a.charCodeAt(0);if("utf8"===l&&128>g||"latin1"===l)a=g}}else"number"===typeof a&&(a&=255);if(0>c||this.length<c||this.length<f)throw new RangeError("Out of range index");if(f<=c)return this;c>>>=0;f=void 0===f?this.length:f>>>0;a||(a=0);if("number"===typeof a)for(l=c;l<f;++l)this[l]=a;else{g=b.isBuffer(a)?a:b.from(a,l);var n=g.length;if(0===n)throw new TypeError('The value "'+a+'" is invalid for argument "value"');
for(l=0;l<f-c;++l)this[l+c]=g[l%n]}return this};var S=/[^+/0-9A-Za-z-_]/g}).call(this,d("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:6}],4:[function(d,h,k){(function(b){k.isArray=function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)};k.isBoolean=function(b){return"boolean"===typeof b};k.isNull=function(b){return null===b};k.isNullOrUndefined=function(b){return null==b};k.isNumber=function(b){return"number"===typeof b};k.isString=function(b){return"string"===
typeof b};k.isSymbol=function(b){return"symbol"===typeof b};k.isUndefined=function(b){return void 0===b};k.isRegExp=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)};k.isObject=function(b){return"object"===typeof b&&null!==b};k.isDate=function(b){return"[object Date]"===Object.prototype.toString.call(b)};k.isError=function(b){return"[object Error]"===Object.prototype.toString.call(b)||b instanceof Error};k.isFunction=function(b){return"function"===typeof b};k.isPrimitive=function(b){return null===
b||"boolean"===typeof b||"number"===typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b};k.isBuffer=b.isBuffer}).call(this,{isBuffer:d("../../is-buffer/index.js")})},{"../../is-buffer/index.js":8}],5:[function(d,h,k){function b(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=y(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function e(a,d,c,e){var n;if("function"!==typeof c)throw new TypeError('"listener" argument must be a function');
if(n=a._events){n.newListener&&(a.emit("newListener",d,c.listener?c.listener:c),n=a._events);var m=n[d]}else n=a._events=y(null),a._eventsCount=0;m?("function"===typeof m?m=n[d]=e?[c,m]:[m,c]:e?m.unshift(c):m.push(c),m.warned||(c=void 0===a._maxListeners?b.defaultMaxListeners:a._maxListeners)&&0<c&&m.length>c&&(m.warned=!0,c=Error("Possible EventEmitter memory leak detected. "+m.length+' "'+String(d)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),c.name="MaxListenersExceededWarning",
c.emitter=a,c.type=d,c.count=m.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",c.name,c.message))):(n[d]=c,++a._eventsCount);return a}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],
arguments[1],arguments[2]);default:for(var a=Array(arguments.length),b=0;b<a.length;++b)a[b]=arguments[b];this.listener.apply(this.target,a)}}function u(a,b,c){a={fired:!1,wrapFn:void 0,target:a,type:b,listener:c};b=G.call(p,a);b.listener=c;return a.wrapFn=b}function v(b,d,c){b=b._events;if(!b)return[];d=b[d];if(!d)return[];if("function"===typeof d)return c?[d.listener||d]:[d];if(c)for(c=Array(d.length),b=0;b<c.length;++b)c[b]=d[b].listener||d[b];else c=a(d,d.length);return c}function D(a){var b=
this._events;if(b){a=b[a];if("function"===typeof a)return 1;if(a)return a.length}return 0}function a(a,b){for(var c=Array(b),d=0;d<b;++d)c[d]=a[d];return c}function q(a){var b=function(){};b.prototype=a;return new b}function w(a){var b=[],c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return c}function A(a){var b=this;return function(){return b.apply(a,arguments)}}var y=Object.create||q,x=Object.keys||w,G=Function.prototype.bind||A;h.exports=b;b.EventEmitter=b;b.prototype._events=
void 0;b.prototype._maxListeners=void 0;var F=10;try{d={};Object.defineProperty&&Object.defineProperty(d,"x",{value:0});var z=0===d.x}catch(C){z=!1}z?Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return F},set:function(a){if("number"!==typeof a||0>a||a!==a)throw new TypeError('"defaultMaxListeners" must be a positive number');F=a}}):b.defaultMaxListeners=F;b.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw new TypeError('"n" argument must be a positive number');
this._maxListeners=a;return this};b.prototype.getMaxListeners=function(){return void 0===this._maxListeners?b.defaultMaxListeners:this._maxListeners};b.prototype.emit=function(b){var d,c,e;var n="error"===b;if(e=this._events)n=n&&null==e.error;else if(!n)return!1;if(n){1<arguments.length&&(d=arguments[1]);if(d instanceof Error)throw d;e=Error('Unhandled "error" event. ('+d+")");e.context=d;throw e;}d=e[b];if(!d)return!1;e="function"===typeof d;var m=arguments.length;switch(m){case 1:if(e)d.call(this);
else for(e=d.length,d=a(d,e),n=0;n<e;++n)d[n].call(this);break;case 2:n=arguments[1];if(e)d.call(this,n);else for(e=d.length,d=a(d,e),m=0;m<e;++m)d[m].call(this,n);break;case 3:n=arguments[1];m=arguments[2];if(e)d.call(this,n,m);else for(e=d.length,d=a(d,e),c=0;c<e;++c)d[c].call(this,n,m);break;case 4:n=arguments[1];m=arguments[2];c=arguments[3];if(e)d.call(this,n,m,c);else{e=d.length;d=a(d,e);for(var q=0;q<e;++q)d[q].call(this,n,m,c)}break;default:n=Array(m-1);for(c=1;c<m;c++)n[c-1]=arguments[c];
if(e)d.apply(this,n);else for(e=d.length,d=a(d,e),m=0;m<e;++m)d[m].apply(this,n)}return!0};b.prototype.addListener=function(a,b){return e(this,a,b,!1)};b.prototype.on=b.prototype.addListener;b.prototype.prependListener=function(a,b){return e(this,a,b,!0)};b.prototype.once=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');this.on(a,u(this,a,b));return this};b.prototype.prependOnceListener=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');
this.prependListener(a,u(this,a,b));return this};b.prototype.removeListener=function(a,b){var c;if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');var d=this._events;if(!d)return this;var n=d[a];if(!n)return this;if(n===b||n.listener===b)0===--this._eventsCount?this._events=y(null):(delete d[a],d.removeListener&&this.emit("removeListener",a,n.listener||b));else if("function"!==typeof n){var e=-1;for(c=n.length-1;0<=c;c--)if(n[c]===b||n[c].listener===b){var q=n[c].listener;
e=c;break}if(0>e)return this;if(0===e)n.shift();else{c=e+1;for(var p=n.length;c<p;e+=1,c+=1)n[e]=n[c];n.pop()}1===n.length&&(d[a]=n[0]);d.removeListener&&this.emit("removeListener",a,q||b)}return this};b.prototype.removeAllListeners=function(a){var b=this._events;if(!b)return this;if(!b.removeListener)return 0===arguments.length?(this._events=y(null),this._eventsCount=0):b[a]&&(0===--this._eventsCount?this._events=y(null):delete b[a]),this;if(0===arguments.length){var c=x(b);for(b=0;b<c.length;++b){var d=
c[b];"removeListener"!==d&&this.removeAllListeners(d)}this.removeAllListeners("removeListener");this._events=y(null);this._eventsCount=0;return this}c=b[a];if("function"===typeof c)this.removeListener(a,c);else if(c)for(b=c.length-1;0<=b;b--)this.removeListener(a,c[b]);return this};b.prototype.listeners=function(a){return v(this,a,!0)};b.prototype.rawListeners=function(a){return v(this,a,!1)};b.listenerCount=function(a,b){return"function"===typeof a.listenerCount?a.listenerCount(b):D.call(a,b)};b.prototype.listenerCount=
D;b.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],6:[function(d,h,k){k.read=function(b,d,p,u,v){var e=8*v-u-1;var a=(1<<e)-1,q=a>>1,w=-7;v=p?v-1:0;var A=p?-1:1,k=b[d+v];v+=A;p=k&(1<<-w)-1;k>>=-w;for(w+=e;0<w;p=256*p+b[d+v],v+=A,w-=8);e=p&(1<<-w)-1;p>>=-w;for(w+=u;0<w;e=256*e+b[d+v],v+=A,w-=8);if(0===p)p=1-q;else{if(p===a)return e?NaN:Infinity*(k?-1:1);e+=Math.pow(2,u);p-=q}return(k?-1:1)*e*Math.pow(2,p-u)};k.write=function(b,d,p,u,v,D){var a,e=8*
D-v-1,w=(1<<e)-1,A=w>>1,k=23===v?Math.pow(2,-24)-Math.pow(2,-77):0;D=u?0:D-1;var x=u?1:-1,h=0>d||0===d&&0>1/d?1:0;d=Math.abs(d);isNaN(d)||Infinity===d?(d=isNaN(d)?1:0,u=w):(u=Math.floor(Math.log(d)/Math.LN2),1>d*(a=Math.pow(2,-u))&&(u--,a*=2),d=1<=u+A?d+k/a:d+k*Math.pow(2,1-A),2<=d*a&&(u++,a/=2),u+A>=w?(d=0,u=w):1<=u+A?(d=(d*a-1)*Math.pow(2,v),u+=A):(d=d*Math.pow(2,A-1)*Math.pow(2,v),u=0));for(;8<=v;b[p+D]=d&255,D+=x,d/=256,v-=8);u=u<<v|d;for(e+=v;0<e;b[p+D]=u&255,D+=x,u/=256,e-=8);b[p+D-x]|=128*
h}},{}],7:[function(d,h,k){h.exports="function"===typeof Object.create?function(b,d){d&&(b.super_=d,b.prototype=Object.create(d.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}))}:function(b,d){if(d){b.super_=d;var e=function(){};e.prototype=d.prototype;b.prototype=new e;b.prototype.constructor=b}}},{}],8:[function(d,h,k){function b(b){return!!b.constructor&&"function"===typeof b.constructor.isBuffer&&b.constructor.isBuffer(b)}h.exports=function(d){return null!=d&&(b(d)||
"function"===typeof d.readFloatLE&&"function"===typeof d.slice&&b(d.slice(0,0))||!!d._isBuffer)}},{}],9:[function(d,h,k){var b={}.toString;h.exports=Array.isArray||function(d){return"[object Array]"==b.call(d)}},{}],10:[function(d,h,k){(function(b){function d(d,e,v,D){if("function"!==typeof d)throw new TypeError('"callback" argument must be a function');var a=arguments.length;switch(a){case 0:case 1:return b.nextTick(d);case 2:return b.nextTick(function(){d.call(null,e)});case 3:return b.nextTick(function(){d.call(null,
e,v)});case 4:return b.nextTick(function(){d.call(null,e,v,D)});default:var q=Array(a-1);for(a=0;a<q.length;)q[a++]=arguments[a];return b.nextTick(function(){d.apply(null,q)})}}"undefined"===typeof b||!b.version||0===b.version.indexOf("v0.")||0===b.version.indexOf("v1.")&&0!==b.version.indexOf("v1.8.")?h.exports={nextTick:d}:h.exports=b}).call(this,d("_process"))},{_process:11}],11:[function(d,h,k){function b(){throw Error("setTimeout has not been defined");}function e(){throw Error("clearTimeout has not been defined");
}function p(a){if(w===setTimeout)return setTimeout(a,0);if((w===b||!w)&&setTimeout)return w=setTimeout,setTimeout(a,0);try{return w(a,0)}catch(C){try{return w.call(null,a,0)}catch(I){return w.call(this,a,0)}}}function u(a){if(A===clearTimeout)return clearTimeout(a);if((A===e||!A)&&clearTimeout)return A=clearTimeout,clearTimeout(a);try{return A(a)}catch(C){try{return A.call(null,a)}catch(I){return A.call(this,a)}}}function v(){x&&G&&(x=!1,G.length?y=G.concat(y):F=-1,y.length&&D())}function D(){if(!x){var a=
p(v);x=!0;for(var b=y.length;b;){G=y;for(y=[];++F<b;)G&&G[F].run();F=-1;b=y.length}G=null;x=!1;u(a)}}function a(a,b){this.fun=a;this.array=b}function q(){}d=h.exports={};try{var w="function"===typeof setTimeout?setTimeout:b}catch(z){w=b}try{var A="function"===typeof clearTimeout?clearTimeout:e}catch(z){A=e}var y=[],x=!1,G,F=-1;d.nextTick=function(b){var d=Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)d[e-1]=arguments[e];y.push(new a(b,d));1!==y.length||x||p(D)};
a.prototype.run=function(){this.fun.apply(null,this.array)};d.title="browser";d.browser=!0;d.env={};d.argv=[];d.version="";d.versions={};d.on=q;d.addListener=q;d.once=q;d.off=q;d.removeListener=q;d.removeAllListeners=q;d.emit=q;d.prependListener=q;d.prependOnceListener=q;d.listeners=function(a){return[]};d.binding=function(a){throw Error("process.binding is not supported");};d.cwd=function(){return"/"};d.chdir=function(a){throw Error("process.chdir is not supported");};d.umask=function(){return 0}},
{}],12:[function(d,h,k){h.exports=d("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":13}],13:[function(d,h,k){function b(a){if(!(this instanceof b))return new b(a);v.call(this,a);D.call(this,a);a&&!1===a.readable&&(this.readable=!1);a&&!1===a.writable&&(this.writable=!1);this.allowHalfOpen=!0;a&&!1===a.allowHalfOpen&&(this.allowHalfOpen=!1);this.once("end",e)}function e(){this.allowHalfOpen||this._writableState.ended||u.nextTick(p,this)}function p(a){a.end()}var u=d("process-nextick-args");
k=Object.keys||function(a){var b=[],d;for(d in a)b.push(d);return b};h.exports=b;h=Object.create(d("core-util-is"));h.inherits=d("inherits");var v=d("./_stream_readable"),D=d("./_stream_writable");h.inherits(b,v);d=k(D.prototype);for(h=0;h<d.length;h++)k=d[h],b.prototype[k]||(b.prototype[k]=D.prototype[k]);Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0===
this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}});b.prototype._destroy=function(a,b){this.push(null);this.end();u.nextTick(b,a)}},{"./_stream_readable":15,"./_stream_writable":17,"core-util-is":4,inherits:7,"process-nextick-args":10}],14:[function(d,h,k){function b(d){if(!(this instanceof b))return new b(d);
e.call(this,d)}h.exports=b;var e=d("./_stream_transform");h=Object.create(d("core-util-is"));h.inherits=d("inherits");h.inherits(b,e);b.prototype._transform=function(b,d,e){e(null,b)}},{"./_stream_transform":16,"core-util-is":4,inherits:7}],15:[function(d,h,k){(function(b,e){function p(a,c,b){if("function"===typeof a.prependListener)return a.prependListener(c,b);if(a._events&&a._events[c])m(a._events[c])?a._events[c].unshift(b):a._events[c]=[b,a._events[c]];else a.on(c,b)}function u(a,c){H=H||d("./_stream_duplex");
a=a||{};c=c instanceof H;this.objectMode=!!a.objectMode;c&&(this.objectMode=this.objectMode||!!a.readableObjectMode);var b=a.highWaterMark,f=a.readableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=b||0===b?b:c&&(f||0===f)?f:l;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new S;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.destroyed=this.resumeScheduled=this.readableListening=this.emittedReadable=
this.needReadable=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;a.encoding&&(g||(g=d("string_decoder/").StringDecoder),this.decoder=new g(a.encoding),this.encoding=a.encoding)}function v(a){H=H||d("./_stream_duplex");if(!(this instanceof v))return new v(a);this._readableState=new u(a,this);this.readable=!0;a&&("function"===typeof a.read&&(this._read=a.read),"function"===typeof a.destroy&&(this._destroy=a.destroy));J.call(this)}
function D(c,b,d,g,e){var f=c._readableState;if(null===b)f.reading=!1,f.ended||(f.decoder&&(b=f.decoder.end())&&b.length&&(f.buffer.push(b),f.length+=f.objectMode?1:b.length),f.ended=!0,w(c));else{if(!e){e=b;var l;M.isBuffer(e)||e instanceof N||"string"===typeof e||void 0===e||f.objectMode||(l=new TypeError("Invalid non-string/buffer chunk"));var m=l}m?c.emit("error",m):f.objectMode||b&&0<b.length?("string"===typeof b||f.objectMode||Object.getPrototypeOf(b)===M.prototype||(b=M.from(b)),g?f.endEmitted?
c.emit("error",Error("stream.unshift() after end event")):a(c,f,b,!0):f.ended?c.emit("error",Error("stream.push() after EOF")):(f.reading=!1,f.decoder&&!d?(b=f.decoder.write(b),f.objectMode||0!==b.length?a(c,f,b,!1):f.readingMore||(f.readingMore=!0,n.nextTick(k,c,f))):a(c,f,b,!1))):g||(f.reading=!1)}return!f.ended&&(f.needReadable||f.length<f.highWaterMark||0===f.length)}function a(a,c,b,d){c.flowing&&0===c.length&&!c.sync?(a.emit("data",b),a.read(0)):(c.length+=c.objectMode?1:b.length,d?c.buffer.unshift(b):
c.buffer.push(b),c.needReadable&&w(a));c.readingMore||(c.readingMore=!0,n.nextTick(k,a,c))}function q(a,c){if(0>=a||0===c.length&&c.ended)return 0;if(c.objectMode)return 1;if(a!==a)return c.flowing&&c.length?c.buffer.head.data.length:c.length;if(a>c.highWaterMark){var b=a;8388608<=b?b=8388608:(b--,b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,b|=b>>>16,b++);c.highWaterMark=b}return a<=c.length?a:c.ended?c.length:(c.needReadable=!0,0)}function w(a){var c=a._readableState;c.needReadable=!1;c.emittedReadable||
(E("emitReadable",c.flowing),c.emittedReadable=!0,c.sync?n.nextTick(A,a):A(a))}function A(a){E("emit readable");a.emit("readable");z(a)}function k(a,c){for(var b=c.length;!c.reading&&!c.flowing&&!c.ended&&c.length<c.highWaterMark&&(E("maybeReadMore read 0"),a.read(0),b!==c.length);)b=c.length;c.readingMore=!1}function x(a){return function(){var c=a._readableState;E("pipeOnDrain",c.awaitDrain);c.awaitDrain&&c.awaitDrain--;0===c.awaitDrain&&a.listeners("data").length&&(c.flowing=!0,z(a))}}function G(a){E("readable nexttick read 0");
a.read(0)}function F(a,c){c.reading||(E("resume read 0"),a.read(0));c.resumeScheduled=!1;c.awaitDrain=0;a.emit("resume");z(a);c.flowing&&!c.reading&&a.read(0)}function z(a){var c=a._readableState;for(E("flow",c.flowing);c.flowing&&null!==a.read(););}function C(a,c){if(0===c.length)return null;if(c.objectMode)var b=c.buffer.shift();else if(!a||a>=c.length)b=c.decoder?c.buffer.join(""):1===c.buffer.length?c.buffer.head.data:c.buffer.concat(c.length),c.buffer.clear();else{b=c.buffer;c=c.decoder;if(a<
b.head.data.length)c=b.head.data.slice(0,a),b.head.data=b.head.data.slice(a);else{if(a===b.head.data.length)b=b.shift();else if(c){c=b.head;var f=1,d=c.data;for(a-=d.length;c=c.next;){var g=c.data,n=a>g.length?g.length:a;d=n===g.length?d+g:d+g.slice(0,a);a-=n;if(0===a){n===g.length?(++f,b.head=c.next?c.next:b.tail=null):(b.head=c,c.data=g.slice(n));break}++f}b.length-=f;b=d}else{c=M.allocUnsafe(a);f=b.head;d=1;f.data.copy(c);for(a-=f.data.length;f=f.next;){g=f.data;n=a>g.length?g.length:a;g.copy(c,
c.length-a,0,n);a-=n;if(0===a){n===g.length?(++d,b.head=f.next?f.next:b.tail=null):(b.head=f,f.data=g.slice(n));break}++d}b.length-=d;b=c}c=b}b=c}return b}function I(a){var b=a._readableState;if(0<b.length)throw Error('"endReadable()" called on non-empty stream');b.endEmitted||(b.ended=!0,n.nextTick(c,b,a))}function c(a,c){a.endEmitted||0!==a.length||(a.endEmitted=!0,c.readable=!1,c.emit("end"))}function B(a,c){for(var b=0,f=a.length;b<f;b++)if(a[b]===c)return b;return-1}var n=d("process-nextick-args");
h.exports=v;var m=d("isarray"),H;v.ReadableState=u;d("events");var J=d("./internal/streams/stream"),M=d("safe-buffer").Buffer,N=e.Uint8Array||function(){};e=Object.create(d("core-util-is"));e.inherits=d("inherits");var K=d("util"),E=void 0;E=K&&K.debuglog?K.debuglog("stream"):function(){};var S=d("./internal/streams/BufferList");K=d("./internal/streams/destroy");var g;e.inherits(v,J);var r=["error","close","destroy","pause","resume"];Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0===
this._readableState?!1:this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}});v.prototype.destroy=K.destroy;v.prototype._undestroy=K.undestroy;v.prototype._destroy=function(a,c){this.push(null);c(a)};v.prototype.push=function(a,c){var b=this._readableState;if(b.objectMode)var f=!0;else"string"===typeof a&&(c=c||b.defaultEncoding,c!==b.encoding&&(a=M.from(a,c),c=""),f=!0);return D(this,a,c,!1,f)};v.prototype.unshift=function(a){return D(this,a,null,
!0,!1)};v.prototype.isPaused=function(){return!1===this._readableState.flowing};v.prototype.setEncoding=function(a){g||(g=d("string_decoder/").StringDecoder);this._readableState.decoder=new g(a);this._readableState.encoding=a;return this};v.prototype.read=function(a){E("read",a);a=parseInt(a,10);var c=this._readableState,b=a;0!==a&&(c.emittedReadable=!1);if(0===a&&c.needReadable&&(c.length>=c.highWaterMark||c.ended))return E("read: emitReadable",c.length,c.ended),0===c.length&&c.ended?I(this):w(this),
null;a=q(a,c);if(0===a&&c.ended)return 0===c.length&&I(this),null;var f=c.needReadable;E("need readable",f);if(0===c.length||c.length-a<c.highWaterMark)f=!0,E("length less than watermark",f);c.ended||c.reading?E("reading or ended",!1):f&&(E("do read"),c.reading=!0,c.sync=!0,0===c.length&&(c.needReadable=!0),this._read(c.highWaterMark),c.sync=!1,c.reading||(a=q(b,c)));f=0<a?C(a,c):null;null===f?(c.needReadable=!0,a=0):c.length-=a;0===c.length&&(c.ended||(c.needReadable=!0),b!==a&&c.ended&&I(this));
null!==f&&this.emit("data",f);return f};v.prototype._read=function(a){this.emit("error",Error("_read() is not implemented"))};v.prototype.pipe=function(a,c){function f(c,b){E("onunpipe");c===H&&b&&!1===b.hasUnpiped&&(b.hasUnpiped=!0,E("cleanup"),a.removeListener("close",m),a.removeListener("finish",q),a.removeListener("drain",A),a.removeListener("error",e),a.removeListener("unpipe",f),H.removeListener("end",d),H.removeListener("end",l),H.removeListener("data",g),u=!0,!L.awaitDrain||a._writableState&&
!a._writableState.needDrain||A())}function d(){E("onend");a.end()}function g(c){E("ondata");Y=!1;!1!==a.write(c)||Y||((1===L.pipesCount&&L.pipes===a||1<L.pipesCount&&-1!==B(L.pipes,a))&&!u&&(E("false write response, pause",H._readableState.awaitDrain),H._readableState.awaitDrain++,Y=!0),H.pause())}function e(c){E("onerror",c);l();a.removeListener("error",e);0===a.listeners("error").length&&a.emit("error",c)}function m(){a.removeListener("finish",q);l()}function q(){E("onfinish");a.removeListener("close",
m);l()}function l(){E("unpipe");H.unpipe(a)}var H=this,L=this._readableState;switch(L.pipesCount){case 0:L.pipes=a;break;case 1:L.pipes=[L.pipes,a];break;default:L.pipes.push(a)}L.pipesCount+=1;E("pipe count=%d opts=%j",L.pipesCount,c);c=c&&!1===c.end||a===b.stdout||a===b.stderr?l:d;if(L.endEmitted)n.nextTick(c);else H.once("end",c);a.on("unpipe",f);var A=x(H);a.on("drain",A);var u=!1,Y=!1;H.on("data",g);p(a,"error",e);a.once("close",m);a.once("finish",q);a.emit("pipe",H);L.flowing||(E("pipe resume"),
H.resume());return a};v.prototype.unpipe=function(a){var c=this._readableState,b={hasUnpiped:!1};if(0===c.pipesCount)return this;if(1===c.pipesCount){if(a&&a!==c.pipes)return this;a||(a=c.pipes);c.pipes=null;c.pipesCount=0;c.flowing=!1;a&&a.emit("unpipe",this,b);return this}if(!a){a=c.pipes;var f=c.pipesCount;c.pipes=null;c.pipesCount=0;c.flowing=!1;for(c=0;c<f;c++)a[c].emit("unpipe",this,b);return this}f=B(c.pipes,a);if(-1===f)return this;c.pipes.splice(f,1);--c.pipesCount;1===c.pipesCount&&(c.pipes=
c.pipes[0]);a.emit("unpipe",this,b);return this};v.prototype.on=function(a,c){c=J.prototype.on.call(this,a,c);"data"===a?!1!==this._readableState.flowing&&this.resume():"readable"===a&&(a=this._readableState,a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,a.reading?a.length&&w(this):n.nextTick(G,this)));return c};v.prototype.addListener=v.prototype.on;v.prototype.resume=function(){var a=this._readableState;a.flowing||(E("resume"),a.flowing=!0,a.resumeScheduled||
(a.resumeScheduled=!0,n.nextTick(F,this,a)));return this};v.prototype.pause=function(){E("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(E("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};v.prototype.wrap=function(a){var c=this,b=this._readableState,d=!1;a.on("end",function(){E("wrapped end");if(b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&c.push(a)}c.push(null)});a.on("data",function(f){E("wrapped data");b.decoder&&(f=b.decoder.write(f));
b.objectMode&&(null===f||void 0===f)||!(b.objectMode||f&&f.length)||c.push(f)||(d=!0,a.pause())});for(var f in a)void 0===this[f]&&"function"===typeof a[f]&&(this[f]=function(c){return function(){return a[c].apply(a,arguments)}}(f));for(f=0;f<r.length;f++)a.on(r[f],this.emit.bind(this,r[f]));this._read=function(c){E("wrapped _read",c);d&&(d=!1,a.resume())};return this};Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});
v._fromList=C}).call(this,d("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./_stream_duplex":13,"./internal/streams/BufferList":18,"./internal/streams/destroy":19,"./internal/streams/stream":20,_process:11,"core-util-is":4,events:5,inherits:7,isarray:9,"process-nextick-args":10,"safe-buffer":21,"string_decoder/":22,util:2}],16:[function(d,h,k){function b(b,a){var d=this._transformState;d.transforming=!1;var e=d.writecb;if(!e)return this.emit("error",
Error("write callback called multiple times"));d.writechunk=null;d.writecb=null;null!=a&&this.push(a);e(b);b=this._readableState;b.reading=!1;(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function e(d){if(!(this instanceof e))return new e(d);v.call(this,d);this._transformState={afterTransform:b.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;d&&("function"===typeof d.transform&&
(this._transform=d.transform),"function"===typeof d.flush&&(this._flush=d.flush));this.on("prefinish",p)}function p(){var b=this;"function"===typeof this._flush?this._flush(function(a,d){u(b,a,d)}):u(this,null,null)}function u(b,a,d){if(a)return b.emit("error",a);null!=d&&b.push(d);if(b._writableState.length)throw Error("Calling transform done when ws.length != 0");if(b._transformState.transforming)throw Error("Calling transform done when still transforming");return b.push(null)}h.exports=e;var v=
d("./_stream_duplex");h=Object.create(d("core-util-is"));h.inherits=d("inherits");h.inherits(e,v);e.prototype.push=function(b,a){this._transformState.needTransform=!1;return v.prototype.push.call(this,b,a)};e.prototype._transform=function(b,a,d){throw Error("_transform() is not implemented");};e.prototype._write=function(b,a,d){var e=this._transformState;e.writecb=d;e.writechunk=b;e.writeencoding=a;e.transforming||(b=this._readableState,(e.needTransform||b.needReadable||b.length<b.highWaterMark)&&
this._read(b.highWaterMark))};e.prototype._read=function(b){b=this._transformState;null!==b.writechunk&&b.writecb&&!b.transforming?(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0};e.prototype._destroy=function(b,a){var d=this;v.prototype._destroy.call(this,b,function(b){a(b);d.emit("close")})}},{"./_stream_duplex":13,"core-util-is":4,inherits:7}],17:[function(d,h,k){(function(b,e,p){function u(a){var c=this;this.entry=this.next=null;this.finish=
function(){var b=c.entry;for(c.entry=null;b;){var d=b.callback;a.pendingcb--;d(void 0);b=b.next}a.corkedRequestsFree?a.corkedRequestsFree.next=c:a.corkedRequestsFree=c}}function v(){}function k(a,c){C=C||d("./_stream_duplex");a=a||{};var b=c instanceof C;this.objectMode=!!a.objectMode;b&&(this.objectMode=this.objectMode||!!a.writableObjectMode);var n=a.highWaterMark,e=a.writableHighWaterMark,m=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:b&&(e||0===e)?e:m;this.highWaterMark=Math.floor(this.highWaterMark);
this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==a.decodeStrings;this.defaultEncoding=a.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){var b=c._writableState,d=b.sync,f=b.writecb;b.writing=!1;b.writecb=null;b.length-=b.writelen;b.writelen=0;a?(--b.pendingcb,d?(F.nextTick(f,a),F.nextTick(G,c,b),c._writableState.errorEmitted=!0,c.emit("error",a)):(f(a),c._writableState.errorEmitted=
!0,c.emit("error",a),G(c,b))):((a=y(b))||b.corked||b.bufferProcessing||!b.bufferedRequest||A(c,b),d?z(w,c,b,a,f):w(c,b,a,f))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.bufferedRequestCount=0;this.corkedRequestsFree=new u(this)}function a(b){C=C||d("./_stream_duplex");if(!(m.call(a,this)||this instanceof C))return new a(b);this._writableState=new k(b,this);this.writable=!0;b&&("function"===typeof b.write&&
(this._write=b.write),"function"===typeof b.writev&&(this._writev=b.writev),"function"===typeof b.destroy&&(this._destroy=b.destroy),"function"===typeof b.final&&(this._final=b.final));c.call(this)}function q(a,c,b,d,n,e,m){c.writelen=d;c.writecb=m;c.writing=!0;c.sync=!0;b?a._writev(n,c.onwrite):a._write(n,e,c.onwrite);c.sync=!1}function w(a,c,b,d){!b&&0===c.length&&c.needDrain&&(c.needDrain=!1,a.emit("drain"));c.pendingcb--;d();G(a,c)}function A(a,c){c.bufferProcessing=!0;var b=c.bufferedRequest;
if(a._writev&&b&&b.next){var d=Array(c.bufferedRequestCount),n=c.corkedRequestsFree;n.entry=b;for(var e=0,m=!0;b;)d[e]=b,b.isBuf||(m=!1),b=b.next,e+=1;d.allBuffers=m;q(a,c,!0,c.length,d,"",n.finish);c.pendingcb++;c.lastBufferedRequest=null;n.next?(c.corkedRequestsFree=n.next,n.next=null):c.corkedRequestsFree=new u(c);c.bufferedRequestCount=0}else{for(;b&&(d=b.chunk,q(a,c,!1,c.objectMode?1:d.length,d,b.encoding,b.callback),b=b.next,c.bufferedRequestCount--,!c.writing););null===b&&(c.lastBufferedRequest=
null)}c.bufferedRequest=b;c.bufferProcessing=!1}function y(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function x(a,c){a._final(function(b){c.pendingcb--;b&&a.emit("error",b);c.prefinished=!0;a.emit("prefinish");G(a,c)})}function G(a,c){var b=y(c);b&&(c.prefinished||c.finalCalled||("function"===typeof a._final?(c.pendingcb++,c.finalCalled=!0,F.nextTick(x,a,c)):(c.prefinished=!0,a.emit("prefinish"))),0===c.pendingcb&&(c.finished=!0,a.emit("finish")));return b}
var F=d("process-nextick-args");h.exports=a;var z=!b.browser&&-1<["v0.10","v0.9."].indexOf(b.version.slice(0,5))?p:F.nextTick,C;a.WritableState=k;b=Object.create(d("core-util-is"));b.inherits=d("inherits");var I={deprecate:d("util-deprecate")},c=d("./internal/streams/stream"),B=d("safe-buffer").Buffer,n=e.Uint8Array||function(){};e=d("./internal/streams/destroy");b.inherits(a,c);k.prototype.getBuffer=function(){for(var a=this.bufferedRequest,c=[];a;)c.push(a),a=a.next;return c};(function(){try{Object.defineProperty(k.prototype,
"buffer",{get:I.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(H){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var m=Function.prototype[Symbol.hasInstance];Object.defineProperty(a,Symbol.hasInstance,{value:function(c){return m.call(this,c)?!0:this!==a?!1:c&&c._writableState instanceof k}})}else m=function(a){return a instanceof this};
a.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))};a.prototype.write=function(a,c,b){var d=this._writableState,e=!1,m;if(m=!d.objectMode)m=a,m=B.isBuffer(m)||m instanceof n;m&&!B.isBuffer(a)&&(a=B.from(a));"function"===typeof c&&(b=c,c=null);m?c="buffer":c||(c=d.defaultEncoding);"function"!==typeof b&&(b=v);if(d.ended)d=b,b=Error("write after end"),this.emit("error",b),F.nextTick(d,b);else{var p;if(!(p=m)){p=a;var g=b,A=!0,f=!1;null===p?f=new TypeError("May not write null values to stream"):
"string"===typeof p||void 0===p||d.objectMode||(f=new TypeError("Invalid non-string/buffer chunk"));f&&(this.emit("error",f),F.nextTick(g,f),A=!1);p=A}p&&(d.pendingcb++,e=m,e||(m=a,d.objectMode||!1===d.decodeStrings||"string"!==typeof m||(m=B.from(m,c)),a!==m&&(e=!0,c="buffer",a=m)),p=d.objectMode?1:a.length,d.length+=p,m=d.length<d.highWaterMark,m||(d.needDrain=!0),d.writing||d.corked?(p=d.lastBufferedRequest,d.lastBufferedRequest={chunk:a,encoding:c,isBuf:e,callback:b,next:null},p?p.next=d.lastBufferedRequest:
d.bufferedRequest=d.lastBufferedRequest,d.bufferedRequestCount+=1):q(this,d,!1,p,a,c,b),e=m)}return e};a.prototype.cork=function(){this._writableState.corked++};a.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||A(this,a))};a.prototype.setDefaultEncoding=function(a){"string"===typeof a&&(a=a.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((a+
"").toLowerCase())))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a;return this};Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});a.prototype._write=function(a,c,b){b(Error("_write() is not implemented"))};a.prototype._writev=null;a.prototype.end=function(a,c,b){var d=this._writableState;"function"===typeof a?(b=a,c=a=null):"function"===typeof c&&(b=c,c=null);null!==a&&void 0!==a&&
this.write(a,c);d.corked&&(d.corked=1,this.uncork());if(!d.ending&&!d.finished){a=b;d.ending=!0;G(this,d);if(a)if(d.finished)F.nextTick(a);else this.once("finish",a);d.ended=!0;this.writable=!1}};Object.defineProperty(a.prototype,"destroyed",{get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(a){this._writableState&&(this._writableState.destroyed=a)}});a.prototype.destroy=e.destroy;a.prototype._undestroy=e.undestroy;a.prototype._destroy=function(a,c){this.end();
c(a)}}).call(this,d("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("timers").setImmediate)},{"./_stream_duplex":13,"./internal/streams/destroy":19,"./internal/streams/stream":20,_process:11,"core-util-is":4,inherits:7,"process-nextick-args":10,"safe-buffer":21,timers:31,"util-deprecate":32}],18:[function(d,h,k){var b=d("safe-buffer").Buffer,e=d("util");h.exports=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");
this.tail=this.head=null;this.length=0}d.prototype.push=function(b){b={data:b,next:null};0<this.length?this.tail.next=b:this.head=b;this.tail=b;++this.length};d.prototype.unshift=function(b){b={data:b,next:this.head};0===this.length&&(this.tail=b);this.head=b;++this.length};d.prototype.shift=function(){if(0!==this.length){var b=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return b}};d.prototype.clear=function(){this.head=this.tail=null;this.length=0};d.prototype.join=
function(b){if(0===this.length)return"";for(var d=this.head,e=""+d.data;d=d.next;)e+=b+d.data;return e};d.prototype.concat=function(d){if(0===this.length)return b.alloc(0);if(1===this.length)return this.head.data;d=b.allocUnsafe(d>>>0);for(var e=this.head,p=0;e;)e.data.copy(d,p),p+=e.data.length,e=e.next;return d};return d}();e&&e.inspect&&e.inspect.custom&&(h.exports.prototype[e.inspect.custom]=function(){var b=e.inspect({length:this.length});return this.constructor.name+" "+b})},{"safe-buffer":21,
util:2}],19:[function(d,h,k){function b(b,d){b.emit("error",d)}var e=d("process-nextick-args");h.exports={destroy:function(d,u){var p=this,k=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||k)return u?u(d):!d||this._writableState&&this._writableState.errorEmitted||e.nextTick(b,this,d),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(d||null,function(a){!u&&a?(e.nextTick(b,
p,a),p._writableState&&(p._writableState.errorEmitted=!0)):u&&u(a)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":10}],20:[function(d,h,k){h.exports=d("events").EventEmitter},
{events:5}],21:[function(d,h,k){function b(b,d){for(var a in b)d[a]=b[a]}function e(b,d,a){return u(b,d,a)}var p=d("buffer"),u=p.Buffer;u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?h.exports=p:(b(p,k),k.Buffer=e);b(u,e);e.from=function(b,d,a){if("number"===typeof b)throw new TypeError("Argument must not be a number");return u(b,d,a)};e.alloc=function(b,d,a){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=u(b);void 0!==d?"string"===typeof a?b.fill(d,a):b.fill(d):b.fill(0);
return b};e.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return u(b)};e.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return p.SlowBuffer(b)}},{buffer:3}],22:[function(d,h,k){function b(a){if(!a)return"utf8";for(var b;;)switch(a){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return a;
default:if(b)return;a=(""+a).toLowerCase();b=!0}}function e(d){var e=b(d);if("string"!==typeof e&&(x.isEncoding===G||!G(d)))throw Error("Unknown encoding: "+d);this.encoding=e||d;switch(this.encoding){case "utf16le":this.text=D;this.end=a;d=4;break;case "utf8":this.fillLast=v;d=4;break;case "base64":this.text=q;this.end=w;d=3;break;default:this.write=A;this.end=y;return}this.lastTotal=this.lastNeed=0;this.lastChar=x.allocUnsafe(d)}function p(a){return 127>=a?0:6===a>>5?2:14===a>>4?3:30===a>>3?4:2===
a>>6?-1:-2}function u(a,b,d){var e=b.length-1;if(e<d)return 0;var c=p(b[e]);if(0<=c)return 0<c&&(a.lastNeed=c-1),c;if(--e<d||-2===c)return 0;c=p(b[e]);if(0<=c)return 0<c&&(a.lastNeed=c-2),c;if(--e<d||-2===c)return 0;c=p(b[e]);return 0<=c?(0<c&&(2===c?c=0:a.lastNeed=c-3),c):0}function v(a){var b=this.lastTotal-this.lastNeed;a:if(128!==(a[0]&192)){this.lastNeed=0;var d="\ufffd"}else{if(1<this.lastNeed&&1<a.length){if(128!==(a[1]&192)){this.lastNeed=1;d="\ufffd";break a}if(2<this.lastNeed&&2<a.length&&
128!==(a[2]&192)){this.lastNeed=2;d="\ufffd";break a}}d=void 0}if(void 0!==d)return d;if(this.lastNeed<=a.length)return a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,b,0,a.length);this.lastNeed-=a.length}function D(a,b){if(0===(a.length-b)%2){if(b=a.toString("utf16le",b)){var d=b.charCodeAt(b.length-1);if(55296<=d&&56319>=d)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],b.slice(0,
-1)}return b}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",b,a.length-1)}function a(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):a}function q(a,b){var d=(a.length-b)%3;if(0===d)return a.toString("base64",b);this.lastNeed=3-d;this.lastTotal=3;1===d?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",b,a.length-
d)}function w(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function A(a){return a.toString(this.encoding)}function y(a){return a&&a.length?this.write(a):""}var x=d("safe-buffer").Buffer,G=x.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};k.StringDecoder=
e;e.prototype.write=function(a){if(0===a.length)return"";if(this.lastNeed){var b=this.fillLast(a);if(void 0===b)return"";var d=this.lastNeed;this.lastNeed=0}else d=0;return d<a.length?b?b+this.text(a,d):this.text(a,d):b||""};e.prototype.end=function(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a};e.prototype.text=function(a,b){var d=u(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=d;d=a.length-(d-this.lastNeed);a.copy(this.lastChar,0,d);return a.toString("utf8",
b,d)};e.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length}},{"safe-buffer":21}],23:[function(d,h,k){h.exports=d("./readable").PassThrough},{"./readable":24}],24:[function(d,h,k){k=h.exports=d("./lib/_stream_readable.js");k.Stream=k;k.Readable=k;k.Writable=d("./lib/_stream_writable.js");
k.Duplex=d("./lib/_stream_duplex.js");k.Transform=d("./lib/_stream_transform.js");k.PassThrough=d("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":13,"./lib/_stream_passthrough.js":14,"./lib/_stream_readable.js":15,"./lib/_stream_transform.js":16,"./lib/_stream_writable.js":17}],25:[function(d,h,k){h.exports=d("./readable").Transform},{"./readable":24}],26:[function(d,h,k){h.exports=d("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":17}],27:[function(d,h,k){function b(b,d){for(var a in b)d[a]=
b[a]}function e(b,d,a){return u(b,d,a)}var p=d("buffer"),u=p.Buffer;u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?h.exports=p:(b(p,k),k.Buffer=e);e.prototype=Object.create(u.prototype);b(u,e);e.from=function(b,d,a){if("number"===typeof b)throw new TypeError("Argument must not be a number");return u(b,d,a)};e.alloc=function(b,d,a){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=u(b);void 0!==d?"string"===typeof a?b.fill(d,a):b.fill(d):b.fill(0);return b};e.allocUnsafe=
function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return u(b)};e.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return p.SlowBuffer(b)}},{buffer:3}],28:[function(d,h,k){(function(b){(function(e){function p(a,c){if(!(this instanceof p))return new p(a,c);for(var b=0,d=n.length;b<d;b++)this[n[b]]="";this.q=this.c="";this.bufferCheckPosition=e.MAX_BUFFER_LENGTH;this.opt=c||{};this.opt.lowercase=this.opt.lowercase||
this.opt.lowercasetags;this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase";this.tags=[];this.closed=this.closedRoot=this.sawRoot=!1;this.tag=this.error=null;this.strict=!!a;this.noscript=!(!a&&!this.opt.noscript);this.state=t.BEGIN;this.ENTITIES=(this.strictEntities=this.opt.strictEntities)?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES);this.attribList=[];this.opt.xmlns&&(this.ns=Object.create(l));if(this.trackPosition=!1!==this.opt.position)this.position=this.line=this.column=
0;this.onready&&this.onready(void 0)}function u(a,c){if(!(this instanceof u))return new u(a,c);m.apply(this);this._parser=new p(a,c);this.readable=this.writable=!0;var b=this;this._parser.onend=function(){b.emit("end")};this._parser.onerror=function(a){b.emit("error",a);b._parser.error=null};this._decoder=null;H.forEach(function(a){Object.defineProperty(b,"on"+a,{get:function(){return b._parser["on"+a]},set:function(c){if(!c)return b.removeAllListeners(a),b._parser["on"+a]=c;b.on(a,c)},enumerable:!0,
configurable:!1})})}function k(a){return a.split("").reduce(function(a,c){a[c]=!0;return a},{})}function h(a,c){return"[object RegExp]"===Object.prototype.toString.call(a)?!!c.match(a):a[c]}function a(a,c,b){a.textNode&&q(a);a[c]&&a[c](b)}function q(a){a.textNode=w(a.opt,a.textNode);a.textNode&&a.ontext&&a.ontext(a.textNode);a.textNode=""}function w(a,c){a.trim&&(c=c.trim());a.normalize&&(c=c.replace(/\s+/g," "));return c}function A(a,c){q(a);a.trackPosition&&(c+="\nLine: "+a.line+"\nColumn: "+a.column+
"\nChar: "+a.c);c=Error(c);a.error=c;a.onerror&&a.onerror(c);return a}function y(a){a.sawRoot&&!a.closedRoot&&x(a,"Unclosed root tag");a.state!==t.BEGIN&&a.state!==t.BEGIN_WHITESPACE&&a.state!==t.TEXT&&A(a,"Unexpected end");q(a);a.c="";a.closed=!0;a.onend&&a.onend(void 0);p.call(a,a.strict,a.opt);return a}function x(a,c){if("object"!==typeof a||!(a instanceof p))throw Error("bad call to strictFail");a.strict&&A(a,c)}function G(a,c){var b=0>a.indexOf(":")?["",a]:a.split(":"),d=b[0];b=b[1];c&&"xmlns"===
a&&(d="xmlns",b="");return{prefix:d,local:b}}function F(c){c.strict||(c.attribName=c.attribName[c.looseCase]());if(-1===c.attribList.indexOf(c.attribName)&&!c.tag.attributes.hasOwnProperty(c.attribName))if(c.opt.xmlns){var b=G(c.attribName,!0),d=b.local;if("xmlns"===b.prefix)if("xml"===d&&c.attribValue!==r)x(c,"xml: prefix must be bound to "+r+"\nActual: "+c.attribValue);else if("xmlns"===d&&c.attribValue!==f)x(c,"xmlns: prefix must be bound to "+f+"\nActual: "+c.attribValue);else{b=c.tag;var g=c.tags[c.tags.length-
1]||c;b.ns===g.ns&&(b.ns=Object.create(g.ns));b.ns[d]=c.attribValue}c.attribList.push([c.attribName,c.attribValue])}else c.tag.attributes[c.attribName]=c.attribValue,a(c,"onattribute",{name:c.attribName,value:c.attribValue});c.attribName=c.attribValue=""}function z(c,b){if(c.opt.xmlns){var d=c.tag,f=G(c.tagName);d.prefix=f.prefix;d.local=f.local;d.uri=d.ns[f.prefix]||"";d.prefix&&!d.uri&&(x(c,"Unbound namespace prefix: "+JSON.stringify(c.tagName)),d.uri=f.prefix);f=c.tags[c.tags.length-1]||c;d.ns&&
f.ns!==d.ns&&Object.keys(d.ns).forEach(function(b){a(c,"onopennamespace",{prefix:b,uri:d.ns[b]})});f=0;for(var g=c.attribList.length;f<g;f++){var n=c.attribList[f],e=n[0],m=n[1],q=G(e,!0);n=q.prefix;var p=""===n?"":d.ns[n]||"";m={name:e,value:m,prefix:n,local:q.local,uri:p};n&&"xmlns"!==n&&!p&&(x(c,"Unbound namespace prefix: "+JSON.stringify(n)),m.uri=n);c.tag.attributes[e]=m;a(c,"onattribute",m)}c.attribList.length=0}c.tag.isSelfClosing=!!b;c.sawRoot=!0;c.tags.push(c.tag);a(c,"onopentag",c.tag);
b||(c.noscript||"script"!==c.tagName.toLowerCase()?c.state=t.TEXT:c.state=t.SCRIPT,c.tag=null,c.tagName="");c.attribName=c.attribValue="";c.attribList.length=0}function C(c){if(c.tagName){if(c.script){if("script"!==c.tagName){c.script+="</"+c.tagName+">";c.tagName="";c.state=t.SCRIPT;return}a(c,"onscript",c.script);c.script=""}var b=c.tags.length,d=c.tagName;c.strict||(d=d[c.looseCase]());for(var f=d;b--;)if(c.tags[b].name!==f)x(c,"Unexpected close tag");else break;if(0>b)x(c,"Unmatched closing tag: "+
c.tagName),c.textNode+="</"+c.tagName+">";else{c.tagName=d;for(d=c.tags.length;d-- >b;){var g=c.tag=c.tags.pop();c.tagName=c.tag.name;a(c,"onclosetag",c.tagName);for(var n in g.ns);f=c.tags[c.tags.length-1]||c;c.opt.xmlns&&g.ns!==f.ns&&Object.keys(g.ns).forEach(function(b){a(c,"onclosenamespace",{prefix:b,uri:g.ns[b]})})}0===b&&(c.closedRoot=!0);c.tagName=c.attribValue=c.attribName="";c.attribList.length=0}}else x(c,"Weird empty close tag."),c.textNode+="</>";c.state=t.TEXT}function I(a){var c=a.entity,
b=c.toLowerCase(),d="";if(a.ENTITIES[c])return a.ENTITIES[c];if(a.ENTITIES[b])return a.ENTITIES[b];c=b;if("#"===c.charAt(0))if("x"===c.charAt(1)){c=c.slice(2);var f=parseInt(c,16);d=f.toString(16)}else c=c.slice(1),f=parseInt(c,10),d=f.toString(10);c=c.replace(/^0+/,"");return d.toLowerCase()!==c?(x(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCodePoint(f)}function c(a,c){"<"===c?(a.state=t.OPEN_WAKA,a.startTagPosition=a.position):h(J,c)||(x(a,"Non-whitespace before first tag."),a.textNode=
c,a.state=t.TEXT)}function B(a,c){var b="";c<a.length&&(b=a.charAt(c));return b}e.parser=function(a,c){return new p(a,c)};e.SAXParser=p;e.SAXStream=u;e.createStream=function(a,c){return new u(a,c)};e.MAX_BUFFER_LENGTH=65536;var n="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" ");e.EVENTS="text processinginstruction sgmldeclaration doctype comment opentagstart attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" ");
Object.create||(Object.create=function(a){function c(){}c.prototype=a;return new c});Object.keys||(Object.keys=function(a){var c=[],b;for(b in a)a.hasOwnProperty(b)&&c.push(b);return c});p.prototype={end:function(){y(this)},write:function(b){if(this.error)throw this.error;if(this.closed)return A(this,"Cannot write after close. Assign an onready handler.");if(null===b)return y(this);"object"===typeof b&&(b=b.toString());for(var d=0,f;;){this.c=f=B(b,d++);if(!f)break;this.trackPosition&&(this.position++,
"\n"===f?(this.line++,this.column=0):this.column++);switch(this.state){case t.BEGIN:this.state=t.BEGIN_WHITESPACE;if("\ufeff"===f)continue;c(this,f);continue;case t.BEGIN_WHITESPACE:c(this,f);continue;case t.TEXT:if(this.sawRoot&&!this.closedRoot){for(var m=d-1;f&&"<"!==f&&"&"!==f;)(f=B(b,d++))&&this.trackPosition&&(this.position++,"\n"===f?(this.line++,this.column=0):this.column++);this.textNode+=b.substring(m,d-1)}"<"!==f||this.sawRoot&&this.closedRoot&&!this.strict?(h(J,f)||this.sawRoot&&!this.closedRoot||
x(this,"Text data outside of root node."),"&"===f?this.state=t.TEXT_ENTITY:this.textNode+=f):(this.state=t.OPEN_WAKA,this.startTagPosition=this.position);continue;case t.SCRIPT:"<"===f?this.state=t.SCRIPT_ENDING:this.script+=f;continue;case t.SCRIPT_ENDING:"/"===f?this.state=t.CLOSE_TAG:(this.script+="<"+f,this.state=t.SCRIPT);continue;case t.OPEN_WAKA:"!"===f?(this.state=t.SGML_DECL,this.sgmlDecl=""):h(J,f)||(h(Q,f)?(this.state=t.OPEN_TAG,this.tagName=f):"/"===f?(this.state=t.CLOSE_TAG,this.tagName=
""):"?"===f?(this.state=t.PROC_INST,this.procInstName=this.procInstBody=""):(x(this,"Unencoded <"),this.startTagPosition+1<this.position&&(f=Array(this.position-this.startTagPosition).join(" ")+f),this.textNode+="<"+f,this.state=t.TEXT));continue;case t.SGML_DECL:(this.sgmlDecl+f).toUpperCase()===S?(a(this,"onopencdata"),this.state=t.CDATA,this.cdata=this.sgmlDecl=""):"--"===this.sgmlDecl+f?(this.state=t.COMMENT,this.sgmlDecl=this.comment=""):(this.sgmlDecl+f).toUpperCase()===g?(this.state=t.DOCTYPE,
(this.doctype||this.sawRoot)&&x(this,"Inappropriately located doctype declaration"),this.sgmlDecl=this.doctype=""):">"===f?(a(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=t.TEXT):(h(K,f)&&(this.state=t.SGML_DECL_QUOTED),this.sgmlDecl+=f);continue;case t.SGML_DECL_QUOTED:f===this.q&&(this.state=t.SGML_DECL,this.q="");this.sgmlDecl+=f;continue;case t.DOCTYPE:">"===f?(this.state=t.TEXT,a(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=f,"["===f?this.state=t.DOCTYPE_DTD:
h(K,f)&&(this.state=t.DOCTYPE_QUOTED,this.q=f));continue;case t.DOCTYPE_QUOTED:this.doctype+=f;f===this.q&&(this.q="",this.state=t.DOCTYPE);continue;case t.DOCTYPE_DTD:this.doctype+=f;"]"===f?this.state=t.DOCTYPE:h(K,f)&&(this.state=t.DOCTYPE_DTD_QUOTED,this.q=f);continue;case t.DOCTYPE_DTD_QUOTED:this.doctype+=f;f===this.q&&(this.state=t.DOCTYPE_DTD,this.q="");continue;case t.COMMENT:"-"===f?this.state=t.COMMENT_ENDING:this.comment+=f;continue;case t.COMMENT_ENDING:"-"===f?(this.state=t.COMMENT_ENDED,
(this.comment=w(this.opt,this.comment))&&a(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+f,this.state=t.COMMENT);continue;case t.COMMENT_ENDED:">"!==f?(x(this,"Malformed comment"),this.comment+="--"+f,this.state=t.COMMENT):this.state=t.TEXT;continue;case t.CDATA:"]"===f?this.state=t.CDATA_ENDING:this.cdata+=f;continue;case t.CDATA_ENDING:"]"===f?this.state=t.CDATA_ENDING_2:(this.cdata+="]"+f,this.state=t.CDATA);continue;case t.CDATA_ENDING_2:">"===f?(this.cdata&&a(this,"oncdata",
this.cdata),a(this,"onclosecdata"),this.cdata="",this.state=t.TEXT):"]"===f?this.cdata+="]":(this.cdata+="]]"+f,this.state=t.CDATA);continue;case t.PROC_INST:"?"===f?this.state=t.PROC_INST_ENDING:h(J,f)?this.state=t.PROC_INST_BODY:this.procInstName+=f;continue;case t.PROC_INST_BODY:if(!this.procInstBody&&h(J,f))continue;else"?"===f?this.state=t.PROC_INST_ENDING:this.procInstBody+=f;continue;case t.PROC_INST_ENDING:">"===f?(a(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),
this.procInstName=this.procInstBody="",this.state=t.TEXT):(this.procInstBody+="?"+f,this.state=t.PROC_INST_BODY);continue;case t.OPEN_TAG:if(h(P,f))this.tagName+=f;else{this.strict||(this.tagName=this.tagName[this.looseCase]());m=this.tags[this.tags.length-1]||this;var p=this.tag={name:this.tagName,attributes:{}};this.opt.xmlns&&(p.ns=m.ns);this.attribList.length=0;a(this,"onopentagstart",p);">"===f?z(this):"/"===f?this.state=t.OPEN_TAG_SLASH:(h(J,f)||x(this,"Invalid character in tag name"),this.state=
t.ATTRIB)}continue;case t.OPEN_TAG_SLASH:">"===f?(z(this,!0),C(this)):(x(this,"Forward-slash in opening tag not followed by >"),this.state=t.ATTRIB);continue;case t.ATTRIB:if(h(J,f))continue;else">"===f?z(this):"/"===f?this.state=t.OPEN_TAG_SLASH:h(Q,f)?(this.attribName=f,this.attribValue="",this.state=t.ATTRIB_NAME):x(this,"Invalid attribute name");continue;case t.ATTRIB_NAME:"="===f?this.state=t.ATTRIB_VALUE:">"===f?(x(this,"Attribute without value"),this.attribValue=this.attribName,F(this),z(this)):
h(J,f)?this.state=t.ATTRIB_NAME_SAW_WHITE:h(P,f)?this.attribName+=f:x(this,"Invalid attribute name");continue;case t.ATTRIB_NAME_SAW_WHITE:if("="===f)this.state=t.ATTRIB_VALUE;else if(h(J,f))continue;else x(this,"Attribute without value"),this.attribValue=this.tag.attributes[this.attribName]="",a(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===f?z(this):h(Q,f)?(this.attribName=f,this.state=t.ATTRIB_NAME):(x(this,"Invalid attribute name"),this.state=t.ATTRIB);continue;
case t.ATTRIB_VALUE:if(h(J,f))continue;else h(K,f)?(this.q=f,this.state=t.ATTRIB_VALUE_QUOTED):(x(this,"Unquoted attribute value"),this.state=t.ATTRIB_VALUE_UNQUOTED,this.attribValue=f);continue;case t.ATTRIB_VALUE_QUOTED:if(f!==this.q){"&"===f?this.state=t.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=f;continue}F(this);this.q="";this.state=t.ATTRIB_VALUE_CLOSED;continue;case t.ATTRIB_VALUE_CLOSED:h(J,f)?this.state=t.ATTRIB:">"===f?z(this):"/"===f?this.state=t.OPEN_TAG_SLASH:h(Q,f)?(x(this,"No whitespace between attributes"),
this.attribName=f,this.attribValue="",this.state=t.ATTRIB_NAME):x(this,"Invalid attribute name");continue;case t.ATTRIB_VALUE_UNQUOTED:if(!h(E,f)){"&"===f?this.state=t.ATTRIB_VALUE_ENTITY_U:this.attribValue+=f;continue}F(this);">"===f?z(this):this.state=t.ATTRIB;continue;case t.CLOSE_TAG:if(this.tagName)">"===f?C(this):h(P,f)?this.tagName+=f:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=t.SCRIPT):(h(J,f)||x(this,"Invalid tagname in closing tag"),this.state=t.CLOSE_TAG_SAW_WHITE);
else if(h(J,f))continue;else h(Q,f)?this.tagName=f:this.script?(this.script+="</"+f,this.state=t.SCRIPT):x(this,"Invalid tagname in closing tag.");continue;case t.CLOSE_TAG_SAW_WHITE:if(h(J,f))continue;">"===f?C(this):x(this,"Invalid characters in closing tag");continue;case t.TEXT_ENTITY:case t.ATTRIB_VALUE_ENTITY_Q:case t.ATTRIB_VALUE_ENTITY_U:switch(this.state){case t.TEXT_ENTITY:var l=t.TEXT;var T="textNode";break;case t.ATTRIB_VALUE_ENTITY_Q:l=t.ATTRIB_VALUE_QUOTED;T="attribValue";break;case t.ATTRIB_VALUE_ENTITY_U:l=
t.ATTRIB_VALUE_UNQUOTED,T="attribValue"}";"===f?(this[T]+=I(this),this.entity="",this.state=l):h(this.entity.length?V:X,f)?this.entity+=f:(x(this,"Invalid character in entity name"),this[T]+="&"+this.entity+f,this.entity="",this.state=l);continue;default:throw Error(this,"Unknown state: "+this.state);}}if(this.position>=this.bufferCheckPosition){b=Math.max(e.MAX_BUFFER_LENGTH,10);f=d=0;for(l=n.length;f<l;f++){T=this[n[f]].length;if(T>b)switch(n[f]){case "textNode":q(this);break;case "cdata":a(this,
"oncdata",this.cdata);this.cdata="";break;case "script":a(this,"onscript",this.script);this.script="";break;default:A(this,"Max buffer length exceeded: "+n[f])}d=Math.max(d,T)}this.bufferCheckPosition=e.MAX_BUFFER_LENGTH-d+this.position}return this},resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){q(this);""!==this.cdata&&(a(this,"oncdata",this.cdata),this.cdata="");""!==this.script&&(a(this,"onscript",this.script),this.script="")}};try{var m=
d("stream").Stream}catch(W){m=function(){}}var H=e.EVENTS.filter(function(a){return"error"!==a&&"end"!==a});u.prototype=Object.create(m.prototype,{constructor:{value:u}});u.prototype.write=function(a){"function"===typeof b&&"function"===typeof b.isBuffer&&b.isBuffer(a)&&(this._decoder||(this._decoder=new (d("string_decoder").StringDecoder)("utf8")),a=this._decoder.write(a));this._parser.write(a.toString());this.emit("data",a);return!0};u.prototype.end=function(a){a&&a.length&&this.write(a);this._parser.end();
return!0};u.prototype.on=function(a,c){var b=this;b._parser["on"+a]||-1===H.indexOf(a)||(b._parser["on"+a]=function(){var c=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);c.splice(0,0,a);b.emit.apply(b,c)});return m.prototype.on.call(b,a,c)};var J="\r\n\t ",M="0124356789",N="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",K="'\"",E=J+">",S="[CDATA[",g="DOCTYPE",r="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/2000/xmlns/",l={xml:r,xmlns:f};J=k(J);M=k(M);N=k(N);
var Q=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,P=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,X=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
V=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;K=k(K);E=k(E);var t=0;e.STATE={BEGIN:t++,BEGIN_WHITESPACE:t++,TEXT:t++,TEXT_ENTITY:t++,OPEN_WAKA:t++,SGML_DECL:t++,SGML_DECL_QUOTED:t++,DOCTYPE:t++,DOCTYPE_QUOTED:t++,DOCTYPE_DTD:t++,DOCTYPE_DTD_QUOTED:t++,COMMENT_STARTING:t++,COMMENT:t++,COMMENT_ENDING:t++,COMMENT_ENDED:t++,CDATA:t++,CDATA_ENDING:t++,CDATA_ENDING_2:t++,
PROC_INST:t++,PROC_INST_BODY:t++,PROC_INST_ENDING:t++,OPEN_TAG:t++,OPEN_TAG_SLASH:t++,ATTRIB:t++,ATTRIB_NAME:t++,ATTRIB_NAME_SAW_WHITE:t++,ATTRIB_VALUE:t++,ATTRIB_VALUE_QUOTED:t++,ATTRIB_VALUE_CLOSED:t++,ATTRIB_VALUE_UNQUOTED:t++,ATTRIB_VALUE_ENTITY_Q:t++,ATTRIB_VALUE_ENTITY_U:t++,CLOSE_TAG:t++,CLOSE_TAG_SAW_WHITE:t++,SCRIPT:t++,SCRIPT_ENDING:t++};e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,
Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,
ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,
Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,
zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,
ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(e.ENTITIES).forEach(function(a){var c=e.ENTITIES[a];c="number"===
typeof c?String.fromCharCode(c):c;e.ENTITIES[a]=c});for(var U in e.STATE)e.STATE[e.STATE[U]]=U;t=e.STATE;String.fromCodePoint||function(){var a=String.fromCharCode,c=Math.floor,b=function(){var b=[],d=-1,f=arguments.length;if(!f)return"";for(var g="";++d<f;){var n=Number(arguments[d]);if(!isFinite(n)||0>n||1114111<n||c(n)!==n)throw RangeError("Invalid code point: "+n);if(65535>=n)b.push(n);else{n-=65536;var e=(n>>10)+55296;n=n%1024+56320;b.push(e,n)}if(d+1===f||16384<b.length)g+=a.apply(null,b),b.length=
0}return g};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:b,configurable:!0,writable:!0}):String.fromCodePoint=b}()})("undefined"===typeof k?this.sax={}:k)}).call(this,d("buffer").Buffer)},{buffer:3,stream:29,string_decoder:30}],29:[function(d,h,k){function b(){e.call(this)}h.exports=b;var e=d("events").EventEmitter;d("inherits")(b,e);b.Readable=d("readable-stream/readable.js");b.Writable=d("readable-stream/writable.js");b.Duplex=d("readable-stream/duplex.js");b.Transform=
d("readable-stream/transform.js");b.PassThrough=d("readable-stream/passthrough.js");b.Stream=b;b.prototype.pipe=function(b,d){function p(a){b.writable&&!1===b.write(a)&&k.pause&&k.pause()}function u(){k.readable&&k.resume&&k.resume()}function a(){x||(x=!0,b.end())}function q(){x||(x=!0,"function"===typeof b.destroy&&b.destroy())}function w(a){A();if(0===e.listenerCount(this,"error"))throw a;}function A(){k.removeListener("data",p);b.removeListener("drain",u);k.removeListener("end",a);k.removeListener("close",
q);k.removeListener("error",w);b.removeListener("error",w);k.removeListener("end",A);k.removeListener("close",A);b.removeListener("close",A)}var k=this;k.on("data",p);b.on("drain",u);b._isStdio||d&&!1===d.end||(k.on("end",a),k.on("close",q));var x=!1;k.on("error",w);b.on("error",w);k.on("end",A);k.on("close",A);b.on("close",A);b.emit("pipe",k);return b}},{events:5,inherits:7,"readable-stream/duplex.js":12,"readable-stream/passthrough.js":23,"readable-stream/readable.js":24,"readable-stream/transform.js":25,
"readable-stream/writable.js":26}],30:[function(d,h,k){arguments[4][22][0].apply(k,arguments)},{dup:22,"safe-buffer":27}],31:[function(d,h,k){(function(b,e){function p(a,b){this._id=a;this._clearFn=b}var u=d("process/browser.js").nextTick,h=Function.prototype.apply,D=Array.prototype.slice,a={},q=0;k.setTimeout=function(){return new p(h.call(setTimeout,window,arguments),clearTimeout)};k.setInterval=function(){return new p(h.call(setInterval,window,arguments),clearInterval)};k.clearTimeout=k.clearInterval=
function(a){a.close()};p.prototype.unref=p.prototype.ref=function(){};p.prototype.close=function(){this._clearFn.call(window,this._id)};k.enroll=function(a,b){clearTimeout(a._idleTimeoutId);a._idleTimeout=b};k.unenroll=function(a){clearTimeout(a._idleTimeoutId);a._idleTimeout=-1};k._unrefActive=k.active=function(a){clearTimeout(a._idleTimeoutId);var b=a._idleTimeout;0<=b&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},b))};k.setImmediate="function"===typeof b?b:function(b){var d=
q++,e=2>arguments.length?!1:D.call(arguments,1);a[d]=!0;u(function(){a[d]&&(e?b.apply(null,e):b.call(null),k.clearImmediate(d))});return d};k.clearImmediate="function"===typeof e?e:function(b){delete a[b]}}).call(this,d("timers").setImmediate,d("timers").clearImmediate)},{"process/browser.js":11,timers:31}],32:[function(d,h,k){(function(b){function d(d){try{if(!b.localStorage)return!1}catch(u){return!1}d=b.localStorage[d];return null==d?!1:"true"===String(d).toLowerCase()}h.exports=function(b,e){if(d("noDeprecation"))return b;
var p=!1;return function(){if(!p){if(d("throwDeprecation"))throw Error(e);d("traceDeprecation")?console.trace(e):console.warn(e);p=!0}return b.apply(this,arguments)}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],33:[function(d,h,k){(function(b,d,p,k,h){function e(a,c){var b=a.styleAttrs&&a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===a.kind)!b&&c&&(a.styleAttrs||(a.styleAttrs={}),a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=
c);else if(b&&delete a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],a.contents)for(var d=0;d<a.contents.length;d++)e(a.contents[d],b||c)}function a(c){if("contents"in c){var b="styleAttrs"in c?c.styleAttrs[k.byName.ruby.qname]:null;b="span"===c.kind&&("container"===b||"textContainer"===b||"baseContainer"===b);for(var d=c.contents.length-1;0<=d;d--)!b||"styleAttrs"in c.contents[d]&&k.byName.ruby.qname in c.contents[d].styleAttrs?a(c.contents[d]):delete c.contents[d]}}function q(a,
c,b,d){var f=d&&"seq"===d.timeContainer,g=0;d&&(g=f&&b?b.end:d.begin);c.begin=c.explicit_begin?c.explicit_begin+g:g;b=c.begin;d=null;for(var n in c.sets)q(a,c.sets[n],d,c),b="seq"===c.timeContainer?c.sets[n].end:Math.max(b,c.sets[n].end),d=c.sets[n];if("contents"in c)for(var e in c.contents)q(a,c.contents[e],d,c),b="seq"===c.timeContainer?c.contents[e].end:Math.max(b,c.contents[e].end),d=c.contents[e];else b=f?c.begin:Number.POSITIVE_INFINITY;c.end=null!==c.explicit_end&&null!==c.explicit_dur?Math.min(c.begin+
c.explicit_dur,g+c.explicit_end):null===c.explicit_end&&null!==c.explicit_dur?c.begin+c.explicit_dur:null!==c.explicit_end&&null===c.explicit_dur?g+c.explicit_end:b;delete c.explicit_begin;delete c.explicit_dur;delete c.explicit_end;a._registerEvent(c)}function u(a){this.node=a}function A(){this.events=[];this.head=new y;this.body=null}function y(){this.styling=new x;this.layout=new z}function x(){this.styles={};this.initials={}}function v(){this.styleRefs=this.styleAttrs=this.id=null}function F(){this.styleAttrs=
null}function z(){this.regions={}}function C(a,c){this.kind="image";this.src=a;this.type=c}function I(a){this.id=a}function c(a){this.regionID=a}function B(a){this.styleAttrs=a}function n(a){this.sets=a}function m(a){this.contents=a}function H(a,c,b){this.explicit_begin=a;this.explicit_end=c;this.explicit_dur=b}function J(){this.kind="body"}function M(){this.kind="div"}function N(){this.kind="p"}function K(){this.kind="span"}function E(){this.kind="span"}function S(){this.kind="br"}function g(){}
function r(){}function f(a){var c=null;a&&(a=a.attributes["xml:id"]||a.attributes.id)&&(c=a.value||null);return c}function l(a){return a&&"style"in a.attributes?a.attributes.style.value.split(" "):[]}function Q(a,c){var b={};if(null!==a)for(var d in a.attributes){var f=a.attributes[d].uri+" "+a.attributes[d].local,g=k.byQName[f];if(void 0!==g){var n=g.parse(a.attributes[d].value);null!==n?(b[f]=n,g===k.byName.zIndex&&R(c,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):
L(c,"Cannot parse styling attribute "+f+" --\x3e "+a.attributes[d].value)}}return b}function P(a,c,b){for(var d in a.attributes)if(a.attributes[d].uri===c&&a.attributes[d].local===b)return a.attributes[d].value;return null}function X(a,c){a=P(a,p.ns_tts,"extent");if(null===a)return null;var b=a.split(" ");if(2!==b.length)return R(c,"Malformed extent (ignoring)"),null;a=h.parseLength(b[0]);b=h.parseLength(b[1]);return b&&a?{h:b,w:a}:(R(c,"Malformed extent values (ignoring)"),null)}function V(a,c,b){var d=
/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,f=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,g=/^(\d+(?:\.\d+)?)t$/,n=/^(\d+(?:\.\d+)?)ms$/,e=/^(\d+(?:\.\d+)?)s$/,m=/^(\d+(?:\.\d+)?)h$/,q=/^(\d+(?:\.\d+)?)m$/,l,p=null;null!==(l=/^(\d+(?:\.\d+)?)f$/.exec(b))?null!==c&&(p=parseFloat(l[1])/c):null!==(l=g.exec(b))?null!==a&&(p=parseFloat(l[1])/a):null!==(l=n.exec(b))?p=parseFloat(l[1])/1E3:null!==(l=e.exec(b))?p=parseFloat(l[1]):null!==(l=m.exec(b))?p=3600*parseFloat(l[1]):null!==(l=q.exec(b))?p=60*parseFloat(l[1]):null!==
(l=d.exec(b))?p=3600*parseInt(l[1])+60*parseInt(l[2])+parseFloat(l[3]):null!==(l=f.exec(b))&&null!==c&&(p=3600*parseInt(l[1])+60*parseInt(l[2])+parseInt(l[3])+(null===l[4]?0:parseInt(l[4])/c));return p}function t(a,c,b){for(;0<c.styleRefs.length;){var d=c.styleRefs.pop();d in a.styles?(t(a,a.styles[d],b),W(a.styles[d].styleAttrs,c.styleAttrs)):L(b,"Non-existant style id referenced")}}function U(a,c,b,d){for(var f=c.length-1;0<=f;f--){var g=c[f];g in a.styles?W(a.styles[g].styleAttrs,b):L(d,"Non-existant style id referenced")}}
function W(a,c){for(var b in a)b in c||(c[b]=a[b])}function R(a,c){if(a&&a.warn&&a.warn(c))throw c;}function L(a,c){if(a&&a.error&&a.error(c))throw c;}function O(a,c){a&&a.fatal&&a.fatal(c);throw c;}function Z(a,c){for(var b=0,d=a.length-1,f;b<=d;){f=Math.floor((b+d)/2);var g=a[f];if(g<c)b=f+1;else if(g>c)d=f-1;else return{found:!0,index:f}}return{found:!1,index:b}}b.fromXML=function(c,b,f){var n=d.parser(!0,{xmlns:!0}),m=[],l=[],B=[],H=0,w=null;n.onclosetag=function(a){if(m[0]instanceof g)null!==
w.head&&null!==w.head.styling&&U(w.head.styling,m[0].styleRefs,m[0].styleAttrs,b),delete m[0].styleRefs;else if(m[0]instanceof x)for(var c in m[0].styles)t(m[0],m[0].styles[c],b);else if(m[0]instanceof N||m[0]instanceof K){if(1<m[0].contents.length){a=[m[0].contents[0]];for(c=1;c<m[0].contents.length;c++)m[0].contents[c]instanceof E&&a[a.length-1]instanceof E?a[a.length-1].text+=m[0].contents[c].text:a.push(m[0].contents[c]);m[0].contents=a}m[0]instanceof K&&1===m[0].contents.length&&m[0].contents[0]instanceof
E&&(m[0].text=m[0].contents[0].text,delete m[0].contents)}else if(m[0]instanceof u)if(m[0].node.uri===p.ns_tt&&"metadata"===m[0].node.local)H--;else if(0<H&&f&&"onCloseTag"in f)f.onCloseTag();B.shift();l.shift();m.shift()};n.ontext=function(a){if(void 0!==m[0])if(m[0]instanceof K||m[0]instanceof N){if(m[0]instanceof K){var c=m[0].styleAttrs[k.byName.ruby.qname];if("container"===c||"textContainer"===c||"baseContainer"===c)return}c=new E;c.initFromText(w,m[0],a,B[0],b);m[0].contents.push(c)}else if(m[0]instanceof
u&&0<H&&f&&"onText"in f)f.onText(a)};n.onopentag=function(a){function c(a){p.ttaf_map[a.uri]&&(a.uri=p.ttaf_map[a.uri])}var d=a.attributes["xml:space"];d?B.unshift(d.value):0===B.length?B.unshift("default"):B.unshift(B[0]);(d=a.attributes["xml:lang"])?l.unshift(d.value):0===l.length?l.unshift(""):l.unshift(l[0]);c(a);if(a.attributes)for(var n in a.attributes)a.attributes.hasOwnProperty(n)&&c(a.attributes[n]);if(a.uri===p.ns_tt)if("tt"===a.local)null!==w&&O(b,"Two <tt> elements at ("+this.line+","+
this.column+")"),w=new A,w.initFromNode(a,b),m.unshift(w);else if("head"===a.local)m[0]instanceof A||O(b,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),m.unshift(w.head);else if("styling"===a.local)m[0]instanceof y||O(b,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),m.unshift(w.head.styling);else if("style"===a.local)if(m[0]instanceof x){var e=new v;e.initFromNode(a,b);e.id?w.head.styling.styles[e.id]=e:L(b,"<style> element missing @id attribute");
m.unshift(e)}else m[0]instanceof g?(e=new v,e.initFromNode(a,b),W(e.styleAttrs,m[0].styleAttrs),m.unshift(e)):O(b,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===a.local)if(m[0]instanceof x){n=new F;n.initFromNode(a,b);for(e in n.styleAttrs)w.head.styling.initials[e]=n.styleAttrs[e];m.unshift(n)}else O(b,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===a.local)m[0]instanceof y||O(b,
"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),m.unshift(w.head.layout);else if("region"===a.local)m[0]instanceof z||O(b,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),e=new g,e.initFromNode(w,a,b),!e.id||e.id in w.head.layout.regions?L(b,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):w.head.layout.regions[e.id]=e,m.unshift(e);else if("body"===a.local)m[0]instanceof A||O(b,"Parent of <body> element is not <tt> at "+
this.line+","+this.column+")"),null!==w.body&&O(b,"Second <body> element at "+this.line+","+this.column+")"),e=new J,e.initFromNode(w,a,b),w.body=e,m.unshift(e);else if("div"===a.local){m[0]instanceof M||m[0]instanceof J||O(b,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");e=new M;e.initFromNode(w,m[0],a,b);if(n=e.styleAttrs[k.byName.backgroundImage.qname])e.contents.push(new C(n)),delete e.styleAttrs[k.byName.backgroundImage.qname];m[0].contents.push(e);m.unshift(e)}else"image"===
a.local?(m[0]instanceof M||O(b,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),e=new C,e.initFromNode(w,m[0],a,b),m[0].contents.push(e),m.unshift(e)):"p"===a.local?(m[0]instanceof M||O(b,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),e=new N,e.initFromNode(w,m[0],a,b),m[0].contents.push(e),m.unshift(e)):"span"===a.local?(m[0]instanceof K||m[0]instanceof N||O(b,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),e=
new K,e.initFromNode(w,m[0],a,B[0],b),m[0].contents.push(e),m.unshift(e)):"br"===a.local?(m[0]instanceof K||m[0]instanceof N||O(b,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),e=new S,e.initFromNode(w,m[0],a,b),m[0].contents.push(e),m.unshift(e)):"set"===a.local?(m[0]instanceof K||m[0]instanceof N||m[0]instanceof M||m[0]instanceof J||m[0]instanceof g||m[0]instanceof S||O(b,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+
")"),e=new r,e.initFromNode(w,m[0],a,b),m[0].sets.push(e),m.unshift(e)):m.unshift(new u(a));else m.unshift(new u(a));if(m[0]instanceof u)if(a.uri===p.ns_tt&&"metadata"===a.local)H++;else if(0<H&&f&&"onOpenTag"in f){e=[];for(var q in a.attributes)e[a.attributes[q].uri+" "+a.attributes[q].local]={uri:a.attributes[q].uri,local:a.attributes[q].local,value:a.attributes[q].value};f.onOpenTag(a.uri,a.local,e)}};n.write(c).close();delete w.head.styling.styles;c=!1;for(var h in w.head.layout.regions){c=!0;
break}c||(h=g.prototype.createDefaultRegion(w,b),w.head.layout.regions[h.id]=h);for(var aa in w.head.layout.regions)q(w,w.head.layout.regions[aa],null,null);w.body&&q(w,w.body,null,null);w.body&&a(w.body);w.body&&e(w.body);return w};A.prototype.initFromNode=function(a,c){var b=P(a,p.ns_ttp,"cellResolution"),d=15;var f=32;null!==b&&(b=/(\d+) (\d+)/.exec(b),null!==b?(f=parseInt(b[1]),d=parseInt(b[2])):R(c,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new h.ComputedLength(0,
1/d),w:new h.ComputedLength(1/f,0)};d=P(a,p.ns_ttp,"frameRate");b=30;null!==d&&(f=/(\d+)/.exec(d),null!==f?b=parseInt(f[1]):R(c,"Malformed frame rate attribute (using initial value instead)"));f=P(a,p.ns_ttp,"frameRateMultiplier");var e=1;null!==f&&(f=/(\d+) (\d+)/.exec(f),null!==f?e=parseInt(f[1])/parseInt(f[2]):R(c,"Malformed frame rate multiplier attribute (using initial value instead)"));b*=e;e=1;f=P(a,p.ns_ttp,"tickRate");null===f?null!==d&&(e=b):(f=/(\d+)/.exec(f),null!==f?e=parseInt(f[1]):
R(c,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=b;this.tickRate=e;f=P(a,p.ns_ittp,"aspectRatio");null===f&&(f=P(a,p.ns_ttp,"displayAspectRatio"));d=null;null!==f&&(b=/(\d+)\s+(\d+)/.exec(f),null!==b?(f=parseInt(b[1]),b=parseInt(b[2]),0!==f&&0!==b?d=f/b:L(c,"Illegal aspectRatio values (ignoring)")):L(c,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=d;d=P(a,p.ns_ttp,"timeBase");null!==d&&"media"!==d&&O(c,"Unsupported time base");a=X(a,c);
null===a?this.pxLength={h:null,w:null}:("px"===a.h.unit&&"px"===a.w.unit||O(c,"Extent on TT must be in px or absent"),this.pxLength={h:new h.ComputedLength(0,1/a.h.value),w:new h.ComputedLength(1/a.w.value,0)});this.dimensions={h:new h.ComputedLength(0,1),w:new h.ComputedLength(1,0)}};A.prototype._registerEvent=function(a){if(!(a.end<=a.begin)){var c=Z(this.events,a.begin);c.found||this.events.splice(c.index,0,a.begin);a.end!==Number.POSITIVE_INFINITY&&(c=Z(this.events,a.end),c.found||this.events.splice(c.index,
0,a.end))}};A.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]};A.prototype.getMediaTimeEvents=function(){return this.events};v.prototype.initFromNode=function(a,c){this.id=f(a);this.styleAttrs=Q(a,c);this.styleRefs=l(a)};F.prototype.initFromNode=function(a,c){this.styleAttrs={};for(var b in a.attributes)if(a.attributes[b].uri===p.ns_itts||a.attributes[b].uri===p.ns_ebutts||a.attributes[b].uri===p.ns_tts)this.styleAttrs[a.attributes[b].uri+" "+a.attributes[b].local]=
a.attributes[b].value};C.prototype.initFromNode=function(a,b,d,f){(this.src="src"in d.attributes?d.attributes.src.value:null)||L(f,"Invalid image@src attribute");(this.type="type"in d.attributes?d.attributes.type.value:null)||L(f,"Invalid image@type attribute");B.prototype.initFromNode.call(this,a,b,d,f);H.prototype.initFromNode.call(this,a,b,d,f);n.prototype.initFromNode.call(this,a,b,d,f);c.prototype.initFromNode.call(this,a,b,d,f)};I.prototype.initFromNode=function(a,c,b,d){this.id=f(b)};c.prototype.initFromNode=
function(a,c,b,d){this.regionID=b&&"region"in b.attributes?b.attributes.region.value:""};B.prototype.initFromNode=function(a,c,b,d){this.styleAttrs=Q(b,d);null!==a.head&&null!==a.head.styling&&U(a.head.styling,l(b),this.styleAttrs,d)};n.prototype.initFromNode=function(a,c,b,d){this.sets=[]};m.prototype.initFromNode=function(a,c,b,d){this.contents=[]};H.prototype.initFromNode=function(a,c,b,d){c=null;b&&"begin"in b.attributes&&(c=V(a.tickRate,a.effectiveFrameRate,b.attributes.begin.value),null===c&&
R(d,"Malformed begin value "+b.attributes.begin.value+" (using 0)"));var f=null;b&&"dur"in b.attributes&&(f=V(a.tickRate,a.effectiveFrameRate,b.attributes.dur.value),null===f&&R(d,"Malformed dur value "+b.attributes.dur.value+" (ignoring)"));var e=null;b&&"end"in b.attributes&&(e=V(a.tickRate,a.effectiveFrameRate,b.attributes.end.value),null===e&&R(d,"Malformed end value (ignoring)"));this.explicit_begin=c;this.explicit_end=e;this.explicit_dur=f;(a=b&&"timeContainer"in b.attributes?b.attributes.timeContainer.value:
null)&&"par"!==a?"seq"===a?d="seq":(L(d,"Illegal value of timeContainer (assuming 'par')"),d="par"):d="par";this.timeContainer=d};J.prototype.initFromNode=function(a,b,d){B.prototype.initFromNode.call(this,a,null,b,d);H.prototype.initFromNode.call(this,a,null,b,d);n.prototype.initFromNode.call(this,a,null,b,d);c.prototype.initFromNode.call(this,a,null,b,d);m.prototype.initFromNode.call(this,a,null,b,d)};M.prototype.initFromNode=function(a,b,d,f){B.prototype.initFromNode.call(this,a,b,d,f);H.prototype.initFromNode.call(this,
a,b,d,f);n.prototype.initFromNode.call(this,a,b,d,f);c.prototype.initFromNode.call(this,a,b,d,f);m.prototype.initFromNode.call(this,a,b,d,f)};N.prototype.initFromNode=function(a,b,d,f){B.prototype.initFromNode.call(this,a,b,d,f);H.prototype.initFromNode.call(this,a,b,d,f);n.prototype.initFromNode.call(this,a,b,d,f);c.prototype.initFromNode.call(this,a,b,d,f);m.prototype.initFromNode.call(this,a,b,d,f)};K.prototype.initFromNode=function(a,b,d,f,e){B.prototype.initFromNode.call(this,a,b,d,e);H.prototype.initFromNode.call(this,
a,b,d,e);n.prototype.initFromNode.call(this,a,b,d,e);c.prototype.initFromNode.call(this,a,b,d,e);m.prototype.initFromNode.call(this,a,b,d,e);this.space=f};E.prototype.initFromText=function(a,c,b,d,f){H.prototype.initFromNode.call(this,a,c,null,f);this.text=b;this.space=d};S.prototype.initFromNode=function(a,b,d,f){c.prototype.initFromNode.call(this,a,b,d,f);H.prototype.initFromNode.call(this,a,b,d,f)};g.prototype.createDefaultRegion=function(a,c){var b=new g;b.id="";B.prototype.initFromNode.call(b,
a,null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",value:"after",prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},"tts:overflow":{name:"tts:overflow",value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},
ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",ebutts:"urn:ebu:tt:style",ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",local:"region",uri:"http://www.w3.org/ns/ttml",isSelfClosing:!0},c);b.sets=[];H.call(b,0,Number.POSITIVE_INFINITY,null);return b};
g.prototype.initFromNode=function(a,c,b){I.prototype.initFromNode.call(this,a,null,c,b);H.prototype.initFromNode.call(this,a,null,c,b);n.prototype.initFromNode.call(this,a,null,c,b);this.styleAttrs=Q(c,b);this.styleRefs=l(c)};r.prototype.initFromNode=function(a,c,b,d){H.prototype.initFromNode.call(this,a,c,b,d);a=Q(b,d);this.value=this.qname=null;for(var f in a){if(this.qname){L(d,"More than one style specified on set");break}this.qname=f;this.value=a[f]}}})("undefined"===typeof k?this.imscDoc={}:
k,"undefined"===typeof sax?d("sax"):sax,"undefined"===typeof imscNames?d("./names"):imscNames,"undefined"===typeof imscStyles?d("./styles"):imscStyles,"undefined"===typeof imscUtils?d("./utils"):imscUtils)},{"./names":37,"./styles":38,"./utils":39,sax:28}],34:[function(d,h,k){backgroundColorAdjustSuffix="BackgroundColorAdjust";(function(b,d,p,k){function e(a){var c={};colorAdjustMapEntries=Object.entries(a);for(var b in colorAdjustMapEntries)fromColor=k.parseColor(colorAdjustMapEntries[b][0]),toColor=
k.parseColor(colorAdjustMapEntries[b][1]),fromColor&&toColor&&(c[fromColor.toString()]=toColor);return c}function u(c,b,d){if("region"===d.kind){var e=document.createElement("div");e.style.position="absolute"}else if("body"===d.kind)e=document.createElement("div");else if("div"===d.kind)e=document.createElement("div");else if("image"===d.kind){if(e=document.createElement("img"),null!==c.imgResolver&&null!==d.src){var n=c.imgResolver(d.src,e);n&&(e.src=n);e.height=c.regionH;e.width=c.regionW}}else if("p"===
d.kind)e=document.createElement("p");else if("span"===d.kind)if("container"===d.styleAttrs[p.byName.ruby.qname])e=document.createElement("ruby"),c.ruby=!0;else if("base"===d.styleAttrs[p.byName.ruby.qname])e=document.createElement("rb");else if("text"===d.styleAttrs[p.byName.ruby.qname])e=document.createElement("rt");else if("baseContainer"===d.styleAttrs[p.byName.ruby.qname])e=document.createElement("rbc");else if("textContainer"===d.styleAttrs[p.byName.ruby.qname])e=document.createElement("rtc");
else{if("delimiter"===d.styleAttrs[p.byName.ruby.qname])return;e=document.createElement("span")}else"br"===d.kind&&(e=document.createElement("br"));if(e){b.appendChild(e);e.style.margin="0";if("region"===d.kind)if(b=d.styleAttrs[p.byName.writingMode.qname],"lrtb"===b||"lr"===b)c.ipd="lr",c.bpd="tb";else if("rltb"===b||"rl"===b)c.ipd="rl",c.bpd="tb";else if("tblr"===b)c.ipd="tb",c.bpd="lr";else{if("tbrl"===b||"tb"===b)c.ipd="tb",c.bpd="rl"}else"p"===d.kind&&"tb"===c.bpd&&(c.ipd="ltr"===d.styleAttrs[p.byName.direction.qname]?
"lr":"rl");for(var k in x)b=x[k],n=d.styleAttrs[b.qname],void 0!==n&&null!==b.map&&b.map(c,e,d,n);k=e;(b=d.styleAttrs[p.byName.linePadding.qname])&&!b.isZero()&&(n=b.multiply(b.toUsedLength(c.w,c.h),c.options.sizeAdjust),0<n&&(n=Math.ceil(n)+"px","tb"===c.bpd?(k.style.paddingLeft=n,k.style.paddingRight=n):(k.style.paddingTop=n,k.style.paddingBottom=n),c.lp=b));(b=d.styleAttrs[p.byName.multiRowAlign.qname])&&"auto"!==b&&(k=document.createElement("span"),k.style.display="inline-block",k.style.textAlign=
b,e.appendChild(k),c.mra=b);(b=d.styleAttrs[p.byName.rubyReserve.qname])&&"none"!==b[0]&&(c.rubyReserve=b);d.styleAttrs[p.byName.fillLineGap.qname]&&(c.flg=!0);if("span"===d.kind&&d.text)if((b=d.styleAttrs[p.byName.textEmphasis.qname])&&"none"!==b.style&&(c.textEmphasis=!0),p.byName.textCombine.qname in d.styleAttrs&&"all"===d.styleAttrs[p.byName.textCombine.qname][0])e.textContent=d.text,b&&A(c,e,d,b);else{n="";for(var h=0;h<d.text.length;h++){n+=d.text.charAt(h);var B=d.text.charCodeAt(h);if(55296>
B||56319<B||h===d.text.length)B=document.createElement("span"),B.textContent=n,b&&A(c,B,d,b),e.appendChild(B),n=""}}for(var y in d.contents)u(c,k,d.contents[y]);y=[];if((c.lp||c.mra||c.flg||c.ruby||c.textEmphasis||c.rubyReserve)&&"p"===d.kind){w(c,k,y,null);if(c.rubyReserve){for(b=0;b<y.length;b++){n=document.createElement("ruby");h=document.createElement("rb");h.textContent="\u200b";n.appendChild(h);var v=c.rubyReserve[1].toUsedLength(c.w,c.h)+"px";"both"===c.rubyReserve[0]||"outside"===c.rubyReserve[0]&&
1==y.length?(h=document.createElement("rtc"),h.style[z]=F?"after":"under",h.textContent="\u200b",h.style.fontSize=v,B=document.createElement("rtc"),B.style[z]=F?"before":"over",B.textContent="\u200b",B.style.fontSize=v,n.appendChild(h),n.appendChild(B)):(h=document.createElement("rtc"),h.textContent="\u200b",h.style.fontSize=v,h.style[z]="after"===c.rubyReserve[0]||"outside"===c.rubyReserve[0]&&0<b?F?"after":"tb"===c.bpd||"rl"===c.bpd?"under":"over":F?"before":"tb"===c.bpd||"rl"===c.bpd?"over":"under",
n.appendChild(h));h=null;for(B=0;B<y[b].rbc.length;B++)if("ruby"===y[b].rbc[B].localName){h=y[b].rbc[B];for(B=0;B<h.style.length;B++)n.style.setProperty(h.style.item(B),h.style.getPropertyValue(h.style.item(B)));break}h=h||y[b].elements[0].node;h.parentElement.insertBefore(n,h)}c.rubyReserve=null}if(c.ruby||c.rubyReserve){for(b=0;b<y.length;b++)for(n=0;n<y[b].rbc.length;n++)y[b].rbc[n].style[z]||(y[b].rbc[n].style[z]=F?0===b?"before":"after":"tb"===c.bpd?0===b?"over":"under":"rl"===c.bpd?0===b?"over":
"under":0===b?"under":"over");c.ruby=null}if(c.textEmphasis){for(b=0;b<y.length;b++)for(n=0;n<y[b].te.length;n++)y[b].te[n].style[I]&&"none"!==y[b].te[n].style[I]||(y[b].te[n].style[I]="tb"===c.bpd?0===b?"left over":"left under":"rl"===c.bpd?0===b?"right under":"left under":0===b?"left under":"right under");c.textEmphasis=null}if(c.mra){for(b=0;b<y.length-1;b++)h=y[b].elements.length,0!==h&&!1===y[b].br&&(n=document.createElement("br"),h=y[b].elements[h-1].node,h.parentElement.insertBefore(n,h.nextSibling));
c.mra=null}if(c.lp){b=c.lp.multiply(c.lp.toUsedLength(c.w,c.h),c.options.sizeAdjust);for(var C in y)n=y[C].elements[y[C].start_elem],h=y[C].elements[y[C].end_elem],B=Math.ceil(b)+"px",v="-"+Math.ceil(b)+"px",0!==y[C].elements.length&&("lr"===c.ipd?(n.node.style.borderLeftColor=n.bgcolor||"#00000000",n.node.style.borderLeftStyle="solid",n.node.style.borderLeftWidth=B,n.node.style.marginLeft=v):"rl"===c.ipd?(n.node.style.borderRightColor=n.bgcolor||"#00000000",n.node.style.borderRightStyle="solid",
n.node.style.borderRightWidth=B,n.node.style.marginRight=v):"tb"===c.ipd&&(n.node.style.borderTopColor=n.bgcolor||"#00000000",n.node.style.borderTopStyle="solid",n.node.style.borderTopWidth=B,n.node.style.marginTop=v),"lr"===c.ipd?(h.node.style.borderRightColor=h.bgcolor||"#00000000",h.node.style.borderRightStyle="solid",h.node.style.borderRightWidth=B,h.node.style.marginRight=v):"rl"===c.ipd?(h.node.style.borderLeftColor=h.bgcolor||"#00000000",h.node.style.borderLeftStyle="solid",h.node.style.borderLeftWidth=
B,h.node.style.marginLeft=v):"tb"===c.ipd&&(h.node.style.borderBottomColor=h.bgcolor||"#00000000",h.node.style.borderBottomStyle="solid",h.node.style.borderBottomWidth=B,h.node.style.marginBottom=v));c.lp=null}if(c.flg){b=q(k.getBoundingClientRect(),c);C=b.before;b=b.after;n=Math.sign(b-C);for(h=0;h<=y.length;h++){B=0===h?C:h===y.length?b:(y[h].before+y[h-1].after)/2;if(0<h)for(var g=0;g<y[h-1].elements.length;g++)if(null!==y[h-1].elements[g].bgcolor){var r=y[h-1].elements[g];0>n*(r.after-B)&&(v=
Math.ceil(Math.abs(B-r.after))+"px",r.node.style.backgroundColor=r.bgcolor,"lr"===c.bpd?r.node.style.paddingRight=v:"rl"===c.bpd?r.node.style.paddingLeft=v:"tb"===c.bpd&&(r.node.style.paddingBottom=v))}if(h<y.length)for(g=0;g<y[h].elements.length;g++)r=y[h].elements[g],null!==r.bgcolor&&0<n*(r.before-B)&&(v=Math.ceil(Math.abs(r.before-B))+"px",r.node.style.backgroundColor=r.bgcolor,"lr"===c.bpd?r.node.style.paddingLeft=v:"rl"===c.bpd?r.node.style.paddingRight=v:"tb"===c.bpd&&(r.node.style.paddingTop=
v))}c.flg=null}}"region"===d.kind&&(w(c,k,y),"tb"===c.bpd&&c.enableRollUp&&0<d.contents.length&&"after"===d.styleAttrs[p.byName.displayAlign.qname]&&(d=new a(""===d.id?"_":d.id,y),c.currentISDState[d.id]=d,c.previousISDState&&d.id in c.previousISDState&&0<c.previousISDState[d.id].plist.length&&1<d.plist.length&&d.plist[d.plist.length-2].text===c.previousISDState[d.id].plist[c.previousISDState[d.id].plist.length-1].text&&(c=e.firstElementChild,d=d.plist[d.plist.length-1].after-d.plist[d.plist.length-
1].before,c.style.bottom="-"+d+"px",c.style.transition="transform 0.4s",c.style.position="relative",c.style.transform="translateY(-"+d+"px)")))}else if(c=c.errorHandler,d="Error processing ISD element kind: "+d.kind,c&&c.error&&c.error(d))throw d;}function a(a,b){this.id=a;this.plist=b}function q(a,b){var c={before:null,after:null,start:null,end:null};"tb"===b.bpd?(c.before=a.top,c.after=a.bottom,"lr"===b.ipd?(c.start=a.left,c.end=a.right):(c.start=a.right,c.end=a.left)):"lr"===b.bpd?(c.before=a.left,
c.after=a.right,c.start=a.top,c.end=a.bottom):"rl"===b.bpd&&(c.before=a.right,c.after=a.left,c.start=a.top,c.end=a.bottom);return c}function w(a,b,d,e){if("rt"!==b.localName&&"rtc"!==b.localName)if(e=b.style.backgroundColor||e,0===b.childElementCount)if("span"===b.localName||"rb"===b.localName){var c=b.getBoundingClientRect();if(0!==c.height&&0!==c.width){a=q(c,a);if(!(c=0===d.length)){c=a.before;var m=a.after,n=d[d.length-1].before,h=d[d.length-1].after;c=!(m<h&&c>n||h<=m&&n>=c)}c?d.push({before:a.before,
after:a.after,start:a.start,end:a.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(c=Math.sign(a.after-a.before),m=Math.sign(a.end-a.start),0>c*(a.before-d[d.length-1].before)&&(d[d.length-1].before=a.before),0<c*(a.after-d[d.length-1].after)&&(d[d.length-1].after=a.after),0>m*(a.start-d[d.length-1].start)&&(d[d.length-1].start=a.start,d[d.length-1].start_elem=d[d.length-1].elements.length),0<m*(a.end-d[d.length-1].end)&&(d[d.length-1].end=a.end,d[d.length-1].end_elem=d[d.length-
1].elements.length));d[d.length-1].text+=b.textContent;d[d.length-1].elements.push({node:b,bgcolor:e,before:a.before,after:a.after})}}else"br"===b.localName&&0!==d.length&&(d[d.length-1].br=!0);else for(b=b.firstChild;b;)b.nodeType===Node.ELEMENT_NODE&&(w(a,b,d,e),"ruby"===b.localName||"rtc"===b.localName?0<d.length&&d[d.length-1].rbc.push(b):"span"===b.localName&&b.style[C]&&"none"!==b.style[C]&&0<d.length&&d[d.length-1].te.push(b)),b=b.nextSibling}function A(a,b,d,e){if("none"===e.style)b.style[C]=
"none";else if(b.style[C]="auto"===e.style?"filled":e.style+" "+e.symbol,"before"===e.position||"after"===e.position)b.style[I]="tb"===a.bpd?"before"===e.position?"left over":"left under":"rl"===a.bpd?"before"===e.position?"right under":"left under":"before"===e.position?"left under":"right under"}function h(a,b){this.qname=a;this.map=b}b.render=function(a,b,d,m,q,h,p,k,A,w){m=m||b.clientHeight;var c=q||b.clientWidth;null!==a.aspectRatio&&(q=m*a.aspectRatio,q>c?m=Math.round(c/a.aspectRatio):c=q);
q=document.createElement("div");q.style.position="relative";q.style.width=c+"px";q.style.height=m+"px";q.style.margin="auto";q.style.top=0;q.style.bottom=0;q.style.left=0;q.style.right=0;q.style.zIndex=0;d={h:m,w:c,regionH:null,regionW:null,imgResolver:d,displayForcedOnlyMode:h||!1,isd:a,errorHandler:p,previousISDState:k,enableRollUp:A||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null,options:{}};if(w){h="sizeAdjust backgroundOpacityScale fontFamily colorOpacityScale regionOpacityScale textOutline".split(" ");
for(var g in h)d.options[h[g]]=w[h[g]];w.colorAdjust&&(d.options.colorAdjust=e(w.colorAdjust));g=["region","body","div","p","span"];for(var n in g)h=g[n]+backgroundColorAdjustSuffix,w[h]&&(d.options[h]=e(w[h]))}b.appendChild(q);for(var f in a.contents)u(d,q,a.contents[f]);return d.currentISDState};var x=[new h("http://www.w3.org/ns/ttml#styling backgroundColor",function(a,b,d,e){(map_attr=(backgroundColorAdjustMap=a.options[d.kind+backgroundColorAdjustSuffix])&&backgroundColorAdjustMap[e.toString()])&&
(e=map_attr);d=e[3];0!==d&&(void 0!=a.options.backgroundOpacityScale&&(d*=a.options.backgroundOpacityScale),b.style.backgroundColor="rgba("+e[0].toString()+","+e[1].toString()+","+e[2].toString()+","+(d/255).toString()+")")}),new h("http://www.w3.org/ns/ttml#styling color",function(a,b,d,e){opacityMultiplier=a.options.colorOpacityScale||1;colorAdjustMap=a.options.colorAdjust;void 0!=colorAdjustMap&&(map_attr=colorAdjustMap[e.toString()])&&(e=map_attr);b.style.color="rgba("+e[0].toString()+","+e[1].toString()+
","+e[2].toString()+","+(opacityMultiplier*e[3]/255).toString()+")"}),new h("http://www.w3.org/ns/ttml#styling direction",function(a,b,d,e){b.style.direction=e}),new h("http://www.w3.org/ns/ttml#styling display",function(a,b,d,e){}),new h("http://www.w3.org/ns/ttml#styling displayAlign",function(a,b,d,e){b.style.display="flex";b.style.flexDirection="column";"before"===e?b.style.justifyContent="flex-start":"center"===e?b.style.justifyContent="center":"after"===e&&(b.style.justifyContent="flex-end")}),
new h("http://www.w3.org/ns/ttml#styling extent",function(a,b,d,e){a.regionH=e.h.toUsedLength(a.w,a.h);a.regionW=e.w.toUsedLength(a.w,a.h);var c=e=0;if(d=d.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])e=d[0].toUsedLength(a.w,a.h)+d[2].toUsedLength(a.w,a.h),c=d[1].toUsedLength(a.w,a.h)+d[3].toUsedLength(a.w,a.h);b.style.height=a.regionH-e+"px";b.style.width=a.regionW-c+"px"}),new h("http://www.w3.org/ns/ttml#styling fontFamily",function(a,b,d,e){d=[];a.options.fontFamily&&(e=a.options.fontFamily.split(","));
for(var c in e)e[c]=e[c].trim(),"monospaceSerif"===e[c]?(d.push("Courier New"),d.push('"Liberation Mono"'),d.push("Courier"),d.push("monospace")):"proportionalSansSerif"===e[c]||"default"===e[c]?(d.push("Arial"),d.push("Helvetica"),d.push('"Liberation Sans"'),d.push("sans-serif")):"monospace"===e[c]?d.push("monospace"):"sansSerif"===e[c]?d.push("sans-serif"):"serif"===e[c]?d.push("serif"):"monospaceSansSerif"===e[c]?(d.push("Consolas"),d.push("monospace")):"proportionalSerif"===e[c]?d.push("serif"):
d.push(e[c]);b.style.fontFamily=d.join(",")}),new h("http://www.w3.org/ns/ttml#styling shear",function(a,b,d,e){0!==e&&(d=-.9*e,b.style.transform="tb"===a.bpd?"skewX("+d+"deg)":"skewY("+d+"deg)")}),new h("http://www.w3.org/ns/ttml#styling fontSize",function(a,b,d,e){b.style.fontSize=e.multiply(e.toUsedLength(a.w,a.h),a.options.sizeAdjust)+"px"}),new h("http://www.w3.org/ns/ttml#styling fontStyle",function(a,b,d,e){b.style.fontStyle=e}),new h("http://www.w3.org/ns/ttml#styling fontWeight",function(a,
b,d,e){b.style.fontWeight=e}),new h("http://www.w3.org/ns/ttml#styling lineHeight",function(a,b,d,e){b.style.lineHeight="normal"===e?"normal":e.multiply(e.toUsedLength(a.w,a.h),a.options.sizeAdjust)+"px"}),new h("http://www.w3.org/ns/ttml#styling opacity",function(a,b,d,e){d=e;void 0!=a.options.regionOpacityScale&&(d*=a.options.regionOpacityScale);b.style.opacity=d}),new h("http://www.w3.org/ns/ttml#styling origin",function(a,b,d,e){b.style.top=e.h.toUsedLength(a.w,a.h)+"px";b.style.left=e.w.toUsedLength(a.w,
a.h)+"px"}),new h("http://www.w3.org/ns/ttml#styling overflow",function(a,b,d,e){b.style.overflow=e}),new h("http://www.w3.org/ns/ttml#styling padding",function(a,b,d,e){d=[];d[0]=e[0].toUsedLength(a.w,a.h)+"px";d[1]=e[3].toUsedLength(a.w,a.h)+"px";d[2]=e[2].toUsedLength(a.w,a.h)+"px";d[3]=e[1].toUsedLength(a.w,a.h)+"px";b.style.padding=d.join(" ")}),new h("http://www.w3.org/ns/ttml#styling position",function(a,b,d,e){b.style.top=e.h.toUsedLength(a.w,a.h)+"px";b.style.left=e.w.toUsedLength(a.w,a.h)+
"px"}),new h("http://www.w3.org/ns/ttml#styling rubyAlign",function(a,b,d,e){b.style.rubyAlign="spaceAround"===e?"space-around":"center"}),new h("http://www.w3.org/ns/ttml#styling rubyPosition",function(a,b,d,e){if("before"===e||"after"===e)b.parentElement.style[z]=F?e:"tb"===a.bpd?"before"===e?"over":"under":"rl"===a.bpd?"before"===e?"over":"under":"before"===e?"under":"over"}),new h("http://www.w3.org/ns/ttml#styling showBackground",null),new h("http://www.w3.org/ns/ttml#styling textAlign",function(a,
b,d,e){b.style.textAlign="start"===e?"rl"===a.ipd?"right":"left":"end"===e?"rl"===a.ipd?"left":"right":e}),new h("http://www.w3.org/ns/ttml#styling textDecoration",function(a,b,d,e){b.style.textDecoration=e.join(" ").replace("lineThrough","line-through")}),new h("http://www.w3.org/ns/ttml#styling textOutline",function(a,b,d,e){}),new h("http://www.w3.org/ns/ttml#styling textShadow",function(a,b,d,e){d=d.styleAttrs[p.byName.textOutline.qname];var c=a.options.textOutline;if(c)if("none"===c)d=c;else{var q=
{};c=c.split(" ");if(0!==c.length&&2>=c.length){var m=k.parseColor(c[0]);q.color=m;null!==m&&c.shift();1===c.length&&(c=k.parseLength(c[0]))&&(q.thickness=c,d=q)}}if("none"===e&&"none"===d)b.style.textShadow="";else{q=[];"none"!==d&&(d="rgba("+d.color[0].toString()+","+d.color[1].toString()+","+d.color[2].toString()+","+(d.color[3]/255).toString()+")",q.push("1px 1px 1px "+d),q.push("-1px 1px 1px "+d),q.push("1px -1px 1px "+d),q.push("-1px -1px 1px "+d));if("none"!==e)for(var h in e)q.push(e[h].x_off.toUsedLength(a.w,
a.h)+"px "+e[h].y_off.toUsedLength(a.w,a.h)+"px "+e[h].b_radius.toUsedLength(a.w,a.h)+"px rgba("+e[h].color[0].toString()+","+e[h].color[1].toString()+","+e[h].color[2].toString()+","+(e[h].color[3]/255).toString()+")");b.style.textShadow=q.join(",")}}),new h("http://www.w3.org/ns/ttml#styling textCombine",function(a,b,d,e){b.style.textCombineUpright=e.join(" ")}),new h("http://www.w3.org/ns/ttml#styling textEmphasis",function(a,b,d,e){}),new h("http://www.w3.org/ns/ttml#styling unicodeBidi",function(a,
b,d,e){b.style.unicodeBidi="bidiOverride"===e?"bidi-override":e}),new h("http://www.w3.org/ns/ttml#styling visibility",function(a,b,d,e){b.style.visibility=e}),new h("http://www.w3.org/ns/ttml#styling wrapOption",function(a,b,d,e){b.style.whiteSpace="wrap"===e?"preserve"===d.space?"pre-wrap":"normal":"preserve"===d.space?"pre":"noWrap"}),new h("http://www.w3.org/ns/ttml#styling writingMode",function(a,b,d,e){if("lrtb"===e||"lr"===e)b.style.writingMode="horizontal-tb";else if("rltb"===e||"rl"===e)b.style.writingMode=
"horizontal-tb";else if("tblr"===e)b.style.writingMode="vertical-lr";else if("tbrl"===e||"tb"===e)b.style.writingMode="vertical-rl"}),new h("http://www.w3.org/ns/ttml#styling zIndex",function(a,b,d,e){b.style.zIndex=e}),new h("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(a,b,d,e){a.displayForcedOnlyMode&&!1===e&&(b.style.visibility="hidden")})],G;for(G in x);var F="webkitRubyPosition"in window.getComputedStyle(document.documentElement),z=F?"webkitRubyPosition":"rubyPosition",
C="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",I="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition"})("undefined"===typeof k?this.imscHTML={}:k,"undefined"===typeof imscNames?d("./names"):imscNames,"undefined"===typeof imscStyles?d("./styles"):imscStyles,"undefined"===typeof imscUtils?d("./utils"):imscUtils)},{"./names":37,"./styles":38,"./utils":39}],
35:[function(d,h,k){(function(b,d,h,k){function e(b,d,w,y,v,D,c,B,n){if(d<c.begin||d>=c.end)return null;D="regionID"in c&&""!==c.regionID?c.regionID:D;if(null!==v&&D!==w.id&&(!("contents"in c)||"contents"in c&&0===c.contents.length||""!==D))return null;var m=new A(c);for(x in c.sets)d<c.sets[x].begin||d>=c.sets[x].end||(m.styleAttrs[c.sets[x].qname]=c.sets[x].value);var x={};for(var z in m.styleAttrs)if(x[z]=!0,"region"===m.kind&&z===h.byName.writingMode.qname&&!(h.byName.direction.qname in m.styleAttrs)){var C=
m.styleAttrs[z];if("lrtb"===C||"lr"===C)m.styleAttrs[h.byName.direction.qname]="ltr";else if("rltb"===C||"rl"===C)m.styleAttrs[h.byName.direction.qname]="rtl"}if(null!==v)for(var G in h.all)if(z=h.all[G],z.qname===h.byName.textDecoration.qname){C=v.styleAttrs[z.qname];var F=m.styleAttrs[z.qname],E=[];void 0===F?E=C:-1===F.indexOf("none")?((-1===F.indexOf("noUnderline")&&-1!==C.indexOf("underline")||-1!==F.indexOf("underline"))&&E.push("underline"),(-1===F.indexOf("noLineThrough")&&-1!==C.indexOf("lineThrough")||
-1!==F.indexOf("lineThrough"))&&E.push("lineThrough"),(-1===F.indexOf("noOverline")&&-1!==C.indexOf("overline")||-1!==F.indexOf("overline"))&&E.push("overline")):E.push("none");m.styleAttrs[z.qname]=E}else z.qname!==h.byName.fontSize.qname||z.qname in m.styleAttrs||"span"!==m.kind||"textContainer"!==m.styleAttrs[h.byName.ruby.qname]?z.qname!==h.byName.fontSize.qname||z.qname in m.styleAttrs||"span"!==m.kind||"text"!==m.styleAttrs[h.byName.ruby.qname]?z.inherit&&z.qname in v.styleAttrs&&!(z.qname in
m.styleAttrs)&&(m.styleAttrs[z.qname]=v.styleAttrs[z.qname]):(C=v.styleAttrs[h.byName.fontSize.qname],m.styleAttrs[z.qname]="textContainer"===v.styleAttrs[h.byName.ruby.qname]?C:new k.ComputedLength(.5*C.rw,.5*C.rh)):(C=v.styleAttrs[h.byName.fontSize.qname],m.styleAttrs[z.qname]=new k.ComputedLength(.5*C.rw,.5*C.rh));for(var I in h.all)if(G=h.all[I],!(G.qname in m.styleAttrs||G.qname===h.byName.position.qname&&h.byName.origin.qname in m.styleAttrs||G.qname===h.byName.origin.qname&&h.byName.position.qname in
m.styleAttrs)&&(z=b.head.styling.initials[G.qname]||G.initial,null!==z&&("region"===m.kind||!1===G.inherit&&null!==z)))if(z=G.parse(z),null!==z)m.styleAttrs[G.qname]=z,x[G.qname]=!0;else if(G="Invalid initial value for '"+G.qname+"' on element '"+m.kind,B&&B.error&&B.error(G))throw G;for(var g in h.all)if(I=h.all[g],I.qname in x&&null!==I.compute)if(G=I.compute(b,v,m,m.styleAttrs[I.qname],n),null!==G)m.styleAttrs[I.qname]=G;else if(m.styleAttrs[I.qname]=I.compute(b,v,m,I.parse(I.initial),n),I="Style '"+
I.qname+"' on element '"+m.kind+"' cannot be computed",B&&B.error&&B.error(I))throw I;if("none"===m.styleAttrs[h.byName.display.qname])return null;if(null===v)var r=null===y?[]:[y];else"contents"in c&&(r=c.contents);for(var f in r)v=e(b,d,w,y,m,D,r[f],B,n),null!==v&&m.contents.push(v.element);for(var l in m.styleAttrs)b=!1,"span"===m.kind&&(d=m.styleAttrs[h.byName.ruby.qname],(b=("container"===d||"textContainer"===d||"baseContainer"===d)&&-1!==u.indexOf(l))||(b="container"!==d&&l===h.byName.rubyAlign.qname),
b||(b=!("textContainer"===d||"text"===d)&&l===h.byName.rubyPosition.qname)),b||(b=-1===h.byQName[l].applies.indexOf(m.kind)),b&&delete m.styleAttrs[l];l=m.styleAttrs[h.byName.ruby.qname];if("p"===m.kind||"span"===m.kind&&("textContainer"===l||"text"===l))l=[],a(m,l),p(l),q(m);return"div"===m.kind&&h.byName.backgroundImage.qname in m.styleAttrs||"br"===m.kind||"image"===m.kind||"contents"in m&&0<m.contents.length||"span"===m.kind&&null!==m.text||"region"===m.kind&&"always"===m.styleAttrs[h.byName.showBackground.qname]?
{region_id:D,element:m}:null}function p(a){function b(a){return"br"===a.kind||/[\r\n\t ]$/.test(a.text)}function d(a){return"br"===a.kind||"preserve"===a.space&&/^[\r\n]/.test(a.text)}for(var e,h=0;h<a.length;)if(e=a[h],"br"===e.kind||"preserve"===e.space)h++;else{var q=e.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(q)&&(0===h||b(a[h-1]))&&(q=q.substring(1));e.text=q;0===q.length?a.splice(h,1):h++}for(h=0;h<a.length;h++)e=a[h],"br"===e.kind||"preserve"===e.space?h++:/[ ]$/.test(e.text)&&(h===a.length-
1||d(a[h+1]))&&(e.text=e.text.slice(0,-1))}function a(b,d){for(var e in b.contents){var q=b.contents[e],k=q.styleAttrs[h.byName.ruby.qname];if("span"!==q.kind||"textContainer"!==k&&"text"!==k)"contents"in q?a(q,d):("span"===q.kind&&0!==q.text.length||"br"===q.kind)&&d.push(q)}}function q(a){if("br"===a.kind)return!1;if("text"in a)return 0===a.text.length;if("contents"in a){for(var b=a.contents.length;b--;)q(a.contents[b])&&a.contents.splice(b,1);return 0===a.contents.length}}function w(a){this.contents=
[];this.aspectRatio=a.aspectRatio}function A(a){this.kind=a.kind||"region";a.id&&(this.id=a.id);this.styleAttrs={};for(var b in a.styleAttrs)this.styleAttrs[b]=a.styleAttrs[b];"src"in a&&(this.src=a.src);"type"in a&&(this.type=a.type);if("text"in a)this.text=a.text;else if("region"===this.kind||"contents"in a)this.contents=[];"space"in a&&(this.space=a.space)}b.generateISD=function(a,b,d){var h=new w(a),q={},k;for(k in a.head.layout.regions){var c=e(a,b,a.head.layout.regions[k],a.body,null,"",a.head.layout.regions[k],
d,q);null!==c&&h.contents.push(c.element)}return h};var u=[h.byName.color.qname,h.byName.textCombine.qname,h.byName.textDecoration.qname,h.byName.textEmphasis.qname,h.byName.textOutline.qname,h.byName.textShadow.qname]})("undefined"===typeof k?this.imscISD={}:k,"undefined"===typeof imscNames?d("./names"):imscNames,"undefined"===typeof imscStyles?d("./styles"):imscStyles,"undefined"===typeof imscUtils?d("./utils"):imscUtils)},{"./names":37,"./styles":38,"./utils":39}],36:[function(d,h,k){k.generateISD=
d("./isd").generateISD;k.fromXML=d("./doc").fromXML;k.renderHTML=d("./html").render},{"./doc":33,"./html":34,"./isd":35}],37:[function(d,h,k){d="undefined"===typeof k?this.imscNames={}:k;d.ns_tt="http://www.w3.org/ns/ttml";d.ns_tts="http://www.w3.org/ns/ttml#styling";d.ns_ttp="http://www.w3.org/ns/ttml#parameter";d.ns_xml="http://www.w3.org/XML/1998/namespace";d.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";d.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";d.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";
d.ns_ebutts="urn:ebu:tt:style";d.ttaf_map={"http://www.w3.org/2006/10/ttaf1":d.ns_tt,"http://www.w3.org/2006/10/ttaf1#style":d.ns_tts,"http://www.w3.org/2006/10/ttaf1#parameter":d.ns_ttp}},{}],38:[function(d,h,k){(function(b,d,h){function e(a,b,d,e,h,k,p,u){this.name=b;this.ns=a;this.qname=a+" "+b;this.inherit=h;this.animatable=k;this.initial=d;this.applies=e;this.parse=p;this.compute=u}b.all=[new e(d.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,h.parseColor,null),
new e(d.ns_tts,"color","white",["span"],!0,!0,h.parseColor,null),new e(d.ns_tts,"direction","ltr",["p","span"],!0,!0,function(a){return a},null),new e(d.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(a){return a},null),new e(d.ns_tts,"displayAlign","before",["region"],!1,!0,function(a){return a},null),new e(d.ns_tts,"extent","auto",["tt","region"],!1,!0,function(a){if("auto"===a)return a;var b=a.split(" ");if(2!==b.length)return null;a=h.parseLength(b[0]);return(b=h.parseLength(b[1]))&&
a?{h:b,w:a}:null},function(a,b,d,e,k){if("auto"===e)b=new h.ComputedLength(0,1);else if(b=h.toComputedLength(e.h.value,e.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===b)return null;if("auto"===e)a=new h.ComputedLength(1,0);else if(a=h.toComputedLength(e.w.value,e.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:b,w:a}}),new e(d.ns_tts,"fontFamily","default",["span"],!0,!0,function(a){a=a.split(",");var b=[],d;for(d in a)"'"!==a[d].charAt(0)&&'"'!==a[d].charAt(0)?
"default"===a[d]?b.push("monospaceSerif"):b.push(a[d]):b.push(a[d]);return b},null),new e(d.ns_tts,"shear","0%",["p"],!0,!0,h.parseLength,function(a,b,d,e){if("%"===e.unit)a=100<Math.abs(e.value)?100*Math.sign(e.value):e.value;else return null;return a}),new e(d.ns_tts,"fontSize","1c",["span"],!0,!0,h.parseLength,function(a,d,e,k,p){return h.toComputedLength(k.value,k.unit,null!==d?d.styleAttrs[b.byName.fontSize.qname]:a.cellLength.h,null!==d?d.styleAttrs[b.byName.fontSize.qname]:a.cellLength.h,a.cellLength.h,
a.pxLength.h)}),new e(d.ns_tts,"fontStyle","normal",["span"],!0,!0,function(a){return a},null),new e(d.ns_tts,"fontWeight","normal",["span"],!0,!0,function(a){return a},null),new e(d.ns_tts,"lineHeight","normal",["p"],!0,!0,function(a){return"normal"===a?a:h.parseLength(a)},function(a,d,e,k,p){if("normal"===k)a=k;else if(a=h.toComputedLength(k.value,k.unit,e.styleAttrs[b.byName.fontSize.qname],e.styleAttrs[b.byName.fontSize.qname],a.cellLength.h,a.pxLength.h),null===a)return null;return a}),new e(d.ns_tts,
"opacity",1,["region"],!1,!0,parseFloat,null),new e(d.ns_tts,"origin","auto",["region"],!1,!0,function(a){if("auto"===a)return a;var b=a.split(" ");if(2!==b.length)return null;a=h.parseLength(b[0]);return(b=h.parseLength(b[1]))&&a?{h:b,w:a}:null},function(a,b,d,e,k){if("auto"===e)b=new h.ComputedLength(0,0);else if(b=h.toComputedLength(e.h.value,e.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===b)return null;if("auto"===e)a=new h.ComputedLength(0,0);else if(a=h.toComputedLength(e.w.value,e.w.unit,
null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:b,w:a}}),new e(d.ns_tts,"overflow","hidden",["region"],!1,!0,function(a){return a},null),new e(d.ns_tts,"padding","0px",["region"],!1,!0,function(a){a=a.split(" ");if(4<a.length)return null;var b=[],d;for(d in a){var e=h.parseLength(a[d]);if(!e)return null;b.push(e)}return b},function(a,d,e,k,p){if(1===k.length)d=[k[0],k[0],k[0],k[0]];else if(2===k.length)d=[k[0],k[1],k[0],k[1]];else if(3===k.length)d=[k[0],k[1],k[2],k[1]];else if(4===
k.length)d=[k[0],k[1],k[2],k[3]];else return null;k=e.styleAttrs[b.byName.writingMode.qname];if("lrtb"===k||"lr"===k)d=[d[0],d[3],d[2],d[1]];else if("rltb"===k||"rl"===k)d=[d[0],d[1],d[2],d[3]];else if("tblr"===k)d=[d[3],d[0],d[1],d[2]];else if("tbrl"===k||"tb"===k)d=[d[3],d[2],d[1],d[0]];else return null;k=[];for(var q in d)if(0===d[q].value)k[q]=new h.ComputedLength(0,0);else if(k[q]=h.toComputedLength(d[q].value,d[q].unit,e.styleAttrs[b.byName.fontSize.qname],"0"===q||"2"===q?e.styleAttrs[b.byName.extent.qname].h:
e.styleAttrs[b.byName.extent.qname].w,"0"===q||"2"===q?a.cellLength.h:a.cellLength.w,"0"===q||"2"===q?a.pxLength.h:a.pxLength.w),null===k[q])return null;return k}),new e(d.ns_tts,"position","top left",["region"],!1,!0,function(a){return h.parsePosition(a)},function(a,d,e,k){d=h.toComputedLength(k.v.offset.value,k.v.offset.unit,null,new h.ComputedLength(-e.styleAttrs[b.byName.extent.qname].h.rw,a.dimensions.h.rh-e.styleAttrs[b.byName.extent.qname].h.rh),null,a.pxLength.h);if(null===d)return null;"bottom"===
k.v.edge&&(d=new h.ComputedLength(-d.rw-e.styleAttrs[b.byName.extent.qname].h.rw,a.dimensions.h.rh-d.rh-e.styleAttrs[b.byName.extent.qname].h.rh));var q=h.toComputedLength(k.h.offset.value,k.h.offset.unit,null,new h.ComputedLength(a.dimensions.w.rw-e.styleAttrs[b.byName.extent.qname].w.rw,-e.styleAttrs[b.byName.extent.qname].w.rh),null,a.pxLength.w);if(null===d)return null;"right"===k.h.edge&&(q=new h.ComputedLength(a.dimensions.w.rw-q.rw-e.styleAttrs[b.byName.extent.qname].w.rw,-q.rh-e.styleAttrs[b.byName.extent.qname].w.rh));
return{h:d,w:q}}),new e(d.ns_tts,"ruby","none",["span"],!1,!0,function(a){return a},null),new e(d.ns_tts,"rubyAlign","center",["span"],!0,!0,function(a){return"center"!==a&&"spaceAround"!==a?null:a},null),new e(d.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(a){return a},null),new e(d.ns_tts,"rubyReserve","none",["p"],!0,!0,function(a){var b=a.split(" ");a=[null,null];if(0===b.length||2<b.length||"none"!==b[0]&&"both"!==b[0]&&"after"!==b[0]&&"before"!==b[0]&&"outside"!==b[0])return null;
a[0]=b[0];if(2===b.length&&"none"!==b[0])if(b=h.parseLength(b[1]))a[1]=b;else return null;return a},function(a,d,e,k,p){if("none"===k[0])return k;a=null===k[1]?new h.ComputedLength(.5*e.styleAttrs[b.byName.fontSize.qname].rw,.5*e.styleAttrs[b.byName.fontSize.qname].rh):h.toComputedLength(k[1].value,k[1].unit,e.styleAttrs[b.byName.fontSize.qname],e.styleAttrs[b.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===a?null:[k[0],a]}),new e(d.ns_tts,"showBackground","whenActive",["region"],
!1,!0,function(a){return a},null),new e(d.ns_tts,"textAlign","start",["p"],!0,!0,function(a){return a},function(a,b,d,e,h){return"left"===e?"start":"right"===e?"end":e}),new e(d.ns_tts,"textCombine","none",["span"],!0,!0,function(a){a=a.split(" ");return 1!==a.length||"none"!==a[0]&&"all"!==a[0]?null:[a[0]]},null),new e(d.ns_tts,"textDecoration","none",["span"],!0,!0,function(a){return a.split(" ")},null),new e(d.ns_tts,"textEmphasis","none",["span"],!0,!0,function(a){a=a.split(" ");var b={style:null,
symbol:null,color:null,position:null},d;for(d in a)if("none"===a[d]||"auto"===a[d])b.style=a[d];else if("filled"===a[d]||"open"===a[d])b.style=a[d];else if("circle"===a[d]||"dot"===a[d]||"sesame"===a[d])b.symbol=a[d];else if("current"===a[d])b.color=a[d];else if("outside"===a[d]||"before"===a[d]||"after"===a[d])b.position=a[d];else if(b.color=h.parseColor(a[d]),null===b.color)return null;null==b.style&&null==b.symbol?b.style="auto":(b.symbol=b.symbol||"circle",b.style=b.style||"filled");b.position=
b.position||"outside";b.color=b.color||"current";return b},null),new e(d.ns_tts,"textOutline","none",["span"],!0,!0,function(a){if("none"===a)return a;var b={};a=a.split(" ");if(0===a.length||2<a.length)return null;var d=h.parseColor(a[0]);b.color=d;null!==d&&a.shift();if(1!==a.length)return null;a=h.parseLength(a[0]);if(!a)return null;b.thickness=a;return b},function(a,d,e,k,p){if("none"===k)return k;d={};d.color=null===k.color?e.styleAttrs[b.byName.color.qname]:k.color;d.thickness=h.toComputedLength(k.thickness.value,
k.thickness.unit,e.styleAttrs[b.byName.fontSize.qname],e.styleAttrs[b.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===d.thickness?null:d}),new e(d.ns_tts,"textShadow","none",["span"],!0,!0,h.parseTextShadow,function(a,d,e,k){if("none"===k)return k;d=[];for(var q in k){var p={};p.x_off=h.toComputedLength(k[q][0].value,k[q][0].unit,null,e.styleAttrs[b.byName.fontSize.qname],null,a.pxLength.w);if(null===p.x_off)return null;p.y_off=h.toComputedLength(k[q][1].value,k[q][1].unit,null,
e.styleAttrs[b.byName.fontSize.qname],null,a.pxLength.h);if(null===p.y_off)return null;if(null===k[q][2])p.b_radius=0;else if(p.b_radius=h.toComputedLength(k[q][2].value,k[q][2].unit,null,e.styleAttrs[b.byName.fontSize.qname],null,a.pxLength.h),null===p.b_radius)return null;p.color=null===k[q][3]?e.styleAttrs[b.byName.color.qname]:k[q][3];d.push(p)}return d}),new e(d.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(a){return a},null),new e(d.ns_tts,"visibility","visible",["body","div","p",
"region","span"],!0,!0,function(a){return a},null),new e(d.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(a){return a},null),new e(d.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(a){return a},null),new e(d.ns_tts,"zIndex","auto",["region"],!1,!0,function(a){"auto"!==a&&(a=parseInt(a),isNaN(a)&&(a=null));return a},null),new e(d.ns_ebutts,"linePadding","0c",["p"],!0,!1,h.parseLength,function(a,b,d,e,k){return h.toComputedLength(e.value,e.unit,null,null,a.cellLength.w,null)}),new e(d.ns_ebutts,
"multiRowAlign","auto",["p"],!0,!1,function(a){return a},null),new e(d.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(a){return a},null),new e(d.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(a){return"true"===a?!0:!1},null),new e(d.ns_itts,"fillLineGap","true",["p"],!0,!0,function(a){return"true"===a?!0:!1},null)];b.byQName={};for(var k in b.all)b.byQName[b.all[k].qname]=b.all[k];b.byName={};for(var p in b.all)b.byName[b.all[p].name]=b.all[p]})("undefined"===
typeof k?this.imscStyles={}:k,"undefined"===typeof imscNames?d("./names"):imscNames,"undefined"===typeof imscUtils?d("./utils"):imscUtils)},{"./names":37,"./utils":39}],39:[function(d,h,k){(function(b){var d=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,h=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,k=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,v={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,
0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};b.parseColor=function(a){var b,e=null,p=v[a.toLowerCase()];void 0!==p?e=p:null!==(b=d.exec(a))?e=[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),void 0!==b[4]?parseInt(b[4],16):255]:null!==(b=h.exec(a))?e=[parseInt(b[1]),
parseInt(b[2]),parseInt(b[3]),255]:null!==(b=k.exec(a))&&(e=[parseInt(b[1]),parseInt(b[2]),parseInt(b[3]),parseInt(b[4])]);return e};var D=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;b.parseLength=function(a){var b,d=null;null!==(b=D.exec(a))&&(d={value:parseFloat(b[1]),unit:b[2]});return d};b.parseTextShadow=function(a){a=a.split(",");var d=[],e;for(e in a){var h=a[e].split(" ");if(1===h.length&&"none"===h[0])return"none";if(1<h.length&&5>h.length){var k=[null,null,null,null],p=b.parseLength(h.shift());
if(null===p)return null;k[0]=p;p=b.parseLength(h.shift());if(null===p)return null;k[1]=p;if(0!==h.length&&(p=b.parseLength(h[0]),null!==p&&(k[2]=p,h.shift()),0!==h.length)){h=b.parseColor(h[0]);if(null===h)return null;k[3]=h}d.push(k)}}return d};b.parsePosition=function(a){a=a.split(" ");var d=function(a){return"center"===a||"left"===a||"top"===a||"bottom"===a||"right"===a};if(4<a.length)return null;for(var e in a)if(!d(a[e])){var h=b.parseLength(a[e]);if(null===h)return null;a[e]=h}e={h:{edge:"left",
offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(h=0;h<a.length;){var k=a[h++];if(d(k)){var p={value:0,unit:"%"};2!==a.length&&h<a.length&&!d(a[h])&&(p=a[h++]);"right"===k?(e.h.edge=k,e.h.offset=p):"bottom"===k?(e.v.edge=k,e.v.offset=p):"left"===k?e.h.offset=p:"top"===k&&(e.v.offset=p)}else if(1===a.length||2===a.length)1===h?e.h.offset=k:e.v.offset=k;else return null}return e};b.ComputedLength=function(a,b){this.rw=a;this.rh=b};b.ComputedLength.prototype.toUsedLength=function(a,
b){return a*this.rw+b*this.rh};b.ComputedLength.prototype.multiply=function(a,b){return b?a*b:a};b.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh};b.toComputedLength=function(a,d,e,h,k,p){return"%"===d&&h?new b.ComputedLength(h.rw*a/100,h.rh*a/100):"em"===d&&e?new b.ComputedLength(e.rw*a,e.rh*a):"c"===d&&k?new b.ComputedLength(a*k.rw,a*k.rh):"px"===d&&p?new b.ComputedLength(a*p.rw,a*p.rh):"rh"===d?new b.ComputedLength(0,a/100):"rw"===d?new b.ComputedLength(a/100,0):null}})("undefined"===
typeof k?this.imscUtils={}:k)},{}]},{},[36])(36)});
