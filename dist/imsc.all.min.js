/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 Determine if an object is a Buffer

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource>  http://mths.be/fromcodepoint v0.1.0 by @mathias */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,r,m){d!=Array.prototype&&d!=Object.prototype&&(d[r]=m.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(d,r,m,c){if(r){m=$jscomp.global;d=d.split(".");for(c=0;c<d.length-1;c++){var g=d[c];g in m||(m[g]={});m=m[g]}d=d[d.length-1];c=m[d];r=r(c);r!=c&&null!=r&&$jscomp.defineProperty(m,d,{configurable:!0,writable:!0,value:r})}};$jscomp.polyfill("Array.prototype.fill",function(d){return d?d:function(d,m,c){var g=this.length||0;0>m&&(m=Math.max(0,g+m));if(null==c||c>g)c=g;c=Number(c);0>c&&(c=Math.max(0,g+c));for(m=Number(m||0);m<c;m++)this[m]=d;return this}},"es6","es3");
$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var d=0;return function(r){return $jscomp.SYMBOL_PREFIX+(r||"")+d++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.asyncIterator;d||(d=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(d){var r=0;return $jscomp.iteratorPrototype(function(){return r<d.length?{done:!1,value:d[r++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};$jscomp.iteratorFromArray=function(d,r){$jscomp.initSymbolIterator();d instanceof String&&(d+="");var m=0,c={next:function(){if(m<d.length){var g=m++;return{value:r(g,d[g]),done:!1}}c.next=function(){return{done:!0,value:void 0}};return c.next()}};c[Symbol.iterator]=function(){return c};return c};
$jscomp.polyfill("Array.prototype.keys",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(d){return d?d:function(){return[]}},"es6","es5");
$jscomp.polyfill("Reflect.ownKeys",function(d){return d?d:function(d){var m=[],c=Object.getOwnPropertyNames(d);d=Object.getOwnPropertySymbols(d);for(var g=0;g<c.length;g++)("jscomp_symbol_"==c[g].substring(0,14)?d:m).push(c[g]);return m.concat(d)}},"es6","es5");
$jscomp.polyfill("String.fromCodePoint",function(d){return d?d:function(d){for(var m="",c=0;c<arguments.length;c++){var g=Number(arguments[c]);if(0>g||1114111<g||g!==Math.floor(g))throw new RangeError("invalid_code_point "+g);65535>=g?m+=String.fromCharCode(g):(g-=65536,m+=String.fromCharCode(g>>>10&1023|55296),m+=String.fromCharCode(g&1023|56320))}return m}},"es6","es3");$jscomp.polyfill("Math.sign",function(d){return d?d:function(d){d=Number(d);return 0===d||isNaN(d)?d:0<d?1:-1}},"es6","es3");
(function(d){"object"===typeof exports&&"undefined"!==typeof module?module.exports=d():"function"===typeof define&&define.amd?define([],d):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=d()})(function(){return function(){function d(r,m,c){function g(p,B){if(!m[p]){if(!r[p]){var b="function"==typeof require&&require;if(!B&&b)return b(p,!0);if(l)return l(p,!0);B=Error("Cannot find module '"+p+"'");throw B.code="MODULE_NOT_FOUND",B;}B=
m[p]={exports:{}};r[p][0].call(B.exports,function(b){return g(r[p][1][b]||b)},B,B.exports,d,r,m,c)}return m[p].exports}for(var l="function"==typeof require&&require,p=0;p<c.length;p++)g(c[p]);return g}return d}()({1:[function(d,r,m){function c(c){var b=c.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");c=c.indexOf("=");-1===c&&(c=b);return[c,c===b?0:4-c%4]}function g(c,b,h){for(var g=[],d=b;d<h;d+=3)b=(c[d]<<16&16711680)+(c[d+1]<<8&65280)+(c[d+2]&255),g.push(l[b>>18&63]+
l[b>>12&63]+l[b>>6&63]+l[b&63]);return g.join("")}m.byteLength=function(g){g=c(g);var b=g[1];return 3*(g[0]+b)/4-b};m.toByteArray=function(g){var b=c(g);var h=b[0];b=b[1];var d=new w(3*(h+b)/4-b),l=0,a=0<b?h-4:h,f;for(f=0;f<a;f+=4)h=p[g.charCodeAt(f)]<<18|p[g.charCodeAt(f+1)]<<12|p[g.charCodeAt(f+2)]<<6|p[g.charCodeAt(f+3)],d[l++]=h>>16&255,d[l++]=h>>8&255,d[l++]=h&255;2===b&&(h=p[g.charCodeAt(f)]<<2|p[g.charCodeAt(f+1)]>>4,d[l++]=h&255);1===b&&(h=p[g.charCodeAt(f)]<<10|p[g.charCodeAt(f+1)]<<4|p[g.charCodeAt(f+
2)]>>2,d[l++]=h>>8&255,d[l++]=h&255);return d};m.fromByteArray=function(c){for(var b=c.length,h=b%3,d=[],q=0,a=b-h;q<a;q+=16383)d.push(g(c,q,q+16383>a?a:q+16383));1===h?(c=c[b-1],d.push(l[c>>2]+l[c<<4&63]+"==")):2===h&&(c=(c[b-2]<<8)+c[b-1],d.push(l[c>>10]+l[c>>4&63]+l[c<<2&63]+"="));return d.join("")};var l=[],p=[],w="undefined"!==typeof Uint8Array?Uint8Array:Array;for(d=0;64>d;++d)l[d]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d],p["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(d)]=
d;p[45]=62;p[95]=63},{}],2:[function(d,r,m){},{}],3:[function(d,r,m){(function(c){function g(k){if(2147483647<k)throw new RangeError('The value "'+k+'" is invalid for option "size"');k=new Uint8Array(k);k.__proto__=c.prototype;return k}function c(k,a,e){if("number"===typeof k){if("string"===typeof a)throw new TypeError('The "string" argument must be of type string. Received type number');return w(k)}return l(k,a,e)}function l(k,a,e){if("string"===typeof k){var t=a;if("string"!==typeof t||""===t)t=
"utf8";if(!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);a=D(k,t)|0;e=g(a);k=e.write(k,t);k!==a&&(e=e.slice(0,k));return e}if(ArrayBuffer.isView(k))return B(k);if(null==k)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(L(k,ArrayBuffer)||k&&L(k.buffer,ArrayBuffer)){if(0>a||k.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(k.byteLength<a+(e||0))throw new RangeError('"length" is outside of buffer bounds');
k=void 0===a&&void 0===e?new Uint8Array(k):void 0===e?new Uint8Array(k,a):new Uint8Array(k,a,e);k.__proto__=c.prototype;return k}if("number"===typeof k)throw new TypeError('The "value" argument must not be of type number. Received type number');t=k.valueOf&&k.valueOf();if(null!=t&&t!==k)return c.from(t,a,e);if(t=b(k))return t;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof k[Symbol.toPrimitive])return c.from(k[Symbol.toPrimitive]("string"),a,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof k);}function p(k){if("number"!==typeof k)throw new TypeError('"size" argument must be of type number');if(0>k)throw new RangeError('The value "'+k+'" is invalid for option "size"');}function w(k){p(k);return g(0>k?0:h(k)|0)}function B(k){for(var a=0>k.length?0:h(k.length)|0,e=g(a),t=0;t<a;t+=1)e[t]=k[t]&255;return e}function b(k){if(c.isBuffer(k)){var a=h(k.length)|0,e=g(a);if(0===e.length)return e;k.copy(e,0,0,a);return e}if(void 0!==k.length)return(a="number"!==typeof k.length)||(a=k.length,
a=a!==a),a?g(0):B(k);if("Buffer"===k.type&&Array.isArray(k.data))return B(k.data)}function h(k){if(2147483647<=k)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return k|0}function D(k,a){if(c.isBuffer(k))return k.length;if(ArrayBuffer.isView(k)||L(k,ArrayBuffer))return k.byteLength;if("string"!==typeof k)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);var e=
k.length,t=2<arguments.length&&!0===arguments[2];if(!t&&0===e)return 0;for(var b=!1;;)switch(a){case "ascii":case "latin1":case "binary":return e;case "utf8":case "utf-8":return N(k).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*e;case "hex":return e>>>1;case "base64":return K.toByteArray(E(k)).length;default:if(b)return t?-1:N(k).length;a=(""+a).toLowerCase();b=!0}}function q(k,a,e){var t=!1;if(void 0===a||0>a)a=0;if(a>this.length)return"";if(void 0===e||e>this.length)e=
this.length;if(0>=e)return"";e>>>=0;a>>>=0;if(e<=a)return"";for(k||(k="utf8");;)switch(k){case "hex":k=a;a=e;e=this.length;if(!k||0>k)k=0;if(!a||0>a||a>e)a=e;t="";for(e=k;e<a;++e)k=t,t=this[e],t=16>t?"0"+t.toString(16):t.toString(16),t=k+t;return t;case "utf8":case "utf-8":return n(this,a,e);case "ascii":k="";for(e=Math.min(this.length,e);a<e;++a)k+=String.fromCharCode(this[a]&127);return k;case "latin1":case "binary":k="";for(e=Math.min(this.length,e);a<e;++a)k+=String.fromCharCode(this[a]);return k;
case "base64":return a=0===a&&e===this.length?K.fromByteArray(this):K.fromByteArray(this.slice(a,e)),a;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=this.slice(a,e);e="";for(k=0;k<a.length;k+=2)e+=String.fromCharCode(a[k]+256*a[k+1]);return e;default:if(t)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase();t=!0}}function a(k,a,e){var t=k[a];k[a]=k[e];k[e]=t}function f(k,a,e,t,b){if(0===k.length)return-1;"string"===typeof e?(t=e,e=0):2147483647<e?e=2147483647:-2147483648>
e&&(e=-2147483648);e=+e;e!==e&&(e=b?0:k.length-1);0>e&&(e=k.length+e);if(e>=k.length){if(b)return-1;e=k.length-1}else if(0>e)if(b)e=0;else return-1;"string"===typeof a&&(a=c.from(a,t));if(c.isBuffer(a))return 0===a.length?-1:v(k,a,e,t,b);if("number"===typeof a)return a&=255,"function"===typeof Uint8Array.prototype.indexOf?b?Uint8Array.prototype.indexOf.call(k,a,e):Uint8Array.prototype.lastIndexOf.call(k,a,e):v(k,[a],e,t,b);throw new TypeError("val must be string, number or Buffer");}function v(k,
a,e,t,b){function c(e,k){return 1===I?e[k]:e.readUInt16BE(k*I)}var I=1,f=k.length,n=a.length;if(void 0!==t&&(t=String(t).toLowerCase(),"ucs2"===t||"ucs-2"===t||"utf16le"===t||"utf-16le"===t)){if(2>k.length||2>a.length)return-1;I=2;f/=2;n/=2;e/=2}if(b)for(t=-1;e<f;e++)if(c(k,e)===c(a,-1===t?0:e-t)){if(-1===t&&(t=e),e-t+1===n)return t*I}else-1!==t&&(e-=e-t),t=-1;else for(e+n>f&&(e=f-n);0<=e;e--){f=!0;for(t=0;t<n;t++)if(c(k,e+t)!==c(a,t)){f=!1;break}if(f)return e}return-1}function n(k,a,e){e=Math.min(k.length,
e);for(var t=[];a<e;){var b=k[a],c=null,I=239<b?4:223<b?3:191<b?2:1;if(a+I<=e)switch(I){case 1:128>b&&(c=b);break;case 2:var f=k[a+1];128===(f&192)&&(b=(b&31)<<6|f&63,127<b&&(c=b));break;case 3:f=k[a+1];var n=k[a+2];128===(f&192)&&128===(n&192)&&(b=(b&15)<<12|(f&63)<<6|n&63,2047<b&&(55296>b||57343<b)&&(c=b));break;case 4:f=k[a+1];n=k[a+2];var h=k[a+3];128===(f&192)&&128===(n&192)&&128===(h&192)&&(b=(b&15)<<18|(f&63)<<12|(n&63)<<6|h&63,65535<b&&1114112>b&&(c=b))}null===c?(c=65533,I=1):65535<c&&(c-=
65536,t.push(c>>>10&1023|55296),c=56320|c&1023);t.push(c);a+=I}k=t.length;if(k<=A)t=String.fromCharCode.apply(String,t);else{e="";for(a=0;a<k;)e+=String.fromCharCode.apply(String,t.slice(a,a+=A));t=e}return t}function C(k,a,e){if(0!==k%1||0>k)throw new RangeError("offset is not uint");if(k+a>e)throw new RangeError("Trying to access beyond buffer length");}function H(k,a,e,b,f,n){if(!c.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>f||a<n)throw new RangeError('"value" argument is out of bounds');
if(e+b>k.length)throw new RangeError("Index out of range");}function y(k,a,e,b,c,f){if(e+b>k.length)throw new RangeError("Index out of range");if(0>e)throw new RangeError("Index out of range");}function T(k,a,e,b,c){a=+a;e>>>=0;c||y(k,a,e,4,3.4028234663852886E38,-3.4028234663852886E38);F.write(k,a,e,b,23,4);return e+4}function r(k,a,e,b,c){a=+a;e>>>=0;c||y(k,a,e,8,1.7976931348623157E308,-1.7976931348623157E308);F.write(k,a,e,b,52,8);return e+8}function E(k){k=k.split("=")[0];k=k.trim().replace(W,
"");if(2>k.length)return"";for(;0!==k.length%4;)k+="=";return k}function N(k,a){a=a||Infinity;for(var e,b=k.length,c=null,f=[],I=0;I<b;++I){e=k.charCodeAt(I);if(55295<e&&57344>e){if(!c){if(56319<e){-1<(a-=3)&&f.push(239,191,189);continue}else if(I+1===b){-1<(a-=3)&&f.push(239,191,189);continue}c=e;continue}if(56320>e){-1<(a-=3)&&f.push(239,191,189);c=e;continue}e=(c-55296<<10|e-56320)+65536}else c&&-1<(a-=3)&&f.push(239,191,189);c=null;if(128>e){if(0>--a)break;f.push(e)}else if(2048>e){if(0>(a-=2))break;
f.push(e>>6|192,e&63|128)}else if(65536>e){if(0>(a-=3))break;f.push(e>>12|224,e>>6&63|128,e&63|128)}else if(1114112>e){if(0>(a-=4))break;f.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw Error("Invalid code point");}return f}function G(a){for(var k=[],e=0;e<a.length;++e)k.push(a.charCodeAt(e)&255);return k}function z(a,b,e,t){for(var k=0;k<t&&!(k+e>=b.length||k>=a.length);++k)b[k+e]=a[k];return k}function L(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&
a.constructor.name===b.name}var K=d("base64-js"),F=d("ieee754");m.Buffer=c;m.SlowBuffer=function(a){+a!=a&&(a=0);return c.alloc(+a)};m.INSPECT_MAX_BYTES=50;m.kMaxLength=2147483647;c.TYPED_ARRAY_SUPPORT=function(){try{var a=new Uint8Array(1);a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===a.foo()}catch(I){return!1}}();c.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}});Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});c.poolSize=8192;c.from=function(a,b,e){return l(a,b,e)};c.prototype.__proto__=Uint8Array.prototype;
c.__proto__=Uint8Array;c.alloc=function(a,b,e){p(a);a=0>=a?g(a):void 0!==b?"string"===typeof e?g(a).fill(b,e):g(a).fill(b):g(a);return a};c.allocUnsafe=function(a){return w(a)};c.allocUnsafeSlow=function(a){return w(a)};c.isBuffer=function(a){return null!=a&&!0===a._isBuffer&&a!==c.prototype};c.compare=function(a,b){L(a,Uint8Array)&&(a=c.from(a,a.offset,a.byteLength));L(b,Uint8Array)&&(b=c.from(b,b.offset,b.byteLength));if(!c.isBuffer(a)||!c.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(a===b)return 0;for(var e=a.length,k=b.length,f=0,n=Math.min(e,k);f<n;++f)if(a[f]!==b[f]){e=a[f];k=b[f];break}return e<k?-1:k<e?1:0};c.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};c.concat=function(a,b){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return c.alloc(0);
var e;if(void 0===b)for(e=b=0;e<a.length;++e)b+=a[e].length;b=c.allocUnsafe(b);var k=0;for(e=0;e<a.length;++e){var f=a[e];L(f,Uint8Array)&&(f=c.from(f));if(!c.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(b,k);k+=f.length}return b};c.byteLength=D;c.prototype._isBuffer=!0;c.prototype.swap16=function(){var k=this.length;if(0!==k%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<k;b+=2)a(this,b,b+1);return this};c.prototype.swap32=
function(){var k=this.length;if(0!==k%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<k;b+=4)a(this,b,b+3),a(this,b+1,b+2);return this};c.prototype.swap64=function(){var k=this.length;if(0!==k%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<k;b+=8)a(this,b,b+7),a(this,b+1,b+6),a(this,b+2,b+5),a(this,b+3,b+4);return this};c.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?n(this,0,a):q.apply(this,
arguments)};c.prototype.toLocaleString=c.prototype.toString;c.prototype.equals=function(a){if(!c.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===c.compare(this,a)};c.prototype.inspect=function(){var a=m.INSPECT_MAX_BYTES;var b=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim();this.length>a&&(b+=" ... ");return"<Buffer "+b+">"};c.prototype.compare=function(a,b,e,t,f){L(a,Uint8Array)&&(a=c.from(a,a.offset,a.byteLength));if(!c.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof a);void 0===b&&(b=0);void 0===e&&(e=a?a.length:0);void 0===t&&(t=0);void 0===f&&(f=this.length);if(0>b||e>a.length||0>t||f>this.length)throw new RangeError("out of range index");if(t>=f&&b>=e)return 0;if(t>=f)return-1;if(b>=e)return 1;b>>>=0;e>>>=0;t>>>=0;f>>>=0;if(this===a)return 0;var k=f-t,n=e-b,h=Math.min(k,n);t=this.slice(t,f);a=a.slice(b,e);for(b=0;b<h;++b)if(t[b]!==a[b]){k=t[b];n=a[b];break}return k<n?-1:n<k?1:0};c.prototype.includes=function(a,b,e){return-1!==this.indexOf(a,b,e)};c.prototype.indexOf=
function(a,b,e){return f(this,a,b,e,!0)};c.prototype.lastIndexOf=function(a,b,e){return f(this,a,b,e,!1)};c.prototype.write=function(a,b,e,t){if(void 0===b)t="utf8",e=this.length,b=0;else if(void 0===e&&"string"===typeof b)t=b,e=this.length,b=0;else if(isFinite(b))b>>>=0,isFinite(e)?(e>>>=0,void 0===t&&(t="utf8")):(t=e,e=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var k=this.length-b;if(void 0===e||e>k)e=k;if(0<a.length&&(0>e||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");
t||(t="utf8");for(k=!1;;)switch(t){case "hex":a:{b=Number(b)||0;t=this.length-b;e?(e=Number(e),e>t&&(e=t)):e=t;t=a.length;e>t/2&&(e=t/2);for(t=0;t<e;++t){k=parseInt(a.substr(2*t,2),16);if(k!==k){a=t;break a}this[b+t]=k}a=t}return a;case "utf8":case "utf-8":return z(N(a,this.length-b),this,b,e);case "ascii":return z(G(a),this,b,e);case "latin1":case "binary":return z(G(a),this,b,e);case "base64":return z(K.toByteArray(E(a)),this,b,e);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":t=a;k=this.length-
b;for(var c=[],f=0;f<t.length&&!(0>(k-=2));++f){var n=t.charCodeAt(f);a=n>>8;n%=256;c.push(n);c.push(a)}return z(c,this,b,e);default:if(k)throw new TypeError("Unknown encoding: "+t);t=(""+t).toLowerCase();k=!0}};c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;c.prototype.slice=function(a,b){var e=this.length;a=~~a;b=void 0===b?e:~~b;0>a?(a+=e,0>a&&(a=0)):a>e&&(a=e);0>b?(b+=e,0>b&&(b=0)):b>e&&(b=e);b<a&&(b=a);a=this.subarray(a,b);a.__proto__=
c.prototype;return a};c.prototype.readUIntLE=function(a,b,e){a>>>=0;b>>>=0;e||C(a,b,this.length);e=this[a];for(var k=1,c=0;++c<b&&(k*=256);)e+=this[a+c]*k;return e};c.prototype.readUIntBE=function(a,b,e){a>>>=0;b>>>=0;e||C(a,b,this.length);e=this[a+--b];for(var k=1;0<b&&(k*=256);)e+=this[a+--b]*k;return e};c.prototype.readUInt8=function(a,b){a>>>=0;b||C(a,1,this.length);return this[a]};c.prototype.readUInt16LE=function(a,b){a>>>=0;b||C(a,2,this.length);return this[a]|this[a+1]<<8};c.prototype.readUInt16BE=
function(a,b){a>>>=0;b||C(a,2,this.length);return this[a]<<8|this[a+1]};c.prototype.readUInt32LE=function(a,b){a>>>=0;b||C(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};c.prototype.readUInt32BE=function(a,b){a>>>=0;b||C(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};c.prototype.readIntLE=function(a,b,e){a>>>=0;b>>>=0;e||C(a,b,this.length);e=this[a];for(var k=1,c=0;++c<b&&(k*=256);)e+=this[a+c]*k;e>=128*k&&(e-=Math.pow(2,8*b));return e};
c.prototype.readIntBE=function(a,b,e){a>>>=0;b>>>=0;e||C(a,b,this.length);e=b;for(var k=1,c=this[a+--e];0<e&&(k*=256);)c+=this[a+--e]*k;c>=128*k&&(c-=Math.pow(2,8*b));return c};c.prototype.readInt8=function(a,b){a>>>=0;b||C(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};c.prototype.readInt16LE=function(a,b){a>>>=0;b||C(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};c.prototype.readInt16BE=function(a,b){a>>>=0;b||C(a,2,this.length);a=this[a+1]|this[a]<<8;return a&
32768?a|4294901760:a};c.prototype.readInt32LE=function(a,b){a>>>=0;b||C(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};c.prototype.readInt32BE=function(a,b){a>>>=0;b||C(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};c.prototype.readFloatLE=function(a,b){a>>>=0;b||C(a,4,this.length);return F.read(this,a,!0,23,4)};c.prototype.readFloatBE=function(a,b){a>>>=0;b||C(a,4,this.length);return F.read(this,a,!1,23,4)};c.prototype.readDoubleLE=function(a,
b){a>>>=0;b||C(a,8,this.length);return F.read(this,a,!0,52,8)};c.prototype.readDoubleBE=function(a,b){a>>>=0;b||C(a,8,this.length);return F.read(this,a,!1,52,8)};c.prototype.writeUIntLE=function(a,b,e,c){a=+a;b>>>=0;e>>>=0;c||H(this,a,b,e,Math.pow(2,8*e)-1,0);c=1;var t=0;for(this[b]=a&255;++t<e&&(c*=256);)this[b+t]=a/c&255;return b+e};c.prototype.writeUIntBE=function(a,b,e,c){a=+a;b>>>=0;e>>>=0;c||H(this,a,b,e,Math.pow(2,8*e)-1,0);c=e-1;var t=1;for(this[b+c]=a&255;0<=--c&&(t*=256);)this[b+c]=a/t&
255;return b+e};c.prototype.writeUInt8=function(a,b,e){a=+a;b>>>=0;e||H(this,a,b,1,255,0);this[b]=a&255;return b+1};c.prototype.writeUInt16LE=function(a,b,e){a=+a;b>>>=0;e||H(this,a,b,2,65535,0);this[b]=a&255;this[b+1]=a>>>8;return b+2};c.prototype.writeUInt16BE=function(a,b,e){a=+a;b>>>=0;e||H(this,a,b,2,65535,0);this[b]=a>>>8;this[b+1]=a&255;return b+2};c.prototype.writeUInt32LE=function(a,b,e){a=+a;b>>>=0;e||H(this,a,b,4,4294967295,0);this[b+3]=a>>>24;this[b+2]=a>>>16;this[b+1]=a>>>8;this[b]=a&
255;return b+4};c.prototype.writeUInt32BE=function(a,b,e){a=+a;b>>>=0;e||H(this,a,b,4,4294967295,0);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=a>>>8;this[b+3]=a&255;return b+4};c.prototype.writeIntLE=function(a,b,e,c){a=+a;b>>>=0;c||(c=Math.pow(2,8*e-1),H(this,a,b,e,c-1,-c));c=0;var t=1,f=0;for(this[b]=a&255;++c<e&&(t*=256);)0>a&&0===f&&0!==this[b+c-1]&&(f=1),this[b+c]=(a/t>>0)-f&255;return b+e};c.prototype.writeIntBE=function(a,b,e,c){a=+a;b>>>=0;c||(c=Math.pow(2,8*e-1),H(this,a,b,e,c-1,-c));c=e-
1;var f=1,t=0;for(this[b+c]=a&255;0<=--c&&(f*=256);)0>a&&0===t&&0!==this[b+c+1]&&(t=1),this[b+c]=(a/f>>0)-t&255;return b+e};c.prototype.writeInt8=function(a,b,e){a=+a;b>>>=0;e||H(this,a,b,1,127,-128);0>a&&(a=255+a+1);this[b]=a&255;return b+1};c.prototype.writeInt16LE=function(a,b,e){a=+a;b>>>=0;e||H(this,a,b,2,32767,-32768);this[b]=a&255;this[b+1]=a>>>8;return b+2};c.prototype.writeInt16BE=function(a,b,e){a=+a;b>>>=0;e||H(this,a,b,2,32767,-32768);this[b]=a>>>8;this[b+1]=a&255;return b+2};c.prototype.writeInt32LE=
function(a,b,e){a=+a;b>>>=0;e||H(this,a,b,4,2147483647,-2147483648);this[b]=a&255;this[b+1]=a>>>8;this[b+2]=a>>>16;this[b+3]=a>>>24;return b+4};c.prototype.writeInt32BE=function(a,b,e){a=+a;b>>>=0;e||H(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=a>>>8;this[b+3]=a&255;return b+4};c.prototype.writeFloatLE=function(a,b,e){return T(this,a,b,!0,e)};c.prototype.writeFloatBE=function(a,b,e){return T(this,a,b,!1,e)};c.prototype.writeDoubleLE=function(a,
b,e){return r(this,a,b,!0,e)};c.prototype.writeDoubleBE=function(a,b,e){return r(this,a,b,!1,e)};c.prototype.copy=function(a,b,e,f){if(!c.isBuffer(a))throw new TypeError("argument should be a Buffer");e||(e=0);f||0===f||(f=this.length);b>=a.length&&(b=a.length);b||(b=0);0<f&&f<e&&(f=e);if(f===e||0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("Index out of range");if(0>f)throw new RangeError("sourceEnd out of bounds");
f>this.length&&(f=this.length);a.length-b<f-e&&(f=a.length-b+e);var t=f-e;if(this===a&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(b,e,f);else if(this===a&&e<b&&b<f)for(f=t-1;0<=f;--f)a[f+b]=this[f+e];else Uint8Array.prototype.set.call(a,this.subarray(e,f),b);return t};c.prototype.fill=function(a,b,e,f){if("string"===typeof a){"string"===typeof b?(f=b,b=0,e=this.length):"string"===typeof e&&(f=e,e=this.length);if(void 0!==f&&"string"!==typeof f)throw new TypeError("encoding must be a string");
if("string"===typeof f&&!c.isEncoding(f))throw new TypeError("Unknown encoding: "+f);if(1===a.length){var t=a.charCodeAt(0);if("utf8"===f&&128>t||"latin1"===f)a=t}}else"number"===typeof a&&(a&=255);if(0>b||this.length<b||this.length<e)throw new RangeError("Out of range index");if(e<=b)return this;b>>>=0;e=void 0===e?this.length:e>>>0;a||(a=0);if("number"===typeof a)for(f=b;f<e;++f)this[f]=a;else{t=c.isBuffer(a)?a:c.from(a,f);var n=t.length;if(0===n)throw new TypeError('The value "'+a+'" is invalid for argument "value"');
for(f=0;f<e-b;++f)this[f+b]=t[f%n]}return this};var W=/[^+/0-9A-Za-z-_]/g}).call(this,d("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:6}],4:[function(d,r,m){(function(c){m.isArray=function(c){return Array.isArray?Array.isArray(c):"[object Array]"===Object.prototype.toString.call(c)};m.isBoolean=function(c){return"boolean"===typeof c};m.isNull=function(c){return null===c};m.isNullOrUndefined=function(c){return null==c};m.isNumber=function(c){return"number"===typeof c};m.isString=function(c){return"string"===
typeof c};m.isSymbol=function(c){return"symbol"===typeof c};m.isUndefined=function(c){return void 0===c};m.isRegExp=function(c){return"[object RegExp]"===Object.prototype.toString.call(c)};m.isObject=function(c){return"object"===typeof c&&null!==c};m.isDate=function(c){return"[object Date]"===Object.prototype.toString.call(c)};m.isError=function(c){return"[object Error]"===Object.prototype.toString.call(c)||c instanceof Error};m.isFunction=function(c){return"function"===typeof c};m.isPrimitive=function(c){return null===
c||"boolean"===typeof c||"number"===typeof c||"string"===typeof c||"symbol"===typeof c||"undefined"===typeof c};m.isBuffer=c.isBuffer}).call(this,{isBuffer:d("../../is-buffer/index.js")})},{"../../is-buffer/index.js":8}],5:[function(d,r,m){function c(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=a(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function g(b,f,n,h){var d;if("function"!==typeof n)throw new TypeError('"listener" argument must be a function');
if(d=b._events){d.newListener&&(b.emit("newListener",f,n.listener?n.listener:n),d=b._events);var g=d[f]}else d=b._events=a(null),b._eventsCount=0;g?("function"===typeof g?g=d[f]=h?[n,g]:[g,n]:h?g.unshift(n):g.push(n),g.warned||(n=void 0===b._maxListeners?c.defaultMaxListeners:b._maxListeners)&&0<n&&g.length>n&&(g.warned=!0,n=Error("Possible EventEmitter memory leak detected. "+g.length+' "'+String(f)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),n.name="MaxListenersExceededWarning",
n.emitter=b,n.type=f,n.count=g.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",n.name,n.message))):(d[f]=n,++b._eventsCount);return b}function l(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],
arguments[1],arguments[2]);default:for(var a=Array(arguments.length),b=0;b<a.length;++b)a[b]=arguments[b];this.listener.apply(this.target,a)}}function p(a,b,c){a={fired:!1,wrapFn:void 0,target:a,type:b,listener:c};b=v.call(l,a);b.listener=c;return a.wrapFn=b}function w(a,c,f){a=a._events;if(!a)return[];c=a[c];if(!c)return[];if("function"===typeof c)return f?[c.listener||c]:[c];if(f)for(f=Array(c.length),a=0;a<f.length;++a)f[a]=c[a].listener||c[a];else f=b(c,c.length);return f}function B(a){var b=
this._events;if(b){a=b[a];if("function"===typeof a)return 1;if(a)return a.length}return 0}function b(a,b){for(var c=Array(b),f=0;f<b;++f)c[f]=a[f];return c}function h(a){var b=function(){};b.prototype=a;return new b}function D(a){var b=[],c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return c}function q(a){var b=this;return function(){return b.apply(a,arguments)}}var a=Object.create||h,f=Object.keys||D,v=Function.prototype.bind||q;r.exports=c;c.EventEmitter=c;c.prototype._events=
void 0;c.prototype._maxListeners=void 0;var n=10;try{d={};Object.defineProperty&&Object.defineProperty(d,"x",{value:0});var C=0===d.x}catch(H){C=!1}C?Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(a){if("number"!==typeof a||0>a||a!==a)throw new TypeError('"defaultMaxListeners" must be a positive number');n=a}}):c.defaultMaxListeners=n;c.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw new TypeError('"n" argument must be a positive number');
this._maxListeners=a;return this};c.prototype.getMaxListeners=function(){return void 0===this._maxListeners?c.defaultMaxListeners:this._maxListeners};c.prototype.emit=function(a){var c,f,n;var h="error"===a;if(n=this._events)h=h&&null==n.error;else if(!h)return!1;if(h){1<arguments.length&&(c=arguments[1]);if(c instanceof Error)throw c;n=Error('Unhandled "error" event. ('+c+")");n.context=c;throw n;}c=n[a];if(!c)return!1;n="function"===typeof c;var d=arguments.length;switch(d){case 1:if(n)c.call(this);
else for(n=c.length,c=b(c,n),h=0;h<n;++h)c[h].call(this);break;case 2:h=arguments[1];if(n)c.call(this,h);else for(n=c.length,c=b(c,n),d=0;d<n;++d)c[d].call(this,h);break;case 3:h=arguments[1];d=arguments[2];if(n)c.call(this,h,d);else for(n=c.length,c=b(c,n),f=0;f<n;++f)c[f].call(this,h,d);break;case 4:h=arguments[1];d=arguments[2];f=arguments[3];if(n)c.call(this,h,d,f);else{n=c.length;c=b(c,n);for(var g=0;g<n;++g)c[g].call(this,h,d,f)}break;default:h=Array(d-1);for(f=1;f<d;f++)h[f-1]=arguments[f];
if(n)c.apply(this,h);else for(n=c.length,c=b(c,n),d=0;d<n;++d)c[d].apply(this,h)}return!0};c.prototype.addListener=function(a,b){return g(this,a,b,!1)};c.prototype.on=c.prototype.addListener;c.prototype.prependListener=function(a,b){return g(this,a,b,!0)};c.prototype.once=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');this.on(a,p(this,a,b));return this};c.prototype.prependOnceListener=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');
this.prependListener(a,p(this,a,b));return this};c.prototype.removeListener=function(b,c){var f;if("function"!==typeof c)throw new TypeError('"listener" argument must be a function');var n=this._events;if(!n)return this;var h=n[b];if(!h)return this;if(h===c||h.listener===c)0===--this._eventsCount?this._events=a(null):(delete n[b],n.removeListener&&this.emit("removeListener",b,h.listener||c));else if("function"!==typeof h){var d=-1;for(f=h.length-1;0<=f;f--)if(h[f]===c||h[f].listener===c){var g=h[f].listener;
d=f;break}if(0>d)return this;if(0===d)h.shift();else{f=d+1;for(var l=h.length;f<l;d+=1,f+=1)h[d]=h[f];h.pop()}1===h.length&&(n[b]=h[0]);n.removeListener&&this.emit("removeListener",b,g||c)}return this};c.prototype.removeAllListeners=function(b){var c=this._events;if(!c)return this;if(!c.removeListener)return 0===arguments.length?(this._events=a(null),this._eventsCount=0):c[b]&&(0===--this._eventsCount?this._events=a(null):delete c[b]),this;if(0===arguments.length){var n=f(c);for(c=0;c<n.length;++c){var h=
n[c];"removeListener"!==h&&this.removeAllListeners(h)}this.removeAllListeners("removeListener");this._events=a(null);this._eventsCount=0;return this}n=c[b];if("function"===typeof n)this.removeListener(b,n);else if(n)for(c=n.length-1;0<=c;c--)this.removeListener(b,n[c]);return this};c.prototype.listeners=function(a){return w(this,a,!0)};c.prototype.rawListeners=function(a){return w(this,a,!1)};c.listenerCount=function(a,b){return"function"===typeof a.listenerCount?a.listenerCount(b):B.call(a,b)};c.prototype.listenerCount=
B;c.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],6:[function(d,r,m){m.read=function(c,d,l,p,w){var g=8*w-p-1;var b=(1<<g)-1,h=b>>1,D=-7;w=l?w-1:0;var q=l?-1:1,a=c[d+w];w+=q;l=a&(1<<-D)-1;a>>=-D;for(D+=g;0<D;l=256*l+c[d+w],w+=q,D-=8);g=l&(1<<-D)-1;l>>=-D;for(D+=p;0<D;g=256*g+c[d+w],w+=q,D-=8);if(0===l)l=1-h;else{if(l===b)return g?NaN:Infinity*(a?-1:1);g+=Math.pow(2,p);l-=h}return(a?-1:1)*g*Math.pow(2,l-p)};m.write=function(c,d,l,p,w,B){var b,h=8*
B-w-1,g=(1<<h)-1,q=g>>1,a=23===w?Math.pow(2,-24)-Math.pow(2,-77):0;B=p?0:B-1;var f=p?1:-1,v=0>d||0===d&&0>1/d?1:0;d=Math.abs(d);isNaN(d)||Infinity===d?(d=isNaN(d)?1:0,p=g):(p=Math.floor(Math.log(d)/Math.LN2),1>d*(b=Math.pow(2,-p))&&(p--,b*=2),d=1<=p+q?d+a/b:d+a*Math.pow(2,1-q),2<=d*b&&(p++,b/=2),p+q>=g?(d=0,p=g):1<=p+q?(d=(d*b-1)*Math.pow(2,w),p+=q):(d=d*Math.pow(2,q-1)*Math.pow(2,w),p=0));for(;8<=w;c[l+B]=d&255,B+=f,d/=256,w-=8);p=p<<w|d;for(h+=w;0<h;c[l+B]=p&255,B+=f,p/=256,h-=8);c[l+B-f]|=128*
v}},{}],7:[function(d,r,m){r.exports="function"===typeof Object.create?function(c,d){d&&(c.super_=d,c.prototype=Object.create(d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}:function(c,d){if(d){c.super_=d;var l=function(){};l.prototype=d.prototype;c.prototype=new l;c.prototype.constructor=c}}},{}],8:[function(d,r,m){function c(c){return!!c.constructor&&"function"===typeof c.constructor.isBuffer&&c.constructor.isBuffer(c)}r.exports=function(d){return null!=d&&(c(d)||
"function"===typeof d.readFloatLE&&"function"===typeof d.slice&&c(d.slice(0,0))||!!d._isBuffer)}},{}],9:[function(d,r,m){var c={}.toString;r.exports=Array.isArray||function(d){return"[object Array]"==c.call(d)}},{}],10:[function(d,r,m){(function(c){function d(d,g,w,B){if("function"!==typeof d)throw new TypeError('"callback" argument must be a function');var b=arguments.length;switch(b){case 0:case 1:return c.nextTick(d);case 2:return c.nextTick(function(){d.call(null,g)});case 3:return c.nextTick(function(){d.call(null,
g,w)});case 4:return c.nextTick(function(){d.call(null,g,w,B)});default:var h=Array(b-1);for(b=0;b<h.length;)h[b++]=arguments[b];return c.nextTick(function(){d.apply(null,h)})}}"undefined"===typeof c||!c.version||0===c.version.indexOf("v0.")||0===c.version.indexOf("v1.")&&0!==c.version.indexOf("v1.8.")?r.exports={nextTick:d}:r.exports=c}).call(this,d("_process"))},{_process:11}],11:[function(d,r,m){function c(){throw Error("setTimeout has not been defined");}function g(){throw Error("clearTimeout has not been defined");
}function l(a){if(D===setTimeout)return setTimeout(a,0);if((D===c||!D)&&setTimeout)return D=setTimeout,setTimeout(a,0);try{return D(a,0)}catch(H){try{return D.call(null,a,0)}catch(y){return D.call(this,a,0)}}}function p(a){if(q===clearTimeout)return clearTimeout(a);if((q===g||!q)&&clearTimeout)return q=clearTimeout,clearTimeout(a);try{return q(a)}catch(H){try{return q.call(null,a)}catch(y){return q.call(this,a)}}}function w(){f&&v&&(f=!1,v.length?a=v.concat(a):n=-1,a.length&&B())}function B(){if(!f){var b=
l(w);f=!0;for(var c=a.length;c;){v=a;for(a=[];++n<c;)v&&v[n].run();n=-1;c=a.length}v=null;f=!1;p(b)}}function b(a,b){this.fun=a;this.array=b}function h(){}d=r.exports={};try{var D="function"===typeof setTimeout?setTimeout:c}catch(C){D=c}try{var q="function"===typeof clearTimeout?clearTimeout:g}catch(C){q=g}var a=[],f=!1,v,n=-1;d.nextTick=function(c){var n=Array(arguments.length-1);if(1<arguments.length)for(var d=1;d<arguments.length;d++)n[d-1]=arguments[d];a.push(new b(c,n));1!==a.length||f||l(B)};
b.prototype.run=function(){this.fun.apply(null,this.array)};d.title="browser";d.browser=!0;d.env={};d.argv=[];d.version="";d.versions={};d.on=h;d.addListener=h;d.once=h;d.off=h;d.removeListener=h;d.removeAllListeners=h;d.emit=h;d.prependListener=h;d.prependOnceListener=h;d.listeners=function(a){return[]};d.binding=function(a){throw Error("process.binding is not supported");};d.cwd=function(){return"/"};d.chdir=function(a){throw Error("process.chdir is not supported");};d.umask=function(){return 0}},
{}],12:[function(d,r,m){r.exports=d("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":13}],13:[function(d,r,m){function c(b){if(!(this instanceof c))return new c(b);w.call(this,b);B.call(this,b);b&&!1===b.readable&&(this.readable=!1);b&&!1===b.writable&&(this.writable=!1);this.allowHalfOpen=!0;b&&!1===b.allowHalfOpen&&(this.allowHalfOpen=!1);this.once("end",g)}function g(){this.allowHalfOpen||this._writableState.ended||p.nextTick(l,this)}function l(b){b.end()}var p=d("process-nextick-args");
m=Object.keys||function(b){var c=[],d;for(d in b)c.push(d);return c};r.exports=c;r=Object.create(d("core-util-is"));r.inherits=d("inherits");var w=d("./_stream_readable"),B=d("./_stream_writable");r.inherits(c,w);d=m(B.prototype);for(r=0;r<d.length;r++)m=d[r],c.prototype[m]||(c.prototype[m]=B.prototype[m]);Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0===
this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(b){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=b,this._writableState.destroyed=b)}});c.prototype._destroy=function(b,c){this.push(null);this.end();p.nextTick(c,b)}},{"./_stream_readable":15,"./_stream_writable":17,"core-util-is":4,inherits:7,"process-nextick-args":10}],14:[function(d,r,m){function c(d){if(!(this instanceof c))return new c(d);
g.call(this,d)}r.exports=c;var g=d("./_stream_transform");r=Object.create(d("core-util-is"));r.inherits=d("inherits");r.inherits(c,g);c.prototype._transform=function(c,d,g){g(null,c)}},{"./_stream_transform":16,"core-util-is":4,inherits:7}],15:[function(d,r,m){(function(c,g){function l(a,b,c){if("function"===typeof a.prependListener)return a.prependListener(b,c);if(a._events&&a._events[b])N(a._events[b])?a._events[b].unshift(c):a._events[b]=[c,a._events[b]];else a.on(b,c)}function p(a,b){G=G||d("./_stream_duplex");
a=a||{};b=b instanceof G;this.objectMode=!!a.objectMode;b&&(this.objectMode=this.objectMode||!!a.readableObjectMode);var c=a.highWaterMark,e=a.readableHighWaterMark,f=this.objectMode?16:16384;this.highWaterMark=c||0===c?c:b&&(e||0===e)?e:f;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new W;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.destroyed=this.resumeScheduled=this.readableListening=this.emittedReadable=
this.needReadable=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;a.encoding&&(k||(k=d("string_decoder/").StringDecoder),this.decoder=new k(a.encoding),this.encoding=a.encoding)}function w(a){G=G||d("./_stream_duplex");if(!(this instanceof w))return new w(a);this._readableState=new p(a,this);this.readable=!0;a&&("function"===typeof a.read&&(this._read=a.read),"function"===typeof a.destroy&&(this._destroy=a.destroy));z.call(this)}
function B(c,f,n,d,h){var e=c._readableState;if(null===f)e.reading=!1,e.ended||(e.decoder&&(f=e.decoder.end())&&f.length&&(e.buffer.push(f),e.length+=e.objectMode?1:f.length),e.ended=!0,D(c));else{if(!h){h=f;var t;L.isBuffer(h)||h instanceof K||"string"===typeof h||void 0===h||e.objectMode||(t=new TypeError("Invalid non-string/buffer chunk"));var k=t}k?c.emit("error",k):e.objectMode||f&&0<f.length?("string"===typeof f||e.objectMode||Object.getPrototypeOf(f)===L.prototype||(f=L.from(f)),d?e.endEmitted?
c.emit("error",Error("stream.unshift() after end event")):b(c,e,f,!0):e.ended?c.emit("error",Error("stream.push() after EOF")):(e.reading=!1,e.decoder&&!n?(f=e.decoder.write(f),e.objectMode||0!==f.length?b(c,e,f,!1):e.readingMore||(e.readingMore=!0,E.nextTick(a,c,e))):b(c,e,f,!1))):d||(e.reading=!1)}return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function b(b,c,f,n){c.flowing&&0===c.length&&!c.sync?(b.emit("data",f),b.read(0)):(c.length+=c.objectMode?1:f.length,n?c.buffer.unshift(f):
c.buffer.push(f),c.needReadable&&D(b));c.readingMore||(c.readingMore=!0,E.nextTick(a,b,c))}function h(a,b){if(0>=a||0===b.length&&b.ended)return 0;if(b.objectMode)return 1;if(a!==a)return b.flowing&&b.length?b.buffer.head.data.length:b.length;if(a>b.highWaterMark){var c=a;8388608<=c?c=8388608:(c--,c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,c|=c>>>16,c++);b.highWaterMark=c}return a<=b.length?a:b.ended?b.length:(b.needReadable=!0,0)}function D(a){var b=a._readableState;b.needReadable=!1;b.emittedReadable||
(A("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?E.nextTick(q,a):q(a))}function q(a){A("emit readable");a.emit("readable");C(a)}function a(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(A("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function f(a){return function(){var b=a._readableState;A("pipeOnDrain",b.awaitDrain);b.awaitDrain&&b.awaitDrain--;0===b.awaitDrain&&a.listeners("data").length&&(b.flowing=!0,C(a))}}function v(a){A("readable nexttick read 0");
a.read(0)}function n(a,b){b.reading||(A("resume read 0"),a.read(0));b.resumeScheduled=!1;b.awaitDrain=0;a.emit("resume");C(a);b.flowing&&!b.reading&&a.read(0)}function C(a){var b=a._readableState;for(A("flow",b.flowing);b.flowing&&null!==a.read(););}function m(a,b){if(0===b.length)return null;if(b.objectMode)var c=b.buffer.shift();else if(!a||a>=b.length)c=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.head.data:b.buffer.concat(b.length),b.buffer.clear();else{c=b.buffer;b=b.decoder;if(a<
c.head.data.length)b=c.head.data.slice(0,a),c.head.data=c.head.data.slice(a);else{if(a===c.head.data.length)c=c.shift();else if(b){b=c.head;var e=1,f=b.data;for(a-=f.length;b=b.next;){var n=b.data,d=a>n.length?n.length:a;f=d===n.length?f+n:f+n.slice(0,a);a-=d;if(0===a){d===n.length?(++e,c.head=b.next?b.next:c.tail=null):(c.head=b,b.data=n.slice(d));break}++e}c.length-=e;c=f}else{b=L.allocUnsafe(a);e=c.head;f=1;e.data.copy(b);for(a-=e.data.length;e=e.next;){n=e.data;d=a>n.length?n.length:a;n.copy(b,
b.length-a,0,d);a-=d;if(0===a){d===n.length?(++f,c.head=e.next?e.next:c.tail=null):(c.head=e,e.data=n.slice(d));break}++f}c.length-=f;c=b}b=c}c=b}return c}function y(a){var b=a._readableState;if(0<b.length)throw Error('"endReadable()" called on non-empty stream');b.endEmitted||(b.ended=!0,E.nextTick(T,b,a))}function T(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function M(a,b){for(var c=0,e=a.length;c<e;c++)if(a[c]===b)return c;return-1}var E=d("process-nextick-args");
r.exports=w;var N=d("isarray"),G;w.ReadableState=p;d("events");var z=d("./internal/streams/stream"),L=d("safe-buffer").Buffer,K=g.Uint8Array||function(){};g=Object.create(d("core-util-is"));g.inherits=d("inherits");var F=d("util"),A=void 0;A=F&&F.debuglog?F.debuglog("stream"):function(){};var W=d("./internal/streams/BufferList");F=d("./internal/streams/destroy");var k;g.inherits(w,z);var I=["error","close","destroy","pause","resume"];Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0===
this._readableState?!1:this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}});w.prototype.destroy=F.destroy;w.prototype._undestroy=F.undestroy;w.prototype._destroy=function(a,b){this.push(null);b(a)};w.prototype.push=function(a,b){var c=this._readableState;if(c.objectMode)var f=!0;else"string"===typeof a&&(b=b||c.defaultEncoding,b!==c.encoding&&(a=L.from(a,b),b=""),f=!0);return B(this,a,b,!1,f)};w.prototype.unshift=function(a){return B(this,a,null,
!0,!1)};w.prototype.isPaused=function(){return!1===this._readableState.flowing};w.prototype.setEncoding=function(a){k||(k=d("string_decoder/").StringDecoder);this._readableState.decoder=new k(a);this._readableState.encoding=a;return this};w.prototype.read=function(a){A("read",a);a=parseInt(a,10);var b=this._readableState,c=a;0!==a&&(b.emittedReadable=!1);if(0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return A("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?y(this):D(this),
null;a=h(a,b);if(0===a&&b.ended)return 0===b.length&&y(this),null;var f=b.needReadable;A("need readable",f);if(0===b.length||b.length-a<b.highWaterMark)f=!0,A("length less than watermark",f);b.ended||b.reading?A("reading or ended",!1):f&&(A("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=h(c,b)));f=0<a?m(a,b):null;null===f?(b.needReadable=!0,a=0):b.length-=a;0===b.length&&(b.ended||(b.needReadable=!0),c!==a&&b.ended&&y(this));
null!==f&&this.emit("data",f);return f};w.prototype._read=function(a){this.emit("error",Error("_read() is not implemented"))};w.prototype.pipe=function(a,b){function e(b,c){A("onunpipe");b===g&&c&&!1===c.hasUnpiped&&(c.hasUnpiped=!0,A("cleanup"),a.removeListener("close",k),a.removeListener("finish",v),a.removeListener("drain",q),a.removeListener("error",h),a.removeListener("unpipe",e),g.removeListener("end",n),g.removeListener("end",S),g.removeListener("data",d),p=!0,!J.awaitDrain||a._writableState&&
!a._writableState.needDrain||q())}function n(){A("onend");a.end()}function d(b){A("ondata");O=!1;!1!==a.write(b)||O||((1===J.pipesCount&&J.pipes===a||1<J.pipesCount&&-1!==M(J.pipes,a))&&!p&&(A("false write response, pause",g._readableState.awaitDrain),g._readableState.awaitDrain++,O=!0),g.pause())}function h(b){A("onerror",b);S();a.removeListener("error",h);0===a.listeners("error").length&&a.emit("error",b)}function k(){a.removeListener("finish",v);S()}function v(){A("onfinish");a.removeListener("close",
k);S()}function S(){A("unpipe");g.unpipe(a)}var g=this,J=this._readableState;switch(J.pipesCount){case 0:J.pipes=a;break;case 1:J.pipes=[J.pipes,a];break;default:J.pipes.push(a)}J.pipesCount+=1;A("pipe count=%d opts=%j",J.pipesCount,b);b=b&&!1===b.end||a===c.stdout||a===c.stderr?S:n;if(J.endEmitted)E.nextTick(b);else g.once("end",b);a.on("unpipe",e);var q=f(g);a.on("drain",q);var p=!1,O=!1;g.on("data",d);l(a,"error",h);a.once("close",k);a.once("finish",v);a.emit("pipe",g);J.flowing||(A("pipe resume"),
g.resume());return a};w.prototype.unpipe=function(a){var b=this._readableState,c={hasUnpiped:!1};if(0===b.pipesCount)return this;if(1===b.pipesCount){if(a&&a!==b.pipes)return this;a||(a=b.pipes);b.pipes=null;b.pipesCount=0;b.flowing=!1;a&&a.emit("unpipe",this,c);return this}if(!a){a=b.pipes;var f=b.pipesCount;b.pipes=null;b.pipesCount=0;b.flowing=!1;for(b=0;b<f;b++)a[b].emit("unpipe",this,c);return this}f=M(b.pipes,a);if(-1===f)return this;b.pipes.splice(f,1);--b.pipesCount;1===b.pipesCount&&(b.pipes=
b.pipes[0]);a.emit("unpipe",this,c);return this};w.prototype.on=function(a,b){b=z.prototype.on.call(this,a,b);"data"===a?!1!==this._readableState.flowing&&this.resume():"readable"===a&&(a=this._readableState,a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,a.reading?a.length&&D(this):E.nextTick(v,this)));return b};w.prototype.addListener=w.prototype.on;w.prototype.resume=function(){var a=this._readableState;a.flowing||(A("resume"),a.flowing=!0,a.resumeScheduled||
(a.resumeScheduled=!0,E.nextTick(n,this,a)));return this};w.prototype.pause=function(){A("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(A("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};w.prototype.wrap=function(a){var b=this,c=this._readableState,f=!1;a.on("end",function(){A("wrapped end");if(c.decoder&&!c.ended){var a=c.decoder.end();a&&a.length&&b.push(a)}b.push(null)});a.on("data",function(e){A("wrapped data");c.decoder&&(e=c.decoder.write(e));
c.objectMode&&(null===e||void 0===e)||!(c.objectMode||e&&e.length)||b.push(e)||(f=!0,a.pause())});for(var e in a)void 0===this[e]&&"function"===typeof a[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));for(e=0;e<I.length;e++)a.on(I[e],this.emit.bind(this,I[e]));this._read=function(b){A("wrapped _read",b);f&&(f=!1,a.resume())};return this};Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});
w._fromList=m}).call(this,d("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./_stream_duplex":13,"./internal/streams/BufferList":18,"./internal/streams/destroy":19,"./internal/streams/stream":20,_process:11,"core-util-is":4,events:5,inherits:7,isarray:9,"process-nextick-args":10,"safe-buffer":21,"string_decoder/":22,util:2}],16:[function(d,r,m){function c(c,b){var d=this._transformState;d.transforming=!1;var g=d.writecb;if(!g)return this.emit("error",
Error("write callback called multiple times"));d.writechunk=null;d.writecb=null;null!=b&&this.push(b);g(c);c=this._readableState;c.reading=!1;(c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}function g(d){if(!(this instanceof g))return new g(d);w.call(this,d);this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;d&&("function"===typeof d.transform&&
(this._transform=d.transform),"function"===typeof d.flush&&(this._flush=d.flush));this.on("prefinish",l)}function l(){var c=this;"function"===typeof this._flush?this._flush(function(b,d){p(c,b,d)}):p(this,null,null)}function p(c,b,d){if(b)return c.emit("error",b);null!=d&&c.push(d);if(c._writableState.length)throw Error("Calling transform done when ws.length != 0");if(c._transformState.transforming)throw Error("Calling transform done when still transforming");return c.push(null)}r.exports=g;var w=
d("./_stream_duplex");r=Object.create(d("core-util-is"));r.inherits=d("inherits");r.inherits(g,w);g.prototype.push=function(c,b){this._transformState.needTransform=!1;return w.prototype.push.call(this,c,b)};g.prototype._transform=function(c,b,d){throw Error("_transform() is not implemented");};g.prototype._write=function(c,b,d){var h=this._transformState;h.writecb=d;h.writechunk=c;h.writeencoding=b;h.transforming||(c=this._readableState,(h.needTransform||c.needReadable||c.length<c.highWaterMark)&&
this._read(c.highWaterMark))};g.prototype._read=function(c){c=this._transformState;null!==c.writechunk&&c.writecb&&!c.transforming?(c.transforming=!0,this._transform(c.writechunk,c.writeencoding,c.afterTransform)):c.needTransform=!0};g.prototype._destroy=function(c,b){var d=this;w.prototype._destroy.call(this,c,function(c){b(c);d.emit("close")})}},{"./_stream_duplex":13,"core-util-is":4,inherits:7}],17:[function(d,r,m){(function(c,g,l){function p(a){var b=this;this.entry=this.next=null;this.finish=
function(){var c=b.entry;for(b.entry=null;c;){var f=c.callback;a.pendingcb--;f(void 0);c=c.next}a.corkedRequestsFree?a.corkedRequestsFree.next=b:a.corkedRequestsFree=b}}function w(){}function m(b,c){H=H||d("./_stream_duplex");b=b||{};var f=c instanceof H;this.objectMode=!!b.objectMode;f&&(this.objectMode=this.objectMode||!!b.writableObjectMode);var h=b.highWaterMark,g=b.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=h||0===h?h:f&&(g||0===g)?g:l;this.highWaterMark=Math.floor(this.highWaterMark);
this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==b.decodeStrings;this.defaultEncoding=b.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(b){var f=c._writableState,d=f.sync,e=f.writecb;f.writing=!1;f.writecb=null;f.length-=f.writelen;f.writelen=0;b?(--f.pendingcb,d?(n.nextTick(e,b),n.nextTick(v,c,f),c._writableState.errorEmitted=!0,c.emit("error",b)):(e(b),c._writableState.errorEmitted=
!0,c.emit("error",b),v(c,f))):((b=a(f))||f.corked||f.bufferProcessing||!f.bufferedRequest||q(c,f),d?C(D,c,f,b,e):D(c,f,b,e))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.bufferedRequestCount=0;this.corkedRequestsFree=new p(this)}function b(a){H=H||d("./_stream_duplex");if(!(N.call(b,this)||this instanceof H))return new b(a);this._writableState=new m(a,this);this.writable=!0;a&&("function"===typeof a.write&&
(this._write=a.write),"function"===typeof a.writev&&(this._writev=a.writev),"function"===typeof a.destroy&&(this._destroy=a.destroy),"function"===typeof a.final&&(this._final=a.final));T.call(this)}function h(a,b,c,f,n,d,h){b.writelen=f;b.writecb=h;b.writing=!0;b.sync=!0;c?a._writev(n,b.onwrite):a._write(n,d,b.onwrite);b.sync=!1}function D(a,b,c,f){!c&&0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"));b.pendingcb--;f();v(a,b)}function q(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;
if(a._writev&&c&&c.next){var f=Array(b.bufferedRequestCount),n=b.corkedRequestsFree;n.entry=c;for(var d=0,g=!0;c;)f[d]=c,c.isBuf||(g=!1),c=c.next,d+=1;f.allBuffers=g;h(a,b,!0,b.length,f,"",n.finish);b.pendingcb++;b.lastBufferedRequest=null;n.next?(b.corkedRequestsFree=n.next,n.next=null):b.corkedRequestsFree=new p(b);b.bufferedRequestCount=0}else{for(;c&&(f=c.chunk,h(a,b,!1,b.objectMode?1:f.length,f,c.encoding,c.callback),c=c.next,b.bufferedRequestCount--,!b.writing););null===c&&(b.lastBufferedRequest=
null)}b.bufferedRequest=c;b.bufferProcessing=!1}function a(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function f(a,b){a._final(function(c){b.pendingcb--;c&&a.emit("error",c);b.prefinished=!0;a.emit("prefinish");v(a,b)})}function v(b,c){var d=a(c);d&&(c.prefinished||c.finalCalled||("function"===typeof b._final?(c.pendingcb++,c.finalCalled=!0,n.nextTick(f,b,c)):(c.prefinished=!0,b.emit("prefinish"))),0===c.pendingcb&&(c.finished=!0,b.emit("finish")));return d}
var n=d("process-nextick-args");r.exports=b;var C=!c.browser&&-1<["v0.10","v0.9."].indexOf(c.version.slice(0,5))?l:n.nextTick,H;b.WritableState=m;c=Object.create(d("core-util-is"));c.inherits=d("inherits");var y={deprecate:d("util-deprecate")},T=d("./internal/streams/stream"),M=d("safe-buffer").Buffer,E=g.Uint8Array||function(){};g=d("./internal/streams/destroy");c.inherits(b,T);m.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b};(function(){try{Object.defineProperty(m.prototype,
"buffer",{get:y.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(G){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var N=Function.prototype[Symbol.hasInstance];Object.defineProperty(b,Symbol.hasInstance,{value:function(a){return N.call(this,a)?!0:this!==b?!1:a&&a._writableState instanceof m}})}else N=function(a){return a instanceof this};
b.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))};b.prototype.write=function(a,b,c){var f=this._writableState,d=!1,g;if(g=!f.objectMode)g=a,g=M.isBuffer(g)||g instanceof E;g&&!M.isBuffer(a)&&(a=M.from(a));"function"===typeof b&&(c=b,b=null);g?b="buffer":b||(b=f.defaultEncoding);"function"!==typeof c&&(c=w);if(f.ended)f=c,c=Error("write after end"),this.emit("error",c),n.nextTick(f,c);else{var v;if(!(v=g)){v=a;var k=c,l=!0,e=!1;null===v?e=new TypeError("May not write null values to stream"):
"string"===typeof v||void 0===v||f.objectMode||(e=new TypeError("Invalid non-string/buffer chunk"));e&&(this.emit("error",e),n.nextTick(k,e),l=!1);v=l}v&&(f.pendingcb++,d=g,d||(g=a,f.objectMode||!1===f.decodeStrings||"string"!==typeof g||(g=M.from(g,b)),a!==g&&(d=!0,b="buffer",a=g)),v=f.objectMode?1:a.length,f.length+=v,g=f.length<f.highWaterMark,g||(f.needDrain=!0),f.writing||f.corked?(v=f.lastBufferedRequest,f.lastBufferedRequest={chunk:a,encoding:b,isBuf:d,callback:c,next:null},v?v.next=f.lastBufferedRequest:
f.bufferedRequest=f.lastBufferedRequest,f.bufferedRequestCount+=1):h(this,f,!1,v,a,b,c),d=g)}return d};b.prototype.cork=function(){this._writableState.corked++};b.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||q(this,a))};b.prototype.setDefaultEncoding=function(a){"string"===typeof a&&(a=a.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((a+
"").toLowerCase())))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a;return this};Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});b.prototype._write=function(a,b,c){c(Error("_write() is not implemented"))};b.prototype._writev=null;b.prototype.end=function(a,b,c){var f=this._writableState;"function"===typeof a?(c=a,b=a=null):"function"===typeof b&&(c=b,b=null);null!==a&&void 0!==a&&
this.write(a,b);f.corked&&(f.corked=1,this.uncork());if(!f.ending&&!f.finished){a=c;f.ending=!0;v(this,f);if(a)if(f.finished)n.nextTick(a);else this.once("finish",a);f.ended=!0;this.writable=!1}};Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(a){this._writableState&&(this._writableState.destroyed=a)}});b.prototype.destroy=g.destroy;b.prototype._undestroy=g.undestroy;b.prototype._destroy=function(a,b){this.end();
b(a)}}).call(this,d("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("timers").setImmediate)},{"./_stream_duplex":13,"./internal/streams/destroy":19,"./internal/streams/stream":20,_process:11,"core-util-is":4,inherits:7,"process-nextick-args":10,"safe-buffer":21,timers:31,"util-deprecate":32}],18:[function(d,r,m){var c=d("safe-buffer").Buffer,g=d("util");r.exports=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");
this.tail=this.head=null;this.length=0}d.prototype.push=function(c){c={data:c,next:null};0<this.length?this.tail.next=c:this.head=c;this.tail=c;++this.length};d.prototype.unshift=function(c){c={data:c,next:this.head};0===this.length&&(this.tail=c);this.head=c;++this.length};d.prototype.shift=function(){if(0!==this.length){var c=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return c}};d.prototype.clear=function(){this.head=this.tail=null;this.length=0};d.prototype.join=
function(c){if(0===this.length)return"";for(var d=this.head,g=""+d.data;d=d.next;)g+=c+d.data;return g};d.prototype.concat=function(d){if(0===this.length)return c.alloc(0);if(1===this.length)return this.head.data;d=c.allocUnsafe(d>>>0);for(var g=this.head,l=0;g;)g.data.copy(d,l),l+=g.data.length,g=g.next;return d};return d}();g&&g.inspect&&g.inspect.custom&&(r.exports.prototype[g.inspect.custom]=function(){var c=g.inspect({length:this.length});return this.constructor.name+" "+c})},{"safe-buffer":21,
util:2}],19:[function(d,r,m){function c(c,d){c.emit("error",d)}var g=d("process-nextick-args");r.exports={destroy:function(d,p){var l=this,m=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||m)return p?p(d):!d||this._writableState&&this._writableState.errorEmitted||g.nextTick(c,this,d),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(d||null,function(b){!p&&b?(g.nextTick(c,
l,b),l._writableState&&(l._writableState.errorEmitted=!0)):p&&p(b)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":10}],20:[function(d,r,m){r.exports=d("events").EventEmitter},
{events:5}],21:[function(d,r,m){function c(c,d){for(var b in c)d[b]=c[b]}function g(c,d,b){return p(c,d,b)}var l=d("buffer"),p=l.Buffer;p.from&&p.alloc&&p.allocUnsafe&&p.allocUnsafeSlow?r.exports=l:(c(l,m),m.Buffer=g);c(p,g);g.from=function(c,d,b){if("number"===typeof c)throw new TypeError("Argument must not be a number");return p(c,d,b)};g.alloc=function(c,d,b){if("number"!==typeof c)throw new TypeError("Argument must be a number");c=p(c);void 0!==d?"string"===typeof b?c.fill(d,b):c.fill(d):c.fill(0);
return c};g.allocUnsafe=function(c){if("number"!==typeof c)throw new TypeError("Argument must be a number");return p(c)};g.allocUnsafeSlow=function(c){if("number"!==typeof c)throw new TypeError("Argument must be a number");return l.SlowBuffer(c)}},{buffer:3}],22:[function(d,r,m){function c(a){if(!a)return"utf8";for(var b;;)switch(a){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return a;
default:if(b)return;a=(""+a).toLowerCase();b=!0}}function g(d){var n=c(d);if("string"!==typeof n&&(f.isEncoding===v||!v(d)))throw Error("Unknown encoding: "+d);this.encoding=n||d;switch(this.encoding){case "utf16le":this.text=B;this.end=b;d=4;break;case "utf8":this.fillLast=w;d=4;break;case "base64":this.text=h;this.end=D;d=3;break;default:this.write=q;this.end=a;return}this.lastTotal=this.lastNeed=0;this.lastChar=f.allocUnsafe(d)}function l(a){return 127>=a?0:6===a>>5?2:14===a>>4?3:30===a>>3?4:2===
a>>6?-1:-2}function p(a,b,c){var f=b.length-1;if(f<c)return 0;var d=l(b[f]);if(0<=d)return 0<d&&(a.lastNeed=d-1),d;if(--f<c||-2===d)return 0;d=l(b[f]);if(0<=d)return 0<d&&(a.lastNeed=d-2),d;if(--f<c||-2===d)return 0;d=l(b[f]);return 0<=d?(0<d&&(2===d?d=0:a.lastNeed=d-3),d):0}function w(a){var b=this.lastTotal-this.lastNeed;a:if(128!==(a[0]&192)){this.lastNeed=0;var c="\ufffd"}else{if(1<this.lastNeed&&1<a.length){if(128!==(a[1]&192)){this.lastNeed=1;c="\ufffd";break a}if(2<this.lastNeed&&2<a.length&&
128!==(a[2]&192)){this.lastNeed=2;c="\ufffd";break a}}c=void 0}if(void 0!==c)return c;if(this.lastNeed<=a.length)return a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,b,0,a.length);this.lastNeed-=a.length}function B(a,b){if(0===(a.length-b)%2){if(b=a.toString("utf16le",b)){var c=b.charCodeAt(b.length-1);if(55296<=c&&56319>=c)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],b.slice(0,
-1)}return b}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",b,a.length-1)}function b(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):a}function h(a,b){var c=(a.length-b)%3;if(0===c)return a.toString("base64",b);this.lastNeed=3-c;this.lastTotal=3;1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",b,a.length-
c)}function D(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function q(a){return a.toString(this.encoding)}function a(a){return a&&a.length?this.write(a):""}var f=d("safe-buffer").Buffer,v=f.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};m.StringDecoder=
g;g.prototype.write=function(a){if(0===a.length)return"";if(this.lastNeed){var b=this.fillLast(a);if(void 0===b)return"";var c=this.lastNeed;this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):b||""};g.prototype.end=function(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a};g.prototype.text=function(a,b){var c=p(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;c=a.length-(c-this.lastNeed);a.copy(this.lastChar,0,c);return a.toString("utf8",
b,c)};g.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length}},{"safe-buffer":21}],23:[function(d,r,m){r.exports=d("./readable").PassThrough},{"./readable":24}],24:[function(d,r,m){m=r.exports=d("./lib/_stream_readable.js");m.Stream=m;m.Readable=m;m.Writable=d("./lib/_stream_writable.js");
m.Duplex=d("./lib/_stream_duplex.js");m.Transform=d("./lib/_stream_transform.js");m.PassThrough=d("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":13,"./lib/_stream_passthrough.js":14,"./lib/_stream_readable.js":15,"./lib/_stream_transform.js":16,"./lib/_stream_writable.js":17}],25:[function(d,r,m){r.exports=d("./readable").Transform},{"./readable":24}],26:[function(d,r,m){r.exports=d("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":17}],27:[function(d,r,m){function c(c,d){for(var b in c)d[b]=
c[b]}function g(c,d,b){return p(c,d,b)}var l=d("buffer"),p=l.Buffer;p.from&&p.alloc&&p.allocUnsafe&&p.allocUnsafeSlow?r.exports=l:(c(l,m),m.Buffer=g);g.prototype=Object.create(p.prototype);c(p,g);g.from=function(c,d,b){if("number"===typeof c)throw new TypeError("Argument must not be a number");return p(c,d,b)};g.alloc=function(c,d,b){if("number"!==typeof c)throw new TypeError("Argument must be a number");c=p(c);void 0!==d?"string"===typeof b?c.fill(d,b):c.fill(d):c.fill(0);return c};g.allocUnsafe=
function(c){if("number"!==typeof c)throw new TypeError("Argument must be a number");return p(c)};g.allocUnsafeSlow=function(c){if("number"!==typeof c)throw new TypeError("Argument must be a number");return l.SlowBuffer(c)}},{buffer:3}],28:[function(d,r,m){(function(c){(function(g){function l(a,b){if(!(this instanceof l))return new l(a,b);for(var c=0,f=E.length;c<f;c++)this[E[c]]="";this.q=this.c="";this.bufferCheckPosition=g.MAX_BUFFER_LENGTH;this.opt=b||{};this.opt.lowercase=this.opt.lowercase||
this.opt.lowercasetags;this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase";this.tags=[];this.closed=this.closedRoot=this.sawRoot=!1;this.tag=this.error=null;this.strict=!!a;this.noscript=!(!a&&!this.opt.noscript);this.state=u.BEGIN;this.ENTITIES=(this.strictEntities=this.opt.strictEntities)?Object.create(g.XML_ENTITIES):Object.create(g.ENTITIES);this.attribList=[];this.opt.xmlns&&(this.ns=Object.create(t));if(this.trackPosition=!1!==this.opt.position)this.position=this.line=this.column=
0;this.onready&&this.onready(void 0)}function p(a,b){if(!(this instanceof p))return new p(a,b);N.apply(this);this._parser=new l(a,b);this.readable=this.writable=!0;var c=this;this._parser.onend=function(){c.emit("end")};this._parser.onerror=function(a){c.emit("error",a);c._parser.error=null};this._decoder=null;G.forEach(function(a){Object.defineProperty(c,"on"+a,{get:function(){return c._parser["on"+a]},set:function(b){if(!b)return c.removeAllListeners(a),c._parser["on"+a]=b;c.on(a,b)},enumerable:!0,
configurable:!1})})}function m(a){return a.split("").reduce(function(a,b){a[b]=!0;return a},{})}function r(a,b){return"[object RegExp]"===Object.prototype.toString.call(a)?!!b.match(a):a[b]}function b(a,b,c){a.textNode&&h(a);a[b]&&a[b](c)}function h(a){a.textNode=D(a.opt,a.textNode);a.textNode&&a.ontext&&a.ontext(a.textNode);a.textNode=""}function D(a,b){a.trim&&(b=b.trim());a.normalize&&(b=b.replace(/\s+/g," "));return b}function q(a,b){h(a);a.trackPosition&&(b+="\nLine: "+a.line+"\nColumn: "+a.column+
"\nChar: "+a.c);b=Error(b);a.error=b;a.onerror&&a.onerror(b);return a}function a(a){a.sawRoot&&!a.closedRoot&&f(a,"Unclosed root tag");a.state!==u.BEGIN&&a.state!==u.BEGIN_WHITESPACE&&a.state!==u.TEXT&&q(a,"Unexpected end");h(a);a.c="";a.closed=!0;a.onend&&a.onend(void 0);l.call(a,a.strict,a.opt);return a}function f(a,b){if("object"!==typeof a||!(a instanceof l))throw Error("bad call to strictFail");a.strict&&q(a,b)}function v(a,b){var c=0>a.indexOf(":")?["",a]:a.split(":"),f=c[0];c=c[1];b&&"xmlns"===
a&&(f="xmlns",c="");return{prefix:f,local:c}}function n(a){a.strict||(a.attribName=a.attribName[a.looseCase]());if(-1===a.attribList.indexOf(a.attribName)&&!a.tag.attributes.hasOwnProperty(a.attribName))if(a.opt.xmlns){var c=v(a.attribName,!0),d=c.local;if("xmlns"===c.prefix)if("xml"===d&&a.attribValue!==I)f(a,"xml: prefix must be bound to "+I+"\nActual: "+a.attribValue);else if("xmlns"===d&&a.attribValue!==e)f(a,"xmlns: prefix must be bound to "+e+"\nActual: "+a.attribValue);else{c=a.tag;var h=a.tags[a.tags.length-
1]||a;c.ns===h.ns&&(c.ns=Object.create(h.ns));c.ns[d]=a.attribValue}a.attribList.push([a.attribName,a.attribValue])}else a.tag.attributes[a.attribName]=a.attribValue,b(a,"onattribute",{name:a.attribName,value:a.attribValue});a.attribName=a.attribValue=""}function C(a,c){if(a.opt.xmlns){var d=a.tag,e=v(a.tagName);d.prefix=e.prefix;d.local=e.local;d.uri=d.ns[e.prefix]||"";d.prefix&&!d.uri&&(f(a,"Unbound namespace prefix: "+JSON.stringify(a.tagName)),d.uri=e.prefix);e=a.tags[a.tags.length-1]||a;d.ns&&
e.ns!==d.ns&&Object.keys(d.ns).forEach(function(c){b(a,"onopennamespace",{prefix:c,uri:d.ns[c]})});e=0;for(var h=a.attribList.length;e<h;e++){var n=a.attribList[e],g=n[0],k=n[1],l=v(g,!0);n=l.prefix;var q=""===n?"":d.ns[n]||"";k={name:g,value:k,prefix:n,local:l.local,uri:q};n&&"xmlns"!==n&&!q&&(f(a,"Unbound namespace prefix: "+JSON.stringify(n)),k.uri=n);a.tag.attributes[g]=k;b(a,"onattribute",k)}a.attribList.length=0}a.tag.isSelfClosing=!!c;a.sawRoot=!0;a.tags.push(a.tag);b(a,"onopentag",a.tag);
c||(a.noscript||"script"!==a.tagName.toLowerCase()?a.state=u.TEXT:a.state=u.SCRIPT,a.tag=null,a.tagName="");a.attribName=a.attribValue="";a.attribList.length=0}function H(a){if(a.tagName){if(a.script){if("script"!==a.tagName){a.script+="</"+a.tagName+">";a.tagName="";a.state=u.SCRIPT;return}b(a,"onscript",a.script);a.script=""}var c=a.tags.length,d=a.tagName;a.strict||(d=d[a.looseCase]());for(var e=d;c--;)if(a.tags[c].name!==e)f(a,"Unexpected close tag");else break;if(0>c)f(a,"Unmatched closing tag: "+
a.tagName),a.textNode+="</"+a.tagName+">";else{a.tagName=d;for(d=a.tags.length;d-- >c;){var h=a.tag=a.tags.pop();a.tagName=a.tag.name;b(a,"onclosetag",a.tagName);for(var n in h.ns);e=a.tags[a.tags.length-1]||a;a.opt.xmlns&&h.ns!==e.ns&&Object.keys(h.ns).forEach(function(c){b(a,"onclosenamespace",{prefix:c,uri:h.ns[c]})})}0===c&&(a.closedRoot=!0);a.tagName=a.attribValue=a.attribName="";a.attribList.length=0}}else f(a,"Weird empty close tag."),a.textNode+="</>";a.state=u.TEXT}function y(a){var b=a.entity,
c=b.toLowerCase(),d="";if(a.ENTITIES[b])return a.ENTITIES[b];if(a.ENTITIES[c])return a.ENTITIES[c];b=c;if("#"===b.charAt(0))if("x"===b.charAt(1)){b=b.slice(2);var e=parseInt(b,16);d=e.toString(16)}else b=b.slice(1),e=parseInt(b,10),d=e.toString(10);b=b.replace(/^0+/,"");return d.toLowerCase()!==b?(f(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCodePoint(e)}function T(a,b){"<"===b?(a.state=u.OPEN_WAKA,a.startTagPosition=a.position):r(z,b)||(f(a,"Non-whitespace before first tag."),a.textNode=
b,a.state=u.TEXT)}function M(a,b){var c="";b<a.length&&(c=a.charAt(b));return c}g.parser=function(a,b){return new l(a,b)};g.SAXParser=l;g.SAXStream=p;g.createStream=function(a,b){return new p(a,b)};g.MAX_BUFFER_LENGTH=65536;var E="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" ");g.EVENTS="text processinginstruction sgmldeclaration doctype comment opentagstart attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" ");
Object.create||(Object.create=function(a){function b(){}b.prototype=a;return new b});Object.keys||(Object.keys=function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b});l.prototype={end:function(){a(this)},write:function(c){if(this.error)throw this.error;if(this.closed)return q(this,"Cannot write after close. Assign an onready handler.");if(null===c)return a(this);"object"===typeof c&&(c=c.toString());for(var d=0,e;;){this.c=e=M(c,d++);if(!e)break;this.trackPosition&&(this.position++,
"\n"===e?(this.line++,this.column=0):this.column++);switch(this.state){case u.BEGIN:this.state=u.BEGIN_WHITESPACE;if("\ufeff"===e)continue;T(this,e);continue;case u.BEGIN_WHITESPACE:T(this,e);continue;case u.TEXT:if(this.sawRoot&&!this.closedRoot){for(var v=d-1;e&&"<"!==e&&"&"!==e;)(e=M(c,d++))&&this.trackPosition&&(this.position++,"\n"===e?(this.line++,this.column=0):this.column++);this.textNode+=c.substring(v,d-1)}"<"!==e||this.sawRoot&&this.closedRoot&&!this.strict?(r(z,e)||this.sawRoot&&!this.closedRoot||
f(this,"Text data outside of root node."),"&"===e?this.state=u.TEXT_ENTITY:this.textNode+=e):(this.state=u.OPEN_WAKA,this.startTagPosition=this.position);continue;case u.SCRIPT:"<"===e?this.state=u.SCRIPT_ENDING:this.script+=e;continue;case u.SCRIPT_ENDING:"/"===e?this.state=u.CLOSE_TAG:(this.script+="<"+e,this.state=u.SCRIPT);continue;case u.OPEN_WAKA:"!"===e?(this.state=u.SGML_DECL,this.sgmlDecl=""):r(z,e)||(r(V,e)?(this.state=u.OPEN_TAG,this.tagName=e):"/"===e?(this.state=u.CLOSE_TAG,this.tagName=
""):"?"===e?(this.state=u.PROC_INST,this.procInstName=this.procInstBody=""):(f(this,"Unencoded <"),this.startTagPosition+1<this.position&&(e=Array(this.position-this.startTagPosition).join(" ")+e),this.textNode+="<"+e,this.state=u.TEXT));continue;case u.SGML_DECL:(this.sgmlDecl+e).toUpperCase()===W?(b(this,"onopencdata"),this.state=u.CDATA,this.cdata=this.sgmlDecl=""):"--"===this.sgmlDecl+e?(this.state=u.COMMENT,this.sgmlDecl=this.comment=""):(this.sgmlDecl+e).toUpperCase()===k?(this.state=u.DOCTYPE,
(this.doctype||this.sawRoot)&&f(this,"Inappropriately located doctype declaration"),this.sgmlDecl=this.doctype=""):">"===e?(b(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=u.TEXT):(r(F,e)&&(this.state=u.SGML_DECL_QUOTED),this.sgmlDecl+=e);continue;case u.SGML_DECL_QUOTED:e===this.q&&(this.state=u.SGML_DECL,this.q="");this.sgmlDecl+=e;continue;case u.DOCTYPE:">"===e?(this.state=u.TEXT,b(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=e,"["===e?this.state=u.DOCTYPE_DTD:
r(F,e)&&(this.state=u.DOCTYPE_QUOTED,this.q=e));continue;case u.DOCTYPE_QUOTED:this.doctype+=e;e===this.q&&(this.q="",this.state=u.DOCTYPE);continue;case u.DOCTYPE_DTD:this.doctype+=e;"]"===e?this.state=u.DOCTYPE:r(F,e)&&(this.state=u.DOCTYPE_DTD_QUOTED,this.q=e);continue;case u.DOCTYPE_DTD_QUOTED:this.doctype+=e;e===this.q&&(this.state=u.DOCTYPE_DTD,this.q="");continue;case u.COMMENT:"-"===e?this.state=u.COMMENT_ENDING:this.comment+=e;continue;case u.COMMENT_ENDING:"-"===e?(this.state=u.COMMENT_ENDED,
(this.comment=D(this.opt,this.comment))&&b(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+e,this.state=u.COMMENT);continue;case u.COMMENT_ENDED:">"!==e?(f(this,"Malformed comment"),this.comment+="--"+e,this.state=u.COMMENT):this.state=u.TEXT;continue;case u.CDATA:"]"===e?this.state=u.CDATA_ENDING:this.cdata+=e;continue;case u.CDATA_ENDING:"]"===e?this.state=u.CDATA_ENDING_2:(this.cdata+="]"+e,this.state=u.CDATA);continue;case u.CDATA_ENDING_2:">"===e?(this.cdata&&b(this,"oncdata",
this.cdata),b(this,"onclosecdata"),this.cdata="",this.state=u.TEXT):"]"===e?this.cdata+="]":(this.cdata+="]]"+e,this.state=u.CDATA);continue;case u.PROC_INST:"?"===e?this.state=u.PROC_INST_ENDING:r(z,e)?this.state=u.PROC_INST_BODY:this.procInstName+=e;continue;case u.PROC_INST_BODY:if(!this.procInstBody&&r(z,e))continue;else"?"===e?this.state=u.PROC_INST_ENDING:this.procInstBody+=e;continue;case u.PROC_INST_ENDING:">"===e?(b(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),
this.procInstName=this.procInstBody="",this.state=u.TEXT):(this.procInstBody+="?"+e,this.state=u.PROC_INST_BODY);continue;case u.OPEN_TAG:if(r(Q,e))this.tagName+=e;else{this.strict||(this.tagName=this.tagName[this.looseCase]());v=this.tags[this.tags.length-1]||this;var l=this.tag={name:this.tagName,attributes:{}};this.opt.xmlns&&(l.ns=v.ns);this.attribList.length=0;b(this,"onopentagstart",l);">"===e?C(this):"/"===e?this.state=u.OPEN_TAG_SLASH:(r(z,e)||f(this,"Invalid character in tag name"),this.state=
u.ATTRIB)}continue;case u.OPEN_TAG_SLASH:">"===e?(C(this,!0),H(this)):(f(this,"Forward-slash in opening tag not followed by >"),this.state=u.ATTRIB);continue;case u.ATTRIB:if(r(z,e))continue;else">"===e?C(this):"/"===e?this.state=u.OPEN_TAG_SLASH:r(V,e)?(this.attribName=e,this.attribValue="",this.state=u.ATTRIB_NAME):f(this,"Invalid attribute name");continue;case u.ATTRIB_NAME:"="===e?this.state=u.ATTRIB_VALUE:">"===e?(f(this,"Attribute without value"),this.attribValue=this.attribName,n(this),C(this)):
r(z,e)?this.state=u.ATTRIB_NAME_SAW_WHITE:r(Q,e)?this.attribName+=e:f(this,"Invalid attribute name");continue;case u.ATTRIB_NAME_SAW_WHITE:if("="===e)this.state=u.ATTRIB_VALUE;else if(r(z,e))continue;else f(this,"Attribute without value"),this.attribValue=this.tag.attributes[this.attribName]="",b(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===e?C(this):r(V,e)?(this.attribName=e,this.state=u.ATTRIB_NAME):(f(this,"Invalid attribute name"),this.state=u.ATTRIB);continue;
case u.ATTRIB_VALUE:if(r(z,e))continue;else r(F,e)?(this.q=e,this.state=u.ATTRIB_VALUE_QUOTED):(f(this,"Unquoted attribute value"),this.state=u.ATTRIB_VALUE_UNQUOTED,this.attribValue=e);continue;case u.ATTRIB_VALUE_QUOTED:if(e!==this.q){"&"===e?this.state=u.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=e;continue}n(this);this.q="";this.state=u.ATTRIB_VALUE_CLOSED;continue;case u.ATTRIB_VALUE_CLOSED:r(z,e)?this.state=u.ATTRIB:">"===e?C(this):"/"===e?this.state=u.OPEN_TAG_SLASH:r(V,e)?(f(this,"No whitespace between attributes"),
this.attribName=e,this.attribValue="",this.state=u.ATTRIB_NAME):f(this,"Invalid attribute name");continue;case u.ATTRIB_VALUE_UNQUOTED:if(!r(A,e)){"&"===e?this.state=u.ATTRIB_VALUE_ENTITY_U:this.attribValue+=e;continue}n(this);">"===e?C(this):this.state=u.ATTRIB;continue;case u.CLOSE_TAG:if(this.tagName)">"===e?H(this):r(Q,e)?this.tagName+=e:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=u.SCRIPT):(r(z,e)||f(this,"Invalid tagname in closing tag"),this.state=u.CLOSE_TAG_SAW_WHITE);
else if(r(z,e))continue;else r(V,e)?this.tagName=e:this.script?(this.script+="</"+e,this.state=u.SCRIPT):f(this,"Invalid tagname in closing tag.");continue;case u.CLOSE_TAG_SAW_WHITE:if(r(z,e))continue;">"===e?H(this):f(this,"Invalid characters in closing tag");continue;case u.TEXT_ENTITY:case u.ATTRIB_VALUE_ENTITY_Q:case u.ATTRIB_VALUE_ENTITY_U:switch(this.state){case u.TEXT_ENTITY:var O=u.TEXT;var R="textNode";break;case u.ATTRIB_VALUE_ENTITY_Q:O=u.ATTRIB_VALUE_QUOTED;R="attribValue";break;case u.ATTRIB_VALUE_ENTITY_U:O=
u.ATTRIB_VALUE_UNQUOTED,R="attribValue"}";"===e?(this[R]+=y(this),this.entity="",this.state=O):r(this.entity.length?Y:aa,e)?this.entity+=e:(f(this,"Invalid character in entity name"),this[R]+="&"+this.entity+e,this.entity="",this.state=O);continue;default:throw Error(this,"Unknown state: "+this.state);}}if(this.position>=this.bufferCheckPosition){c=Math.max(g.MAX_BUFFER_LENGTH,10);e=d=0;for(O=E.length;e<O;e++){R=this[E[e]].length;if(R>c)switch(E[e]){case "textNode":h(this);break;case "cdata":b(this,
"oncdata",this.cdata);this.cdata="";break;case "script":b(this,"onscript",this.script);this.script="";break;default:q(this,"Max buffer length exceeded: "+E[e])}d=Math.max(d,R)}this.bufferCheckPosition=g.MAX_BUFFER_LENGTH-d+this.position}return this},resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){h(this);""!==this.cdata&&(b(this,"oncdata",this.cdata),this.cdata="");""!==this.script&&(b(this,"onscript",this.script),this.script="")}};try{var N=
d("stream").Stream}catch(S){N=function(){}}var G=g.EVENTS.filter(function(a){return"error"!==a&&"end"!==a});p.prototype=Object.create(N.prototype,{constructor:{value:p}});p.prototype.write=function(a){"function"===typeof c&&"function"===typeof c.isBuffer&&c.isBuffer(a)&&(this._decoder||(this._decoder=new (d("string_decoder").StringDecoder)("utf8")),a=this._decoder.write(a));this._parser.write(a.toString());this.emit("data",a);return!0};p.prototype.end=function(a){a&&a.length&&this.write(a);this._parser.end();
return!0};p.prototype.on=function(a,b){var c=this;c._parser["on"+a]||-1===G.indexOf(a)||(c._parser["on"+a]=function(){var b=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);b.splice(0,0,a);c.emit.apply(c,b)});return N.prototype.on.call(c,a,b)};var z="\r\n\t ",L="0124356789",K="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",F="'\"",A=z+">",W="[CDATA[",k="DOCTYPE",I="http://www.w3.org/XML/1998/namespace",e="http://www.w3.org/2000/xmlns/",t={xml:I,xmlns:e};z=m(z);L=m(L);K=m(K);
var V=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Q=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,aa=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
Y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;F=m(F);A=m(A);var u=0;g.STATE={BEGIN:u++,BEGIN_WHITESPACE:u++,TEXT:u++,TEXT_ENTITY:u++,OPEN_WAKA:u++,SGML_DECL:u++,SGML_DECL_QUOTED:u++,DOCTYPE:u++,DOCTYPE_QUOTED:u++,DOCTYPE_DTD:u++,DOCTYPE_DTD_QUOTED:u++,COMMENT_STARTING:u++,COMMENT:u++,COMMENT_ENDING:u++,COMMENT_ENDED:u++,CDATA:u++,CDATA_ENDING:u++,CDATA_ENDING_2:u++,
PROC_INST:u++,PROC_INST_BODY:u++,PROC_INST_ENDING:u++,OPEN_TAG:u++,OPEN_TAG_SLASH:u++,ATTRIB:u++,ATTRIB_NAME:u++,ATTRIB_NAME_SAW_WHITE:u++,ATTRIB_VALUE:u++,ATTRIB_VALUE_QUOTED:u++,ATTRIB_VALUE_CLOSED:u++,ATTRIB_VALUE_UNQUOTED:u++,ATTRIB_VALUE_ENTITY_Q:u++,ATTRIB_VALUE_ENTITY_U:u++,CLOSE_TAG:u++,CLOSE_TAG_SAW_WHITE:u++,SCRIPT:u++,SCRIPT_ENDING:u++};g.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};g.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,
Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,
ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,
Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,
zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,
ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(g.ENTITIES).forEach(function(a){var b=g.ENTITIES[a];b="number"===
typeof b?String.fromCharCode(b):b;g.ENTITIES[a]=b});for(var X in g.STATE)g.STATE[g.STATE[X]]=X;u=g.STATE;String.fromCodePoint||function(){var a=String.fromCharCode,b=Math.floor,c=function(){var c=[],f=-1,e=arguments.length;if(!e)return"";for(var d="";++f<e;){var h=Number(arguments[f]);if(!isFinite(h)||0>h||1114111<h||b(h)!==h)throw RangeError("Invalid code point: "+h);if(65535>=h)c.push(h);else{h-=65536;var n=(h>>10)+55296;h=h%1024+56320;c.push(n,h)}if(f+1===e||16384<c.length)d+=a.apply(null,c),c.length=
0}return d};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:c,configurable:!0,writable:!0}):String.fromCodePoint=c}()})(m)}).call(this,d("buffer").Buffer)},{buffer:3,stream:29,string_decoder:30}],29:[function(d,r,m){function c(){g.call(this)}r.exports=c;var g=d("events").EventEmitter;d("inherits")(c,g);c.Readable=d("readable-stream/readable.js");c.Writable=d("readable-stream/writable.js");c.Duplex=d("readable-stream/duplex.js");c.Transform=d("readable-stream/transform.js");
c.PassThrough=d("readable-stream/passthrough.js");c.Stream=c;c.prototype.pipe=function(c,d){function l(b){c.writable&&!1===c.write(b)&&a.pause&&a.pause()}function p(){a.readable&&a.resume&&a.resume()}function b(){f||(f=!0,c.end())}function h(){f||(f=!0,"function"===typeof c.destroy&&c.destroy())}function D(a){q();if(0===g.listenerCount(this,"error"))throw a;}function q(){a.removeListener("data",l);c.removeListener("drain",p);a.removeListener("end",b);a.removeListener("close",h);a.removeListener("error",
D);c.removeListener("error",D);a.removeListener("end",q);a.removeListener("close",q);c.removeListener("close",q)}var a=this;a.on("data",l);c.on("drain",p);c._isStdio||d&&!1===d.end||(a.on("end",b),a.on("close",h));var f=!1;a.on("error",D);c.on("error",D);a.on("end",q);a.on("close",q);c.on("close",q);c.emit("pipe",a);return c}},{events:5,inherits:7,"readable-stream/duplex.js":12,"readable-stream/passthrough.js":23,"readable-stream/readable.js":24,"readable-stream/transform.js":25,"readable-stream/writable.js":26}],
30:[function(d,r,m){arguments[4][22][0].apply(m,arguments)},{dup:22,"safe-buffer":27}],31:[function(d,r,m){(function(c,g){function l(b,c){this._id=b;this._clearFn=c}var p=d("process/browser.js").nextTick,r=Function.prototype.apply,B=Array.prototype.slice,b={},h=0;m.setTimeout=function(){return new l(r.call(setTimeout,window,arguments),clearTimeout)};m.setInterval=function(){return new l(r.call(setInterval,window,arguments),clearInterval)};m.clearTimeout=m.clearInterval=function(b){b.close()};l.prototype.unref=
l.prototype.ref=function(){};l.prototype.close=function(){this._clearFn.call(window,this._id)};m.enroll=function(b,c){clearTimeout(b._idleTimeoutId);b._idleTimeout=c};m.unenroll=function(b){clearTimeout(b._idleTimeoutId);b._idleTimeout=-1};m._unrefActive=m.active=function(b){clearTimeout(b._idleTimeoutId);var c=b._idleTimeout;0<=c&&(b._idleTimeoutId=setTimeout(function(){b._onTimeout&&b._onTimeout()},c))};m.setImmediate="function"===typeof c?c:function(c){var d=h++,a=2>arguments.length?!1:B.call(arguments,
1);b[d]=!0;p(function(){b[d]&&(a?c.apply(null,a):c.call(null),m.clearImmediate(d))});return d};m.clearImmediate="function"===typeof g?g:function(c){delete b[c]}}).call(this,d("timers").setImmediate,d("timers").clearImmediate)},{"process/browser.js":11,timers:31}],32:[function(d,r,m){(function(c){function d(d){try{if(!c.localStorage)return!1}catch(p){return!1}d=c.localStorage[d];return null==d?!1:"true"===String(d).toLowerCase()}r.exports=function(c,g){if(d("noDeprecation"))return c;var l=!1;return function(){if(!l){if(d("throwDeprecation"))throw Error(g);
d("traceDeprecation")?console.trace(g):console.warn(g);l=!0}return c.apply(this,arguments)}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],33:[function(d,r,m){(function(c,d,l,p,m){function g(a,b){var c=a.styleAttrs&&a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===a.kind)!c&&b&&(a.styleAttrs||(a.styleAttrs={}),a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=b);else if(c&&delete a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],
a.contents)for(var f=0;f<a.contents.length;f++)g(a.contents[f],c||b)}function b(a){if("contents"in a){var c="styleAttrs"in a?a.styleAttrs[p.byName.ruby.qname]:null;c="span"===a.kind&&("container"===c||"textContainer"===c||"baseContainer"===c);for(var f=a.contents.length-1;0<=f;f--)!c||"styleAttrs"in a.contents[f]&&p.byName.ruby.qname in a.contents[f].styleAttrs?b(a.contents[f]):delete a.contents[f]}}function h(a,b,c,f){var e=f&&"seq"===f.timeContainer,d=0;f&&(d=e&&c?c.end:f.begin);b.begin=b.explicit_begin?
b.explicit_begin+d:d;c=b.begin;f=null;for(var n in b.sets)h(a,b.sets[n],f,b),c="seq"===b.timeContainer?b.sets[n].end:Math.max(c,b.sets[n].end),f=b.sets[n];if("contents"in b)for(var g in b.contents)h(a,b.contents[g],f,b),c="seq"===b.timeContainer?b.contents[g].end:Math.max(c,b.contents[g].end),f=b.contents[g];else c=e?b.begin:Number.POSITIVE_INFINITY;b.end=null!==b.explicit_end&&null!==b.explicit_dur?Math.min(b.begin+b.explicit_dur,d+b.explicit_end):null===b.explicit_end&&null!==b.explicit_dur?b.begin+
b.explicit_dur:null!==b.explicit_end&&null===b.explicit_dur?d+b.explicit_end:c;delete b.explicit_begin;delete b.explicit_dur;delete b.explicit_end;a._registerEvent(b)}function D(a){this.node=a}function q(){this.events=[];this.head=new a;this.body=null}function a(){this.styling=new f;this.layout=new C}function f(){this.styles={};this.initials={}}function v(){this.styleRefs=this.styleAttrs=this.id=null}function n(){this.styleAttrs=null}function C(){this.regions={}}function r(a,b){this.kind="image";
this.src=a;this.type=b}function y(a){this.id=a}function w(a){this.regionID=a}function M(a){this.styleAttrs=a}function E(a){this.sets=a}function N(a){this.contents=a}function G(a,b,c){this.explicit_begin=a;this.explicit_end=b;this.explicit_dur=c}function z(){this.kind="body"}function L(){this.kind="div"}function K(){this.kind="p"}function F(){this.kind="span"}function A(){this.kind="span"}function W(){this.kind="br"}function k(){}function I(){}function e(a){var b=null;a&&(a=a.attributes["xml:id"]||
a.attributes.id)&&(b=a.value||null);return b}function t(a){return a&&"style"in a.attributes?a.attributes.style.value.split(" "):[]}function V(a,b){var c={};if(null!==a)for(var f in a.attributes){var e=a.attributes[f].uri+" "+a.attributes[f].local,d=p.byQName[e];if(void 0!==d){var h=d.parse(a.attributes[f].value);null!==h?(c[e]=h,d===p.byName.zIndex&&U(b,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):J(b,"Cannot parse styling attribute "+e+" --\x3e "+a.attributes[f].value)}}return c}
function Q(a,b,c){for(var f in a.attributes)if(a.attributes[f].uri===b&&a.attributes[f].local===c)return a.attributes[f].value;return null}function aa(a,b){a=Q(a,l.ns_tts,"extent");if(null===a)return null;var c=a.split(" ");if(2!==c.length)return U(b,"Malformed extent (ignoring)"),null;a=m.parseLength(c[0]);c=m.parseLength(c[1]);return c&&a?{h:c,w:a}:(U(b,"Malformed extent values (ignoring)"),null)}function Y(a,b,c){var f=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,e=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,
d=/^(\d+(?:\.\d+)?)t$/,h=/^(\d+(?:\.\d+)?)ms$/,n=/^(\d+(?:\.\d+)?)s$/,g=/^(\d+(?:\.\d+)?)h$/,v=/^(\d+(?:\.\d+)?)m$/,k,l=null;null!==(k=/^(\d+(?:\.\d+)?)f$/.exec(c))?null!==b&&(l=parseFloat(k[1])/b):null!==(k=d.exec(c))?null!==a&&(l=parseFloat(k[1])/a):null!==(k=h.exec(c))?l=parseFloat(k[1])/1E3:null!==(k=n.exec(c))?l=parseFloat(k[1]):null!==(k=g.exec(c))?l=3600*parseFloat(k[1]):null!==(k=v.exec(c))?l=60*parseFloat(k[1]):null!==(k=f.exec(c))?l=3600*parseInt(k[1])+60*parseInt(k[2])+parseFloat(k[3]):
null!==(k=e.exec(c))&&null!==b&&(l=3600*parseInt(k[1])+60*parseInt(k[2])+parseInt(k[3])+(null===k[4]?0:parseInt(k[4])/b));return l}function u(a,b,c){for(;0<b.styleRefs.length;){var f=b.styleRefs.pop();f in a.styles?(u(a,a.styles[f],c),S(a.styles[f].styleAttrs,b.styleAttrs)):J(c,"Non-existant style id referenced")}}function X(a,b,c,f){for(var e=b.length-1;0<=e;e--){var d=b[e];d in a.styles?S(a.styles[d].styleAttrs,c):J(f,"Non-existant style id referenced")}}function S(a,b){for(var c in a)c in b||(b[c]=
a[c])}function U(a,b){if(a&&a.warn&&a.warn(b))throw b;}function J(a,b){if(a&&a.error&&a.error(b))throw b;}function P(a,b){a&&a.fatal&&a.fatal(b);throw b;}function ba(a,b){for(var c=0,f=a.length-1,e;c<=f;){e=Math.floor((c+f)/2);var d=a[e];if(d<b)c=e+1;else if(d>b)f=e-1;else return{found:!0,index:e}}return{found:!1,index:c}}c.fromXML=function(c,e,m){var t=d.parser(!0,{xmlns:!0}),x=[],E=[],O=[],Z=0,y=null;t.onclosetag=function(a){if(x[0]instanceof f)for(var b in x[0].styles)u(x[0],x[0].styles[b],e);
else if(x[0]instanceof K||x[0]instanceof F){if(1<x[0].contents.length){a=[x[0].contents[0]];for(b=1;b<x[0].contents.length;b++)x[0].contents[b]instanceof A&&a[a.length-1]instanceof A?a[a.length-1].text+=x[0].contents[b].text:a.push(x[0].contents[b]);x[0].contents=a}x[0]instanceof F&&1===x[0].contents.length&&x[0].contents[0]instanceof A&&(x[0].text=x[0].contents[0].text,delete x[0].contents)}else if(x[0]instanceof D)if(x[0].node.uri===l.ns_tt&&"metadata"===x[0].node.local)Z--;else if(0<Z&&m&&"onCloseTag"in
m)m.onCloseTag();O.shift();E.shift();x.shift()};t.ontext=function(a){if(void 0!==x[0])if(x[0]instanceof F||x[0]instanceof K){if(x[0]instanceof F){var b=x[0].styleAttrs[p.byName.ruby.qname];if("container"===b||"textContainer"===b||"baseContainer"===b)return}b=new A;b.initFromText(y,x[0],a,O[0],e);x[0].contents.push(b)}else if(x[0]instanceof D&&0<Z&&m&&"onText"in m)m.onText(a)};t.onopentag=function(b){function c(a){l.ttaf_map[a.uri]&&(a.uri=l.ttaf_map[a.uri])}var d=b.attributes["xml:space"];d?O.unshift(d.value):
0===O.length?O.unshift("default"):O.unshift(O[0]);(d=b.attributes["xml:lang"])?E.unshift(d.value):0===E.length?E.unshift(""):E.unshift(E[0]);c(b);if(b.attributes)for(var h in b.attributes)b.attributes.hasOwnProperty(h)&&c(b.attributes[h]);if(b.uri===l.ns_tt)if("tt"===b.local)null!==y&&P(e,"Two <tt> elements at ("+this.line+","+this.column+")"),y=new q,y.initFromNode(b,e),x.unshift(y);else if("head"===b.local)x[0]instanceof q||P(e,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+
")"),x.unshift(y.head);else if("styling"===b.local)x[0]instanceof a||P(e,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),x.unshift(y.head.styling);else if("style"===b.local)if(x[0]instanceof f){var g=new v;g.initFromNode(b,e);g.id?y.head.styling.styles[g.id]=g:J(e,"<style> element missing @id attribute");x.unshift(g)}else x[0]instanceof k?(g=new v,g.initFromNode(b,e),S(g.styleAttrs,x[0].styleAttrs),x.unshift(g)):P(e,"Parent of <style> element is not <styling> or <region> at ("+
this.line+","+this.column+")");else if("initial"===b.local)if(x[0]instanceof f){h=new n;h.initFromNode(b,e);for(g in h.styleAttrs)y.head.styling.initials[g]=h.styleAttrs[g];x.unshift(h)}else P(e,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===b.local)x[0]instanceof a||P(e,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),x.unshift(y.head.layout);else if("region"===b.local)x[0]instanceof C||P(e,"Parent of <region> element is not <layout> at "+
this.line+","+this.column+")"),g=new k,g.initFromNode(y,b,e),!g.id||g.id in y.head.layout.regions?J(e,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):y.head.layout.regions[g.id]=g,x.unshift(g);else if("body"===b.local)x[0]instanceof q||P(e,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==y.body&&P(e,"Second <body> element at "+this.line+","+this.column+")"),g=new z,g.initFromNode(y,b,e),y.body=g,x.unshift(g);else if("div"===b.local){x[0]instanceof
L||x[0]instanceof z||P(e,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");g=new L;g.initFromNode(y,x[0],b,e);if(h=g.styleAttrs[p.byName.backgroundImage.qname])g.contents.push(new r(h)),delete g.styleAttrs[p.byName.backgroundImage.qname];x[0].contents.push(g);x.unshift(g)}else"image"===b.local?(x[0]instanceof L||P(e,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),g=new r,g.initFromNode(y,x[0],b,e),x[0].contents.push(g),x.unshift(g)):"p"===
b.local?(x[0]instanceof L||P(e,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),g=new K,g.initFromNode(y,x[0],b,e),x[0].contents.push(g),x.unshift(g)):"span"===b.local?(x[0]instanceof F||x[0]instanceof K||P(e,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),g=new F,g.initFromNode(y,x[0],b,O[0],e),x[0].contents.push(g),x.unshift(g)):"br"===b.local?(x[0]instanceof F||x[0]instanceof K||P(e,"Parent of <br> element is not <span> or <p> at "+this.line+
","+this.column+")"),g=new W,g.initFromNode(y,x[0],b,e),x[0].contents.push(g),x.unshift(g)):"set"===b.local?(x[0]instanceof F||x[0]instanceof K||x[0]instanceof L||x[0]instanceof z||x[0]instanceof k||x[0]instanceof W||P(e,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),g=new I,g.initFromNode(y,x[0],b,e),x[0].sets.push(g),x.unshift(g)):x.unshift(new D(b));else x.unshift(new D(b));if(x[0]instanceof D)if(b.uri===l.ns_tt&&"metadata"===b.local)Z++;else if(0<
Z&&m&&"onOpenTag"in m){g=[];for(var t in b.attributes)g[b.attributes[t].uri+" "+b.attributes[t].local]={uri:b.attributes[t].uri,local:b.attributes[t].local,value:b.attributes[t].value};m.onOpenTag(b.uri,b.local,g)}};t.write(c).close();delete y.head.styling.styles;c=!1;for(var w in y.head.layout.regions){c=!0;break}c||(w=k.prototype.createDefaultRegion(y,e),y.head.layout.regions[w.id]=w);for(var R in y.head.layout.regions)h(y,y.head.layout.regions[R],null,null);y.body&&h(y,y.body,null,null);y.body&&
b(y.body);y.body&&g(y.body);return y};q.prototype.initFromNode=function(a,b){var c=Q(a,l.ns_ttp,"cellResolution"),f=15;var e=32;null!==c&&(c=/(\d+) (\d+)/.exec(c),null!==c?(e=parseInt(c[1]),f=parseInt(c[2])):U(b,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new m.ComputedLength(0,1/f),w:new m.ComputedLength(1/e,0)};f=Q(a,l.ns_ttp,"frameRate");c=30;null!==f&&(e=/(\d+)/.exec(f),null!==e?c=parseInt(e[1]):U(b,"Malformed frame rate attribute (using initial value instead)"));
e=Q(a,l.ns_ttp,"frameRateMultiplier");var d=1;null!==e&&(e=/(\d+) (\d+)/.exec(e),null!==e?d=parseInt(e[1])/parseInt(e[2]):U(b,"Malformed frame rate multiplier attribute (using initial value instead)"));c*=d;d=1;e=Q(a,l.ns_ttp,"tickRate");null===e?null!==f&&(d=c):(e=/(\d+)/.exec(e),null!==e?d=parseInt(e[1]):U(b,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=c;this.tickRate=d;e=Q(a,l.ns_ittp,"aspectRatio");null===e&&(e=Q(a,l.ns_ttp,"displayAspectRatio"));f=null;
null!==e&&(c=/(\d+)\s+(\d+)/.exec(e),null!==c?(e=parseInt(c[1]),c=parseInt(c[2]),0!==e&&0!==c?f=e/c:J(b,"Illegal aspectRatio values (ignoring)")):J(b,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=f;f=Q(a,l.ns_ttp,"timeBase");null!==f&&"media"!==f&&P(b,"Unsupported time base");a=aa(a,b);null===a?this.pxLength={h:null,w:null}:("px"===a.h.unit&&"px"===a.w.unit||P(b,"Extent on TT must be in px or absent"),this.pxLength={h:new m.ComputedLength(0,1/a.h.value),w:new m.ComputedLength(1/
a.w.value,0)});this.dimensions={h:new m.ComputedLength(0,1),w:new m.ComputedLength(1,0)}};q.prototype._registerEvent=function(a){if(!(a.end<=a.begin)){var b=ba(this.events,a.begin);b.found||this.events.splice(b.index,0,a.begin);a.end!==Number.POSITIVE_INFINITY&&(b=ba(this.events,a.end),b.found||this.events.splice(b.index,0,a.end))}};q.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]};q.prototype.getMediaTimeEvents=function(){return this.events};v.prototype.initFromNode=
function(a,b){this.id=e(a);this.styleAttrs=V(a,b);this.styleRefs=t(a)};n.prototype.initFromNode=function(a,b){this.styleAttrs={};for(var c in a.attributes)if(a.attributes[c].uri===l.ns_itts||a.attributes[c].uri===l.ns_ebutts||a.attributes[c].uri===l.ns_tts)this.styleAttrs[a.attributes[c].uri+" "+a.attributes[c].local]=a.attributes[c].value};r.prototype.initFromNode=function(a,b,c,f){(this.src="src"in c.attributes?c.attributes.src.value:null)||J(f,"Invalid image@src attribute");(this.type="type"in
c.attributes?c.attributes.type.value:null)||J(f,"Invalid image@type attribute");M.prototype.initFromNode.call(this,a,b,c,f);G.prototype.initFromNode.call(this,a,b,c,f);E.prototype.initFromNode.call(this,a,b,c,f);w.prototype.initFromNode.call(this,a,b,c,f)};y.prototype.initFromNode=function(a,b,c,f){this.id=e(c)};w.prototype.initFromNode=function(a,b,c,f){this.regionID=c&&"region"in c.attributes?c.attributes.region.value:""};M.prototype.initFromNode=function(a,b,c,f){this.styleAttrs=V(c,f);null!==
a.head&&null!==a.head.styling&&X(a.head.styling,t(c),this.styleAttrs,f)};E.prototype.initFromNode=function(a,b,c,f){this.sets=[]};N.prototype.initFromNode=function(a,b,c,f){this.contents=[]};G.prototype.initFromNode=function(a,b,c,f){b=null;c&&"begin"in c.attributes&&(b=Y(a.tickRate,a.effectiveFrameRate,c.attributes.begin.value),null===b&&U(f,"Malformed begin value "+c.attributes.begin.value+" (using 0)"));var e=null;c&&"dur"in c.attributes&&(e=Y(a.tickRate,a.effectiveFrameRate,c.attributes.dur.value),
null===e&&U(f,"Malformed dur value "+c.attributes.dur.value+" (ignoring)"));var d=null;c&&"end"in c.attributes&&(d=Y(a.tickRate,a.effectiveFrameRate,c.attributes.end.value),null===d&&U(f,"Malformed end value (ignoring)"));this.explicit_begin=b;this.explicit_end=d;this.explicit_dur=e;(a=c&&"timeContainer"in c.attributes?c.attributes.timeContainer.value:null)&&"par"!==a?"seq"===a?f="seq":(J(f,"Illegal value of timeContainer (assuming 'par')"),f="par"):f="par";this.timeContainer=f};z.prototype.initFromNode=
function(a,b,c){M.prototype.initFromNode.call(this,a,null,b,c);G.prototype.initFromNode.call(this,a,null,b,c);E.prototype.initFromNode.call(this,a,null,b,c);w.prototype.initFromNode.call(this,a,null,b,c);N.prototype.initFromNode.call(this,a,null,b,c)};L.prototype.initFromNode=function(a,b,c,f){M.prototype.initFromNode.call(this,a,b,c,f);G.prototype.initFromNode.call(this,a,b,c,f);E.prototype.initFromNode.call(this,a,b,c,f);w.prototype.initFromNode.call(this,a,b,c,f);N.prototype.initFromNode.call(this,
a,b,c,f)};K.prototype.initFromNode=function(a,b,c,f){M.prototype.initFromNode.call(this,a,b,c,f);G.prototype.initFromNode.call(this,a,b,c,f);E.prototype.initFromNode.call(this,a,b,c,f);w.prototype.initFromNode.call(this,a,b,c,f);N.prototype.initFromNode.call(this,a,b,c,f)};F.prototype.initFromNode=function(a,b,c,f,e){M.prototype.initFromNode.call(this,a,b,c,e);G.prototype.initFromNode.call(this,a,b,c,e);E.prototype.initFromNode.call(this,a,b,c,e);w.prototype.initFromNode.call(this,a,b,c,e);N.prototype.initFromNode.call(this,
a,b,c,e);this.space=f};A.prototype.initFromText=function(a,b,c,f,e){G.prototype.initFromNode.call(this,a,b,null,e);this.text=c;this.space=f};W.prototype.initFromNode=function(a,b,c,f){w.prototype.initFromNode.call(this,a,b,c,f);G.prototype.initFromNode.call(this,a,b,c,f)};k.prototype.createDefaultRegion=function(a,b){var c=new k;c.id="";M.prototype.initFromNode.call(c,a,null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",value:"after",prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},
"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},"tts:overflow":{name:"tts:overflow",value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",ebutts:"urn:ebu:tt:style",ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",
itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",local:"region",uri:"http://www.w3.org/ns/ttml",isSelfClosing:!0},b);c.sets=[];G.call(c,0,Number.POSITIVE_INFINITY,null);return c};k.prototype.initFromNode=function(a,b,c){y.prototype.initFromNode.call(this,a,null,b,c);M.prototype.initFromNode.call(this,a,null,b,c);G.prototype.initFromNode.call(this,
a,null,b,c);E.prototype.initFromNode.call(this,a,null,b,c);null!==a.head&&null!==a.head.styling&&X(a.head.styling,t(b),this.styleAttrs,c)};I.prototype.initFromNode=function(a,b,c,f){G.prototype.initFromNode.call(this,a,b,c,f);a=V(c,f);this.value=this.qname=null;for(var e in a){if(this.qname){J(f,"More than one style specified on set");break}this.qname=e;this.value=a[e]}}})("undefined"===typeof m?this.imscDoc={}:m,"undefined"===typeof sax?d("sax"):sax,"undefined"===typeof imscNames?d("./names"):imscNames,
"undefined"===typeof imscStyles?d("./styles"):imscStyles,"undefined"===typeof imscUtils?d("./utils"):imscUtils)},{"./names":37,"./styles":38,"./utils":39,sax:28}],34:[function(d,r,m){(function(c,d,l){function g(a,c,d){if("region"===d.kind){var f=document.createElement("div");f.style.position="absolute"}else if("body"===d.kind)f=document.createElement("div");else if("div"===d.kind)f=document.createElement("div");else if("image"===d.kind){if(f=document.createElement("img"),null!==a.imgResolver&&null!==
d.src){var h=a.imgResolver(d.src,f);h&&(f.src=h);f.height=a.regionH;f.width=a.regionW}}else if("p"===d.kind)f=document.createElement("p");else if("span"===d.kind){if("container"===d.styleAttrs[l.byName.ruby.qname])f=document.createElement("ruby"),a.ruby=!0;else if("base"===d.styleAttrs[l.byName.ruby.qname])f=document.createElement("rb");else if("text"===d.styleAttrs[l.byName.ruby.qname])f=document.createElement("rt");else if("baseContainer"===d.styleAttrs[l.byName.ruby.qname])f=document.createElement("rbc");
else if("textContainer"===d.styleAttrs[l.byName.ruby.qname])f=document.createElement("rtc");else{if("delimiter"===d.styleAttrs[l.byName.ruby.qname])return;f=document.createElement("span")}(h=d.styleAttrs[l.byName.textEmphasis.qname])&&"none"!==h.style&&(a.textEmphasis=!0)}else"br"===d.kind&&(f=document.createElement("br"));if(f){c.appendChild(f);f.style.margin="0";for(var q in D)c=D[q],h=d.styleAttrs[c.qname],void 0!==h&&null!==c.map&&c.map(a,f,d,h);q=f;if("region"===d.kind)if(c=d.styleAttrs[l.byName.writingMode.qname],
"lrtb"===c||"lr"===c)a.ipd="lr",a.bpd="tb";else if("rltb"===c||"rl"===c)a.ipd="rl",a.bpd="tb";else if("tblr"===c)a.ipd="tb",a.bpd="lr";else if("tbrl"===c||"tb"===c)a.ipd="tb",a.bpd="rl";(c=d.styleAttrs[l.byName.linePadding.qname])&&!c.isZero()&&(h=c.toUsedLength(a.w,a.h),0<h&&(h=Math.ceil(h)+"px","tb"===a.bpd?(q.style.paddingLeft=h,q.style.paddingRight=h):(q.style.paddingTop=h,q.style.paddingBottom=h),a.lp=c));(c=d.styleAttrs[l.byName.multiRowAlign.qname])&&"auto"!==c&&(q=document.createElement("span"),
q.style.display="inline-block",q.style.textAlign=c,f.appendChild(q),a.mra=c);(c=d.styleAttrs[l.byName.rubyReserve.qname])&&"none"!==c[0]&&(a.rubyReserve=c);d.styleAttrs[l.byName.fillLineGap.qname]&&(a.flg=!0);if("span"===d.kind&&d.text)if(l.byName.textCombine.qname in d.styleAttrs&&"all"===d.styleAttrs[l.byName.textCombine.qname][0])f.textContent=d.text;else for(c="",h=0;h<d.text.length;h++){c+=d.text.charAt(h);var v=d.text.charCodeAt(h);if(55296>v||56319<v||h===d.text.length)v=document.createElement("span"),
v.textContent=c,f.appendChild(v),c=""}for(var p in d.contents)g(a,q,d.contents[p]);p=[];if((a.lp||a.mra||a.flg||a.ruby||a.textEmphasis||a.rubyReserve)&&"p"===d.kind){b(a,q,p,null);if(a.rubyReserve){for(c=0;c<p.length;c++){h=document.createElement("ruby");v=document.createElement("rb");v.textContent="\u200b";h.appendChild(v);var w=a.rubyReserve[1].toUsedLength(a.w,a.h)+"px";if("both"===a.rubyReserve[0]){v=document.createElement("rtc");v.style.rubyPosition="under";v.textContent="\u200b";v.style.fontSize=
w;var E=document.createElement("rtc");E.style.rubyPosition="over";E.textContent="\u200b";E.style.fontSize=w;h.appendChild(v);h.appendChild(E)}else v=document.createElement("rtc"),v.textContent="\u200b",v.style.fontSize=w,v.style.rubyPosition="after"===a.rubyReserve[0]||"outside"===a.rubyReserve[0]&&0<c?"tb"===a.bpd||"rl"===a.bpd?"under":"over":"tb"===a.bpd||"rl"===a.bpd?"over":"under",h.appendChild(v);p[c].elements[0].node.parentElement.insertBefore(h,p[c].elements[0].node)}a.rubyReserve=null}if(a.ruby||
a.rubyReserve){for(c=0;c<p.length;c++)for(h=0;h<p[c].rbc.length;h++)p[c].rbc[h].style.rubyPosition||(p[c].rbc[h].style.rubyPosition="tb"===a.bpd?0===c?"over":"under":"rl"===a.bpd?0===c?"over":"under":0===c?"under":"over");a.ruby=null}if(a.textEmphasis){for(c=0;c<p.length;c++)for(h=0;h<p[c].te.length;h++)p[c].te[h].style.textEmphasisPosition&&"none"!==p[c].te[h].style.textEmphasisPosition||(p[c].te[h].style.textEmphasisPosition="tb"===a.bpd?0===c?"left over":"left under":"rl"===a.bpd?0===c?"right under":
"left under":0===c?"left under":"right under");a.textEmphasis=null}if(a.mra){for(c=0;c<p.length-1;c++)v=p[c].elements.length,0!==v&&!1===p[c].br&&(h=document.createElement("br"),v=p[c].elements[v-1].node,v.parentElement.insertBefore(h,v.nextSibling));a.mra=null}if(a.lp){c=a.lp.toUsedLength(a.w,a.h);for(var B in p)h=p[B].elements[p[B].start_elem],v=p[B].elements[p[B].end_elem],E=Math.ceil(c)+"px",w="-"+Math.ceil(c)+"px",0!==p[B].elements.length&&("lr"===a.ipd?(h.node.style.borderLeftColor=h.bgcolor||
"#00000000",h.node.style.borderLeftStyle="solid",h.node.style.borderLeftWidth=E,h.node.style.marginLeft=w):"rl"===a.ipd?(h.node.style.borderRightColor=h.bgcolor||"#00000000",h.node.style.borderRightStyle="solid",h.node.style.borderRightWidth=E,h.node.style.marginRight=w):"tb"===a.ipd&&(h.node.style.borderTopColor=h.bgcolor||"#00000000",h.node.style.borderTopStyle="solid",h.node.style.borderTopWidth=E,h.node.style.marginTop=w),"lr"===a.ipd?(v.node.style.borderRightColor=v.bgcolor||"#00000000",v.node.style.borderRightStyle=
"solid",v.node.style.borderRightWidth=E,v.node.style.marginRight=w):"rl"===a.ipd?(v.node.style.borderLeftColor=v.bgcolor||"#00000000",v.node.style.borderLeftStyle="solid",v.node.style.borderLeftWidth=E,v.node.style.marginLeft=w):"tb"===a.ipd&&(v.node.style.borderBottomColor=v.bgcolor||"#00000000",v.node.style.borderBottomStyle="solid",v.node.style.borderBottomWidth=E,v.node.style.marginBottom=w));a.lp=null}if(a.flg){c=r(q.getBoundingClientRect(),a);B=c.before;c=c.after;h=Math.sign(c-B);for(v=0;v<=
p.length;v++){E=0===v?B:v===p.length?c:(p[v].before+p[v-1].after)/2;if(0<v)for(var G=0;G<p[v-1].elements.length;G++)if(null!==p[v-1].elements[G].bgcolor){var z=p[v-1].elements[G];0>h*(z.after-E)&&(w=Math.ceil(Math.abs(E-z.after))+"px",z.node.style.backgroundColor=z.bgcolor,"lr"===a.bpd?z.node.style.paddingRight=w:"rl"===a.bpd?z.node.style.paddingLeft=w:"tb"===a.bpd&&(z.node.style.paddingBottom=w))}if(v<p.length)for(G=0;G<p[v].elements.length;G++)z=p[v].elements[G],null!==z.bgcolor&&0<h*(z.before-
E)&&(w=Math.ceil(Math.abs(z.before-E))+"px",z.node.style.backgroundColor=z.bgcolor,"lr"===a.bpd?z.node.style.paddingLeft=w:"rl"===a.bpd?z.node.style.paddingRight=w:"tb"===a.bpd&&(z.node.style.paddingTop=w))}a.flg=null}}"region"===d.kind&&(b(a,q,p),"tb"===a.bpd&&a.enableRollUp&&0<d.contents.length&&"after"===d.styleAttrs[l.byName.displayAlign.qname]&&(d=new m(""===d.id?"_":d.id,p),a.currentISDState[d.id]=d,a.previousISDState&&d.id in a.previousISDState&&0<a.previousISDState[d.id].plist.length&&1<d.plist.length&&
d.plist[d.plist.length-2].text===a.previousISDState[d.id].plist[a.previousISDState[d.id].plist.length-1].text&&(a=f.firstElementChild,d=d.plist[d.plist.length-1].after-d.plist[d.plist.length-1].before,a.style.bottom="-"+d+"px",a.style.transition="transform 0.4s",a.style.position="relative",a.style.transform="translateY(-"+d+"px)")))}else if(a=a.errorHandler,d="Error processing ISD element kind: "+d.kind,a&&a.error&&a.error(d))throw d;}function m(a,b){this.id=a;this.plist=b}function r(a,b){var c={before:null,
after:null,start:null,end:null};"tb"===b.bpd?(c.before=a.top,c.after=a.bottom,"lr"===b.ipd?(c.start=a.left,c.end=a.right):(c.start=a.right,c.end=a.left)):"lr"===b.bpd?(c.before=a.left,c.after=a.right,c.start=a.top,c.end=a.bottom):"rl"===b.bpd&&(c.before=a.right,c.after=a.left,c.start=a.top,c.end=a.bottom);return c}function b(a,c,d,h){if("rt"!==c.localName&&"rtc"!==c.localName)if(h=c.style.backgroundColor||h,0===c.childElementCount)if("span"===c.localName||"rb"===c.localName){var f=c.getBoundingClientRect();
if(0!==f.height&&0!==f.width){a=r(f,a);if(!(f=0===d.length)){f=a.before;var g=a.after,n=d[d.length-1].before,l=d[d.length-1].after;f=!(g<l&&f>n||l<=g&&n>=f)}f?d.push({before:a.before,after:a.after,start:a.start,end:a.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(f=Math.sign(a.after-a.before),g=Math.sign(a.end-a.start),0>f*(a.before-d[d.length-1].before)&&(d[d.length-1].before=a.before),0<f*(a.after-d[d.length-1].after)&&(d[d.length-1].after=a.after),0>g*(a.start-d[d.length-
1].start)&&(d[d.length-1].start=a.start,d[d.length-1].start_elem=d[d.length-1].elements.length),0<g*(a.end-d[d.length-1].end)&&(d[d.length-1].end=a.end,d[d.length-1].end_elem=d[d.length-1].elements.length));d[d.length-1].text+=c.textContent;d[d.length-1].elements.push({node:c,bgcolor:h,before:a.before,after:a.after})}}else"br"===c.localName&&0!==d.length&&(d[d.length-1].br=!0);else for(c=c.firstChild;c;)c.nodeType===Node.ELEMENT_NODE&&(b(a,c,d,h),"ruby"===c.localName||"rtc"===c.localName?0<d.length&&
d[d.length-1].rbc.push(c):"span"===c.localName&&c.style.textEmphasisStyle&&"none"!==c.style.textEmphasisStyle&&0<d.length&&d[d.length-1].te.push(c)),c=c.nextSibling}function h(a,b){this.qname=a;this.map=b}c.render=function(a,b,c,d,h,l,q,p,m){d=d||b.clientHeight;h=h||b.clientWidth;if(null!==a.aspectRatio){var f=d*a.aspectRatio;f>h?d=Math.round(h/a.aspectRatio):h=f}f=document.createElement("div");f.style.position="relative";f.style.width=h+"px";f.style.height=d+"px";f.style.margin="auto";f.style.top=
0;f.style.bottom=0;f.style.left=0;f.style.right=0;f.style.zIndex=0;c={h:d,w:h,regionH:null,regionW:null,imgResolver:c,displayForcedOnlyMode:l||!1,isd:a,errorHandler:q,previousISDState:p,enableRollUp:m||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};b.appendChild(f);for(var n in a.contents)g(c,f,a.contents[n]);return c.currentISDState};var D=[new h("http://www.w3.org/ns/ttml#styling backgroundColor",function(a,b,c,d){0!==d[3]&&(b.style.backgroundColor=
"rgba("+d[0].toString()+","+d[1].toString()+","+d[2].toString()+","+(d[3]/255).toString()+")")}),new h("http://www.w3.org/ns/ttml#styling color",function(a,b,c,d){b.style.color="rgba("+d[0].toString()+","+d[1].toString()+","+d[2].toString()+","+(d[3]/255).toString()+")"}),new h("http://www.w3.org/ns/ttml#styling direction",function(a,b,c,d){b.style.direction=d}),new h("http://www.w3.org/ns/ttml#styling display",function(a,b,c,d){}),new h("http://www.w3.org/ns/ttml#styling displayAlign",function(a,
b,c,d){b.style.display="flex";b.style.flexDirection="column";"before"===d?b.style.justifyContent="flex-start":"center"===d?b.style.justifyContent="center":"after"===d&&(b.style.justifyContent="flex-end")}),new h("http://www.w3.org/ns/ttml#styling extent",function(a,b,c,d){a.regionH=d.h.toUsedLength(a.w,a.h);a.regionW=d.w.toUsedLength(a.w,a.h);var f=d=0;if(c=c.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])d=c[0].toUsedLength(a.w,a.h)+c[2].toUsedLength(a.w,a.h),f=c[1].toUsedLength(a.w,a.h)+
c[3].toUsedLength(a.w,a.h);b.style.height=a.regionH-d+"px";b.style.width=a.regionW-f+"px"}),new h("http://www.w3.org/ns/ttml#styling fontFamily",function(a,b,c,d){a=[];for(var f in d)d[f]=d[f].trim(),"monospaceSerif"===d[f]?(a.push("Courier New"),a.push('"Liberation Mono"'),a.push("Courier"),a.push("monospace")):"proportionalSansSerif"===d[f]||"default"===d[f]?(a.push("Arial"),a.push("Helvetica"),a.push('"Liberation Sans"'),a.push("sans-serif")):"monospace"===d[f]?a.push("monospace"):"sansSerif"===
d[f]?a.push("sans-serif"):"serif"===d[f]?a.push("serif"):"monospaceSansSerif"===d[f]?(a.push("Consolas"),a.push("monospace")):"proportionalSerif"===d[f]?a.push("serif"):a.push(d[f]);b.style.fontFamily=a.join(",")}),new h("http://www.w3.org/ns/ttml#styling shear",function(a,b,c,d){0!==d&&(c=-.9*d,b.style.transform="tb"===a.bpd?"skewX("+c+"deg)":"skewY("+c+"deg)")}),new h("http://www.w3.org/ns/ttml#styling fontSize",function(a,b,c,d){b.style.fontSize=d.toUsedLength(a.w,a.h)+"px"}),new h("http://www.w3.org/ns/ttml#styling fontStyle",
function(a,b,c,d){b.style.fontStyle=d}),new h("http://www.w3.org/ns/ttml#styling fontWeight",function(a,b,c,d){b.style.fontWeight=d}),new h("http://www.w3.org/ns/ttml#styling lineHeight",function(a,b,c,d){b.style.lineHeight="normal"===d?"normal":d.toUsedLength(a.w,a.h)+"px"}),new h("http://www.w3.org/ns/ttml#styling opacity",function(a,b,c,d){b.style.opacity=d}),new h("http://www.w3.org/ns/ttml#styling origin",function(a,b,c,d){b.style.top=d.h.toUsedLength(a.w,a.h)+"px";b.style.left=d.w.toUsedLength(a.w,
a.h)+"px"}),new h("http://www.w3.org/ns/ttml#styling overflow",function(a,b,c,d){b.style.overflow=d}),new h("http://www.w3.org/ns/ttml#styling padding",function(a,b,c,d){c=[];c[0]=d[0].toUsedLength(a.w,a.h)+"px";c[1]=d[3].toUsedLength(a.w,a.h)+"px";c[2]=d[2].toUsedLength(a.w,a.h)+"px";c[3]=d[1].toUsedLength(a.w,a.h)+"px";b.style.padding=c.join(" ")}),new h("http://www.w3.org/ns/ttml#styling position",function(a,b,c,d){b.style.top=d.h.toUsedLength(a.w,a.h)+"px";b.style.left=d.w.toUsedLength(a.w,a.h)+
"px"}),new h("http://www.w3.org/ns/ttml#styling rubyAlign",function(a,b,c,d){b.style.rubyAlign=d}),new h("http://www.w3.org/ns/ttml#styling rubyPosition",function(a,b,c,d){if("before"===d||"after"===d)b.parentElement.style.rubyPosition="tb"===a.bpd?"before"===d?"over":"under":"rl"===a.bpd?"before"===d?"over":"under":"before"===d?"under":"over"}),new h("http://www.w3.org/ns/ttml#styling showBackground",null),new h("http://www.w3.org/ns/ttml#styling textAlign",function(a,b,c,d){a=c.styleAttrs[l.byName.direction.qname];
b.style.textAlign="start"===d?"rtl"===a?"right":"left":"end"===d?"rtl"===a?"left":"right":d}),new h("http://www.w3.org/ns/ttml#styling textDecoration",function(a,b,c,d){b.style.textDecoration=d.join(" ").replace("lineThrough","line-through")}),new h("http://www.w3.org/ns/ttml#styling textOutline",function(a,b,c,d){}),new h("http://www.w3.org/ns/ttml#styling textShadow",function(a,b,c,d){c=c.styleAttrs[l.byName.textOutline.qname];if("none"===d&&"none"===c)b.style.textShadow="";else{var f=[];"none"!==
c&&f.push("rgba("+c.color[0].toString()+","+c.color[1].toString()+","+c.color[2].toString()+","+(c.color[3]/255).toString()+") 0px 0px "+c.thickness.toUsedLength(a.w,a.h)+"px");if("none"!==d)for(var h in d)f.push(d[h].x_off.toUsedLength(a.w,a.h)+"px "+d[h].y_off.toUsedLength(a.w,a.h)+"px "+d[h].b_radius.toUsedLength(a.w,a.h)+"px rgba("+d[h].color[0].toString()+","+d[h].color[1].toString()+","+d[h].color[2].toString()+","+(d[h].color[3]/255).toString()+")");b.style.textShadow=f.join(",")}}),new h("http://www.w3.org/ns/ttml#styling textCombine",
function(a,b,c,d){b.style.textCombineUpright=d.join(" ")}),new h("http://www.w3.org/ns/ttml#styling textEmphasis",function(a,b,c,d){if("none"===d.style)b.style.textEmphasisStyle="none";else if(b.style.textEmphasisStyle="auto"===d.style?"filled":d.style+" "+d.symbol,"before"===d.position||"after"===d.position)b.style.textEmphasisPosition="tb"===a.bpd?"before"===d.position?"left over":"left under":"rl"===a.bpd?"before"===d.position?"right under":"left under":"before"===d.position?"left under":"right under"}),
new h("http://www.w3.org/ns/ttml#styling unicodeBidi",function(a,b,c,d){b.style.unicodeBidi="bidiOverride"===d?"bidi-override":d}),new h("http://www.w3.org/ns/ttml#styling visibility",function(a,b,c,d){b.style.visibility=d}),new h("http://www.w3.org/ns/ttml#styling wrapOption",function(a,b,c,d){b.style.whiteSpace="wrap"===d?"preserve"===c.space?"pre-wrap":"normal":"preserve"===c.space?"pre":"noWrap"}),new h("http://www.w3.org/ns/ttml#styling writingMode",function(a,b,c,d){if("lrtb"===d||"lr"===d)a.writingMode=
"horizontal-tb";else if("rltb"===d||"rl"===d)a.writingMode="horizontal-tb";else if("tblr"===d)a.writingMode="vertical-lr";else if("tbrl"===d||"tb"===d)a.writingMode="vertical-rl";b.style.writingMode=a.writingMode}),new h("http://www.w3.org/ns/ttml#styling zIndex",function(a,b,c,d){b.style.zIndex=d}),new h("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(a,b,c,d){a.displayForcedOnlyMode&&!1===d&&(b.style.visibility="hidden")})],q;for(q in D);})("undefined"===typeof m?this.imscHTML=
{}:m,"undefined"===typeof imscNames?d("./names"):imscNames,"undefined"===typeof imscStyles?d("./styles"):imscStyles,"undefined"===typeof imscUtils?d("./utils"):imscUtils)},{"./names":37,"./styles":38,"./utils":39}],35:[function(d,r,m){(function(c,d,l,p){function g(a,c,d,h,r,w,y,B,M){if(c<y.begin||c>=y.end)return null;w="regionID"in y&&""!==y.regionID?y.regionID:w;if(null!==r&&w!==d.id&&(!("contents"in y)||"contents"in y&&0===y.contents.length||""!==w))return null;var f=new D(y);for(n in y.sets)c<
y.sets[n].begin||c>=y.sets[n].end||(f.styleAttrs[y.sets[n].qname]=y.sets[n].value);var n={};for(var v in f.styleAttrs)if(n[v]=!0,v===l.byName.writingMode.qname&&!(l.byName.direction.qname in f.styleAttrs)){var z=f.styleAttrs[v];if("lrtb"===z||"lr"===z)f.styleAttrs[l.byName.direction.qname]="ltr";else if("rltb"===z||"rl"===z)f.styleAttrs[l.byName.direction.qname]="rtl"}if(null!==r)for(var C in l.all)if(v=l.all[C],v.qname===l.byName.textDecoration.qname){z=r.styleAttrs[v.qname];var K=f.styleAttrs[v.qname],
F=[];void 0===K?F=z:-1===K.indexOf("none")?((-1===K.indexOf("noUnderline")&&-1!==z.indexOf("underline")||-1!==K.indexOf("underline"))&&F.push("underline"),(-1===K.indexOf("noLineThrough")&&-1!==z.indexOf("lineThrough")||-1!==K.indexOf("lineThrough"))&&F.push("lineThrough"),(-1===K.indexOf("noOverline")&&-1!==z.indexOf("overline")||-1!==K.indexOf("overline"))&&F.push("overline")):F.push("none");f.styleAttrs[v.qname]=F}else v.qname!==l.byName.fontSize.qname||v.qname in f.styleAttrs||"span"!==f.kind||
"textContainer"!==f.styleAttrs[l.byName.ruby.qname]?v.qname!==l.byName.fontSize.qname||v.qname in f.styleAttrs||"span"!==f.kind||"text"!==f.styleAttrs[l.byName.ruby.qname]?v.inherit&&v.qname in r.styleAttrs&&!(v.qname in f.styleAttrs)&&(f.styleAttrs[v.qname]=r.styleAttrs[v.qname]):(z=r.styleAttrs[l.byName.fontSize.qname],f.styleAttrs[v.qname]="textContainer"===r.styleAttrs[l.byName.ruby.qname]?z:new p.ComputedLength(.5*z.rw,.5*z.rh)):(z=r.styleAttrs[l.byName.fontSize.qname],f.styleAttrs[v.qname]=
new p.ComputedLength(.5*z.rw,.5*z.rh));for(var A in l.all)(C=l.all[A],C.qname in f.styleAttrs||C.qname===l.byName.position.qname&&l.byName.origin.qname in f.styleAttrs||C.qname===l.byName.origin.qname&&l.byName.position.qname in f.styleAttrs||(v=a.head.styling.initials[C.qname]||C.initial,"region"!==f.kind&&(!1!==C.inherit||null===v)))||(f.styleAttrs[C.qname]=C.parse(v),n[C.qname]=!0);for(var H in l.all)if(A=l.all[H],A.qname in n&&null!==A.compute)if(C=A.compute(a,r,f,f.styleAttrs[A.qname],M),null!==
C)f.styleAttrs[A.qname]=C;else if(f.styleAttrs[A.qname]=A.compute(a,r,f,A.parse(A.initial),M),A="Style '"+A.qname+"' on element '"+f.kind+"' cannot be computed",B&&B.error&&B.error(A))throw A;if("none"===f.styleAttrs[l.byName.display.qname])return null;if(null===r)var k=null===h?[]:[h];else"contents"in y&&(k=y.contents);for(var I in k)r=g(a,c,d,h,f,w,k[I],B,M),null!==r&&f.contents.push(r.element);for(var e in f.styleAttrs)a=!1,"span"===f.kind&&(c=f.styleAttrs[l.byName.ruby.qname],(a=("container"===
c||"textContainer"===c||"baseContainer"===c)&&-1!==q.indexOf(e))||(a="container"!==c&&e===l.byName.rubyAlign.qname),a||(a=!("textContainer"===c||"text"===c)&&e===l.byName.rubyPosition.qname)),a||(a=-1===l.byQName[e].applies.indexOf(f.kind)),a&&delete f.styleAttrs[e];"span"===f.kind&&f.text&&"default"===f.space&&(e=f.text.replace(/[\t\r\n ]+/g," "),f.text=e);if("p"===f.kind){e=[];m(f,e);a=0;c="after_br";for(d=0;;)if("after_br"===c)a>=e.length||"br"===e[a].kind?(c="before_br",d=a,a--):("preserve"!==
e[a].space&&(e[a].text=e[a].text.replace(/^[\t\r\n ]+/g,"")),0<e[a].text.length?(c="looking_br",a++):e.splice(a,1));else if("before_br"===c)if(0>a||"br"===e[a].kind){if(c="after_br",a=d+1,a>=e.length)break}else if("preserve"!==e[a].space&&(e[a].text=e[a].text.replace(/[\t\r\n ]+$/g,"")),0<e[a].text.length){if(c="after_br",a=d+1,a>=e.length)break}else e.splice(a,1),a--;else a>=e.length||"br"===e[a].kind?(c="before_br",d=a,a--):a++;b(f)}return"div"===f.kind&&l.byName.backgroundImage.qname in f.styleAttrs||
"br"===f.kind||"image"===f.kind||"contents"in f&&0<f.contents.length||"span"===f.kind&&null!==f.text||"region"===f.kind&&"always"===f.styleAttrs[l.byName.showBackground.qname]?{region_id:w,element:f}:null}function m(a,b){if("contents"in a)for(var c in a.contents)m(a.contents[c],b);else"span"!==a.kind&&"br"!==a.kind||b.push(a)}function b(a){if("br"===a.kind)return!1;if("text"in a)return 0===a.text.length;if("contents"in a){for(var c=a.contents.length;c--;)b(a.contents[c])&&a.contents.splice(c,1);return 0===
a.contents.length}}function h(a){this.contents=[];this.aspectRatio=a.aspectRatio}function D(a){this.kind=a.kind||"region";a.id&&(this.id=a.id);this.styleAttrs={};for(var b in a.styleAttrs)this.styleAttrs[b]=a.styleAttrs[b];"src"in a&&(this.src=a.src);"type"in a&&(this.type=a.type);if("text"in a)this.text=a.text;else if("region"===this.kind||"contents"in a)this.contents=[];"space"in a&&(this.space=a.space)}c.generateISD=function(a,b,c){function d(a,b){function c(b){return!(a<b.begin||a>=b.end)}if(b.contents){var f=
{},h;for(h in b)f[h]=b[h];f.contents=[];b.contents.filter(c).forEach(function(b){b=d(a,b);null!==b&&f.contents.push(b)});return f}return b}var f=new h(a),l={},q={};q=d(b,a.body);for(var p in a.head.layout.regions){var m=g(a,b,a.head.layout.regions[p],q,null,"",a.head.layout.regions[p],c,l);null!==m&&f.contents.push(m.element)}return f};var q=[l.byName.color.qname,l.byName.textCombine.qname,l.byName.textDecoration.qname,l.byName.textEmphasis.qname,l.byName.textOutline.qname,l.byName.textShadow.qname]})("undefined"===
typeof m?this.imscISD={}:m,"undefined"===typeof imscNames?d("./names"):imscNames,"undefined"===typeof imscStyles?d("./styles"):imscStyles,"undefined"===typeof imscUtils?d("./utils"):imscUtils)},{"./names":37,"./styles":38,"./utils":39}],36:[function(d,r,m){m.generateISD=d("./isd").generateISD;m.fromXML=d("./doc").fromXML;m.renderHTML=d("./html").render},{"./doc":33,"./html":34,"./isd":35}],37:[function(d,r,m){d="undefined"===typeof m?this.imscNames={}:m;d.ns_tt="http://www.w3.org/ns/ttml";d.ns_tts=
"http://www.w3.org/ns/ttml#styling";d.ns_ttp="http://www.w3.org/ns/ttml#parameter";d.ns_xml="http://www.w3.org/XML/1998/namespace";d.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";d.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";d.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";d.ns_ebutts="urn:ebu:tt:style";d.ttaf_map={"http://www.w3.org/2006/10/ttaf1":d.ns_tt,"http://www.w3.org/2006/10/ttaf1#style":d.ns_tts,"http://www.w3.org/2006/10/ttaf1#parameter":d.ns_ttp}},
{}],38:[function(d,r,m){(function(c,d,l){function g(b,c,d,g,a,f,l,m){this.name=c;this.ns=b;this.qname=b+" "+c;this.inherit=a;this.animatable=f;this.initial=d;this.applies=g;this.parse=l;this.compute=m}c.all=[new g(d.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,l.parseColor,null),new g(d.ns_tts,"color","white",["span"],!0,!0,l.parseColor,null),new g(d.ns_tts,"direction","ltr",["p","span"],!0,!0,function(b){return b},null),new g(d.ns_tts,"display","auto",["body","div",
"p","region","span"],!1,!0,function(b){return b},null),new g(d.ns_tts,"displayAlign","before",["region"],!1,!0,function(b){return b},null),new g(d.ns_tts,"extent","auto",["tt","region"],!1,!0,function(b){if("auto"===b)return b;var c=b.split(" ");if(2!==c.length)return null;b=l.parseLength(c[0]);return(c=l.parseLength(c[1]))&&b?{h:c,w:b}:null},function(b,c,d,g,a){if("auto"===g)c=new l.ComputedLength(0,1);else if(c=l.toComputedLength(g.h.value,g.h.unit,null,b.dimensions.h,null,b.pxLength.h),null===
c)return null;if("auto"===g)b=new l.ComputedLength(1,0);else if(b=l.toComputedLength(g.w.value,g.w.unit,null,b.dimensions.w,null,b.pxLength.w),null===b)return null;return{h:c,w:b}}),new g(d.ns_tts,"fontFamily","default",["span"],!0,!0,function(b){b=b.split(",");var c=[],d;for(d in b)"'"!==b[d].charAt(0)&&'"'!==b[d].charAt(0)?"default"===b[d]?c.push("monospaceSerif"):c.push(b[d]):c.push(b[d]);return c},null),new g(d.ns_tts,"shear","0%",["p"],!0,!0,l.parseLength,function(b,c,d,g){if("%"===g.unit)b=
100<Math.abs(g.value)?100*Math.sign(g.value):g.value;else return null;return b}),new g(d.ns_tts,"fontSize","1c",["span"],!0,!0,l.parseLength,function(b,d,g,q,a){return l.toComputedLength(q.value,q.unit,null!==d?d.styleAttrs[c.byName.fontSize.qname]:b.cellLength.h,null!==d?d.styleAttrs[c.byName.fontSize.qname]:b.cellLength.h,b.cellLength.h,b.pxLength.h)}),new g(d.ns_tts,"fontStyle","normal",["span"],!0,!0,function(b){return b},null),new g(d.ns_tts,"fontWeight","normal",["span"],!0,!0,function(b){return b},
null),new g(d.ns_tts,"lineHeight","normal",["p"],!0,!0,function(b){return"normal"===b?b:l.parseLength(b)},function(b,d,g,q,a){if("normal"===q)b=q;else if(b=l.toComputedLength(q.value,q.unit,g.styleAttrs[c.byName.fontSize.qname],g.styleAttrs[c.byName.fontSize.qname],b.cellLength.h,b.pxLength.h),null===b)return null;return b}),new g(d.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new g(d.ns_tts,"origin","auto",["region"],!1,!0,function(b){if("auto"===b)return b;var c=b.split(" ");if(2!==c.length)return null;
b=l.parseLength(c[0]);return(c=l.parseLength(c[1]))&&b?{h:c,w:b}:null},function(b,c,d,g,a){if("auto"===g)c=new l.ComputedLength(0,0);else if(c=l.toComputedLength(g.h.value,g.h.unit,null,b.dimensions.h,null,b.pxLength.h),null===c)return null;if("auto"===g)b=new l.ComputedLength(0,0);else if(b=l.toComputedLength(g.w.value,g.w.unit,null,b.dimensions.w,null,b.pxLength.w),null===b)return null;return{h:c,w:b}}),new g(d.ns_tts,"overflow","hidden",["region"],!1,!0,function(b){return b},null),new g(d.ns_tts,
"padding","0px",["region"],!1,!0,function(b){b=b.split(" ");if(4<b.length)return null;var c=[],d;for(d in b){var g=l.parseLength(b[d]);if(!g)return null;c.push(g)}return c},function(b,d,g,q,a){if(1===q.length)d=[q[0],q[0],q[0],q[0]];else if(2===q.length)d=[q[0],q[1],q[0],q[1]];else if(3===q.length)d=[q[0],q[1],q[2],q[1]];else if(4===q.length)d=[q[0],q[1],q[2],q[3]];else return null;q=g.styleAttrs[c.byName.writingMode.qname];if("lrtb"===q||"lr"===q)d=[d[0],d[3],d[2],d[1]];else if("rltb"===q||"rl"===
q)d=[d[0],d[1],d[2],d[3]];else if("tblr"===q)d=[d[3],d[0],d[1],d[2]];else if("tbrl"===q||"tb"===q)d=[d[3],d[2],d[1],d[0]];else return null;q=[];for(var f in d)if(0===d[f].value)q[f]=new l.ComputedLength(0,0);else if(q[f]=l.toComputedLength(d[f].value,d[f].unit,g.styleAttrs[c.byName.fontSize.qname],"0"===f||"2"===f?g.styleAttrs[c.byName.extent.qname].h:g.styleAttrs[c.byName.extent.qname].w,"0"===f||"2"===f?b.cellLength.h:b.cellLength.w,"0"===f||"2"===f?b.pxLength.h:b.pxLength.w),null===q[f])return null;
return q}),new g(d.ns_tts,"position","top left",["region"],!1,!0,function(b){return l.parsePosition(b)},function(b,d,g,q){d=l.toComputedLength(q.v.offset.value,q.v.offset.unit,null,new l.ComputedLength(-g.styleAttrs[c.byName.extent.qname].h.rw,b.dimensions.h.rh-g.styleAttrs[c.byName.extent.qname].h.rh),null,b.pxLength.h);if(null===d)return null;"bottom"===q.v.edge&&(d=new l.ComputedLength(-d.rw-g.styleAttrs[c.byName.extent.qname].h.rw,b.dimensions.h.rh-d.rh-g.styleAttrs[c.byName.extent.qname].h.rh));
var a=l.toComputedLength(q.h.offset.value,q.h.offset.unit,null,new l.ComputedLength(b.dimensions.w.rw-g.styleAttrs[c.byName.extent.qname].w.rw,-g.styleAttrs[c.byName.extent.qname].w.rh),null,b.pxLength.w);if(null===d)return null;"right"===q.h.edge&&(a=new l.ComputedLength(b.dimensions.w.rw-a.rw-g.styleAttrs[c.byName.extent.qname].w.rw,-a.rh-g.styleAttrs[c.byName.extent.qname].w.rh));return{h:d,w:a}}),new g(d.ns_tts,"ruby","none",["span"],!1,!0,function(b){return b},null),new g(d.ns_tts,"rubyAlign",
"center",["span"],!0,!0,function(b){return"center"!==b&&"spaceAround"!==b?null:b},null),new g(d.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(b){return b},null),new g(d.ns_tts,"rubyReserve","none",["p"],!0,!0,function(b){var c=b.split(" ");b=[null,null];if(0===c.length||2<c.length||"none"!==c[0]&&"both"!==c[0]&&"after"!==c[0]&&"before"!==c[0]&&"outside"!==c[0])return null;b[0]=c[0];if(2===c.length&&"none"!==c[0])if(c=l.parseLength(c[1]))b[1]=c;else return null;return b},function(b,d,g,q,
a){if("none"===q[0])return q;b=null===q[1]?new l.ComputedLength(.5*g.styleAttrs[c.byName.fontSize.qname].rw,.5*g.styleAttrs[c.byName.fontSize.qname].rh):l.toComputedLength(q[1].value,q[1].unit,g.styleAttrs[c.byName.fontSize.qname],g.styleAttrs[c.byName.fontSize.qname],b.cellLength.h,b.pxLength.h);return null===b?null:[q[0],b]}),new g(d.ns_tts,"showBackground","whenActive",["region"],!1,!0,function(b){return b},null),new g(d.ns_tts,"textAlign","start",["p"],!0,!0,function(b){return b},function(b,c,
d,g,a){return"left"===g?"start":"right"===g?"end":g}),new g(d.ns_tts,"textCombine","none",["span"],!0,!0,function(b){b=b.split(" ");return 1!==b.length||"none"!==b[0]&&"all"!==b[0]?null:[b[0]]},null),new g(d.ns_tts,"textDecoration","none",["span"],!0,!0,function(b){return b.split(" ")},null),new g(d.ns_tts,"textEmphasis","none",["span"],!0,!0,function(b){b=b.split(" ");var c={style:null,symbol:null,color:null,position:null},d;for(d in b)if("none"===b[d]||"auto"===b[d])c.style=b[d];else if("filled"===
b[d]||"open"===b[d])c.style=b[d];else if("circle"===b[d]||"dot"===b[d]||"sesame"===b[d])c.symbol=b[d];else if("current"===b[d])c.color=b[d];else if("outside"===b[d]||"before"===b[d]||"after"===b[d])c.position=b[d];else if(c.color=l.parseColor(b[d]),null===c.color)return null;null==c.style&&null==c.symbol?c.style="auto":(c.symbol=c.symbol||"circle",c.style=c.style||"filled");c.position=c.position||"outside";c.color=c.color||"current";return c},null),new g(d.ns_tts,"textOutline","none",["span"],!0,
!0,function(b){if("none"===b)return b;var c={};b=b.split(" ");if(0===b.length||2<b.length)return null;var d=l.parseColor(b[0]);c.color=d;null!==d&&b.shift();if(1!==b.length)return null;b=l.parseLength(b[0]);if(!b)return null;c.thickness=b;return c},function(b,d,g,q,a){if("none"===q)return q;d={};d.color=null===q.color?g.styleAttrs[c.byName.color.qname]:q.color;d.thickness=l.toComputedLength(q.thickness.value,q.thickness.unit,g.styleAttrs[c.byName.fontSize.qname],g.styleAttrs[c.byName.fontSize.qname],
b.cellLength.h,b.pxLength.h);return null===d.thickness?null:d}),new g(d.ns_tts,"textShadow","none",["span"],!0,!0,l.parseTextShadow,function(b,d,g,q){if("none"===q)return q;d=[];for(var a in q){var f={};f.x_off=l.toComputedLength(q[a][0].value,q[a][0].unit,null,g.styleAttrs[c.byName.fontSize.qname],null,b.pxLength.w);if(null===f.x_off)return null;f.y_off=l.toComputedLength(q[a][1].value,q[a][1].unit,null,g.styleAttrs[c.byName.fontSize.qname],null,b.pxLength.h);if(null===f.y_off)return null;if(null===
q[a][2])f.b_radius=0;else if(f.b_radius=l.toComputedLength(q[a][2].value,q[a][2].unit,null,g.styleAttrs[c.byName.fontSize.qname],null,b.pxLength.h),null===f.b_radius)return null;f.color=null===q[a][3]?g.styleAttrs[c.byName.color.qname]:q[a][3];d.push(f)}return d}),new g(d.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(b){return b},null),new g(d.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(b){return b},null),new g(d.ns_tts,"wrapOption","wrap",["span"],
!0,!0,function(b){return b},null),new g(d.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(b){return b},null),new g(d.ns_tts,"zIndex","auto",["region"],!1,!0,function(b){"auto"!==b&&(b=parseInt(b),isNaN(b)&&(b=null));return b},null),new g(d.ns_ebutts,"linePadding","0c",["p"],!0,!1,l.parseLength,function(b,c,d,g,a){return l.toComputedLength(g.value,g.unit,null,null,b.cellLength.w,null)}),new g(d.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(b){return b},null),new g(d.ns_smpte,"backgroundImage",
null,["div"],!1,!1,function(b){return b},null),new g(d.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(b){return"true"===b?!0:!1},null),new g(d.ns_itts,"fillLineGap","true",["p"],!0,!0,function(b){return"true"===b?!0:!1},null)];c.byQName={};for(var m in c.all)c.byQName[c.all[m].qname]=c.all[m];c.byName={};for(var r in c.all)c.byName[c.all[r].name]=c.all[r]})("undefined"===typeof m?this.imscStyles={}:m,"undefined"===typeof imscNames?d("./names"):imscNames,"undefined"===
typeof imscUtils?d("./utils"):imscUtils)},{"./names":37,"./utils":39}],39:[function(d,r,m){(function(c){var d=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,l=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,m=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,
255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};c.parseColor=function(b){var c,g=null,q=r[b.toLowerCase()];void 0!==q?g=q:null!==(c=d.exec(b))?g=[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16),void 0!==c[4]?parseInt(c[4],16):255]:null!==(c=l.exec(b))?g=[parseInt(c[1]),parseInt(c[2]),parseInt(c[3]),255]:null!==(c=m.exec(b))&&(g=[parseInt(c[1]),parseInt(c[2]),
parseInt(c[3]),parseInt(c[4])]);return g};var B=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;c.parseLength=function(b){var c,d=null;null!==(c=B.exec(b))&&(d={value:parseFloat(c[1]),unit:c[2]});return d};c.parseTextShadow=function(b){b=b.split(",");var d=[],g;for(g in b){var l=b[g].split(" ");if(1===l.length&&"none"===l[0])return"none";if(1<l.length&&5>l.length){var a=[null,null,null,null],f=c.parseLength(l.shift());if(null===f)return null;a[0]=f;f=c.parseLength(l.shift());if(null===f)return null;
a[1]=f;if(0!==l.length&&(f=c.parseLength(l[0]),null!==f&&(a[2]=f,l.shift()),0!==l.length)){l=c.parseColor(l[0]);if(null===l)return null;a[3]=l}d.push(a)}}return d};c.parsePosition=function(b){b=b.split(" ");var d=function(a){return"center"===a||"left"===a||"top"===a||"bottom"===a||"right"===a};if(4<b.length)return null;for(var g in b)if(!d(b[g])){var l=c.parseLength(b[g]);if(null===l)return null;b[g]=l}g={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(l=
0;l<b.length;){var a=b[l++];if(d(a)){var f={value:0,unit:"%"};2!==b.length&&l<b.length&&!d(b[l])&&(f=b[l++]);"right"===a?(g.h.edge=a,g.h.offset=f):"bottom"===a?(g.v.edge=a,g.v.offset=f):"left"===a?g.h.offset=f:"top"===a&&(g.v.offset=f)}else if(1===b.length||2===b.length)1===l?g.h.offset=a:g.v.offset=a;else return null}return g};c.ComputedLength=function(b,c){this.rw=b;this.rh=c};c.ComputedLength.prototype.toUsedLength=function(b,c){return b*this.rw+c*this.rh};c.ComputedLength.prototype.isZero=function(){return 0===
this.rw&&0===this.rh};c.toComputedLength=function(b,d,g,l,a,f){return"%"===d&&l?new c.ComputedLength(l.rw*b/100,l.rh*b/100):"em"===d&&g?new c.ComputedLength(g.rw*b,g.rh*b):"c"===d&&a?new c.ComputedLength(b*a.rw,b*a.rh):"px"===d&&f?new c.ComputedLength(b*f.rw,b*f.rh):"rh"===d?new c.ComputedLength(0,b/100):"rw"===d?new c.ComputedLength(b/100,0):null}})("undefined"===typeof m?this.imscUtils={}:m)},{}]},{},[36])(36)});
