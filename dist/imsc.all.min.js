/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 Determine if an object is a Buffer

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource>  http://mths.be/fromcodepoint v0.1.0 by @mathias */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,q,g){e!=Array.prototype&&e!=Object.prototype&&(e[q]=g.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(e,q,g,a){if(q){g=$jscomp.global;e=e.split(".");for(a=0;a<e.length-1;a++){var c=e[a];c in g||(g[c]={});g=g[c]}e=e[e.length-1];a=g[e];q=q(a);q!=a&&null!=q&&$jscomp.defineProperty(g,e,{configurable:!0,writable:!0,value:q})}};$jscomp.polyfill("Array.prototype.fill",function(e){return e?e:function(e,g,a){var c=this.length||0;0>g&&(g=Math.max(0,c+g));if(null==a||a>c)a=c;a=Number(a);0>a&&(a=Math.max(0,c+a));for(g=Number(g||0);g<a;g++)this[g]=e;return this}},"es6","es3");
$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var e=0;return function(q){return $jscomp.SYMBOL_PREFIX+(q||"")+e++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.asyncIterator;e||(e=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(e){var q=0;return $jscomp.iteratorPrototype(function(){return q<e.length?{done:!1,value:e[q++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};$jscomp.iteratorFromArray=function(e,q){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var g=0,a={next:function(){if(g<e.length){var c=g++;return{value:q(c,e[c]),done:!1}}a.next=function(){return{done:!0,value:void 0}};return a.next()}};a[Symbol.iterator]=function(){return a};return a};
$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(e){return e?e:function(){return[]}},"es6","es5");
$jscomp.polyfill("Reflect.ownKeys",function(e){return e?e:function(e){var g=[],a=Object.getOwnPropertyNames(e);e=Object.getOwnPropertySymbols(e);for(var c=0;c<a.length;c++)("jscomp_symbol_"==a[c].substring(0,14)?e:g).push(a[c]);return g.concat(e)}},"es6","es5");
$jscomp.polyfill("String.fromCodePoint",function(e){return e?e:function(e){for(var g="",a=0;a<arguments.length;a++){var c=Number(arguments[a]);if(0>c||1114111<c||c!==Math.floor(c))throw new RangeError("invalid_code_point "+c);65535>=c?g+=String.fromCharCode(c):(c-=65536,g+=String.fromCharCode(c>>>10&1023|55296),g+=String.fromCharCode(c&1023|56320))}return g}},"es6","es3");$jscomp.polyfill("Math.sign",function(e){return e?e:function(e){e=Number(e);return 0===e||isNaN(e)?e:0<e?1:-1}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var e={},q=Object.create(new $jscomp.global.Proxy(e,{get:function(g,a,c){return g==e&&"q"==a&&c==q}}));return!0===q.q}catch(g){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.makeIterator=function(e){$jscomp.initSymbolIterator();var q=e[Symbol.iterator];return q?q.call(e):$jscomp.arrayIterator(e)};
$jscomp.owns=function(e,q){return Object.prototype.hasOwnProperty.call(e,q)};
$jscomp.polyfill("WeakMap",function(e){function q(){if(!e||!Object.seal)return!1;try{var a=Object.seal({}),c=Object.seal({}),d=new e([[a,2],[c,3]]);if(2!=d.get(a)||3!=d.get(c))return!1;d.delete(a);d.set(c,4);return!d.has(a)&&4==d.get(c)}catch(k){return!1}}function g(a){$jscomp.owns(a,c)||$jscomp.defineProperty(a,c,{value:{}})}function a(a){var c=Object[a];c&&(Object[a]=function(d){g(d);return c(d)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&$jscomp.ES6_CONFORMANCE)return e}else if(q())return e;
var c="$jscomp_hidden_"+Math.random();a("freeze");a("preventExtensions");a("seal");var l=0,n=function(a){this.id_=(l+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};n.prototype.set=function(a,e){g(a);if(!$jscomp.owns(a,c))throw Error("WeakMap key fail: "+a);a[c][this.id_]=e;return this};n.prototype.get=function(a){return $jscomp.owns(a,c)?a[c][this.id_]:void 0};n.prototype.has=
function(a){return $jscomp.owns(a,c)&&$jscomp.owns(a[c],this.id_)};n.prototype.delete=function(a){return $jscomp.owns(a,c)&&$jscomp.owns(a[c],this.id_)?delete a[c][this.id_]:!1};return n},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(e){function q(){if($jscomp.ASSUME_NO_NATIVE_MAP||!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),d=new e($jscomp.makeIterator([[a,"s"]]));if("s"!=d.get(a)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var k=d.entries(),c=k.next();if(c.done||c.value[0]!=a||"s"!=c.value[1])return!1;c=k.next();return c.done||4!=c.value[0].x||"t"!=c.value[1]||!k.next().done?!1:!0}catch(w){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&$jscomp.ES6_CONFORMANCE)return e}else if(q())return e;$jscomp.initSymbol();$jscomp.initSymbolIterator();var g=new WeakMap,a=function(a){this.data_={};this.head_=n();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var d;!(d=a.next()).done;)d=d.value,this.set(d[0],d[1])}};a.prototype.set=function(a,d){a=0===a?0:a;var k=c(this,a);k.list||(k.list=this.data_[k.id]=[]);k.entry?k.entry.value=d:(k.entry={next:this.head_,previous:this.head_.previous,head:this.head_,
key:a,value:d},k.list.push(k.entry),this.head_.previous.next=k.entry,this.head_.previous=k.entry,this.size++);return this};a.prototype.delete=function(a){a=c(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=n();this.size=0};a.prototype.has=function(a){return!!c(this,a).entry};
a.prototype.get=function(a){return(a=c(this,a).entry)&&a.value};a.prototype.entries=function(){return l(this,function(a){return[a.key,a.value]})};a.prototype.keys=function(){return l(this,function(a){return a.key})};a.prototype.values=function(){return l(this,function(a){return a.value})};a.prototype.forEach=function(a,d){for(var k=this.entries(),c;!(c=k.next()).done;)c=c.value,a.call(d,c[1],c[0],this)};a.prototype[Symbol.iterator]=a.prototype.entries;var c=function(a,d){var k=d&&typeof d;"object"==
k||"function"==k?g.has(d)?k=g.get(d):(k=""+ ++G,g.set(d,k)):k="p_"+d;var c=a.data_[k];if(c&&$jscomp.owns(a.data_,k))for(a=0;a<c.length;a++){var e=c[a];if(d!==d&&e.key!==e.key||d===e.key)return{id:k,list:c,index:a,entry:e}}return{id:k,list:c,index:-1,entry:void 0}},l=function(a,d){var c=a.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:d(c)};c=null}return{done:!0,value:void 0}})},n=function(){var a={};return a.previous=
a.next=a.head=a},G=0;return a},"es6","es3");
$jscomp.polyfill("Set",function(e){function q(){if($jscomp.ASSUME_NO_NATIVE_SET||!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),c=new e($jscomp.makeIterator([a]));if(!c.has(a)||1!=c.size||c.add(a)!=c||1!=c.size||c.add({x:4})!=c||2!=c.size)return!1;var l=c.entries(),n=l.next();if(n.done||n.value[0]!=a||n.value[1]!=a)return!1;n=l.next();return n.done||n.value[0]==a||4!=n.value[0].x||n.value[1]!=n.value[0]?!1:l.next().done}catch(G){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&$jscomp.ES6_CONFORMANCE)return e}else if(q())return e;$jscomp.initSymbol();$jscomp.initSymbolIterator();var g=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)this.add(c.value)}this.size=this.map_.size};g.prototype.add=function(a){a=0===a?0:a;this.map_.set(a,a);this.size=this.map_.size;return this};g.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};g.prototype.clear=
function(){this.map_.clear();this.size=0};g.prototype.has=function(a){return this.map_.has(a)};g.prototype.entries=function(){return this.map_.entries()};g.prototype.values=function(){return this.map_.values()};g.prototype.keys=g.prototype.values;g.prototype[Symbol.iterator]=g.prototype.values;g.prototype.forEach=function(a,c){var e=this;this.map_.forEach(function(l){return a.call(c,l,l,e)})};return g},"es6","es3");
(function(e){"object"===typeof exports&&"undefined"!==typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=e()})(function(){return function(){function e(q,g,a){function c(n,t){if(!g[n]){if(!q[n]){var d="function"==typeof require&&require;if(!t&&d)return d(n,!0);if(l)return l(n,!0);t=Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t;}t=
g[n]={exports:{}};q[n][0].call(t.exports,function(a){return c(q[n][1][a]||a)},t,t.exports,e,q,g,a)}return g[n].exports}for(var l="function"==typeof require&&require,n=0;n<a.length;n++)c(a[n]);return c}return e}()({1:[function(e,q,g){function a(a){var d=a.length;if(0<d%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");-1===a&&(a=d);return[a,a===d?0:4-a%4]}function c(a,d,c){for(var k=[],e=d;e<c;e+=3)d=(a[e]<<16&16711680)+(a[e+1]<<8&65280)+(a[e+2]&255),k.push(l[d>>18&63]+
l[d>>12&63]+l[d>>6&63]+l[d&63]);return k.join("")}g.byteLength=function(c){c=a(c);var d=c[1];return 3*(c[0]+d)/4-d};g.toByteArray=function(c){var d=a(c);var k=d[0];d=d[1];var e=new G(3*(k+d)/4-d),l=0,b=0<d?k-4:k,h;for(h=0;h<b;h+=4)k=n[c.charCodeAt(h)]<<18|n[c.charCodeAt(h+1)]<<12|n[c.charCodeAt(h+2)]<<6|n[c.charCodeAt(h+3)],e[l++]=k>>16&255,e[l++]=k>>8&255,e[l++]=k&255;2===d&&(k=n[c.charCodeAt(h)]<<2|n[c.charCodeAt(h+1)]>>4,e[l++]=k&255);1===d&&(k=n[c.charCodeAt(h)]<<10|n[c.charCodeAt(h+1)]<<4|n[c.charCodeAt(h+
2)]>>2,e[l++]=k>>8&255,e[l++]=k&255);return e};g.fromByteArray=function(a){for(var d=a.length,k=d%3,e=[],n=0,b=d-k;n<b;n+=16383)e.push(c(a,n,n+16383>b?b:n+16383));1===k?(a=a[d-1],e.push(l[a>>2]+l[a<<4&63]+"==")):2===k&&(a=(a[d-2]<<8)+a[d-1],e.push(l[a>>10]+l[a>>4&63]+l[a<<2&63]+"="));return e.join("")};var l=[],n=[],G="undefined"!==typeof Uint8Array?Uint8Array:Array;for(e=0;64>e;++e)l[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e],n["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=
e;n[45]=62;n[95]=63},{}],2:[function(e,q,g){},{}],3:[function(e,q,g){(function(a){function c(m){if(2147483647<m)throw new RangeError('The value "'+m+'" is invalid for option "size"');m=new Uint8Array(m);m.__proto__=a.prototype;return m}function a(m,a,f){if("number"===typeof m){if("string"===typeof a)throw new TypeError('The "string" argument must be of type string. Received type number');return G(m)}return l(m,a,f)}function l(m,b,f){if("string"===typeof m){var J=b;if("string"!==typeof J||""===J)J=
"utf8";if(!a.isEncoding(J))throw new TypeError("Unknown encoding: "+J);b=z(m,J)|0;f=c(b);m=f.write(m,J);m!==b&&(f=f.slice(0,m));return f}if(ArrayBuffer.isView(m))return t(m);if(null==m)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(E(m,ArrayBuffer)||m&&E(m.buffer,ArrayBuffer)){if(0>b||m.byteLength<b)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<b+(f||0))throw new RangeError('"length" is outside of buffer bounds');
m=void 0===b&&void 0===f?new Uint8Array(m):void 0===f?new Uint8Array(m,b):new Uint8Array(m,b,f);m.__proto__=a.prototype;return m}if("number"===typeof m)throw new TypeError('The "value" argument must not be of type number. Received type number');J=m.valueOf&&m.valueOf();if(null!=J&&J!==m)return a.from(J,b,f);if(J=d(m))return J;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof m[Symbol.toPrimitive])return a.from(m[Symbol.toPrimitive]("string"),b,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof m);}function n(m){if("number"!==typeof m)throw new TypeError('"size" argument must be of type number');if(0>m)throw new RangeError('The value "'+m+'" is invalid for option "size"');}function G(m){n(m);return c(0>m?0:k(m)|0)}function t(m){for(var a=0>m.length?0:k(m.length)|0,f=c(a),b=0;b<a;b+=1)f[b]=m[b]&255;return f}function d(m){if(a.isBuffer(m)){var b=k(m.length)|0,f=c(b);if(0===f.length)return f;m.copy(f,0,0,b);return f}if(void 0!==m.length)return(b="number"!==typeof m.length)||(b=m.length,
b=b!==b),b?c(0):t(m);if("Buffer"===m.type&&Array.isArray(m.data))return t(m.data)}function k(m){if(2147483647<=m)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return m|0}function z(m,b){if(a.isBuffer(m))return m.length;if(ArrayBuffer.isView(m)||E(m,ArrayBuffer))return m.byteLength;if("string"!==typeof m)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);var f=
m.length,d=2<arguments.length&&!0===arguments[2];if(!d&&0===f)return 0;for(var I=!1;;)switch(b){case "ascii":case "latin1":case "binary":return f;case "utf8":case "utf-8":return K(m).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*f;case "hex":return f>>>1;case "base64":return U.toByteArray(A(m)).length;default:if(I)return d?-1:K(m).length;b=(""+b).toLowerCase();I=!0}}function w(m,a,f){var b=!1;if(void 0===a||0>a)a=0;if(a>this.length)return"";if(void 0===f||f>this.length)f=
this.length;if(0>=f)return"";f>>>=0;a>>>=0;if(f<=a)return"";for(m||(m="utf8");;)switch(m){case "hex":m=a;a=f;f=this.length;if(!m||0>m)m=0;if(!a||0>a||a>f)a=f;b="";for(f=m;f<a;++f)m=b,b=this[f],b=16>b?"0"+b.toString(16):b.toString(16),b=m+b;return b;case "utf8":case "utf-8":return u(this,a,f);case "ascii":m="";for(f=Math.min(this.length,f);a<f;++a)m+=String.fromCharCode(this[a]&127);return m;case "latin1":case "binary":m="";for(f=Math.min(this.length,f);a<f;++a)m+=String.fromCharCode(this[a]);return m;
case "base64":return a=0===a&&f===this.length?U.fromByteArray(this):U.fromByteArray(this.slice(a,f)),a;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=this.slice(a,f);f="";for(m=0;m<a.length;m+=2)f+=String.fromCharCode(a[m]+256*a[m+1]);return f;default:if(b)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase();b=!0}}function b(m,a,f){var b=m[a];m[a]=m[f];m[f]=b}function h(m,b,f,d,c){if(0===m.length)return-1;"string"===typeof f?(d=f,f=0):2147483647<f?f=2147483647:-2147483648>
f&&(f=-2147483648);f=+f;f!==f&&(f=c?0:m.length-1);0>f&&(f=m.length+f);if(f>=m.length){if(c)return-1;f=m.length-1}else if(0>f)if(c)f=0;else return-1;"string"===typeof b&&(b=a.from(b,d));if(a.isBuffer(b))return 0===b.length?-1:r(m,b,f,d,c);if("number"===typeof b)return b&=255,"function"===typeof Uint8Array.prototype.indexOf?c?Uint8Array.prototype.indexOf.call(m,b,f):Uint8Array.prototype.lastIndexOf.call(m,b,f):r(m,[b],f,d,c);throw new TypeError("val must be string, number or Buffer");}function r(m,
a,f,b,d){function J(f,m){return 1===c?f[m]:f.readUInt16BE(m*c)}var c=1,I=m.length,h=a.length;if(void 0!==b&&(b=String(b).toLowerCase(),"ucs2"===b||"ucs-2"===b||"utf16le"===b||"utf-16le"===b)){if(2>m.length||2>a.length)return-1;c=2;I/=2;h/=2;f/=2}if(d)for(b=-1;f<I;f++)if(J(m,f)===J(a,-1===b?0:f-b)){if(-1===b&&(b=f),f-b+1===h)return b*c}else-1!==b&&(f-=f-b),b=-1;else for(f+h>I&&(f=I-h);0<=f;f--){I=!0;for(b=0;b<h;b++)if(J(m,f+b)!==J(a,b)){I=!1;break}if(I)return f}return-1}function u(m,a,f){f=Math.min(m.length,
f);for(var b=[];a<f;){var d=m[a],c=null,I=239<d?4:223<d?3:191<d?2:1;if(a+I<=f)switch(I){case 1:128>d&&(c=d);break;case 2:var h=m[a+1];128===(h&192)&&(d=(d&31)<<6|h&63,127<d&&(c=d));break;case 3:h=m[a+1];var k=m[a+2];128===(h&192)&&128===(k&192)&&(d=(d&15)<<12|(h&63)<<6|k&63,2047<d&&(55296>d||57343<d)&&(c=d));break;case 4:h=m[a+1];k=m[a+2];var e=m[a+3];128===(h&192)&&128===(k&192)&&128===(e&192)&&(d=(d&15)<<18|(h&63)<<12|(k&63)<<6|e&63,65535<d&&1114112>d&&(c=d))}null===c?(c=65533,I=1):65535<c&&(c-=
65536,b.push(c>>>10&1023|55296),c=56320|c&1023);b.push(c);a+=I}m=b.length;if(m<=y)b=String.fromCharCode.apply(String,b);else{f="";for(a=0;a<m;)f+=String.fromCharCode.apply(String,b.slice(a,a+=y));b=f}return b}function B(m,a,f){if(0!==m%1||0>m)throw new RangeError("offset is not uint");if(m+a>f)throw new RangeError("Trying to access beyond buffer length");}function D(m,b,f,d,c,h){if(!a.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>c||b<h)throw new RangeError('"value" argument is out of bounds');
if(f+d>m.length)throw new RangeError("Index out of range");}function x(m,a,f,b,d,c){if(f+b>m.length)throw new RangeError("Index out of range");if(0>f)throw new RangeError("Index out of range");}function N(m,a,f,b,d){a=+a;f>>>=0;d||x(m,a,f,4,3.4028234663852886E38,-3.4028234663852886E38);F.write(m,a,f,b,23,4);return f+4}function q(a,b,f,d,c){b=+b;f>>>=0;c||x(a,b,f,8,1.7976931348623157E308,-1.7976931348623157E308);F.write(a,b,f,d,52,8);return f+8}function A(a){a=a.split("=")[0];a=a.trim().replace(V,
"");if(2>a.length)return"";for(;0!==a.length%4;)a+="=";return a}function K(a,b){b=b||Infinity;for(var f,m=a.length,d=null,c=[],h=0;h<m;++h){f=a.charCodeAt(h);if(55295<f&&57344>f){if(!d){if(56319<f){-1<(b-=3)&&c.push(239,191,189);continue}else if(h+1===m){-1<(b-=3)&&c.push(239,191,189);continue}d=f;continue}if(56320>f){-1<(b-=3)&&c.push(239,191,189);d=f;continue}f=(d-55296<<10|f-56320)+65536}else d&&-1<(b-=3)&&c.push(239,191,189);d=null;if(128>f){if(0>--b)break;c.push(f)}else if(2048>f){if(0>(b-=2))break;
c.push(f>>6|192,f&63|128)}else if(65536>f){if(0>(b-=3))break;c.push(f>>12|224,f>>6&63|128,f&63|128)}else if(1114112>f){if(0>(b-=4))break;c.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw Error("Invalid code point");}return c}function H(a){for(var b=[],f=0;f<a.length;++f)b.push(a.charCodeAt(f)&255);return b}function C(a,b,f,d){for(var m=0;m<d&&!(m+f>=b.length||m>=a.length);++m)b[m+f]=a[m];return m}function E(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&
a.constructor.name===b.name}var U=e("base64-js"),F=e("ieee754");g.Buffer=a;g.SlowBuffer=function(b){+b!=b&&(b=0);return a.alloc(+b)};g.INSPECT_MAX_BYTES=50;g.kMaxLength=2147483647;a.TYPED_ARRAY_SUPPORT=function(){try{var a=new Uint8Array(1);a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===a.foo()}catch(I){return!1}}();a.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}});Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});a.poolSize=8192;a.from=function(a,b,f){return l(a,b,f)};a.prototype.__proto__=Uint8Array.prototype;
a.__proto__=Uint8Array;a.alloc=function(a,b,f){n(a);a=0>=a?c(a):void 0!==b?"string"===typeof f?c(a).fill(b,f):c(a).fill(b):c(a);return a};a.allocUnsafe=function(a){return G(a)};a.allocUnsafeSlow=function(a){return G(a)};a.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==a.prototype};a.compare=function(b,d){E(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength));E(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength));if(!a.isBuffer(b)||!a.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(b===d)return 0;for(var f=b.length,m=d.length,c=0,h=Math.min(f,m);c<h;++c)if(b[c]!==d[c]){f=b[c];m=d[c];break}return f<m?-1:m<f?1:0};a.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};a.concat=function(b,d){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return a.alloc(0);
var f;if(void 0===d)for(f=d=0;f<b.length;++f)d+=b[f].length;d=a.allocUnsafe(d);var m=0;for(f=0;f<b.length;++f){var c=b[f];E(c,Uint8Array)&&(c=a.from(c));if(!a.isBuffer(c))throw new TypeError('"list" argument must be an Array of Buffers');c.copy(d,m);m+=c.length}return d};a.byteLength=z;a.prototype._isBuffer=!0;a.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<a;d+=2)b(this,d,d+1);return this};a.prototype.swap32=
function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var d=0;d<a;d+=4)b(this,d,d+3),b(this,d+1,d+2);return this};a.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var d=0;d<a;d+=8)b(this,d,d+7),b(this,d+1,d+6),b(this,d+2,d+5),b(this,d+3,d+4);return this};a.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?u(this,0,a):w.apply(this,
arguments)};a.prototype.toLocaleString=a.prototype.toString;a.prototype.equals=function(b){if(!a.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===a.compare(this,b)};a.prototype.inspect=function(){var a=g.INSPECT_MAX_BYTES;var b=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim();this.length>a&&(b+=" ... ");return"<Buffer "+b+">"};a.prototype.compare=function(b,d,f,c,h){E(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength));if(!a.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof b);void 0===d&&(d=0);void 0===f&&(f=b?b.length:0);void 0===c&&(c=0);void 0===h&&(h=this.length);if(0>d||f>b.length||0>c||h>this.length)throw new RangeError("out of range index");if(c>=h&&d>=f)return 0;if(c>=h)return-1;if(d>=f)return 1;d>>>=0;f>>>=0;c>>>=0;h>>>=0;if(this===b)return 0;var m=h-c,J=f-d,k=Math.min(m,J);c=this.slice(c,h);b=b.slice(d,f);for(d=0;d<k;++d)if(c[d]!==b[d]){m=c[d];J=b[d];break}return m<J?-1:J<m?1:0};a.prototype.includes=function(a,b,f){return-1!==this.indexOf(a,b,f)};a.prototype.indexOf=
function(a,b,f){return h(this,a,b,f,!0)};a.prototype.lastIndexOf=function(a,b,f){return h(this,a,b,f,!1)};a.prototype.write=function(a,b,f,d){if(void 0===b)d="utf8",f=this.length,b=0;else if(void 0===f&&"string"===typeof b)d=b,f=this.length,b=0;else if(isFinite(b))b>>>=0,isFinite(f)?(f>>>=0,void 0===d&&(d="utf8")):(d=f,f=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var m=this.length-b;if(void 0===f||f>m)f=m;if(0<a.length&&(0>f||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");
d||(d="utf8");for(m=!1;;)switch(d){case "hex":a:{b=Number(b)||0;d=this.length-b;f?(f=Number(f),f>d&&(f=d)):f=d;d=a.length;f>d/2&&(f=d/2);for(d=0;d<f;++d){m=parseInt(a.substr(2*d,2),16);if(m!==m){a=d;break a}this[b+d]=m}a=d}return a;case "utf8":case "utf-8":return C(K(a,this.length-b),this,b,f);case "ascii":return C(H(a),this,b,f);case "latin1":case "binary":return C(H(a),this,b,f);case "base64":return C(U.toByteArray(A(a)),this,b,f);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=a;m=this.length-
b;for(var c=[],h=0;h<d.length&&!(0>(m-=2));++h){var k=d.charCodeAt(h);a=k>>8;k%=256;c.push(k);c.push(a)}return C(c,this,b,f);default:if(m)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();m=!0}};a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var y=4096;a.prototype.slice=function(b,d){var f=this.length;b=~~b;d=void 0===d?f:~~d;0>b?(b+=f,0>b&&(b=0)):b>f&&(b=f);0>d?(d+=f,0>d&&(d=0)):d>f&&(d=f);d<b&&(d=b);b=this.subarray(b,d);b.__proto__=
a.prototype;return b};a.prototype.readUIntLE=function(b,a,d){b>>>=0;a>>>=0;d||B(b,a,this.length);d=this[b];for(var f=1,m=0;++m<a&&(f*=256);)d+=this[b+m]*f;return d};a.prototype.readUIntBE=function(b,a,d){b>>>=0;a>>>=0;d||B(b,a,this.length);d=this[b+--a];for(var f=1;0<a&&(f*=256);)d+=this[b+--a]*f;return d};a.prototype.readUInt8=function(b,a){b>>>=0;a||B(b,1,this.length);return this[b]};a.prototype.readUInt16LE=function(b,a){b>>>=0;a||B(b,2,this.length);return this[b]|this[b+1]<<8};a.prototype.readUInt16BE=
function(b,a){b>>>=0;a||B(b,2,this.length);return this[b]<<8|this[b+1]};a.prototype.readUInt32LE=function(b,a){b>>>=0;a||B(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};a.prototype.readUInt32BE=function(b,a){b>>>=0;a||B(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};a.prototype.readIntLE=function(b,a,d){b>>>=0;a>>>=0;d||B(b,a,this.length);d=this[b];for(var f=1,c=0;++c<a&&(f*=256);)d+=this[b+c]*f;d>=128*f&&(d-=Math.pow(2,8*a));return d};
a.prototype.readIntBE=function(b,a,d){b>>>=0;a>>>=0;d||B(b,a,this.length);d=a;for(var f=1,c=this[b+--d];0<d&&(f*=256);)c+=this[b+--d]*f;c>=128*f&&(c-=Math.pow(2,8*a));return c};a.prototype.readInt8=function(b,a){b>>>=0;a||B(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};a.prototype.readInt16LE=function(b,a){b>>>=0;a||B(b,2,this.length);b=this[b]|this[b+1]<<8;return b&32768?b|4294901760:b};a.prototype.readInt16BE=function(b,a){b>>>=0;a||B(b,2,this.length);b=this[b+1]|this[b]<<8;return b&
32768?b|4294901760:b};a.prototype.readInt32LE=function(b,a){b>>>=0;a||B(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};a.prototype.readInt32BE=function(b,a){b>>>=0;a||B(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};a.prototype.readFloatLE=function(b,a){b>>>=0;a||B(b,4,this.length);return F.read(this,b,!0,23,4)};a.prototype.readFloatBE=function(b,a){b>>>=0;a||B(b,4,this.length);return F.read(this,b,!1,23,4)};a.prototype.readDoubleLE=function(b,
a){b>>>=0;a||B(b,8,this.length);return F.read(this,b,!0,52,8)};a.prototype.readDoubleBE=function(b,a){b>>>=0;a||B(b,8,this.length);return F.read(this,b,!1,52,8)};a.prototype.writeUIntLE=function(b,a,d,c){b=+b;a>>>=0;d>>>=0;c||D(this,b,a,d,Math.pow(2,8*d)-1,0);c=1;var f=0;for(this[a]=b&255;++f<d&&(c*=256);)this[a+f]=b/c&255;return a+d};a.prototype.writeUIntBE=function(b,a,d,c){b=+b;a>>>=0;d>>>=0;c||D(this,b,a,d,Math.pow(2,8*d)-1,0);c=d-1;var f=1;for(this[a+c]=b&255;0<=--c&&(f*=256);)this[a+c]=b/f&
255;return a+d};a.prototype.writeUInt8=function(b,a,d){b=+b;a>>>=0;d||D(this,b,a,1,255,0);this[a]=b&255;return a+1};a.prototype.writeUInt16LE=function(b,a,d){b=+b;a>>>=0;d||D(this,b,a,2,65535,0);this[a]=b&255;this[a+1]=b>>>8;return a+2};a.prototype.writeUInt16BE=function(b,a,d){b=+b;a>>>=0;d||D(this,b,a,2,65535,0);this[a]=b>>>8;this[a+1]=b&255;return a+2};a.prototype.writeUInt32LE=function(b,a,d){b=+b;a>>>=0;d||D(this,b,a,4,4294967295,0);this[a+3]=b>>>24;this[a+2]=b>>>16;this[a+1]=b>>>8;this[a]=b&
255;return a+4};a.prototype.writeUInt32BE=function(b,a,d){b=+b;a>>>=0;d||D(this,b,a,4,4294967295,0);this[a]=b>>>24;this[a+1]=b>>>16;this[a+2]=b>>>8;this[a+3]=b&255;return a+4};a.prototype.writeIntLE=function(b,a,d,c){b=+b;a>>>=0;c||(c=Math.pow(2,8*d-1),D(this,b,a,d,c-1,-c));c=0;var f=1,h=0;for(this[a]=b&255;++c<d&&(f*=256);)0>b&&0===h&&0!==this[a+c-1]&&(h=1),this[a+c]=(b/f>>0)-h&255;return a+d};a.prototype.writeIntBE=function(b,a,d,c){b=+b;a>>>=0;c||(c=Math.pow(2,8*d-1),D(this,b,a,d,c-1,-c));c=d-
1;var f=1,h=0;for(this[a+c]=b&255;0<=--c&&(f*=256);)0>b&&0===h&&0!==this[a+c+1]&&(h=1),this[a+c]=(b/f>>0)-h&255;return a+d};a.prototype.writeInt8=function(b,a,d){b=+b;a>>>=0;d||D(this,b,a,1,127,-128);0>b&&(b=255+b+1);this[a]=b&255;return a+1};a.prototype.writeInt16LE=function(b,a,d){b=+b;a>>>=0;d||D(this,b,a,2,32767,-32768);this[a]=b&255;this[a+1]=b>>>8;return a+2};a.prototype.writeInt16BE=function(b,a,d){b=+b;a>>>=0;d||D(this,b,a,2,32767,-32768);this[a]=b>>>8;this[a+1]=b&255;return a+2};a.prototype.writeInt32LE=
function(b,a,d){b=+b;a>>>=0;d||D(this,b,a,4,2147483647,-2147483648);this[a]=b&255;this[a+1]=b>>>8;this[a+2]=b>>>16;this[a+3]=b>>>24;return a+4};a.prototype.writeInt32BE=function(b,a,d){b=+b;a>>>=0;d||D(this,b,a,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);this[a]=b>>>24;this[a+1]=b>>>16;this[a+2]=b>>>8;this[a+3]=b&255;return a+4};a.prototype.writeFloatLE=function(b,a,d){return N(this,b,a,!0,d)};a.prototype.writeFloatBE=function(b,a,d){return N(this,b,a,!1,d)};a.prototype.writeDoubleLE=function(b,
a,d){return q(this,b,a,!0,d)};a.prototype.writeDoubleBE=function(b,a,d){return q(this,b,a,!1,d)};a.prototype.copy=function(b,d,f,c){if(!a.isBuffer(b))throw new TypeError("argument should be a Buffer");f||(f=0);c||0===c||(c=this.length);d>=b.length&&(d=b.length);d||(d=0);0<c&&c<f&&(c=f);if(c===f||0===b.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");if(0>f||f>=this.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("sourceEnd out of bounds");
c>this.length&&(c=this.length);b.length-d<c-f&&(c=b.length-d+f);var h=c-f;if(this===b&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(d,f,c);else if(this===b&&f<d&&d<c)for(c=h-1;0<=c;--c)b[c+d]=this[c+f];else Uint8Array.prototype.set.call(b,this.subarray(f,c),d);return h};a.prototype.fill=function(b,d,f,c){if("string"===typeof b){"string"===typeof d?(c=d,d=0,f=this.length):"string"===typeof f&&(c=f,f=this.length);if(void 0!==c&&"string"!==typeof c)throw new TypeError("encoding must be a string");
if("string"===typeof c&&!a.isEncoding(c))throw new TypeError("Unknown encoding: "+c);if(1===b.length){var h=b.charCodeAt(0);if("utf8"===c&&128>h||"latin1"===c)b=h}}else"number"===typeof b&&(b&=255);if(0>d||this.length<d||this.length<f)throw new RangeError("Out of range index");if(f<=d)return this;d>>>=0;f=void 0===f?this.length:f>>>0;b||(b=0);if("number"===typeof b)for(c=d;c<f;++c)this[c]=b;else{h=a.isBuffer(b)?b:a.from(b,c);var k=h.length;if(0===k)throw new TypeError('The value "'+b+'" is invalid for argument "value"');
for(c=0;c<f-d;++c)this[c+d]=h[c%k]}return this};var V=/[^+/0-9A-Za-z-_]/g}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:6}],4:[function(e,q,g){(function(a){g.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)};g.isBoolean=function(a){return"boolean"===typeof a};g.isNull=function(a){return null===a};g.isNullOrUndefined=function(a){return null==a};g.isNumber=function(a){return"number"===typeof a};g.isString=function(a){return"string"===
typeof a};g.isSymbol=function(a){return"symbol"===typeof a};g.isUndefined=function(a){return void 0===a};g.isRegExp=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)};g.isObject=function(a){return"object"===typeof a&&null!==a};g.isDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)};g.isError=function(a){return"[object Error]"===Object.prototype.toString.call(a)||a instanceof Error};g.isFunction=function(a){return"function"===typeof a};g.isPrimitive=function(a){return null===
a||"boolean"===typeof a||"number"===typeof a||"string"===typeof a||"symbol"===typeof a||"undefined"===typeof a};g.isBuffer=a.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":8}],5:[function(e,q,g){function a(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=b(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function c(d,c,h,k){var e;if("function"!==typeof h)throw new TypeError('"listener" argument must be a function');
if(e=d._events){e.newListener&&(d.emit("newListener",c,h.listener?h.listener:h),e=d._events);var u=e[c]}else e=d._events=b(null),d._eventsCount=0;u?("function"===typeof u?u=e[c]=k?[h,u]:[u,h]:k?u.unshift(h):u.push(h),u.warned||(h=void 0===d._maxListeners?a.defaultMaxListeners:d._maxListeners)&&0<h&&u.length>h&&(u.warned=!0,h=Error("Possible EventEmitter memory leak detected. "+u.length+' "'+String(c)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),h.name="MaxListenersExceededWarning",
h.emitter=d,h.type=c,h.count=u.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",h.name,h.message))):(e[c]=h,++d._eventsCount);return d}function l(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],
arguments[1],arguments[2]);default:for(var b=Array(arguments.length),a=0;a<b.length;++a)b[a]=arguments[a];this.listener.apply(this.target,b)}}function n(b,a,d){b={fired:!1,wrapFn:void 0,target:b,type:a,listener:d};a=r.call(l,b);a.listener=d;return b.wrapFn=a}function G(b,a,c){b=b._events;if(!b)return[];a=b[a];if(!a)return[];if("function"===typeof a)return c?[a.listener||a]:[a];if(c)for(c=Array(a.length),b=0;b<c.length;++b)c[b]=a[b].listener||a[b];else c=d(a,a.length);return c}function t(b){var a=
this._events;if(a){b=a[b];if("function"===typeof b)return 1;if(b)return b.length}return 0}function d(b,a){for(var d=Array(a),c=0;c<a;++c)d[c]=b[c];return d}function k(b){var a=function(){};a.prototype=b;return new a}function z(b){var a=[],d;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&a.push(d);return d}function w(b){var a=this;return function(){return a.apply(b,arguments)}}var b=Object.create||k,h=Object.keys||z,r=Function.prototype.bind||w;q.exports=a;a.EventEmitter=a;a.prototype._events=
void 0;a.prototype._maxListeners=void 0;var u=10;try{e={};Object.defineProperty&&Object.defineProperty(e,"x",{value:0});var B=0===e.x}catch(D){B=!1}B?Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(b){if("number"!==typeof b||0>b||b!==b)throw new TypeError('"defaultMaxListeners" must be a positive number');u=b}}):a.defaultMaxListeners=u;a.prototype.setMaxListeners=function(b){if("number"!==typeof b||0>b||isNaN(b))throw new TypeError('"n" argument must be a positive number');
this._maxListeners=b;return this};a.prototype.getMaxListeners=function(){return void 0===this._maxListeners?a.defaultMaxListeners:this._maxListeners};a.prototype.emit=function(b){var a,c,h;var k="error"===b;if(h=this._events)k=k&&null==h.error;else if(!k)return!1;if(k){1<arguments.length&&(a=arguments[1]);if(a instanceof Error)throw a;h=Error('Unhandled "error" event. ('+a+")");h.context=a;throw h;}a=h[b];if(!a)return!1;h="function"===typeof a;var e=arguments.length;switch(e){case 1:if(h)a.call(this);
else for(h=a.length,a=d(a,h),k=0;k<h;++k)a[k].call(this);break;case 2:k=arguments[1];if(h)a.call(this,k);else for(h=a.length,a=d(a,h),e=0;e<h;++e)a[e].call(this,k);break;case 3:k=arguments[1];e=arguments[2];if(h)a.call(this,k,e);else for(h=a.length,a=d(a,h),c=0;c<h;++c)a[c].call(this,k,e);break;case 4:k=arguments[1];e=arguments[2];c=arguments[3];if(h)a.call(this,k,e,c);else{h=a.length;a=d(a,h);for(var u=0;u<h;++u)a[u].call(this,k,e,c)}break;default:k=Array(e-1);for(c=1;c<e;c++)k[c-1]=arguments[c];
if(h)a.apply(this,k);else for(h=a.length,a=d(a,h),e=0;e<h;++e)a[e].apply(this,k)}return!0};a.prototype.addListener=function(b,a){return c(this,b,a,!1)};a.prototype.on=a.prototype.addListener;a.prototype.prependListener=function(b,a){return c(this,b,a,!0)};a.prototype.once=function(b,a){if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');this.on(b,n(this,b,a));return this};a.prototype.prependOnceListener=function(b,a){if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');
this.prependListener(b,n(this,b,a));return this};a.prototype.removeListener=function(a,d){var c;if("function"!==typeof d)throw new TypeError('"listener" argument must be a function');var h=this._events;if(!h)return this;var k=h[a];if(!k)return this;if(k===d||k.listener===d)0===--this._eventsCount?this._events=b(null):(delete h[a],h.removeListener&&this.emit("removeListener",a,k.listener||d));else if("function"!==typeof k){var e=-1;for(c=k.length-1;0<=c;c--)if(k[c]===d||k[c].listener===d){var u=k[c].listener;
e=c;break}if(0>e)return this;if(0===e)k.shift();else{c=e+1;for(var l=k.length;c<l;e+=1,c+=1)k[e]=k[c];k.pop()}1===k.length&&(h[a]=k[0]);h.removeListener&&this.emit("removeListener",a,u||d)}return this};a.prototype.removeAllListeners=function(a){var d=this._events;if(!d)return this;if(!d.removeListener)return 0===arguments.length?(this._events=b(null),this._eventsCount=0):d[a]&&(0===--this._eventsCount?this._events=b(null):delete d[a]),this;if(0===arguments.length){var c=h(d);for(d=0;d<c.length;++d){var k=
c[d];"removeListener"!==k&&this.removeAllListeners(k)}this.removeAllListeners("removeListener");this._events=b(null);this._eventsCount=0;return this}c=d[a];if("function"===typeof c)this.removeListener(a,c);else if(c)for(d=c.length-1;0<=d;d--)this.removeListener(a,c[d]);return this};a.prototype.listeners=function(b){return G(this,b,!0)};a.prototype.rawListeners=function(b){return G(this,b,!1)};a.listenerCount=function(b,a){return"function"===typeof b.listenerCount?b.listenerCount(a):t.call(b,a)};a.prototype.listenerCount=
t;a.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],6:[function(e,q,g){g.read=function(a,c,e,n,g){var l=8*g-n-1;var d=(1<<l)-1,k=d>>1,z=-7;g=e?g-1:0;var w=e?-1:1,b=a[c+g];g+=w;e=b&(1<<-z)-1;b>>=-z;for(z+=l;0<z;e=256*e+a[c+g],g+=w,z-=8);l=e&(1<<-z)-1;e>>=-z;for(z+=n;0<z;l=256*l+a[c+g],g+=w,z-=8);if(0===e)e=1-k;else{if(e===d)return l?NaN:Infinity*(b?-1:1);l+=Math.pow(2,n);e-=k}return(b?-1:1)*l*Math.pow(2,e-n)};g.write=function(a,c,e,n,g,t){var d,k=8*
t-g-1,l=(1<<k)-1,w=l>>1,b=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;t=n?0:t-1;var h=n?1:-1,r=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,n=l):(n=Math.floor(Math.log(c)/Math.LN2),1>c*(d=Math.pow(2,-n))&&(n--,d*=2),c=1<=n+w?c+b/d:c+b*Math.pow(2,1-w),2<=c*d&&(n++,d/=2),n+w>=l?(c=0,n=l):1<=n+w?(c=(c*d-1)*Math.pow(2,g),n+=w):(c=c*Math.pow(2,w-1)*Math.pow(2,g),n=0));for(;8<=g;a[e+t]=c&255,t+=h,c/=256,g-=8);n=n<<g|c;for(k+=g;0<k;a[e+t]=n&255,t+=h,n/=256,k-=8);a[e+t-h]|=128*
r}},{}],7:[function(e,q,g){q.exports="function"===typeof Object.create?function(a,c){c&&(a.super_=c,a.prototype=Object.create(c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:function(a,c){if(c){a.super_=c;var e=function(){};e.prototype=c.prototype;a.prototype=new e;a.prototype.constructor=a}}},{}],8:[function(e,q,g){function a(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}q.exports=function(c){return null!=c&&(a(c)||
"function"===typeof c.readFloatLE&&"function"===typeof c.slice&&a(c.slice(0,0))||!!c._isBuffer)}},{}],9:[function(e,q,g){var a={}.toString;q.exports=Array.isArray||function(c){return"[object Array]"==a.call(c)}},{}],10:[function(e,q,g){(function(a){function c(c,e,g,t){if("function"!==typeof c)throw new TypeError('"callback" argument must be a function');var d=arguments.length;switch(d){case 0:case 1:return a.nextTick(c);case 2:return a.nextTick(function(){c.call(null,e)});case 3:return a.nextTick(function(){c.call(null,
e,g)});case 4:return a.nextTick(function(){c.call(null,e,g,t)});default:var k=Array(d-1);for(d=0;d<k.length;)k[d++]=arguments[d];return a.nextTick(function(){c.apply(null,k)})}}"undefined"===typeof a||!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?q.exports={nextTick:c}:q.exports=a}).call(this,e("_process"))},{_process:11}],11:[function(e,q,g){function a(){throw Error("setTimeout has not been defined");}function c(){throw Error("clearTimeout has not been defined");
}function l(b){if(z===setTimeout)return setTimeout(b,0);if((z===a||!z)&&setTimeout)return z=setTimeout,setTimeout(b,0);try{return z(b,0)}catch(D){try{return z.call(null,b,0)}catch(x){return z.call(this,b,0)}}}function n(b){if(w===clearTimeout)return clearTimeout(b);if((w===c||!w)&&clearTimeout)return w=clearTimeout,clearTimeout(b);try{return w(b)}catch(D){try{return w.call(null,b)}catch(x){return w.call(this,b)}}}function G(){h&&r&&(h=!1,r.length?b=r.concat(b):u=-1,b.length&&t())}function t(){if(!h){var a=
l(G);h=!0;for(var d=b.length;d;){r=b;for(b=[];++u<d;)r&&r[u].run();u=-1;d=b.length}r=null;h=!1;n(a)}}function d(b,a){this.fun=b;this.array=a}function k(){}e=q.exports={};try{var z="function"===typeof setTimeout?setTimeout:a}catch(B){z=a}try{var w="function"===typeof clearTimeout?clearTimeout:c}catch(B){w=c}var b=[],h=!1,r,u=-1;e.nextTick=function(a){var c=Array(arguments.length-1);if(1<arguments.length)for(var k=1;k<arguments.length;k++)c[k-1]=arguments[k];b.push(new d(a,c));1!==b.length||h||l(t)};
d.prototype.run=function(){this.fun.apply(null,this.array)};e.title="browser";e.browser=!0;e.env={};e.argv=[];e.version="";e.versions={};e.on=k;e.addListener=k;e.once=k;e.off=k;e.removeListener=k;e.removeAllListeners=k;e.emit=k;e.prependListener=k;e.prependOnceListener=k;e.listeners=function(b){return[]};e.binding=function(b){throw Error("process.binding is not supported");};e.cwd=function(){return"/"};e.chdir=function(b){throw Error("process.chdir is not supported");};e.umask=function(){return 0}},
{}],12:[function(e,q,g){q.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":13}],13:[function(e,q,g){function a(d){if(!(this instanceof a))return new a(d);G.call(this,d);t.call(this,d);d&&!1===d.readable&&(this.readable=!1);d&&!1===d.writable&&(this.writable=!1);this.allowHalfOpen=!0;d&&!1===d.allowHalfOpen&&(this.allowHalfOpen=!1);this.once("end",c)}function c(){this.allowHalfOpen||this._writableState.ended||n.nextTick(l,this)}function l(a){a.end()}var n=e("process-nextick-args");
g=Object.keys||function(a){var d=[],c;for(c in a)d.push(c);return d};q.exports=a;q=Object.create(e("core-util-is"));q.inherits=e("inherits");var G=e("./_stream_readable"),t=e("./_stream_writable");q.inherits(a,G);e=g(t.prototype);for(q=0;q<e.length;q++)g=e[q],a.prototype[g]||(a.prototype[g]=t.prototype[g]);Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(a.prototype,"destroyed",{get:function(){return void 0===
this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}});a.prototype._destroy=function(a,c){this.push(null);this.end();n.nextTick(c,a)}},{"./_stream_readable":15,"./_stream_writable":17,"core-util-is":4,inherits:7,"process-nextick-args":10}],14:[function(e,q,g){function a(e){if(!(this instanceof a))return new a(e);
c.call(this,e)}q.exports=a;var c=e("./_stream_transform");q=Object.create(e("core-util-is"));q.inherits=e("inherits");q.inherits(a,c);a.prototype._transform=function(a,c,e){e(null,a)}},{"./_stream_transform":16,"core-util-is":4,inherits:7}],15:[function(e,q,g){(function(a,c){function l(b,a,d){if("function"===typeof b.prependListener)return b.prependListener(a,d);if(b._events&&b._events[a])K(b._events[a])?b._events[a].unshift(d):b._events[a]=[d,b._events[a]];else b.on(a,d)}function n(b,a){H=H||e("./_stream_duplex");
b=b||{};a=a instanceof H;this.objectMode=!!b.objectMode;a&&(this.objectMode=this.objectMode||!!b.readableObjectMode);var d=b.highWaterMark,c=b.readableHighWaterMark,f=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:a&&(c||0===c)?c:f;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new V;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.destroyed=this.resumeScheduled=this.readableListening=this.emittedReadable=
this.needReadable=!1;this.defaultEncoding=b.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;b.encoding&&(m||(m=e("string_decoder/").StringDecoder),this.decoder=new m(b.encoding),this.encoding=b.encoding)}function g(b){H=H||e("./_stream_duplex");if(!(this instanceof g))return new g(b);this._readableState=new n(b,this);this.readable=!0;b&&("function"===typeof b.read&&(this._read=b.read),"function"===typeof b.destroy&&(this._destroy=b.destroy));C.call(this)}
function t(a,c,h,k,e){var f=a._readableState;if(null===c)f.reading=!1,f.ended||(f.decoder&&(c=f.decoder.end())&&c.length&&(f.buffer.push(c),f.length+=f.objectMode?1:c.length),f.ended=!0,z(a));else{if(!e){e=c;var u;E.isBuffer(e)||e instanceof U||"string"===typeof e||void 0===e||f.objectMode||(u=new TypeError("Invalid non-string/buffer chunk"));var l=u}l?a.emit("error",l):f.objectMode||c&&0<c.length?("string"===typeof c||f.objectMode||Object.getPrototypeOf(c)===E.prototype||(c=E.from(c)),k?f.endEmitted?
a.emit("error",Error("stream.unshift() after end event")):d(a,f,c,!0):f.ended?a.emit("error",Error("stream.push() after EOF")):(f.reading=!1,f.decoder&&!h?(c=f.decoder.write(c),f.objectMode||0!==c.length?d(a,f,c,!1):f.readingMore||(f.readingMore=!0,A.nextTick(b,a,f))):d(a,f,c,!1))):k||(f.reading=!1)}return!f.ended&&(f.needReadable||f.length<f.highWaterMark||0===f.length)}function d(a,d,c,h){d.flowing&&0===d.length&&!d.sync?(a.emit("data",c),a.read(0)):(d.length+=d.objectMode?1:c.length,h?d.buffer.unshift(c):
d.buffer.push(c),d.needReadable&&z(a));d.readingMore||(d.readingMore=!0,A.nextTick(b,a,d))}function k(b,a){if(0>=b||0===a.length&&a.ended)return 0;if(a.objectMode)return 1;if(b!==b)return a.flowing&&a.length?a.buffer.head.data.length:a.length;if(b>a.highWaterMark){var d=b;8388608<=d?d=8388608:(d--,d|=d>>>1,d|=d>>>2,d|=d>>>4,d|=d>>>8,d|=d>>>16,d++);a.highWaterMark=d}return b<=a.length?b:a.ended?a.length:(a.needReadable=!0,0)}function z(b){var a=b._readableState;a.needReadable=!1;a.emittedReadable||
(y("emitReadable",a.flowing),a.emittedReadable=!0,a.sync?A.nextTick(w,b):w(b))}function w(b){y("emit readable");b.emit("readable");B(b)}function b(b,a){for(var d=a.length;!a.reading&&!a.flowing&&!a.ended&&a.length<a.highWaterMark&&(y("maybeReadMore read 0"),b.read(0),d!==a.length);)d=a.length;a.readingMore=!1}function h(b){return function(){var a=b._readableState;y("pipeOnDrain",a.awaitDrain);a.awaitDrain&&a.awaitDrain--;0===a.awaitDrain&&b.listeners("data").length&&(a.flowing=!0,B(b))}}function r(b){y("readable nexttick read 0");
b.read(0)}function u(b,a){a.reading||(y("resume read 0"),b.read(0));a.resumeScheduled=!1;a.awaitDrain=0;b.emit("resume");B(b);a.flowing&&!a.reading&&b.read(0)}function B(b){var a=b._readableState;for(y("flow",a.flowing);a.flowing&&null!==b.read(););}function D(b,a){if(0===a.length)return null;if(a.objectMode)var d=a.buffer.shift();else if(!b||b>=a.length)d=a.decoder?a.buffer.join(""):1===a.buffer.length?a.buffer.head.data:a.buffer.concat(a.length),a.buffer.clear();else{d=a.buffer;a=a.decoder;if(b<
d.head.data.length)a=d.head.data.slice(0,b),d.head.data=d.head.data.slice(b);else{if(b===d.head.data.length)d=d.shift();else if(a){a=d.head;var c=1,f=a.data;for(b-=f.length;a=a.next;){var h=a.data,e=b>h.length?h.length:b;f=e===h.length?f+h:f+h.slice(0,b);b-=e;if(0===b){e===h.length?(++c,d.head=a.next?a.next:d.tail=null):(d.head=a,a.data=h.slice(e));break}++c}d.length-=c;d=f}else{a=E.allocUnsafe(b);c=d.head;f=1;c.data.copy(a);for(b-=c.data.length;c=c.next;){h=c.data;e=b>h.length?h.length:b;h.copy(a,
a.length-b,0,e);b-=e;if(0===b){e===h.length?(++f,d.head=c.next?c.next:d.tail=null):(d.head=c,c.data=h.slice(e));break}++f}d.length-=f;d=a}a=d}d=a}return d}function x(b){var a=b._readableState;if(0<a.length)throw Error('"endReadable()" called on non-empty stream');a.endEmitted||(a.ended=!0,A.nextTick(N,a,b))}function N(b,a){b.endEmitted||0!==b.length||(b.endEmitted=!0,a.readable=!1,a.emit("end"))}function M(b,a){for(var d=0,c=b.length;d<c;d++)if(b[d]===a)return d;return-1}var A=e("process-nextick-args");
q.exports=g;var K=e("isarray"),H;g.ReadableState=n;e("events");var C=e("./internal/streams/stream"),E=e("safe-buffer").Buffer,U=c.Uint8Array||function(){};c=Object.create(e("core-util-is"));c.inherits=e("inherits");var F=e("util"),y=void 0;y=F&&F.debuglog?F.debuglog("stream"):function(){};var V=e("./internal/streams/BufferList");F=e("./internal/streams/destroy");var m;c.inherits(g,C);var I=["error","close","destroy","pause","resume"];Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0===
this._readableState?!1:this._readableState.destroyed},set:function(b){this._readableState&&(this._readableState.destroyed=b)}});g.prototype.destroy=F.destroy;g.prototype._undestroy=F.undestroy;g.prototype._destroy=function(b,a){this.push(null);a(b)};g.prototype.push=function(b,a){var d=this._readableState;if(d.objectMode)var c=!0;else"string"===typeof b&&(a=a||d.defaultEncoding,a!==d.encoding&&(b=E.from(b,a),a=""),c=!0);return t(this,b,a,!1,c)};g.prototype.unshift=function(b){return t(this,b,null,
!0,!1)};g.prototype.isPaused=function(){return!1===this._readableState.flowing};g.prototype.setEncoding=function(b){m||(m=e("string_decoder/").StringDecoder);this._readableState.decoder=new m(b);this._readableState.encoding=b;return this};g.prototype.read=function(b){y("read",b);b=parseInt(b,10);var a=this._readableState,d=b;0!==b&&(a.emittedReadable=!1);if(0===b&&a.needReadable&&(a.length>=a.highWaterMark||a.ended))return y("read: emitReadable",a.length,a.ended),0===a.length&&a.ended?x(this):z(this),
null;b=k(b,a);if(0===b&&a.ended)return 0===a.length&&x(this),null;var c=a.needReadable;y("need readable",c);if(0===a.length||a.length-b<a.highWaterMark)c=!0,y("length less than watermark",c);a.ended||a.reading?y("reading or ended",!1):c&&(y("do read"),a.reading=!0,a.sync=!0,0===a.length&&(a.needReadable=!0),this._read(a.highWaterMark),a.sync=!1,a.reading||(b=k(d,a)));c=0<b?D(b,a):null;null===c?(a.needReadable=!0,b=0):a.length-=b;0===a.length&&(a.ended||(a.needReadable=!0),d!==b&&a.ended&&x(this));
null!==c&&this.emit("data",c);return c};g.prototype._read=function(a){this.emit("error",Error("_read() is not implemented"))};g.prototype.pipe=function(b,d){function c(a,d){y("onunpipe");a===m&&d&&!1===d.hasUnpiped&&(d.hasUnpiped=!0,y("cleanup"),b.removeListener("close",u),b.removeListener("finish",r),b.removeListener("drain",n),b.removeListener("error",k),b.removeListener("unpipe",c),m.removeListener("end",f),m.removeListener("end",R),m.removeListener("data",e),g=!0,!L.awaitDrain||b._writableState&&
!b._writableState.needDrain||n())}function f(){y("onend");b.end()}function e(a){y("ondata");W=!1;!1!==b.write(a)||W||((1===L.pipesCount&&L.pipes===b||1<L.pipesCount&&-1!==M(L.pipes,b))&&!g&&(y("false write response, pause",m._readableState.awaitDrain),m._readableState.awaitDrain++,W=!0),m.pause())}function k(a){y("onerror",a);R();b.removeListener("error",k);0===b.listeners("error").length&&b.emit("error",a)}function u(){b.removeListener("finish",r);R()}function r(){y("onfinish");b.removeListener("close",
u);R()}function R(){y("unpipe");m.unpipe(b)}var m=this,L=this._readableState;switch(L.pipesCount){case 0:L.pipes=b;break;case 1:L.pipes=[L.pipes,b];break;default:L.pipes.push(b)}L.pipesCount+=1;y("pipe count=%d opts=%j",L.pipesCount,d);d=d&&!1===d.end||b===a.stdout||b===a.stderr?R:f;if(L.endEmitted)A.nextTick(d);else m.once("end",d);b.on("unpipe",c);var n=h(m);b.on("drain",n);var g=!1,W=!1;m.on("data",e);l(b,"error",k);b.once("close",u);b.once("finish",r);b.emit("pipe",m);L.flowing||(y("pipe resume"),
m.resume());return b};g.prototype.unpipe=function(b){var a=this._readableState,d={hasUnpiped:!1};if(0===a.pipesCount)return this;if(1===a.pipesCount){if(b&&b!==a.pipes)return this;b||(b=a.pipes);a.pipes=null;a.pipesCount=0;a.flowing=!1;b&&b.emit("unpipe",this,d);return this}if(!b){b=a.pipes;var c=a.pipesCount;a.pipes=null;a.pipesCount=0;a.flowing=!1;for(a=0;a<c;a++)b[a].emit("unpipe",this,d);return this}c=M(a.pipes,b);if(-1===c)return this;a.pipes.splice(c,1);--a.pipesCount;1===a.pipesCount&&(a.pipes=
a.pipes[0]);b.emit("unpipe",this,d);return this};g.prototype.on=function(b,a){a=C.prototype.on.call(this,b,a);"data"===b?!1!==this._readableState.flowing&&this.resume():"readable"===b&&(b=this._readableState,b.endEmitted||b.readableListening||(b.readableListening=b.needReadable=!0,b.emittedReadable=!1,b.reading?b.length&&z(this):A.nextTick(r,this)));return a};g.prototype.addListener=g.prototype.on;g.prototype.resume=function(){var b=this._readableState;b.flowing||(y("resume"),b.flowing=!0,b.resumeScheduled||
(b.resumeScheduled=!0,A.nextTick(u,this,b)));return this};g.prototype.pause=function(){y("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(y("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};g.prototype.wrap=function(b){var a=this,d=this._readableState,c=!1;b.on("end",function(){y("wrapped end");if(d.decoder&&!d.ended){var b=d.decoder.end();b&&b.length&&a.push(b)}a.push(null)});b.on("data",function(h){y("wrapped data");d.decoder&&(h=d.decoder.write(h));
d.objectMode&&(null===h||void 0===h)||!(d.objectMode||h&&h.length)||a.push(h)||(c=!0,b.pause())});for(var h in b)void 0===this[h]&&"function"===typeof b[h]&&(this[h]=function(a){return function(){return b[a].apply(b,arguments)}}(h));for(h=0;h<I.length;h++)b.on(I[h],this.emit.bind(this,I[h]));this._read=function(a){y("wrapped _read",a);c&&(c=!1,b.resume())};return this};Object.defineProperty(g.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});
g._fromList=D}).call(this,e("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./_stream_duplex":13,"./internal/streams/BufferList":18,"./internal/streams/destroy":19,"./internal/streams/stream":20,_process:11,"core-util-is":4,events:5,inherits:7,isarray:9,"process-nextick-args":10,"safe-buffer":21,"string_decoder/":22,util:2}],16:[function(e,q,g){function a(a,d){var c=this._transformState;c.transforming=!1;var e=c.writecb;if(!e)return this.emit("error",
Error("write callback called multiple times"));c.writechunk=null;c.writecb=null;null!=d&&this.push(d);e(a);a=this._readableState;a.reading=!1;(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);G.call(this,e);this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;e&&("function"===typeof e.transform&&
(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush));this.on("prefinish",l)}function l(){var a=this;"function"===typeof this._flush?this._flush(function(d,c){n(a,d,c)}):n(this,null,null)}function n(a,d,c){if(d)return a.emit("error",d);null!=c&&a.push(c);if(a._writableState.length)throw Error("Calling transform done when ws.length != 0");if(a._transformState.transforming)throw Error("Calling transform done when still transforming");return a.push(null)}q.exports=c;var G=
e("./_stream_duplex");q=Object.create(e("core-util-is"));q.inherits=e("inherits");q.inherits(c,G);c.prototype.push=function(a,d){this._transformState.needTransform=!1;return G.prototype.push.call(this,a,d)};c.prototype._transform=function(a,d,c){throw Error("_transform() is not implemented");};c.prototype._write=function(a,d,c){var e=this._transformState;e.writecb=c;e.writechunk=a;e.writeencoding=d;e.transforming||(a=this._readableState,(e.needTransform||a.needReadable||a.length<a.highWaterMark)&&
this._read(a.highWaterMark))};c.prototype._read=function(a){a=this._transformState;null!==a.writechunk&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0};c.prototype._destroy=function(a,d){var c=this;G.prototype._destroy.call(this,a,function(a){d(a);c.emit("close")})}},{"./_stream_duplex":13,"core-util-is":4,inherits:7}],17:[function(e,q,g){(function(a,c,l){function n(a){var b=this;this.entry=this.next=null;this.finish=
function(){var d=b.entry;for(b.entry=null;d;){var c=d.callback;a.pendingcb--;c(void 0);d=d.next}a.corkedRequestsFree?a.corkedRequestsFree.next=b:a.corkedRequestsFree=b}}function g(){}function t(a,d){D=D||e("./_stream_duplex");a=a||{};var c=d instanceof D;this.objectMode=!!a.objectMode;c&&(this.objectMode=this.objectMode||!!a.writableObjectMode);var h=a.highWaterMark,k=a.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=h||0===h?h:c&&(k||0===k)?k:l;this.highWaterMark=Math.floor(this.highWaterMark);
this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==a.decodeStrings;this.defaultEncoding=a.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){var c=d._writableState,h=c.sync,e=c.writecb;c.writing=!1;c.writecb=null;c.length-=c.writelen;c.writelen=0;a?(--c.pendingcb,h?(u.nextTick(e,a),u.nextTick(r,d,c),d._writableState.errorEmitted=!0,d.emit("error",a)):(e(a),d._writableState.errorEmitted=
!0,d.emit("error",a),r(d,c))):((a=b(c))||c.corked||c.bufferProcessing||!c.bufferedRequest||w(d,c),h?B(z,d,c,a,e):z(d,c,a,e))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.bufferedRequestCount=0;this.corkedRequestsFree=new n(this)}function d(a){D=D||e("./_stream_duplex");if(!(K.call(d,this)||this instanceof D))return new d(a);this._writableState=new t(a,this);this.writable=!0;a&&("function"===typeof a.write&&
(this._write=a.write),"function"===typeof a.writev&&(this._writev=a.writev),"function"===typeof a.destroy&&(this._destroy=a.destroy),"function"===typeof a.final&&(this._final=a.final));N.call(this)}function k(a,b,d,c,h,e,k){b.writelen=c;b.writecb=k;b.writing=!0;b.sync=!0;d?a._writev(h,b.onwrite):a._write(h,e,b.onwrite);b.sync=!1}function z(a,b,d,c){!d&&0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"));b.pendingcb--;c();r(a,b)}function w(a,b){b.bufferProcessing=!0;var d=b.bufferedRequest;
if(a._writev&&d&&d.next){var c=Array(b.bufferedRequestCount),h=b.corkedRequestsFree;h.entry=d;for(var e=0,u=!0;d;)c[e]=d,d.isBuf||(u=!1),d=d.next,e+=1;c.allBuffers=u;k(a,b,!0,b.length,c,"",h.finish);b.pendingcb++;b.lastBufferedRequest=null;h.next?(b.corkedRequestsFree=h.next,h.next=null):b.corkedRequestsFree=new n(b);b.bufferedRequestCount=0}else{for(;d&&(c=d.chunk,k(a,b,!1,b.objectMode?1:c.length,c,d.encoding,d.callback),d=d.next,b.bufferedRequestCount--,!b.writing););null===d&&(b.lastBufferedRequest=
null)}b.bufferedRequest=d;b.bufferProcessing=!1}function b(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function h(a,b){a._final(function(d){b.pendingcb--;d&&a.emit("error",d);b.prefinished=!0;a.emit("prefinish");r(a,b)})}function r(a,d){var c=b(d);c&&(d.prefinished||d.finalCalled||("function"===typeof a._final?(d.pendingcb++,d.finalCalled=!0,u.nextTick(h,a,d)):(d.prefinished=!0,a.emit("prefinish"))),0===d.pendingcb&&(d.finished=!0,a.emit("finish")));return c}
var u=e("process-nextick-args");q.exports=d;var B=!a.browser&&-1<["v0.10","v0.9."].indexOf(a.version.slice(0,5))?l:u.nextTick,D;d.WritableState=t;a=Object.create(e("core-util-is"));a.inherits=e("inherits");var x={deprecate:e("util-deprecate")},N=e("./internal/streams/stream"),M=e("safe-buffer").Buffer,A=c.Uint8Array||function(){};c=e("./internal/streams/destroy");a.inherits(d,N);t.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b};(function(){try{Object.defineProperty(t.prototype,
"buffer",{get:x.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(H){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var K=Function.prototype[Symbol.hasInstance];Object.defineProperty(d,Symbol.hasInstance,{value:function(a){return K.call(this,a)?!0:this!==d?!1:a&&a._writableState instanceof t}})}else K=function(a){return a instanceof this};
d.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))};d.prototype.write=function(a,b,d){var c=this._writableState,h=!1,e;if(e=!c.objectMode)e=a,e=M.isBuffer(e)||e instanceof A;e&&!M.isBuffer(a)&&(a=M.from(a));"function"===typeof b&&(d=b,b=null);e?b="buffer":b||(b=c.defaultEncoding);"function"!==typeof d&&(d=g);if(c.ended)c=d,d=Error("write after end"),this.emit("error",d),u.nextTick(c,d);else{var l;if(!(l=e)){l=a;var r=d,n=!0,f=!1;null===l?f=new TypeError("May not write null values to stream"):
"string"===typeof l||void 0===l||c.objectMode||(f=new TypeError("Invalid non-string/buffer chunk"));f&&(this.emit("error",f),u.nextTick(r,f),n=!1);l=n}l&&(c.pendingcb++,h=e,h||(e=a,c.objectMode||!1===c.decodeStrings||"string"!==typeof e||(e=M.from(e,b)),a!==e&&(h=!0,b="buffer",a=e)),l=c.objectMode?1:a.length,c.length+=l,e=c.length<c.highWaterMark,e||(c.needDrain=!0),c.writing||c.corked?(l=c.lastBufferedRequest,c.lastBufferedRequest={chunk:a,encoding:b,isBuf:h,callback:d,next:null},l?l.next=c.lastBufferedRequest:
c.bufferedRequest=c.lastBufferedRequest,c.bufferedRequestCount+=1):k(this,c,!1,l,a,b,d),h=e)}return h};d.prototype.cork=function(){this._writableState.corked++};d.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||w(this,a))};d.prototype.setDefaultEncoding=function(a){"string"===typeof a&&(a=a.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((a+
"").toLowerCase())))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a;return this};Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});d.prototype._write=function(a,b,d){d(Error("_write() is not implemented"))};d.prototype._writev=null;d.prototype.end=function(a,b,d){var c=this._writableState;"function"===typeof a?(d=a,b=a=null):"function"===typeof b&&(d=b,b=null);null!==a&&void 0!==a&&
this.write(a,b);c.corked&&(c.corked=1,this.uncork());if(!c.ending&&!c.finished){a=d;c.ending=!0;r(this,c);if(a)if(c.finished)u.nextTick(a);else this.once("finish",a);c.ended=!0;this.writable=!1}};Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(a){this._writableState&&(this._writableState.destroyed=a)}});d.prototype.destroy=c.destroy;d.prototype._undestroy=c.undestroy;d.prototype._destroy=function(a,b){this.end();
b(a)}}).call(this,e("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},e("timers").setImmediate)},{"./_stream_duplex":13,"./internal/streams/destroy":19,"./internal/streams/stream":20,_process:11,"core-util-is":4,inherits:7,"process-nextick-args":10,"safe-buffer":21,timers:31,"util-deprecate":32}],18:[function(e,q,g){var a=e("safe-buffer").Buffer,c=e("util");q.exports=function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
this.tail=this.head=null;this.length=0}c.prototype.push=function(a){a={data:a,next:null};0<this.length?this.tail.next=a:this.head=a;this.tail=a;++this.length};c.prototype.unshift=function(a){a={data:a,next:this.head};0===this.length&&(this.tail=a);this.head=a;++this.length};c.prototype.shift=function(){if(0!==this.length){var a=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return a}};c.prototype.clear=function(){this.head=this.tail=null;this.length=0};c.prototype.join=
function(a){if(0===this.length)return"";for(var c=this.head,e=""+c.data;c=c.next;)e+=a+c.data;return e};c.prototype.concat=function(c){if(0===this.length)return a.alloc(0);if(1===this.length)return this.head.data;c=a.allocUnsafe(c>>>0);for(var e=this.head,l=0;e;)e.data.copy(c,l),l+=e.data.length,e=e.next;return c};return c}();c&&c.inspect&&c.inspect.custom&&(q.exports.prototype[c.inspect.custom]=function(){var a=c.inspect({length:this.length});return this.constructor.name+" "+a})},{"safe-buffer":21,
util:2}],19:[function(e,q,g){function a(a,c){a.emit("error",c)}var c=e("process-nextick-args");q.exports={destroy:function(e,g){var l=this,n=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||n)return g?g(e):!e||this._writableState&&this._writableState.errorEmitted||c.nextTick(a,this,e),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(e||null,function(d){!g&&d?(c.nextTick(a,
l,d),l._writableState&&(l._writableState.errorEmitted=!0)):g&&g(d)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":10}],20:[function(e,q,g){q.exports=e("events").EventEmitter},
{events:5}],21:[function(e,q,g){function a(a,c){for(var d in a)c[d]=a[d]}function c(a,c,d){return n(a,c,d)}var l=e("buffer"),n=l.Buffer;n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?q.exports=l:(a(l,g),g.Buffer=c);a(n,c);c.from=function(a,c,d){if("number"===typeof a)throw new TypeError("Argument must not be a number");return n(a,c,d)};c.alloc=function(a,c,d){if("number"!==typeof a)throw new TypeError("Argument must be a number");a=n(a);void 0!==c?"string"===typeof d?a.fill(c,d):a.fill(c):a.fill(0);
return a};c.allocUnsafe=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return n(a)};c.allocUnsafeSlow=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return l.SlowBuffer(a)}},{buffer:3}],22:[function(e,q,g){function a(a){if(!a)return"utf8";for(var b;;)switch(a){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return a;
default:if(b)return;a=(""+a).toLowerCase();b=!0}}function c(c){var e=a(c);if("string"!==typeof e&&(h.isEncoding===r||!r(c)))throw Error("Unknown encoding: "+c);this.encoding=e||c;switch(this.encoding){case "utf16le":this.text=t;this.end=d;c=4;break;case "utf8":this.fillLast=G;c=4;break;case "base64":this.text=k;this.end=z;c=3;break;default:this.write=w;this.end=b;return}this.lastTotal=this.lastNeed=0;this.lastChar=h.allocUnsafe(c)}function l(a){return 127>=a?0:6===a>>5?2:14===a>>4?3:30===a>>3?4:2===
a>>6?-1:-2}function n(a,b,d){var c=b.length-1;if(c<d)return 0;var h=l(b[c]);if(0<=h)return 0<h&&(a.lastNeed=h-1),h;if(--c<d||-2===h)return 0;h=l(b[c]);if(0<=h)return 0<h&&(a.lastNeed=h-2),h;if(--c<d||-2===h)return 0;h=l(b[c]);return 0<=h?(0<h&&(2===h?h=0:a.lastNeed=h-3),h):0}function G(a){var b=this.lastTotal-this.lastNeed;a:if(128!==(a[0]&192)){this.lastNeed=0;var d="\ufffd"}else{if(1<this.lastNeed&&1<a.length){if(128!==(a[1]&192)){this.lastNeed=1;d="\ufffd";break a}if(2<this.lastNeed&&2<a.length&&
128!==(a[2]&192)){this.lastNeed=2;d="\ufffd";break a}}d=void 0}if(void 0!==d)return d;if(this.lastNeed<=a.length)return a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,b,0,a.length);this.lastNeed-=a.length}function t(a,b){if(0===(a.length-b)%2){if(b=a.toString("utf16le",b)){var d=b.charCodeAt(b.length-1);if(55296<=d&&56319>=d)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],b.slice(0,
-1)}return b}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",b,a.length-1)}function d(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):a}function k(a,b){var d=(a.length-b)%3;if(0===d)return a.toString("base64",b);this.lastNeed=3-d;this.lastTotal=3;1===d?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",b,a.length-
d)}function z(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function w(a){return a.toString(this.encoding)}function b(a){return a&&a.length?this.write(a):""}var h=e("safe-buffer").Buffer,r=h.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};g.StringDecoder=
c;c.prototype.write=function(a){if(0===a.length)return"";if(this.lastNeed){var b=this.fillLast(a);if(void 0===b)return"";var d=this.lastNeed;this.lastNeed=0}else d=0;return d<a.length?b?b+this.text(a,d):this.text(a,d):b||""};c.prototype.end=function(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a};c.prototype.text=function(a,b){var d=n(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=d;d=a.length-(d-this.lastNeed);a.copy(this.lastChar,0,d);return a.toString("utf8",
b,d)};c.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length}},{"safe-buffer":21}],23:[function(e,q,g){q.exports=e("./readable").PassThrough},{"./readable":24}],24:[function(e,q,g){g=q.exports=e("./lib/_stream_readable.js");g.Stream=g;g.Readable=g;g.Writable=e("./lib/_stream_writable.js");
g.Duplex=e("./lib/_stream_duplex.js");g.Transform=e("./lib/_stream_transform.js");g.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":13,"./lib/_stream_passthrough.js":14,"./lib/_stream_readable.js":15,"./lib/_stream_transform.js":16,"./lib/_stream_writable.js":17}],25:[function(e,q,g){q.exports=e("./readable").Transform},{"./readable":24}],26:[function(e,q,g){q.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":17}],27:[function(e,q,g){function a(a,c){for(var d in a)c[d]=
a[d]}function c(a,c,d){return n(a,c,d)}var l=e("buffer"),n=l.Buffer;n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?q.exports=l:(a(l,g),g.Buffer=c);c.prototype=Object.create(n.prototype);a(n,c);c.from=function(a,c,d){if("number"===typeof a)throw new TypeError("Argument must not be a number");return n(a,c,d)};c.alloc=function(a,c,d){if("number"!==typeof a)throw new TypeError("Argument must be a number");a=n(a);void 0!==c?"string"===typeof d?a.fill(c,d):a.fill(c):a.fill(0);return a};c.allocUnsafe=
function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return n(a)};c.allocUnsafeSlow=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return l.SlowBuffer(a)}},{buffer:3}],28:[function(e,q,g){(function(a){(function(c){function l(a,b){if(!(this instanceof l))return new l(a,b);for(var d=0,h=A.length;d<h;d++)this[A[d]]="";this.q=this.c="";this.bufferCheckPosition=c.MAX_BUFFER_LENGTH;this.opt=b||{};this.opt.lowercase=this.opt.lowercase||
this.opt.lowercasetags;this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase";this.tags=[];this.closed=this.closedRoot=this.sawRoot=!1;this.tag=this.error=null;this.strict=!!a;this.noscript=!(!a&&!this.opt.noscript);this.state=p.BEGIN;this.ENTITIES=(this.strictEntities=this.opt.strictEntities)?Object.create(c.XML_ENTITIES):Object.create(c.ENTITIES);this.attribList=[];this.opt.xmlns&&(this.ns=Object.create(J));if(this.trackPosition=!1!==this.opt.position)this.position=this.line=this.column=
0;this.onready&&this.onready(void 0)}function g(a,b){if(!(this instanceof g))return new g(a,b);K.apply(this);this._parser=new l(a,b);this.readable=this.writable=!0;var d=this;this._parser.onend=function(){d.emit("end")};this._parser.onerror=function(a){d.emit("error",a);d._parser.error=null};this._decoder=null;H.forEach(function(a){Object.defineProperty(d,"on"+a,{get:function(){return d._parser["on"+a]},set:function(b){if(!b)return d.removeAllListeners(a),d._parser["on"+a]=b;d.on(a,b)},enumerable:!0,
configurable:!1})})}function q(a){return a.split("").reduce(function(a,b){a[b]=!0;return a},{})}function t(a,b){return"[object RegExp]"===Object.prototype.toString.call(a)?!!b.match(a):a[b]}function d(a,b,d){a.textNode&&k(a);a[b]&&a[b](d)}function k(a){a.textNode=z(a.opt,a.textNode);a.textNode&&a.ontext&&a.ontext(a.textNode);a.textNode=""}function z(a,b){a.trim&&(b=b.trim());a.normalize&&(b=b.replace(/\s+/g," "));return b}function w(a,b){k(a);a.trackPosition&&(b+="\nLine: "+a.line+"\nColumn: "+a.column+
"\nChar: "+a.c);b=Error(b);a.error=b;a.onerror&&a.onerror(b);return a}function b(a){a.sawRoot&&!a.closedRoot&&h(a,"Unclosed root tag");a.state!==p.BEGIN&&a.state!==p.BEGIN_WHITESPACE&&a.state!==p.TEXT&&w(a,"Unexpected end");k(a);a.c="";a.closed=!0;a.onend&&a.onend(void 0);l.call(a,a.strict,a.opt);return a}function h(a,b){if("object"!==typeof a||!(a instanceof l))throw Error("bad call to strictFail");a.strict&&w(a,b)}function r(a,b){var d=0>a.indexOf(":")?["",a]:a.split(":"),c=d[0];d=d[1];b&&"xmlns"===
a&&(c="xmlns",d="");return{prefix:c,local:d}}function u(a){a.strict||(a.attribName=a.attribName[a.looseCase]());if(-1===a.attribList.indexOf(a.attribName)&&!a.tag.attributes.hasOwnProperty(a.attribName))if(a.opt.xmlns){var b=r(a.attribName,!0),c=b.local;if("xmlns"===b.prefix)if("xml"===c&&a.attribValue!==I)h(a,"xml: prefix must be bound to "+I+"\nActual: "+a.attribValue);else if("xmlns"===c&&a.attribValue!==f)h(a,"xmlns: prefix must be bound to "+f+"\nActual: "+a.attribValue);else{b=a.tag;var e=a.tags[a.tags.length-
1]||a;b.ns===e.ns&&(b.ns=Object.create(e.ns));b.ns[c]=a.attribValue}a.attribList.push([a.attribName,a.attribValue])}else a.tag.attributes[a.attribName]=a.attribValue,d(a,"onattribute",{name:a.attribName,value:a.attribValue});a.attribName=a.attribValue=""}function B(a,b){if(a.opt.xmlns){var c=a.tag,e=r(a.tagName);c.prefix=e.prefix;c.local=e.local;c.uri=c.ns[e.prefix]||"";c.prefix&&!c.uri&&(h(a,"Unbound namespace prefix: "+JSON.stringify(a.tagName)),c.uri=e.prefix);e=a.tags[a.tags.length-1]||a;c.ns&&
e.ns!==c.ns&&Object.keys(c.ns).forEach(function(b){d(a,"onopennamespace",{prefix:b,uri:c.ns[b]})});e=0;for(var k=a.attribList.length;e<k;e++){var f=a.attribList[e],l=f[0],g=f[1],u=r(l,!0);f=u.prefix;var m=""===f?"":c.ns[f]||"";g={name:l,value:g,prefix:f,local:u.local,uri:m};f&&"xmlns"!==f&&!m&&(h(a,"Unbound namespace prefix: "+JSON.stringify(f)),g.uri=f);a.tag.attributes[l]=g;d(a,"onattribute",g)}a.attribList.length=0}a.tag.isSelfClosing=!!b;a.sawRoot=!0;a.tags.push(a.tag);d(a,"onopentag",a.tag);
b||(a.noscript||"script"!==a.tagName.toLowerCase()?a.state=p.TEXT:a.state=p.SCRIPT,a.tag=null,a.tagName="");a.attribName=a.attribValue="";a.attribList.length=0}function D(a){if(a.tagName){if(a.script){if("script"!==a.tagName){a.script+="</"+a.tagName+">";a.tagName="";a.state=p.SCRIPT;return}d(a,"onscript",a.script);a.script=""}var b=a.tags.length,c=a.tagName;a.strict||(c=c[a.looseCase]());for(var e=c;b--;)if(a.tags[b].name!==e)h(a,"Unexpected close tag");else break;if(0>b)h(a,"Unmatched closing tag: "+
a.tagName),a.textNode+="</"+a.tagName+">";else{a.tagName=c;for(c=a.tags.length;c-- >b;){var k=a.tag=a.tags.pop();a.tagName=a.tag.name;d(a,"onclosetag",a.tagName);for(var f in k.ns);e=a.tags[a.tags.length-1]||a;a.opt.xmlns&&k.ns!==e.ns&&Object.keys(k.ns).forEach(function(b){d(a,"onclosenamespace",{prefix:b,uri:k.ns[b]})})}0===b&&(a.closedRoot=!0);a.tagName=a.attribValue=a.attribName="";a.attribList.length=0}}else h(a,"Weird empty close tag."),a.textNode+="</>";a.state=p.TEXT}function x(a){var b=a.entity,
d=b.toLowerCase(),c="";if(a.ENTITIES[b])return a.ENTITIES[b];if(a.ENTITIES[d])return a.ENTITIES[d];b=d;if("#"===b.charAt(0))if("x"===b.charAt(1)){b=b.slice(2);var e=parseInt(b,16);c=e.toString(16)}else b=b.slice(1),e=parseInt(b,10),c=e.toString(10);b=b.replace(/^0+/,"");return c.toLowerCase()!==b?(h(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCodePoint(e)}function N(a,b){"<"===b?(a.state=p.OPEN_WAKA,a.startTagPosition=a.position):t(C,b)||(h(a,"Non-whitespace before first tag."),a.textNode=
b,a.state=p.TEXT)}function M(a,b){var d="";b<a.length&&(d=a.charAt(b));return d}c.parser=function(a,b){return new l(a,b)};c.SAXParser=l;c.SAXStream=g;c.createStream=function(a,b){return new g(a,b)};c.MAX_BUFFER_LENGTH=65536;var A="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" ");c.EVENTS="text processinginstruction sgmldeclaration doctype comment opentagstart attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" ");
Object.create||(Object.create=function(a){function b(){}b.prototype=a;return new b});Object.keys||(Object.keys=function(a){var b=[],d;for(d in a)a.hasOwnProperty(d)&&b.push(d);return b});l.prototype={end:function(){b(this)},write:function(a){if(this.error)throw this.error;if(this.closed)return w(this,"Cannot write after close. Assign an onready handler.");if(null===a)return b(this);"object"===typeof a&&(a=a.toString());for(var e=0,f;;){this.c=f=M(a,e++);if(!f)break;this.trackPosition&&(this.position++,
"\n"===f?(this.line++,this.column=0):this.column++);switch(this.state){case p.BEGIN:this.state=p.BEGIN_WHITESPACE;if("\ufeff"===f)continue;N(this,f);continue;case p.BEGIN_WHITESPACE:N(this,f);continue;case p.TEXT:if(this.sawRoot&&!this.closedRoot){for(var l=e-1;f&&"<"!==f&&"&"!==f;)(f=M(a,e++))&&this.trackPosition&&(this.position++,"\n"===f?(this.line++,this.column=0):this.column++);this.textNode+=a.substring(l,e-1)}"<"!==f||this.sawRoot&&this.closedRoot&&!this.strict?(t(C,f)||this.sawRoot&&!this.closedRoot||
h(this,"Text data outside of root node."),"&"===f?this.state=p.TEXT_ENTITY:this.textNode+=f):(this.state=p.OPEN_WAKA,this.startTagPosition=this.position);continue;case p.SCRIPT:"<"===f?this.state=p.SCRIPT_ENDING:this.script+=f;continue;case p.SCRIPT_ENDING:"/"===f?this.state=p.CLOSE_TAG:(this.script+="<"+f,this.state=p.SCRIPT);continue;case p.OPEN_WAKA:"!"===f?(this.state=p.SGML_DECL,this.sgmlDecl=""):t(C,f)||(t(T,f)?(this.state=p.OPEN_TAG,this.tagName=f):"/"===f?(this.state=p.CLOSE_TAG,this.tagName=
""):"?"===f?(this.state=p.PROC_INST,this.procInstName=this.procInstBody=""):(h(this,"Unencoded <"),this.startTagPosition+1<this.position&&(f=Array(this.position-this.startTagPosition).join(" ")+f),this.textNode+="<"+f,this.state=p.TEXT));continue;case p.SGML_DECL:(this.sgmlDecl+f).toUpperCase()===V?(d(this,"onopencdata"),this.state=p.CDATA,this.cdata=this.sgmlDecl=""):"--"===this.sgmlDecl+f?(this.state=p.COMMENT,this.sgmlDecl=this.comment=""):(this.sgmlDecl+f).toUpperCase()===m?(this.state=p.DOCTYPE,
(this.doctype||this.sawRoot)&&h(this,"Inappropriately located doctype declaration"),this.sgmlDecl=this.doctype=""):">"===f?(d(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=p.TEXT):(t(F,f)&&(this.state=p.SGML_DECL_QUOTED),this.sgmlDecl+=f);continue;case p.SGML_DECL_QUOTED:f===this.q&&(this.state=p.SGML_DECL,this.q="");this.sgmlDecl+=f;continue;case p.DOCTYPE:">"===f?(this.state=p.TEXT,d(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=f,"["===f?this.state=p.DOCTYPE_DTD:
t(F,f)&&(this.state=p.DOCTYPE_QUOTED,this.q=f));continue;case p.DOCTYPE_QUOTED:this.doctype+=f;f===this.q&&(this.q="",this.state=p.DOCTYPE);continue;case p.DOCTYPE_DTD:this.doctype+=f;"]"===f?this.state=p.DOCTYPE:t(F,f)&&(this.state=p.DOCTYPE_DTD_QUOTED,this.q=f);continue;case p.DOCTYPE_DTD_QUOTED:this.doctype+=f;f===this.q&&(this.state=p.DOCTYPE_DTD,this.q="");continue;case p.COMMENT:"-"===f?this.state=p.COMMENT_ENDING:this.comment+=f;continue;case p.COMMENT_ENDING:"-"===f?(this.state=p.COMMENT_ENDED,
(this.comment=z(this.opt,this.comment))&&d(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+f,this.state=p.COMMENT);continue;case p.COMMENT_ENDED:">"!==f?(h(this,"Malformed comment"),this.comment+="--"+f,this.state=p.COMMENT):this.state=p.TEXT;continue;case p.CDATA:"]"===f?this.state=p.CDATA_ENDING:this.cdata+=f;continue;case p.CDATA_ENDING:"]"===f?this.state=p.CDATA_ENDING_2:(this.cdata+="]"+f,this.state=p.CDATA);continue;case p.CDATA_ENDING_2:">"===f?(this.cdata&&d(this,"oncdata",
this.cdata),d(this,"onclosecdata"),this.cdata="",this.state=p.TEXT):"]"===f?this.cdata+="]":(this.cdata+="]]"+f,this.state=p.CDATA);continue;case p.PROC_INST:"?"===f?this.state=p.PROC_INST_ENDING:t(C,f)?this.state=p.PROC_INST_BODY:this.procInstName+=f;continue;case p.PROC_INST_BODY:if(!this.procInstBody&&t(C,f))continue;else"?"===f?this.state=p.PROC_INST_ENDING:this.procInstBody+=f;continue;case p.PROC_INST_ENDING:">"===f?(d(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),
this.procInstName=this.procInstBody="",this.state=p.TEXT):(this.procInstBody+="?"+f,this.state=p.PROC_INST_BODY);continue;case p.OPEN_TAG:if(t(P,f))this.tagName+=f;else{this.strict||(this.tagName=this.tagName[this.looseCase]());l=this.tags[this.tags.length-1]||this;var r=this.tag={name:this.tagName,attributes:{}};this.opt.xmlns&&(r.ns=l.ns);this.attribList.length=0;d(this,"onopentagstart",r);">"===f?B(this):"/"===f?this.state=p.OPEN_TAG_SLASH:(t(C,f)||h(this,"Invalid character in tag name"),this.state=
p.ATTRIB)}continue;case p.OPEN_TAG_SLASH:">"===f?(B(this,!0),D(this)):(h(this,"Forward-slash in opening tag not followed by >"),this.state=p.ATTRIB);continue;case p.ATTRIB:if(t(C,f))continue;else">"===f?B(this):"/"===f?this.state=p.OPEN_TAG_SLASH:t(T,f)?(this.attribName=f,this.attribValue="",this.state=p.ATTRIB_NAME):h(this,"Invalid attribute name");continue;case p.ATTRIB_NAME:"="===f?this.state=p.ATTRIB_VALUE:">"===f?(h(this,"Attribute without value"),this.attribValue=this.attribName,u(this),B(this)):
t(C,f)?this.state=p.ATTRIB_NAME_SAW_WHITE:t(P,f)?this.attribName+=f:h(this,"Invalid attribute name");continue;case p.ATTRIB_NAME_SAW_WHITE:if("="===f)this.state=p.ATTRIB_VALUE;else if(t(C,f))continue;else h(this,"Attribute without value"),this.attribValue=this.tag.attributes[this.attribName]="",d(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===f?B(this):t(T,f)?(this.attribName=f,this.state=p.ATTRIB_NAME):(h(this,"Invalid attribute name"),this.state=p.ATTRIB);continue;
case p.ATTRIB_VALUE:if(t(C,f))continue;else t(F,f)?(this.q=f,this.state=p.ATTRIB_VALUE_QUOTED):(h(this,"Unquoted attribute value"),this.state=p.ATTRIB_VALUE_UNQUOTED,this.attribValue=f);continue;case p.ATTRIB_VALUE_QUOTED:if(f!==this.q){"&"===f?this.state=p.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=f;continue}u(this);this.q="";this.state=p.ATTRIB_VALUE_CLOSED;continue;case p.ATTRIB_VALUE_CLOSED:t(C,f)?this.state=p.ATTRIB:">"===f?B(this):"/"===f?this.state=p.OPEN_TAG_SLASH:t(T,f)?(h(this,"No whitespace between attributes"),
this.attribName=f,this.attribValue="",this.state=p.ATTRIB_NAME):h(this,"Invalid attribute name");continue;case p.ATTRIB_VALUE_UNQUOTED:if(!t(y,f)){"&"===f?this.state=p.ATTRIB_VALUE_ENTITY_U:this.attribValue+=f;continue}u(this);">"===f?B(this):this.state=p.ATTRIB;continue;case p.CLOSE_TAG:if(this.tagName)">"===f?D(this):t(P,f)?this.tagName+=f:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=p.SCRIPT):(t(C,f)||h(this,"Invalid tagname in closing tag"),this.state=p.CLOSE_TAG_SAW_WHITE);
else if(t(C,f))continue;else t(T,f)?this.tagName=f:this.script?(this.script+="</"+f,this.state=p.SCRIPT):h(this,"Invalid tagname in closing tag.");continue;case p.CLOSE_TAG_SAW_WHITE:if(t(C,f))continue;">"===f?D(this):h(this,"Invalid characters in closing tag");continue;case p.TEXT_ENTITY:case p.ATTRIB_VALUE_ENTITY_Q:case p.ATTRIB_VALUE_ENTITY_U:switch(this.state){case p.TEXT_ENTITY:var g=p.TEXT;var Q="textNode";break;case p.ATTRIB_VALUE_ENTITY_Q:g=p.ATTRIB_VALUE_QUOTED;Q="attribValue";break;case p.ATTRIB_VALUE_ENTITY_U:g=
p.ATTRIB_VALUE_UNQUOTED,Q="attribValue"}";"===f?(this[Q]+=x(this),this.entity="",this.state=g):t(this.entity.length?Z:aa,f)?this.entity+=f:(h(this,"Invalid character in entity name"),this[Q]+="&"+this.entity+f,this.entity="",this.state=g);continue;default:throw Error(this,"Unknown state: "+this.state);}}if(this.position>=this.bufferCheckPosition){a=Math.max(c.MAX_BUFFER_LENGTH,10);f=e=0;for(g=A.length;f<g;f++){Q=this[A[f]].length;if(Q>a)switch(A[f]){case "textNode":k(this);break;case "cdata":d(this,
"oncdata",this.cdata);this.cdata="";break;case "script":d(this,"onscript",this.script);this.script="";break;default:w(this,"Max buffer length exceeded: "+A[f])}e=Math.max(e,Q)}this.bufferCheckPosition=c.MAX_BUFFER_LENGTH-e+this.position}return this},resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){k(this);""!==this.cdata&&(d(this,"oncdata",this.cdata),this.cdata="");""!==this.script&&(d(this,"onscript",this.script),this.script="")}};try{var K=
e("stream").Stream}catch(R){K=function(){}}var H=c.EVENTS.filter(function(a){return"error"!==a&&"end"!==a});g.prototype=Object.create(K.prototype,{constructor:{value:g}});g.prototype.write=function(b){"function"===typeof a&&"function"===typeof a.isBuffer&&a.isBuffer(b)&&(this._decoder||(this._decoder=new (e("string_decoder").StringDecoder)("utf8")),b=this._decoder.write(b));this._parser.write(b.toString());this.emit("data",b);return!0};g.prototype.end=function(a){a&&a.length&&this.write(a);this._parser.end();
return!0};g.prototype.on=function(a,b){var d=this;d._parser["on"+a]||-1===H.indexOf(a)||(d._parser["on"+a]=function(){var b=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);b.splice(0,0,a);d.emit.apply(d,b)});return K.prototype.on.call(d,a,b)};var C="\r\n\t ",E="0124356789",U="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",F="'\"",y=C+">",V="[CDATA[",m="DOCTYPE",I="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/2000/xmlns/",J={xml:I,xmlns:f};C=q(C);E=q(E);U=q(U);
var T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,P=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,aa=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
Z=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;F=q(F);y=q(y);var p=0;c.STATE={BEGIN:p++,BEGIN_WHITESPACE:p++,TEXT:p++,TEXT_ENTITY:p++,OPEN_WAKA:p++,SGML_DECL:p++,SGML_DECL_QUOTED:p++,DOCTYPE:p++,DOCTYPE_QUOTED:p++,DOCTYPE_DTD:p++,DOCTYPE_DTD_QUOTED:p++,COMMENT_STARTING:p++,COMMENT:p++,COMMENT_ENDING:p++,COMMENT_ENDED:p++,CDATA:p++,CDATA_ENDING:p++,CDATA_ENDING_2:p++,
PROC_INST:p++,PROC_INST_BODY:p++,PROC_INST_ENDING:p++,OPEN_TAG:p++,OPEN_TAG_SLASH:p++,ATTRIB:p++,ATTRIB_NAME:p++,ATTRIB_NAME_SAW_WHITE:p++,ATTRIB_VALUE:p++,ATTRIB_VALUE_QUOTED:p++,ATTRIB_VALUE_CLOSED:p++,ATTRIB_VALUE_UNQUOTED:p++,ATTRIB_VALUE_ENTITY_Q:p++,ATTRIB_VALUE_ENTITY_U:p++,CLOSE_TAG:p++,CLOSE_TAG_SAW_WHITE:p++,SCRIPT:p++,SCRIPT_ENDING:p++};c.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};c.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,
Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,
ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,
Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,
zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,
ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(c.ENTITIES).forEach(function(a){var b=c.ENTITIES[a];b="number"===
typeof b?String.fromCharCode(b):b;c.ENTITIES[a]=b});for(var Y in c.STATE)c.STATE[c.STATE[Y]]=Y;p=c.STATE;String.fromCodePoint||function(){var a=String.fromCharCode,b=Math.floor,d=function(){var d=[],c=-1,h=arguments.length;if(!h)return"";for(var f="";++c<h;){var e=Number(arguments[c]);if(!isFinite(e)||0>e||1114111<e||b(e)!==e)throw RangeError("Invalid code point: "+e);if(65535>=e)d.push(e);else{e-=65536;var k=(e>>10)+55296;e=e%1024+56320;d.push(k,e)}if(c+1===h||16384<d.length)f+=a.apply(null,d),d.length=
0}return f};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:d,configurable:!0,writable:!0}):String.fromCodePoint=d}()})(g)}).call(this,e("buffer").Buffer)},{buffer:3,stream:29,string_decoder:30}],29:[function(e,q,g){function a(){c.call(this)}q.exports=a;var c=e("events").EventEmitter;e("inherits")(a,c);a.Readable=e("readable-stream/readable.js");a.Writable=e("readable-stream/writable.js");a.Duplex=e("readable-stream/duplex.js");a.Transform=e("readable-stream/transform.js");
a.PassThrough=e("readable-stream/passthrough.js");a.Stream=a;a.prototype.pipe=function(a,e){function l(d){a.writable&&!1===a.write(d)&&b.pause&&b.pause()}function g(){b.readable&&b.resume&&b.resume()}function d(){h||(h=!0,a.end())}function k(){h||(h=!0,"function"===typeof a.destroy&&a.destroy())}function n(a){w();if(0===c.listenerCount(this,"error"))throw a;}function w(){b.removeListener("data",l);a.removeListener("drain",g);b.removeListener("end",d);b.removeListener("close",k);b.removeListener("error",
n);a.removeListener("error",n);b.removeListener("end",w);b.removeListener("close",w);a.removeListener("close",w)}var b=this;b.on("data",l);a.on("drain",g);a._isStdio||e&&!1===e.end||(b.on("end",d),b.on("close",k));var h=!1;b.on("error",n);a.on("error",n);b.on("end",w);b.on("close",w);a.on("close",w);a.emit("pipe",b);return a}},{events:5,inherits:7,"readable-stream/duplex.js":12,"readable-stream/passthrough.js":23,"readable-stream/readable.js":24,"readable-stream/transform.js":25,"readable-stream/writable.js":26}],
30:[function(e,q,g){arguments[4][22][0].apply(g,arguments)},{dup:22,"safe-buffer":27}],31:[function(e,q,g){(function(a,c){function l(a,d){this._id=a;this._clearFn=d}var n=e("process/browser.js").nextTick,q=Function.prototype.apply,t=Array.prototype.slice,d={},k=0;g.setTimeout=function(){return new l(q.call(setTimeout,window,arguments),clearTimeout)};g.setInterval=function(){return new l(q.call(setInterval,window,arguments),clearInterval)};g.clearTimeout=g.clearInterval=function(a){a.close()};l.prototype.unref=
l.prototype.ref=function(){};l.prototype.close=function(){this._clearFn.call(window,this._id)};g.enroll=function(a,d){clearTimeout(a._idleTimeoutId);a._idleTimeout=d};g.unenroll=function(a){clearTimeout(a._idleTimeoutId);a._idleTimeout=-1};g._unrefActive=g.active=function(a){clearTimeout(a._idleTimeoutId);var d=a._idleTimeout;0<=d&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},d))};g.setImmediate="function"===typeof a?a:function(a){var c=k++,b=2>arguments.length?!1:t.call(arguments,
1);d[c]=!0;n(function(){d[c]&&(b?a.apply(null,b):a.call(null),g.clearImmediate(c))});return c};g.clearImmediate="function"===typeof c?c:function(a){delete d[a]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":11,timers:31}],32:[function(e,q,g){(function(a){function c(c){try{if(!a.localStorage)return!1}catch(n){return!1}c=a.localStorage[c];return null==c?!1:"true"===String(c).toLowerCase()}q.exports=function(a,e){if(c("noDeprecation"))return a;var g=!1;return function(){if(!g){if(c("throwDeprecation"))throw Error(e);
c("traceDeprecation")?console.trace(e):console.warn(e);g=!0}return a.apply(this,arguments)}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],33:[function(e,q,g){(function(a,c,e,g,q){function l(a,b){var d=a.styleAttrs&&a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===a.kind)!d&&b&&(a.styleAttrs||(a.styleAttrs={}),a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=b);else if(d&&delete a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],
a.contents)for(var c=0;c<a.contents.length;c++)l(a.contents[c],d||b)}function d(a){if("contents"in a){var b="styleAttrs"in a?a.styleAttrs[g.byName.ruby.qname]:null;b="span"===a.kind&&("container"===b||"textContainer"===b||"baseContainer"===b);for(var c=a.contents.length-1;0<=c;c--)!b||"styleAttrs"in a.contents[c]&&g.byName.ruby.qname in a.contents[c].styleAttrs?d(a.contents[c]):delete a.contents[c]}}function k(a,b,d,c){var e=c&&"seq"===c.timeContainer,h=0;c&&(h=e&&d?d.end:c.begin);b.begin=b.explicit_begin?
b.explicit_begin+h:h;d=b.begin;c=null;for(var f in b.sets)k(a,b.sets[f],c,b),d="seq"===b.timeContainer?b.sets[f].end:Math.max(d,b.sets[f].end),c=b.sets[f];if("contents"in b)for(var g in b.contents)k(a,b.contents[g],c,b),d="seq"===b.timeContainer?b.contents[g].end:Math.max(d,b.contents[g].end),c=b.contents[g];else d=e?b.begin:Number.POSITIVE_INFINITY;b.end=null!==b.explicit_end&&null!==b.explicit_dur?Math.min(b.begin+b.explicit_dur,h+b.explicit_end):null===b.explicit_end&&null!==b.explicit_dur?b.begin+
b.explicit_dur:null!==b.explicit_end&&null===b.explicit_dur?h+b.explicit_end:d;delete b.explicit_begin;delete b.explicit_dur;delete b.explicit_end;a._registerEvent(b)}function n(a){this.node=a}function w(){this.events=[];this.head=new b;this.body=null}function b(){this.styling=new h;this.layout=new B}function h(){this.styles={};this.initials={}}function r(){this.styleRefs=this.styleAttrs=this.id=null}function u(){this.styleAttrs=null}function B(){this.regions={}}function D(a,b){this.kind="image";
this.src=a;this.type=b}function x(a){this.id=a}function N(a){this.regionID=a}function M(a){this.styleAttrs=a}function A(a){this.sets=a}function K(a){this.contents=a}function H(a,b,d){this.explicit_begin=a;this.explicit_end=b;this.explicit_dur=d}function C(){this.kind="body"}function E(){this.kind="div"}function G(){this.kind="p"}function F(){this.kind="span"}function y(){this.kind="span"}function V(){this.kind="br"}function m(){}function I(){}function f(a){var b=null;a&&(a=a.attributes["xml:id"]||
a.attributes.id)&&(b=a.value||null);return b}function J(a){return a&&"style"in a.attributes?a.attributes.style.value.split(" "):[]}function T(a,b){var d={};if(null!==a)for(var c in a.attributes){var e=a.attributes[c].uri+" "+a.attributes[c].local,h=g.byQName[e];if(void 0!==h){var f=h.parse(a.attributes[c].value);null!==f?(d[e]=f,h===g.byName.zIndex&&S(b,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):L(b,"Cannot parse styling attribute "+e+" --\x3e "+a.attributes[c].value)}}return d}
function P(a,b,d){for(var c in a.attributes)if(a.attributes[c].uri===b&&a.attributes[c].local===d)return a.attributes[c].value;return null}function aa(a,b){a=P(a,e.ns_tts,"extent");if(null===a)return null;var d=a.split(" ");if(2!==d.length)return S(b,"Malformed extent (ignoring)"),null;a=q.parseLength(d[0]);d=q.parseLength(d[1]);return d&&a?{h:d,w:a}:(S(b,"Malformed extent values (ignoring)"),null)}function Z(a,b,d){var c=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,e=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,
h=/^(\d+(?:\.\d+)?)t$/,f=/^(\d+(?:\.\d+)?)ms$/,k=/^(\d+(?:\.\d+)?)s$/,g=/^(\d+(?:\.\d+)?)h$/,r=/^(\d+(?:\.\d+)?)m$/,l,u=null;null!==(l=/^(\d+(?:\.\d+)?)f$/.exec(d))?null!==b&&(u=parseFloat(l[1])/b):null!==(l=h.exec(d))?null!==a&&(u=parseFloat(l[1])/a):null!==(l=f.exec(d))?u=parseFloat(l[1])/1E3:null!==(l=k.exec(d))?u=parseFloat(l[1]):null!==(l=g.exec(d))?u=3600*parseFloat(l[1]):null!==(l=r.exec(d))?u=60*parseFloat(l[1]):null!==(l=c.exec(d))?u=3600*parseInt(l[1])+60*parseInt(l[2])+parseFloat(l[3]):
null!==(l=e.exec(d))&&null!==b&&(u=3600*parseInt(l[1])+60*parseInt(l[2])+parseInt(l[3])+(null===l[4]?0:parseInt(l[4])/b));return u}function p(a,b,d){for(;0<b.styleRefs.length;){var c=b.styleRefs.pop();c in a.styles?(p(a,a.styles[c],d),R(a.styles[c].styleAttrs,b.styleAttrs)):L(d,"Non-existant style id referenced")}}function Y(a,b,d,c){for(var e=b.length-1;0<=e;e--){var h=b[e];h in a.styles?R(a.styles[h].styleAttrs,d):L(c,"Non-existant style id referenced")}}function R(a,b){for(var d in a)d in b||(b[d]=
a[d])}function S(a,b){if(a&&a.warn&&a.warn(b))throw b;}function L(a,b){if(a&&a.error&&a.error(b))throw b;}function O(a,b){a&&a.fatal&&a.fatal(b);throw b;}function ba(a,b){for(var d=0,c=a.length-1,e;d<=c;){e=Math.floor((d+c)/2);var h=a[e];if(h<b)d=e+1;else if(h>b)c=e-1;else return{found:!0,index:e}}return{found:!1,index:d}}a.fromXML=function(a,f,z){var q=c.parser(!0,{xmlns:!0}),v=[],A=[],X=[],W=0,x=null;q.onclosetag=function(a){if(v[0]instanceof h)for(var b in v[0].styles)p(v[0],v[0].styles[b],f);
else if(v[0]instanceof G||v[0]instanceof F){if(1<v[0].contents.length){a=[v[0].contents[0]];for(b=1;b<v[0].contents.length;b++)v[0].contents[b]instanceof y&&a[a.length-1]instanceof y?a[a.length-1].text+=v[0].contents[b].text:a.push(v[0].contents[b]);v[0].contents=a}v[0]instanceof F&&1===v[0].contents.length&&v[0].contents[0]instanceof y&&(v[0].text=v[0].contents[0].text,delete v[0].contents)}else if(v[0]instanceof n)if(v[0].node.uri===e.ns_tt&&"metadata"===v[0].node.local)W--;else if(0<W&&z&&"onCloseTag"in
z)z.onCloseTag();X.shift();A.shift();v.shift()};q.ontext=function(a){if(void 0!==v[0])if(v[0]instanceof F||v[0]instanceof G){if(v[0]instanceof F){var b=v[0].styleAttrs[g.byName.ruby.qname];if("container"===b||"textContainer"===b||"baseContainer"===b)return}b=new y;b.initFromText(x,v[0],a,X[0],f);v[0].contents.push(b)}else if(v[0]instanceof n&&0<W&&z&&"onText"in z)z.onText(a)};q.onopentag=function(a){function d(a){e.ttaf_map[a.uri]&&(a.uri=e.ttaf_map[a.uri])}var c=a.attributes["xml:space"];c?X.unshift(c.value):
0===X.length?X.unshift("default"):X.unshift(X[0]);(c=a.attributes["xml:lang"])?A.unshift(c.value):0===A.length?A.unshift(""):A.unshift(A[0]);d(a);if(a.attributes)for(var k in a.attributes)a.attributes.hasOwnProperty(k)&&d(a.attributes[k]);if(a.uri===e.ns_tt)if("tt"===a.local)null!==x&&O(f,"Two <tt> elements at ("+this.line+","+this.column+")"),x=new w,x.initFromNode(a,f),v.unshift(x);else if("head"===a.local)v[0]instanceof w||O(f,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+
")"),v.unshift(x.head);else if("styling"===a.local)v[0]instanceof b||O(f,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),v.unshift(x.head.styling);else if("style"===a.local)if(v[0]instanceof h){var l=new r;l.initFromNode(a,f);l.id?x.head.styling.styles[l.id]=l:L(f,"<style> element missing @id attribute");v.unshift(l)}else v[0]instanceof m?(l=new r,l.initFromNode(a,f),R(l.styleAttrs,v[0].styleAttrs),v.unshift(l)):O(f,"Parent of <style> element is not <styling> or <region> at ("+
this.line+","+this.column+")");else if("initial"===a.local)if(v[0]instanceof h){k=new u;k.initFromNode(a,f);for(l in k.styleAttrs)x.head.styling.initials[l]=k.styleAttrs[l];v.unshift(k)}else O(f,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===a.local)v[0]instanceof b||O(f,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),v.unshift(x.head.layout);else if("region"===a.local)v[0]instanceof B||O(f,"Parent of <region> element is not <layout> at "+
this.line+","+this.column+")"),l=new m,l.initFromNode(x,a,f),!l.id||l.id in x.head.layout.regions?L(f,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):x.head.layout.regions[l.id]=l,v.unshift(l);else if("body"===a.local)v[0]instanceof w||O(f,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==x.body&&O(f,"Second <body> element at "+this.line+","+this.column+")"),l=new C,l.initFromNode(x,a,f),x.body=l,v.unshift(l);else if("div"===a.local){v[0]instanceof
E||v[0]instanceof C||O(f,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");l=new E;l.initFromNode(x,v[0],a,f);if(k=l.styleAttrs[g.byName.backgroundImage.qname])l.contents.push(new D(k)),delete l.styleAttrs[g.byName.backgroundImage.qname];v[0].contents.push(l);v.unshift(l)}else"image"===a.local?(v[0]instanceof E||O(f,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),l=new D,l.initFromNode(x,v[0],a,f),v[0].contents.push(l),v.unshift(l)):"p"===
a.local?(v[0]instanceof E||O(f,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),l=new G,l.initFromNode(x,v[0],a,f),v[0].contents.push(l),v.unshift(l)):"span"===a.local?(v[0]instanceof F||v[0]instanceof G||O(f,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),l=new F,l.initFromNode(x,v[0],a,X[0],f),v[0].contents.push(l),v.unshift(l)):"br"===a.local?(v[0]instanceof F||v[0]instanceof G||O(f,"Parent of <br> element is not <span> or <p> at "+this.line+
","+this.column+")"),l=new V,l.initFromNode(x,v[0],a,f),v[0].contents.push(l),v.unshift(l)):"set"===a.local?(v[0]instanceof F||v[0]instanceof G||v[0]instanceof E||v[0]instanceof C||v[0]instanceof m||v[0]instanceof V||O(f,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),l=new I,l.initFromNode(x,v[0],a,f),v[0].sets.push(l),v.unshift(l)):v.unshift(new n(a));else v.unshift(new n(a));if(v[0]instanceof n)if(a.uri===e.ns_tt&&"metadata"===a.local)W++;else if(0<
W&&z&&"onOpenTag"in z){l=[];for(var p in a.attributes)l[a.attributes[p].uri+" "+a.attributes[p].local]={uri:a.attributes[p].uri,local:a.attributes[p].local,value:a.attributes[p].value};z.onOpenTag(a.uri,a.local,l)}};q.write(a).close();delete x.head.styling.styles;a=!1;for(var t in x.head.layout.regions){a=!0;break}a||(t=m.prototype.createDefaultRegion(x,f),x.head.layout.regions[t.id]=t);for(var Q in x.head.layout.regions)k(x,x.head.layout.regions[Q],null,null);x.body&&k(x,x.body,null,null);x.body&&
d(x.body);x.body&&l(x.body);return x};w.prototype.initFromNode=function(a,b){var d=P(a,e.ns_ttp,"cellResolution"),c=15;var f=32;null!==d&&(d=/(\d+) (\d+)/.exec(d),null!==d?(f=parseInt(d[1]),c=parseInt(d[2])):S(b,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new q.ComputedLength(0,1/c),w:new q.ComputedLength(1/f,0)};c=P(a,e.ns_ttp,"frameRate");d=30;null!==c&&(f=/(\d+)/.exec(c),null!==f?d=parseInt(f[1]):S(b,"Malformed frame rate attribute (using initial value instead)"));
f=P(a,e.ns_ttp,"frameRateMultiplier");var h=1;null!==f&&(f=/(\d+) (\d+)/.exec(f),null!==f?h=parseInt(f[1])/parseInt(f[2]):S(b,"Malformed frame rate multiplier attribute (using initial value instead)"));d*=h;h=1;f=P(a,e.ns_ttp,"tickRate");null===f?null!==c&&(h=d):(f=/(\d+)/.exec(f),null!==f?h=parseInt(f[1]):S(b,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=d;this.tickRate=h;f=P(a,e.ns_ittp,"aspectRatio");null===f&&(f=P(a,e.ns_ttp,"displayAspectRatio"));c=null;
null!==f&&(d=/(\d+)\s+(\d+)/.exec(f),null!==d?(f=parseInt(d[1]),d=parseInt(d[2]),0!==f&&0!==d?c=f/d:L(b,"Illegal aspectRatio values (ignoring)")):L(b,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=c;c=P(a,e.ns_ttp,"timeBase");null!==c&&"media"!==c&&O(b,"Unsupported time base");a=aa(a,b);null===a?this.pxLength={h:null,w:null}:("px"===a.h.unit&&"px"===a.w.unit||O(b,"Extent on TT must be in px or absent"),this.pxLength={h:new q.ComputedLength(0,1/a.h.value),w:new q.ComputedLength(1/
a.w.value,0)});this.dimensions={h:new q.ComputedLength(0,1),w:new q.ComputedLength(1,0)}};w.prototype._registerEvent=function(a){if(!(a.end<=a.begin)){var b=ba(this.events,a.begin);b.found||this.events.splice(b.index,0,a.begin);a.end!==Number.POSITIVE_INFINITY&&(b=ba(this.events,a.end),b.found||this.events.splice(b.index,0,a.end))}};w.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]};w.prototype.getMediaTimeEvents=function(){return this.events};r.prototype.initFromNode=
function(a,b){this.id=f(a);this.styleAttrs=T(a,b);this.styleRefs=J(a)};u.prototype.initFromNode=function(a,b){this.styleAttrs={};for(var d in a.attributes)if(a.attributes[d].uri===e.ns_itts||a.attributes[d].uri===e.ns_ebutts||a.attributes[d].uri===e.ns_tts)this.styleAttrs[a.attributes[d].uri+" "+a.attributes[d].local]=a.attributes[d].value};D.prototype.initFromNode=function(a,b,d,c){(this.src="src"in d.attributes?d.attributes.src.value:null)||L(c,"Invalid image@src attribute");(this.type="type"in
d.attributes?d.attributes.type.value:null)||L(c,"Invalid image@type attribute");M.prototype.initFromNode.call(this,a,b,d,c);H.prototype.initFromNode.call(this,a,b,d,c);A.prototype.initFromNode.call(this,a,b,d,c);N.prototype.initFromNode.call(this,a,b,d,c)};x.prototype.initFromNode=function(a,b,d,c){this.id=f(d)};N.prototype.initFromNode=function(a,b,d,c){this.regionID=d&&"region"in d.attributes?d.attributes.region.value:""};M.prototype.initFromNode=function(a,b,d,c){this.styleAttrs=T(d,c);null!==
a.head&&null!==a.head.styling&&Y(a.head.styling,J(d),this.styleAttrs,c)};A.prototype.initFromNode=function(a,b,d,c){this.sets=[]};K.prototype.initFromNode=function(a,b,d,c){this.contents=[]};H.prototype.initFromNode=function(a,b,d,c){b=null;d&&"begin"in d.attributes&&(b=Z(a.tickRate,a.effectiveFrameRate,d.attributes.begin.value),null===b&&S(c,"Malformed begin value "+d.attributes.begin.value+" (using 0)"));var f=null;d&&"dur"in d.attributes&&(f=Z(a.tickRate,a.effectiveFrameRate,d.attributes.dur.value),
null===f&&S(c,"Malformed dur value "+d.attributes.dur.value+" (ignoring)"));var e=null;d&&"end"in d.attributes&&(e=Z(a.tickRate,a.effectiveFrameRate,d.attributes.end.value),null===e&&S(c,"Malformed end value (ignoring)"));this.explicit_begin=b;this.explicit_end=e;this.explicit_dur=f;(a=d&&"timeContainer"in d.attributes?d.attributes.timeContainer.value:null)&&"par"!==a?"seq"===a?c="seq":(L(c,"Illegal value of timeContainer (assuming 'par')"),c="par"):c="par";this.timeContainer=c};C.prototype.initFromNode=
function(a,b,d){M.prototype.initFromNode.call(this,a,null,b,d);H.prototype.initFromNode.call(this,a,null,b,d);A.prototype.initFromNode.call(this,a,null,b,d);N.prototype.initFromNode.call(this,a,null,b,d);K.prototype.initFromNode.call(this,a,null,b,d)};E.prototype.initFromNode=function(a,b,d,c){M.prototype.initFromNode.call(this,a,b,d,c);H.prototype.initFromNode.call(this,a,b,d,c);A.prototype.initFromNode.call(this,a,b,d,c);N.prototype.initFromNode.call(this,a,b,d,c);K.prototype.initFromNode.call(this,
a,b,d,c)};G.prototype.initFromNode=function(a,b,d,c){M.prototype.initFromNode.call(this,a,b,d,c);H.prototype.initFromNode.call(this,a,b,d,c);A.prototype.initFromNode.call(this,a,b,d,c);N.prototype.initFromNode.call(this,a,b,d,c);K.prototype.initFromNode.call(this,a,b,d,c)};F.prototype.initFromNode=function(a,b,d,c,f){M.prototype.initFromNode.call(this,a,b,d,f);H.prototype.initFromNode.call(this,a,b,d,f);A.prototype.initFromNode.call(this,a,b,d,f);N.prototype.initFromNode.call(this,a,b,d,f);K.prototype.initFromNode.call(this,
a,b,d,f);this.space=c};y.prototype.initFromText=function(a,b,d,c,f){H.prototype.initFromNode.call(this,a,b,null,f);this.text=d;this.space=c};V.prototype.initFromNode=function(a,b,d,c){N.prototype.initFromNode.call(this,a,b,d,c);H.prototype.initFromNode.call(this,a,b,d,c)};m.prototype.createDefaultRegion=function(a,b){var d=new m;d.id="";M.prototype.initFromNode.call(d,a,null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",value:"after",prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},
"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},"tts:overflow":{name:"tts:overflow",value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",ebutts:"urn:ebu:tt:style",ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",
itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",local:"region",uri:"http://www.w3.org/ns/ttml",isSelfClosing:!0},b);d.sets=[];H.call(d,0,Number.POSITIVE_INFINITY,null);return d};m.prototype.initFromNode=function(a,b,d){x.prototype.initFromNode.call(this,a,null,b,d);M.prototype.initFromNode.call(this,a,null,b,d);H.prototype.initFromNode.call(this,
a,null,b,d);A.prototype.initFromNode.call(this,a,null,b,d);null!==a.head&&null!==a.head.styling&&Y(a.head.styling,J(b),this.styleAttrs,d)};I.prototype.initFromNode=function(a,b,d,c){H.prototype.initFromNode.call(this,a,b,d,c);a=T(d,c);this.value=this.qname=null;for(var f in a){if(this.qname){L(c,"More than one style specified on set");break}this.qname=f;this.value=a[f]}}})("undefined"===typeof g?this.imscDoc={}:g,"undefined"===typeof sax?e("sax"):sax,"undefined"===typeof imscNames?e("./names"):imscNames,
"undefined"===typeof imscStyles?e("./styles"):imscStyles,"undefined"===typeof imscUtils?e("./utils"):imscUtils)},{"./names":37,"./styles":38,"./utils":39,sax:28}],34:[function(e,q,g){(function(a,c,e){function l(a,c,k){if("region"===k.kind){var b=document.createElement("div");b.style.position="absolute"}else if("body"===k.kind)b=document.createElement("div");else if("div"===k.kind)b=document.createElement("div");else if("image"===k.kind){if(b=document.createElement("img"),null!==a.imgResolver&&null!==
k.src){var h=a.imgResolver(k.src,b);h&&(b.src=h);b.height=a.regionH;b.width=a.regionW}}else if("p"===k.kind)b=document.createElement("p");else if("span"===k.kind){if("container"===k.styleAttrs[e.byName.ruby.qname])b=document.createElement("ruby"),a.ruby=!0;else if("base"===k.styleAttrs[e.byName.ruby.qname])b=document.createElement("rb");else if("text"===k.styleAttrs[e.byName.ruby.qname])b=document.createElement("rt");else if("baseContainer"===k.styleAttrs[e.byName.ruby.qname])b=document.createElement("rbc");
else if("textContainer"===k.styleAttrs[e.byName.ruby.qname])b=document.createElement("rtc");else{if("delimiter"===k.styleAttrs[e.byName.ruby.qname])return;b=document.createElement("span")}(h=k.styleAttrs[e.byName.textEmphasis.qname])&&"none"!==h.style&&(a.textEmphasis=!0)}else"br"===k.kind&&(b=document.createElement("br"));if(b){c.appendChild(b);b.style.margin="0";for(var w in z)c=z[w],h=k.styleAttrs[c.qname],void 0!==h&&null!==c.map&&c.map(a,b,k,h);w=b;if("region"===k.kind)if(c=k.styleAttrs[e.byName.writingMode.qname],
"lrtb"===c||"lr"===c)a.ipd="lr",a.bpd="tb";else if("rltb"===c||"rl"===c)a.ipd="rl",a.bpd="tb";else if("tblr"===c)a.ipd="tb",a.bpd="lr";else if("tbrl"===c||"tb"===c)a.ipd="tb",a.bpd="rl";(c=k.styleAttrs[e.byName.linePadding.qname])&&!c.isZero()&&(h=c.toUsedLength(a.w,a.h),0<h&&(h=Math.ceil(h)+"px","tb"===a.bpd?(w.style.paddingLeft=h,w.style.paddingRight=h):(w.style.paddingTop=h,w.style.paddingBottom=h),a.lp=c));(c=k.styleAttrs[e.byName.multiRowAlign.qname])&&"auto"!==c&&(w=document.createElement("span"),
w.style.display="inline-block",w.style.textAlign=c,b.appendChild(w),a.mra=c);(c=k.styleAttrs[e.byName.rubyReserve.qname])&&"none"!==c[0]&&(a.rubyReserve=c);k.styleAttrs[e.byName.fillLineGap.qname]&&(a.flg=!0);if("span"===k.kind&&k.text)if(e.byName.textCombine.qname in k.styleAttrs&&"all"===k.styleAttrs[e.byName.textCombine.qname][0])b.textContent=k.text;else for(c="",h=0;h<k.text.length;h++){c+=k.text.charAt(h);var r=k.text.charCodeAt(h);if(55296>r||56319<r||h===k.text.length)r=document.createElement("span"),
r.textContent=c,b.appendChild(r),c=""}for(var n in k.contents)l(a,w,k.contents[n]);n=[];if((a.lp||a.mra||a.flg||a.ruby||a.textEmphasis||a.rubyReserve)&&"p"===k.kind){d(a,w,n,null);if(a.rubyReserve){for(c=0;c<n.length;c++){h=document.createElement("ruby");r=document.createElement("rb");r.textContent="\u200b";h.appendChild(r);var t=a.rubyReserve[1].toUsedLength(a.w,a.h)+"px";if("both"===a.rubyReserve[0]){r=document.createElement("rtc");r.style.rubyPosition="under";r.textContent="\u200b";r.style.fontSize=
t;var A=document.createElement("rtc");A.style.rubyPosition="over";A.textContent="\u200b";A.style.fontSize=t;h.appendChild(r);h.appendChild(A)}else r=document.createElement("rtc"),r.textContent="\u200b",r.style.fontSize=t,r.style.rubyPosition="after"===a.rubyReserve[0]||"outside"===a.rubyReserve[0]&&0<c?"tb"===a.bpd||"rl"===a.bpd?"under":"over":"tb"===a.bpd||"rl"===a.bpd?"over":"under",h.appendChild(r);n[c].elements[0].node.parentElement.insertBefore(h,n[c].elements[0].node)}a.rubyReserve=null}if(a.ruby||
a.rubyReserve){for(c=0;c<n.length;c++)for(h=0;h<n[c].rbc.length;h++)n[c].rbc[h].style.rubyPosition||(n[c].rbc[h].style.rubyPosition="tb"===a.bpd?0===c?"over":"under":"rl"===a.bpd?0===c?"over":"under":0===c?"under":"over");a.ruby=null}if(a.textEmphasis){for(c=0;c<n.length;c++)for(h=0;h<n[c].te.length;h++)n[c].te[h].style.textEmphasisPosition&&"none"!==n[c].te[h].style.textEmphasisPosition||(n[c].te[h].style.textEmphasisPosition="tb"===a.bpd?0===c?"left over":"left under":"rl"===a.bpd?0===c?"right under":
"left under":0===c?"left under":"right under");a.textEmphasis=null}if(a.mra){for(c=0;c<n.length-1;c++)r=n[c].elements.length,0!==r&&!1===n[c].br&&(h=document.createElement("br"),r=n[c].elements[r-1].node,r.parentElement.insertBefore(h,r.nextSibling));a.mra=null}if(a.lp){c=a.lp.toUsedLength(a.w,a.h);for(var K in n)h=n[K].elements[n[K].start_elem],r=n[K].elements[n[K].end_elem],A=Math.ceil(c)+"px",t="-"+Math.ceil(c)+"px",0!==n[K].elements.length&&("lr"===a.ipd?(h.node.style.borderLeftColor=h.bgcolor||
"#00000000",h.node.style.borderLeftStyle="solid",h.node.style.borderLeftWidth=A,h.node.style.marginLeft=t):"rl"===a.ipd?(h.node.style.borderRightColor=h.bgcolor||"#00000000",h.node.style.borderRightStyle="solid",h.node.style.borderRightWidth=A,h.node.style.marginRight=t):"tb"===a.ipd&&(h.node.style.borderTopColor=h.bgcolor||"#00000000",h.node.style.borderTopStyle="solid",h.node.style.borderTopWidth=A,h.node.style.marginTop=t),"lr"===a.ipd?(r.node.style.borderRightColor=r.bgcolor||"#00000000",r.node.style.borderRightStyle=
"solid",r.node.style.borderRightWidth=A,r.node.style.marginRight=t):"rl"===a.ipd?(r.node.style.borderLeftColor=r.bgcolor||"#00000000",r.node.style.borderLeftStyle="solid",r.node.style.borderLeftWidth=A,r.node.style.marginLeft=t):"tb"===a.ipd&&(r.node.style.borderBottomColor=r.bgcolor||"#00000000",r.node.style.borderBottomStyle="solid",r.node.style.borderBottomWidth=A,r.node.style.marginBottom=t));a.lp=null}if(a.flg){c=q(w.getBoundingClientRect(),a);K=c.before;c=c.after;h=Math.sign(c-K);for(r=0;r<=
n.length;r++){A=0===r?K:r===n.length?c:(n[r].before+n[r-1].after)/2;if(0<r)for(var H=0;H<n[r-1].elements.length;H++)if(null!==n[r-1].elements[H].bgcolor){var C=n[r-1].elements[H];0>h*(C.after-A)&&(t=Math.ceil(Math.abs(A-C.after))+"px",C.node.style.backgroundColor=C.bgcolor,"lr"===a.bpd?C.node.style.paddingRight=t:"rl"===a.bpd?C.node.style.paddingLeft=t:"tb"===a.bpd&&(C.node.style.paddingBottom=t))}if(r<n.length)for(H=0;H<n[r].elements.length;H++)C=n[r].elements[H],null!==C.bgcolor&&0<h*(C.before-
A)&&(t=Math.ceil(Math.abs(C.before-A))+"px",C.node.style.backgroundColor=C.bgcolor,"lr"===a.bpd?C.node.style.paddingLeft=t:"rl"===a.bpd?C.node.style.paddingRight=t:"tb"===a.bpd&&(C.node.style.paddingTop=t))}a.flg=null}}"region"===k.kind&&(d(a,w,n),"tb"===a.bpd&&a.enableRollUp&&0<k.contents.length&&"after"===k.styleAttrs[e.byName.displayAlign.qname]&&(k=new g(""===k.id?"_":k.id,n),a.currentISDState[k.id]=k,a.previousISDState&&k.id in a.previousISDState&&0<a.previousISDState[k.id].plist.length&&1<k.plist.length&&
k.plist[k.plist.length-2].text===a.previousISDState[k.id].plist[a.previousISDState[k.id].plist.length-1].text&&(a=b.firstElementChild,k=k.plist[k.plist.length-1].after-k.plist[k.plist.length-1].before,a.style.bottom="-"+k+"px",a.style.transition="transform 0.4s",a.style.position="relative",a.style.transform="translateY(-"+k+"px)")))}else if(a=a.errorHandler,k="Error processing ISD element kind: "+k.kind,a&&a.error&&a.error(k))throw k;}function g(a,d){this.id=a;this.plist=d}function q(a,d){var b={before:null,
after:null,start:null,end:null};"tb"===d.bpd?(b.before=a.top,b.after=a.bottom,"lr"===d.ipd?(b.start=a.left,b.end=a.right):(b.start=a.right,b.end=a.left)):"lr"===d.bpd?(b.before=a.left,b.after=a.right,b.start=a.top,b.end=a.bottom):"rl"===d.bpd&&(b.before=a.right,b.after=a.left,b.start=a.top,b.end=a.bottom);return b}function d(a,c,e,k){if("rt"!==c.localName&&"rtc"!==c.localName)if(k=c.style.backgroundColor||k,0===c.childElementCount)if("span"===c.localName||"rb"===c.localName){var b=c.getBoundingClientRect();
if(0!==b.height&&0!==b.width){a=q(b,a);if(!(b=0===e.length)){b=a.before;var h=a.after,l=e[e.length-1].before,g=e[e.length-1].after;b=!(h<g&&b>l||g<=h&&l>=b)}b?e.push({before:a.before,after:a.after,start:a.start,end:a.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(b=Math.sign(a.after-a.before),h=Math.sign(a.end-a.start),0>b*(a.before-e[e.length-1].before)&&(e[e.length-1].before=a.before),0<b*(a.after-e[e.length-1].after)&&(e[e.length-1].after=a.after),0>h*(a.start-e[e.length-
1].start)&&(e[e.length-1].start=a.start,e[e.length-1].start_elem=e[e.length-1].elements.length),0<h*(a.end-e[e.length-1].end)&&(e[e.length-1].end=a.end,e[e.length-1].end_elem=e[e.length-1].elements.length));e[e.length-1].text+=c.textContent;e[e.length-1].elements.push({node:c,bgcolor:k,before:a.before,after:a.after})}}else"br"===c.localName&&0!==e.length&&(e[e.length-1].br=!0);else for(c=c.firstChild;c;)c.nodeType===Node.ELEMENT_NODE&&(d(a,c,e,k),"ruby"===c.localName||"rtc"===c.localName?0<e.length&&
e[e.length-1].rbc.push(c):"span"===c.localName&&c.style.textEmphasisStyle&&"none"!==c.style.textEmphasisStyle&&0<e.length&&e[e.length-1].te.push(c)),c=c.nextSibling}function k(a,d){this.qname=a;this.map=d}a.render=function(a,d,c,e,k,g,n,w,z){e=e||d.clientHeight;k=k||d.clientWidth;if(null!==a.aspectRatio){var b=e*a.aspectRatio;b>k?e=Math.round(k/a.aspectRatio):k=b}b=document.createElement("div");b.style.position="relative";b.style.width=k+"px";b.style.height=e+"px";b.style.margin="auto";b.style.top=
0;b.style.bottom=0;b.style.left=0;b.style.right=0;b.style.zIndex=0;c={h:e,w:k,regionH:null,regionW:null,imgResolver:c,displayForcedOnlyMode:g||!1,isd:a,errorHandler:n,previousISDState:w,enableRollUp:z||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};d.appendChild(b);for(var h in a.contents)l(c,b,a.contents[h]);return c.currentISDState};var z=[new k("http://www.w3.org/ns/ttml#styling backgroundColor",function(a,d,c,e){0!==e[3]&&(d.style.backgroundColor=
"rgba("+e[0].toString()+","+e[1].toString()+","+e[2].toString()+","+(e[3]/255).toString()+")")}),new k("http://www.w3.org/ns/ttml#styling color",function(a,d,c,e){d.style.color="rgba("+e[0].toString()+","+e[1].toString()+","+e[2].toString()+","+(e[3]/255).toString()+")"}),new k("http://www.w3.org/ns/ttml#styling direction",function(a,d,c,e){d.style.direction=e}),new k("http://www.w3.org/ns/ttml#styling display",function(a,d,c,e){}),new k("http://www.w3.org/ns/ttml#styling displayAlign",function(a,
d,c,e){d.style.display="flex";d.style.flexDirection="column";"before"===e?d.style.justifyContent="flex-start":"center"===e?d.style.justifyContent="center":"after"===e&&(d.style.justifyContent="flex-end")}),new k("http://www.w3.org/ns/ttml#styling extent",function(a,d,c,e){a.regionH=e.h.toUsedLength(a.w,a.h);a.regionW=e.w.toUsedLength(a.w,a.h);var b=e=0;if(c=c.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])e=c[0].toUsedLength(a.w,a.h)+c[2].toUsedLength(a.w,a.h),b=c[1].toUsedLength(a.w,a.h)+
c[3].toUsedLength(a.w,a.h);d.style.height=a.regionH-e+"px";d.style.width=a.regionW-b+"px"}),new k("http://www.w3.org/ns/ttml#styling fontFamily",function(a,d,c,e){a=[];for(var b in e)e[b]=e[b].trim(),"monospaceSerif"===e[b]?(a.push("Courier New"),a.push('"Liberation Mono"'),a.push("Courier"),a.push("monospace")):"proportionalSansSerif"===e[b]||"default"===e[b]?(a.push("Arial"),a.push("Helvetica"),a.push('"Liberation Sans"'),a.push("sans-serif")):"monospace"===e[b]?a.push("monospace"):"sansSerif"===
e[b]?a.push("sans-serif"):"serif"===e[b]?a.push("serif"):"monospaceSansSerif"===e[b]?(a.push("Consolas"),a.push("monospace")):"proportionalSerif"===e[b]?a.push("serif"):a.push(e[b]);d.style.fontFamily=a.join(",")}),new k("http://www.w3.org/ns/ttml#styling shear",function(a,d,c,e){0!==e&&(c=-.9*e,d.style.transform="tb"===a.bpd?"skewX("+c+"deg)":"skewY("+c+"deg)")}),new k("http://www.w3.org/ns/ttml#styling fontSize",function(a,d,c,e){d.style.fontSize=e.toUsedLength(a.w,a.h)+"px"}),new k("http://www.w3.org/ns/ttml#styling fontStyle",
function(a,d,c,e){d.style.fontStyle=e}),new k("http://www.w3.org/ns/ttml#styling fontWeight",function(a,d,c,e){d.style.fontWeight=e}),new k("http://www.w3.org/ns/ttml#styling lineHeight",function(a,d,c,e){d.style.lineHeight="normal"===e?"normal":e.toUsedLength(a.w,a.h)+"px"}),new k("http://www.w3.org/ns/ttml#styling opacity",function(a,d,c,e){d.style.opacity=e}),new k("http://www.w3.org/ns/ttml#styling origin",function(a,d,c,e){d.style.top=e.h.toUsedLength(a.w,a.h)+"px";d.style.left=e.w.toUsedLength(a.w,
a.h)+"px"}),new k("http://www.w3.org/ns/ttml#styling overflow",function(a,d,c,e){d.style.overflow=e}),new k("http://www.w3.org/ns/ttml#styling padding",function(a,d,c,e){c=[];c[0]=e[0].toUsedLength(a.w,a.h)+"px";c[1]=e[3].toUsedLength(a.w,a.h)+"px";c[2]=e[2].toUsedLength(a.w,a.h)+"px";c[3]=e[1].toUsedLength(a.w,a.h)+"px";d.style.padding=c.join(" ")}),new k("http://www.w3.org/ns/ttml#styling position",function(a,d,c,e){d.style.top=e.h.toUsedLength(a.w,a.h)+"px";d.style.left=e.w.toUsedLength(a.w,a.h)+
"px"}),new k("http://www.w3.org/ns/ttml#styling rubyAlign",function(a,d,c,e){d.style.rubyAlign=e}),new k("http://www.w3.org/ns/ttml#styling rubyPosition",function(a,d,c,e){if("before"===e||"after"===e)d.parentElement.style.rubyPosition="tb"===a.bpd?"before"===e?"over":"under":"rl"===a.bpd?"before"===e?"over":"under":"before"===e?"under":"over"}),new k("http://www.w3.org/ns/ttml#styling showBackground",null),new k("http://www.w3.org/ns/ttml#styling textAlign",function(a,d,c,k){a=c.styleAttrs[e.byName.direction.qname];
d.style.textAlign="start"===k?"rtl"===a?"right":"left":"end"===k?"rtl"===a?"left":"right":k}),new k("http://www.w3.org/ns/ttml#styling textDecoration",function(a,d,c,e){d.style.textDecoration=e.join(" ").replace("lineThrough","line-through")}),new k("http://www.w3.org/ns/ttml#styling textOutline",function(a,d,c,e){}),new k("http://www.w3.org/ns/ttml#styling textShadow",function(a,d,c,k){c=c.styleAttrs[e.byName.textOutline.qname];if("none"===k&&"none"===c)d.style.textShadow="";else{var b=[];"none"!==
c&&b.push("rgba("+c.color[0].toString()+","+c.color[1].toString()+","+c.color[2].toString()+","+(c.color[3]/255).toString()+") 0px 0px "+c.thickness.toUsedLength(a.w,a.h)+"px");if("none"!==k)for(var h in k)b.push(k[h].x_off.toUsedLength(a.w,a.h)+"px "+k[h].y_off.toUsedLength(a.w,a.h)+"px "+k[h].b_radius.toUsedLength(a.w,a.h)+"px rgba("+k[h].color[0].toString()+","+k[h].color[1].toString()+","+k[h].color[2].toString()+","+(k[h].color[3]/255).toString()+")");d.style.textShadow=b.join(",")}}),new k("http://www.w3.org/ns/ttml#styling textCombine",
function(a,d,c,e){d.style.textCombineUpright=e.join(" ")}),new k("http://www.w3.org/ns/ttml#styling textEmphasis",function(a,d,c,e){if("none"===e.style)d.style.textEmphasisStyle="none";else if(d.style.textEmphasisStyle="auto"===e.style?"filled":e.style+" "+e.symbol,"before"===e.position||"after"===e.position)d.style.textEmphasisPosition="tb"===a.bpd?"before"===e.position?"left over":"left under":"rl"===a.bpd?"before"===e.position?"right under":"left under":"before"===e.position?"left under":"right under"}),
new k("http://www.w3.org/ns/ttml#styling unicodeBidi",function(a,d,c,e){d.style.unicodeBidi="bidiOverride"===e?"bidi-override":e}),new k("http://www.w3.org/ns/ttml#styling visibility",function(a,d,c,e){d.style.visibility=e}),new k("http://www.w3.org/ns/ttml#styling wrapOption",function(a,d,c,e){d.style.whiteSpace="wrap"===e?"preserve"===c.space?"pre-wrap":"normal":"preserve"===c.space?"pre":"noWrap"}),new k("http://www.w3.org/ns/ttml#styling writingMode",function(a,d,c,e){if("lrtb"===e||"lr"===e)a.writingMode=
"horizontal-tb";else if("rltb"===e||"rl"===e)a.writingMode="horizontal-tb";else if("tblr"===e)a.writingMode="vertical-lr";else if("tbrl"===e||"tb"===e)a.writingMode="vertical-rl";d.style.writingMode=a.writingMode}),new k("http://www.w3.org/ns/ttml#styling zIndex",function(a,d,c,e){d.style.zIndex=e}),new k("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(a,d,c,e){a.displayForcedOnlyMode&&!1===e&&(d.style.visibility="hidden")})],w;for(w in z);})("undefined"===typeof g?this.imscHTML=
{}:g,"undefined"===typeof imscNames?e("./names"):imscNames,"undefined"===typeof imscStyles?e("./styles"):imscStyles,"undefined"===typeof imscUtils?e("./utils"):imscUtils)},{"./names":37,"./styles":38,"./utils":39}],35:[function(e,q,g){(function(a,c,e,g){function l(a,c,k,q,t,D,x,G,M){if(c<x.begin||c>=x.end)return null;D="regionID"in x&&""!==x.regionID?x.regionID:D;if(null!==t&&D!==k.id&&(!("contents"in x)||"contents"in x&&0===x.contents.length||""!==D))return null;var b=new z(x);for(h in x.sets)c<
x.sets[h].begin||c>=x.sets[h].end||(b.styleAttrs[x.sets[h].qname]=x.sets[h].value);var h={};for(var r in b.styleAttrs)if(h[r]=!0,r===e.byName.writingMode.qname&&!(e.byName.direction.qname in b.styleAttrs)){var u=b.styleAttrs[r];if("lrtb"===u||"lr"===u)b.styleAttrs[e.byName.direction.qname]="ltr";else if("rltb"===u||"rl"===u)b.styleAttrs[e.byName.direction.qname]="rtl"}if(null!==t)for(var E in e.all)if(r=e.all[E],r.qname===e.byName.textDecoration.qname){u=t.styleAttrs[r.qname];var B=b.styleAttrs[r.qname],
F=[];void 0===B?F=u:-1===B.indexOf("none")?((-1===B.indexOf("noUnderline")&&-1!==u.indexOf("underline")||-1!==B.indexOf("underline"))&&F.push("underline"),(-1===B.indexOf("noLineThrough")&&-1!==u.indexOf("lineThrough")||-1!==B.indexOf("lineThrough"))&&F.push("lineThrough"),(-1===B.indexOf("noOverline")&&-1!==u.indexOf("overline")||-1!==B.indexOf("overline"))&&F.push("overline")):F.push("none");b.styleAttrs[r.qname]=F}else r.qname!==e.byName.fontSize.qname||r.qname in b.styleAttrs||"span"!==b.kind||
"textContainer"!==b.styleAttrs[e.byName.ruby.qname]?r.qname!==e.byName.fontSize.qname||r.qname in b.styleAttrs||"span"!==b.kind||"text"!==b.styleAttrs[e.byName.ruby.qname]?r.inherit&&r.qname in t.styleAttrs&&!(r.qname in b.styleAttrs)&&(b.styleAttrs[r.qname]=t.styleAttrs[r.qname]):(u=t.styleAttrs[e.byName.fontSize.qname],b.styleAttrs[r.qname]="textContainer"===t.styleAttrs[e.byName.ruby.qname]?u:new g.ComputedLength(.5*u.rw,.5*u.rh)):(u=t.styleAttrs[e.byName.fontSize.qname],b.styleAttrs[r.qname]=
new g.ComputedLength(.5*u.rw,.5*u.rh));for(var y in e.all)(E=e.all[y],E.qname in b.styleAttrs||E.qname===e.byName.position.qname&&e.byName.origin.qname in b.styleAttrs||E.qname===e.byName.origin.qname&&e.byName.position.qname in b.styleAttrs||(r=a.head.styling.initials[E.qname]||E.initial,"region"!==b.kind&&(!1!==E.inherit||null===r)))||(b.styleAttrs[E.qname]=E.parse(r),h[E.qname]=!0);for(var N in e.all)if(y=e.all[N],y.qname in h&&null!==y.compute)if(E=y.compute(a,t,b,b.styleAttrs[y.qname],M),null!==
E)b.styleAttrs[y.qname]=E;else if(b.styleAttrs[y.qname]=y.compute(a,t,b,y.parse(y.initial),M),y="Style '"+y.qname+"' on element '"+b.kind+"' cannot be computed",G&&G.error&&G.error(y))throw y;if("none"===b.styleAttrs[e.byName.display.qname])return null;if(null===t)var m=null===q?[]:[q];else"contents"in x&&(m=x.contents);for(var I in m)t=l(a,c,k,q,b,D,m[I],G,M),null!==t&&b.contents.push(t.element);for(var f in b.styleAttrs)a=!1,"span"===b.kind&&(c=b.styleAttrs[e.byName.ruby.qname],(a=("container"===
c||"textContainer"===c||"baseContainer"===c)&&-1!==w.indexOf(f))||(a="container"!==c&&f===e.byName.rubyAlign.qname),a||(a=!("textContainer"===c||"text"===c)&&f===e.byName.rubyPosition.qname)),a||(a=-1===e.byQName[f].applies.indexOf(b.kind)),a&&delete b.styleAttrs[f];"span"===b.kind&&b.text&&"default"===b.space&&(f=b.text.replace(/[\t\r\n ]+/g," "),b.text=f);if("p"===b.kind){f=[];n(b,f);a=0;c="after_br";for(k=0;;)if("after_br"===c)a>=f.length||"br"===f[a].kind?(c="before_br",k=a,a--):("preserve"!==
f[a].space&&(f[a].text=f[a].text.replace(/^[\t\r\n ]+/g,"")),0<f[a].text.length?(c="looking_br",a++):f.splice(a,1));else if("before_br"===c)if(0>a||"br"===f[a].kind){if(c="after_br",a=k+1,a>=f.length)break}else if("preserve"!==f[a].space&&(f[a].text=f[a].text.replace(/[\t\r\n ]+$/g,"")),0<f[a].text.length){if(c="after_br",a=k+1,a>=f.length)break}else f.splice(a,1),a--;else a>=f.length||"br"===f[a].kind?(c="before_br",k=a,a--):a++;d(b)}return"div"===b.kind&&e.byName.backgroundImage.qname in b.styleAttrs||
"br"===b.kind||"image"===b.kind||"contents"in b&&0<b.contents.length||"span"===b.kind&&null!==b.text||"region"===b.kind&&"always"===b.styleAttrs[e.byName.showBackground.qname]?{region_id:D,element:b}:null}function n(a,d){if("contents"in a)for(var b in a.contents)n(a.contents[b],d);else"span"!==a.kind&&"br"!==a.kind||d.push(a)}function d(a){if("br"===a.kind)return!1;if("text"in a)return 0===a.text.length;if("contents"in a){for(var b=a.contents.length;b--;)d(a.contents[b])&&a.contents.splice(b,1);return 0===
a.contents.length}}function k(a){this.contents=[];this.aspectRatio=a.aspectRatio}function z(a){this.kind=a.kind||"region";a.id&&(this.id=a.id);this.styleAttrs={};for(var b in a.styleAttrs)this.styleAttrs[b]=a.styleAttrs[b];"src"in a&&(this.src=a.src);"type"in a&&(this.type=a.type);if("text"in a)this.text=a.text;else if("region"===this.kind||"contents"in a)this.contents=[];"space"in a&&(this.space=a.space)}a.generateISD=function(a,d,c){function b(a,d){function c(b){return!(a<b.begin||a>=b.end)}if(d.contents){var e=
{},k;for(k in d)e[k]=d[k];e.contents=[];d.contents.filter(c).forEach(function(d){d=b(a,d);n.add(d.regionID);null!==d&&e.contents.push(d)});return e}return d}var e=new k(a),h={},g={},n=new Set;g=b(d,a.body);0===n.size&&a.head.layout.regions.hasOwnProperty("")&&n.add("");n.forEach(function(b){b=l(a,d,a.head.layout.regions[b],g,null,"",a.head.layout.regions[b],c,h);null!==b&&e.contents.push(b.element)});return e};var w=[e.byName.color.qname,e.byName.textCombine.qname,e.byName.textDecoration.qname,e.byName.textEmphasis.qname,
e.byName.textOutline.qname,e.byName.textShadow.qname]})("undefined"===typeof g?this.imscISD={}:g,"undefined"===typeof imscNames?e("./names"):imscNames,"undefined"===typeof imscStyles?e("./styles"):imscStyles,"undefined"===typeof imscUtils?e("./utils"):imscUtils)},{"./names":37,"./styles":38,"./utils":39}],36:[function(e,q,g){g.generateISD=e("./isd").generateISD;g.fromXML=e("./doc").fromXML;g.renderHTML=e("./html").render},{"./doc":33,"./html":34,"./isd":35}],37:[function(e,q,g){e="undefined"===typeof g?
this.imscNames={}:g;e.ns_tt="http://www.w3.org/ns/ttml";e.ns_tts="http://www.w3.org/ns/ttml#styling";e.ns_ttp="http://www.w3.org/ns/ttml#parameter";e.ns_xml="http://www.w3.org/XML/1998/namespace";e.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";e.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";e.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";e.ns_ebutts="urn:ebu:tt:style";e.ttaf_map={"http://www.w3.org/2006/10/ttaf1":e.ns_tt,"http://www.w3.org/2006/10/ttaf1#style":e.ns_tts,
"http://www.w3.org/2006/10/ttaf1#parameter":e.ns_ttp}},{}],38:[function(e,q,g){(function(a,c,e){function g(a,c,e,g,b,h,l,n){this.name=c;this.ns=a;this.qname=a+" "+c;this.inherit=b;this.animatable=h;this.initial=e;this.applies=g;this.parse=l;this.compute=n}a.all=[new g(c.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,e.parseColor,null),new g(c.ns_tts,"color","white",["span"],!0,!0,e.parseColor,null),new g(c.ns_tts,"direction","ltr",["p","span"],!0,!0,function(a){return a},
null),new g(c.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(a){return a},null),new g(c.ns_tts,"displayAlign","before",["region"],!1,!0,function(a){return a},null),new g(c.ns_tts,"extent","auto",["tt","region"],!1,!0,function(a){if("auto"===a)return a;var d=a.split(" ");if(2!==d.length)return null;a=e.parseLength(d[0]);return(d=e.parseLength(d[1]))&&a?{h:d,w:a}:null},function(a,c,g,l,b){if("auto"===l)c=new e.ComputedLength(0,1);else if(c=e.toComputedLength(l.h.value,l.h.unit,
null,a.dimensions.h,null,a.pxLength.h),null===c)return null;if("auto"===l)a=new e.ComputedLength(1,0);else if(a=e.toComputedLength(l.w.value,l.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:c,w:a}}),new g(c.ns_tts,"fontFamily","default",["span"],!0,!0,function(a){a=a.split(",");var d=[],c;for(c in a)"'"!==a[c].charAt(0)&&'"'!==a[c].charAt(0)?"default"===a[c]?d.push("monospaceSerif"):d.push(a[c]):d.push(a[c]);return d},null),new g(c.ns_tts,"shear","0%",["p"],!0,!0,e.parseLength,
function(a,c,e,g){if("%"===g.unit)a=100<Math.abs(g.value)?100*Math.sign(g.value):g.value;else return null;return a}),new g(c.ns_tts,"fontSize","1c",["span"],!0,!0,e.parseLength,function(d,c,g,l,b){return e.toComputedLength(l.value,l.unit,null!==c?c.styleAttrs[a.byName.fontSize.qname]:d.cellLength.h,null!==c?c.styleAttrs[a.byName.fontSize.qname]:d.cellLength.h,d.cellLength.h,d.pxLength.h)}),new g(c.ns_tts,"fontStyle","normal",["span"],!0,!0,function(a){return a},null),new g(c.ns_tts,"fontWeight","normal",
["span"],!0,!0,function(a){return a},null),new g(c.ns_tts,"lineHeight","normal",["p"],!0,!0,function(a){return"normal"===a?a:e.parseLength(a)},function(d,c,g,l,b){if("normal"===l)d=l;else if(d=e.toComputedLength(l.value,l.unit,g.styleAttrs[a.byName.fontSize.qname],g.styleAttrs[a.byName.fontSize.qname],d.cellLength.h,d.pxLength.h),null===d)return null;return d}),new g(c.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new g(c.ns_tts,"origin","auto",["region"],!1,!0,function(a){if("auto"===a)return a;
var d=a.split(" ");if(2!==d.length)return null;a=e.parseLength(d[0]);return(d=e.parseLength(d[1]))&&a?{h:d,w:a}:null},function(a,c,g,l,b){if("auto"===l)c=new e.ComputedLength(0,0);else if(c=e.toComputedLength(l.h.value,l.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===c)return null;if("auto"===l)a=new e.ComputedLength(0,0);else if(a=e.toComputedLength(l.w.value,l.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:c,w:a}}),new g(c.ns_tts,"overflow","hidden",["region"],
!1,!0,function(a){return a},null),new g(c.ns_tts,"padding","0px",["region"],!1,!0,function(a){a=a.split(" ");if(4<a.length)return null;var d=[],c;for(c in a){var g=e.parseLength(a[c]);if(!g)return null;d.push(g)}return d},function(d,c,g,l,b){if(1===l.length)c=[l[0],l[0],l[0],l[0]];else if(2===l.length)c=[l[0],l[1],l[0],l[1]];else if(3===l.length)c=[l[0],l[1],l[2],l[1]];else if(4===l.length)c=[l[0],l[1],l[2],l[3]];else return null;l=g.styleAttrs[a.byName.writingMode.qname];if("lrtb"===l||"lr"===l)c=
[c[0],c[3],c[2],c[1]];else if("rltb"===l||"rl"===l)c=[c[0],c[1],c[2],c[3]];else if("tblr"===l)c=[c[3],c[0],c[1],c[2]];else if("tbrl"===l||"tb"===l)c=[c[3],c[2],c[1],c[0]];else return null;l=[];for(var k in c)if(0===c[k].value)l[k]=new e.ComputedLength(0,0);else if(l[k]=e.toComputedLength(c[k].value,c[k].unit,g.styleAttrs[a.byName.fontSize.qname],"0"===k||"2"===k?g.styleAttrs[a.byName.extent.qname].h:g.styleAttrs[a.byName.extent.qname].w,"0"===k||"2"===k?d.cellLength.h:d.cellLength.w,"0"===k||"2"===
k?d.pxLength.h:d.pxLength.w),null===l[k])return null;return l}),new g(c.ns_tts,"position","top left",["region"],!1,!0,function(a){return e.parsePosition(a)},function(d,c,g,l){c=e.toComputedLength(l.v.offset.value,l.v.offset.unit,null,new e.ComputedLength(-g.styleAttrs[a.byName.extent.qname].h.rw,d.dimensions.h.rh-g.styleAttrs[a.byName.extent.qname].h.rh),null,d.pxLength.h);if(null===c)return null;"bottom"===l.v.edge&&(c=new e.ComputedLength(-c.rw-g.styleAttrs[a.byName.extent.qname].h.rw,d.dimensions.h.rh-
c.rh-g.styleAttrs[a.byName.extent.qname].h.rh));var b=e.toComputedLength(l.h.offset.value,l.h.offset.unit,null,new e.ComputedLength(d.dimensions.w.rw-g.styleAttrs[a.byName.extent.qname].w.rw,-g.styleAttrs[a.byName.extent.qname].w.rh),null,d.pxLength.w);if(null===c)return null;"right"===l.h.edge&&(b=new e.ComputedLength(d.dimensions.w.rw-b.rw-g.styleAttrs[a.byName.extent.qname].w.rw,-b.rh-g.styleAttrs[a.byName.extent.qname].w.rh));return{h:c,w:b}}),new g(c.ns_tts,"ruby","none",["span"],!1,!0,function(a){return a},
null),new g(c.ns_tts,"rubyAlign","center",["span"],!0,!0,function(a){return"center"!==a&&"spaceAround"!==a?null:a},null),new g(c.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(a){return a},null),new g(c.ns_tts,"rubyReserve","none",["p"],!0,!0,function(a){var d=a.split(" ");a=[null,null];if(0===d.length||2<d.length||"none"!==d[0]&&"both"!==d[0]&&"after"!==d[0]&&"before"!==d[0]&&"outside"!==d[0])return null;a[0]=d[0];if(2===d.length&&"none"!==d[0])if(d=e.parseLength(d[1]))a[1]=d;else return null;
return a},function(d,c,g,l,b){if("none"===l[0])return l;d=null===l[1]?new e.ComputedLength(.5*g.styleAttrs[a.byName.fontSize.qname].rw,.5*g.styleAttrs[a.byName.fontSize.qname].rh):e.toComputedLength(l[1].value,l[1].unit,g.styleAttrs[a.byName.fontSize.qname],g.styleAttrs[a.byName.fontSize.qname],d.cellLength.h,d.pxLength.h);return null===d?null:[l[0],d]}),new g(c.ns_tts,"showBackground","whenActive",["region"],!1,!0,function(a){return a},null),new g(c.ns_tts,"textAlign","start",["p"],!0,!0,function(a){return a},
function(a,c,e,g,b){return"left"===g?"start":"right"===g?"end":g}),new g(c.ns_tts,"textCombine","none",["span"],!0,!0,function(a){a=a.split(" ");return 1!==a.length||"none"!==a[0]&&"all"!==a[0]?null:[a[0]]},null),new g(c.ns_tts,"textDecoration","none",["span"],!0,!0,function(a){return a.split(" ")},null),new g(c.ns_tts,"textEmphasis","none",["span"],!0,!0,function(a){a=a.split(" ");var d={style:null,symbol:null,color:null,position:null},c;for(c in a)if("none"===a[c]||"auto"===a[c])d.style=a[c];else if("filled"===
a[c]||"open"===a[c])d.style=a[c];else if("circle"===a[c]||"dot"===a[c]||"sesame"===a[c])d.symbol=a[c];else if("current"===a[c])d.color=a[c];else if("outside"===a[c]||"before"===a[c]||"after"===a[c])d.position=a[c];else if(d.color=e.parseColor(a[c]),null===d.color)return null;null==d.style&&null==d.symbol?d.style="auto":(d.symbol=d.symbol||"circle",d.style=d.style||"filled");d.position=d.position||"outside";d.color=d.color||"current";return d},null),new g(c.ns_tts,"textOutline","none",["span"],!0,
!0,function(a){if("none"===a)return a;var d={};a=a.split(" ");if(0===a.length||2<a.length)return null;var c=e.parseColor(a[0]);d.color=c;null!==c&&a.shift();if(1!==a.length)return null;a=e.parseLength(a[0]);if(!a)return null;d.thickness=a;return d},function(d,c,g,l,b){if("none"===l)return l;c={};c.color=null===l.color?g.styleAttrs[a.byName.color.qname]:l.color;c.thickness=e.toComputedLength(l.thickness.value,l.thickness.unit,g.styleAttrs[a.byName.fontSize.qname],g.styleAttrs[a.byName.fontSize.qname],
d.cellLength.h,d.pxLength.h);return null===c.thickness?null:c}),new g(c.ns_tts,"textShadow","none",["span"],!0,!0,e.parseTextShadow,function(c,k,g,l){if("none"===l)return l;k=[];for(var b in l){var d={};d.x_off=e.toComputedLength(l[b][0].value,l[b][0].unit,null,g.styleAttrs[a.byName.fontSize.qname],null,c.pxLength.w);if(null===d.x_off)return null;d.y_off=e.toComputedLength(l[b][1].value,l[b][1].unit,null,g.styleAttrs[a.byName.fontSize.qname],null,c.pxLength.h);if(null===d.y_off)return null;if(null===
l[b][2])d.b_radius=0;else if(d.b_radius=e.toComputedLength(l[b][2].value,l[b][2].unit,null,g.styleAttrs[a.byName.fontSize.qname],null,c.pxLength.h),null===d.b_radius)return null;d.color=null===l[b][3]?g.styleAttrs[a.byName.color.qname]:l[b][3];k.push(d)}return k}),new g(c.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(a){return a},null),new g(c.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(a){return a},null),new g(c.ns_tts,"wrapOption","wrap",["span"],
!0,!0,function(a){return a},null),new g(c.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(a){return a},null),new g(c.ns_tts,"zIndex","auto",["region"],!1,!0,function(a){"auto"!==a&&(a=parseInt(a),isNaN(a)&&(a=null));return a},null),new g(c.ns_ebutts,"linePadding","0c",["p"],!0,!1,e.parseLength,function(a,c,g,l,b){return e.toComputedLength(l.value,l.unit,null,null,a.cellLength.w,null)}),new g(c.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(a){return a},null),new g(c.ns_smpte,"backgroundImage",
null,["div"],!1,!1,function(a){return a},null),new g(c.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(a){return"true"===a?!0:!1},null),new g(c.ns_itts,"fillLineGap","true",["p"],!0,!0,function(a){return"true"===a?!0:!1},null)];a.byQName={};for(var l in a.all)a.byQName[a.all[l].qname]=a.all[l];a.byName={};for(var q in a.all)a.byName[a.all[q].name]=a.all[q]})("undefined"===typeof g?this.imscStyles={}:g,"undefined"===typeof imscNames?e("./names"):imscNames,"undefined"===
typeof imscUtils?e("./utils"):imscUtils)},{"./names":37,"./utils":39}],39:[function(e,q,g){(function(a){var c=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,e=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,g=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,q={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,
255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};a.parseColor=function(a){var d,l=null,n=q[a.toLowerCase()];void 0!==n?l=n:null!==(d=c.exec(a))?l=[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16),void 0!==d[4]?parseInt(d[4],16):255]:null!==(d=e.exec(a))?l=[parseInt(d[1]),parseInt(d[2]),parseInt(d[3]),255]:null!==(d=g.exec(a))&&(l=[parseInt(d[1]),parseInt(d[2]),
parseInt(d[3]),parseInt(d[4])]);return l};var t=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;a.parseLength=function(a){var c,d=null;null!==(c=t.exec(a))&&(d={value:parseFloat(c[1]),unit:c[2]});return d};a.parseTextShadow=function(c){c=c.split(",");var d=[],e;for(e in c){var g=c[e].split(" ");if(1===g.length&&"none"===g[0])return"none";if(1<g.length&&5>g.length){var b=[null,null,null,null],h=a.parseLength(g.shift());if(null===h)return null;b[0]=h;h=a.parseLength(g.shift());if(null===h)return null;
b[1]=h;if(0!==g.length&&(h=a.parseLength(g[0]),null!==h&&(b[2]=h,g.shift()),0!==g.length)){g=a.parseColor(g[0]);if(null===g)return null;b[3]=g}d.push(b)}}return d};a.parsePosition=function(c){c=c.split(" ");var d=function(a){return"center"===a||"left"===a||"top"===a||"bottom"===a||"right"===a};if(4<c.length)return null;for(var e in c)if(!d(c[e])){var g=a.parseLength(c[e]);if(null===g)return null;c[e]=g}e={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(g=
0;g<c.length;){var b=c[g++];if(d(b)){var h={value:0,unit:"%"};2!==c.length&&g<c.length&&!d(c[g])&&(h=c[g++]);"right"===b?(e.h.edge=b,e.h.offset=h):"bottom"===b?(e.v.edge=b,e.v.offset=h):"left"===b?e.h.offset=h:"top"===b&&(e.v.offset=h)}else if(1===c.length||2===c.length)1===g?e.h.offset=b:e.v.offset=b;else return null}return e};a.ComputedLength=function(a,c){this.rw=a;this.rh=c};a.ComputedLength.prototype.toUsedLength=function(a,c){return a*this.rw+c*this.rh};a.ComputedLength.prototype.isZero=function(){return 0===
this.rw&&0===this.rh};a.toComputedLength=function(c,e,g,l,b,h){return"%"===e&&l?new a.ComputedLength(l.rw*c/100,l.rh*c/100):"em"===e&&g?new a.ComputedLength(g.rw*c,g.rh*c):"c"===e&&b?new a.ComputedLength(c*b.rw,c*b.rh):"px"===e&&h?new a.ComputedLength(c*h.rw,c*h.rh):"rh"===e?new a.ComputedLength(0,c/100):"rw"===e?new a.ComputedLength(c/100,0):null}})("undefined"===typeof g?this.imscUtils={}:g)},{}]},{},[36])(36)});
