/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 Determine if an object is a Buffer

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource>  http://mths.be/fromcodepoint v0.1.0 by @mathias */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,r,k){d!=Array.prototype&&d!=Object.prototype&&(d[r]=k.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(d,r,k,b){if(r){k=$jscomp.global;d=d.split(".");for(b=0;b<d.length-1;b++){var f=d[b];f in k||(k[f]={});k=k[f]}d=d[d.length-1];b=k[d];r=r(b);r!=b&&null!=r&&$jscomp.defineProperty(k,d,{configurable:!0,writable:!0,value:r})}};$jscomp.polyfill("Array.prototype.fill",function(d){return d?d:function(d,k,b){var f=this.length||0;0>k&&(k=Math.max(0,f+k));if(null==b||b>f)b=f;b=Number(b);0>b&&(b=Math.max(0,f+b));for(k=Number(k||0);k<b;k++)this[k]=d;return this}},"es6","es3");
$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var d=0;return function(r){return $jscomp.SYMBOL_PREFIX+(r||"")+d++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.asyncIterator;d||(d=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(d){var r=0;return $jscomp.iteratorPrototype(function(){return r<d.length?{done:!1,value:d[r++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};$jscomp.iteratorFromArray=function(d,r){$jscomp.initSymbolIterator();d instanceof String&&(d+="");var k=0,b={next:function(){if(k<d.length){var f=k++;return{value:r(f,d[f]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};
$jscomp.polyfill("Array.prototype.keys",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(d){return d?d:function(){return[]}},"es6","es5");
$jscomp.polyfill("Reflect.ownKeys",function(d){return d?d:function(d){var k=[],b=Object.getOwnPropertyNames(d);d=Object.getOwnPropertySymbols(d);for(var f=0;f<b.length;f++)("jscomp_symbol_"==b[f].substring(0,14)?d:k).push(b[f]);return k.concat(d)}},"es6","es5");
$jscomp.polyfill("String.fromCodePoint",function(d){return d?d:function(d){for(var k="",b=0;b<arguments.length;b++){var f=Number(arguments[b]);if(0>f||1114111<f||f!==Math.floor(f))throw new RangeError("invalid_code_point "+f);65535>=f?k+=String.fromCharCode(f):(f-=65536,k+=String.fromCharCode(f>>>10&1023|55296),k+=String.fromCharCode(f&1023|56320))}return k}},"es6","es3");$jscomp.polyfill("Math.sign",function(d){return d?d:function(d){d=Number(d);return 0===d||isNaN(d)?d:0<d?1:-1}},"es6","es3");
(function(d){"object"===typeof exports&&"undefined"!==typeof module?module.exports=d():"function"===typeof define&&define.amd?define([],d):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=d()})(function(){return function(){function d(r,k,b){function f(q,A){if(!k[q]){if(!r[q]){var a="function"==typeof require&&require;if(!A&&a)return a(q,!0);if(m)return m(q,!0);A=Error("Cannot find module '"+q+"'");throw A.code="MODULE_NOT_FOUND",A;}A=
k[q]={exports:{}};r[q][0].call(A.exports,function(a){return f(r[q][1][a]||a)},A,A.exports,d,r,k,b)}return k[q].exports}for(var m="function"==typeof require&&require,q=0;q<b.length;q++)f(b[q]);return f}return d}()({1:[function(d,r,k){function b(b){var a=b.length;if(0<a%4)throw Error("Invalid string. Length must be a multiple of 4");b=b.indexOf("=");-1===b&&(b=a);return[b,b===a?0:4-b%4]}function f(b,a,f){for(var g=[],d=a;d<f;d+=3)a=(b[d]<<16&16711680)+(b[d+1]<<8&65280)+(b[d+2]&255),g.push(m[a>>18&63]+
m[a>>12&63]+m[a>>6&63]+m[a&63]);return g.join("")}k.byteLength=function(f){f=b(f);var a=f[1];return 3*(f[0]+a)/4-a};k.toByteArray=function(f){var a=b(f);var g=a[0];a=a[1];var d=new w(3*(g+a)/4-a),m=0,A=0<a?g-4:g,u;for(u=0;u<A;u+=4)g=q[f.charCodeAt(u)]<<18|q[f.charCodeAt(u+1)]<<12|q[f.charCodeAt(u+2)]<<6|q[f.charCodeAt(u+3)],d[m++]=g>>16&255,d[m++]=g>>8&255,d[m++]=g&255;2===a&&(g=q[f.charCodeAt(u)]<<2|q[f.charCodeAt(u+1)]>>4,d[m++]=g&255);1===a&&(g=q[f.charCodeAt(u)]<<10|q[f.charCodeAt(u+1)]<<4|q[f.charCodeAt(u+
2)]>>2,d[m++]=g>>8&255,d[m++]=g&255);return d};k.fromByteArray=function(b){for(var a=b.length,d=a%3,v=[],z=0,q=a-d;z<q;z+=16383)v.push(f(b,z,z+16383>q?q:z+16383));1===d?(b=b[a-1],v.push(m[b>>2]+m[b<<4&63]+"==")):2===d&&(b=(b[a-2]<<8)+b[a-1],v.push(m[b>>10]+m[b>>4&63]+m[b<<2&63]+"="));return v.join("")};var m=[],q=[],w="undefined"!==typeof Uint8Array?Uint8Array:Array;for(d=0;64>d;++d)m[d]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d],q["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(d)]=
d;q[45]=62;q[95]=63},{}],2:[function(d,r,k){},{}],3:[function(d,r,k){(function(b){function f(p){if(2147483647<p)throw new RangeError('The value "'+p+'" is invalid for option "size"');p=new Uint8Array(p);p.__proto__=b.prototype;return p}function b(p,c,e){if("number"===typeof p){if("string"===typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return w(p)}return m(p,c,e)}function m(p,c,e){if("string"===typeof p){var h=c;if("string"!==typeof h||""===h)h=
"utf8";if(!b.isEncoding(h))throw new TypeError("Unknown encoding: "+h);c=v(p,h)|0;e=f(c);p=e.write(p,h);p!==c&&(e=e.slice(0,p));return e}if(ArrayBuffer.isView(p))return A(p);if(null==p)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(y(p,ArrayBuffer)||p&&y(p.buffer,ArrayBuffer)){if(0>c||p.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<c+(e||0))throw new RangeError('"length" is outside of buffer bounds');
p=void 0===c&&void 0===e?new Uint8Array(p):void 0===e?new Uint8Array(p,c):new Uint8Array(p,c,e);p.__proto__=b.prototype;return p}if("number"===typeof p)throw new TypeError('The "value" argument must not be of type number. Received type number');h=p.valueOf&&p.valueOf();if(null!=h&&h!==p)return b.from(h,c,e);if(h=a(p))return h;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof p[Symbol.toPrimitive])return b.from(p[Symbol.toPrimitive]("string"),c,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof p);}function q(p){if("number"!==typeof p)throw new TypeError('"size" argument must be of type number');if(0>p)throw new RangeError('The value "'+p+'" is invalid for option "size"');}function w(p){q(p);return f(0>p?0:g(p)|0)}function A(p){for(var c=0>p.length?0:g(p.length)|0,e=f(c),h=0;h<c;h+=1)e[h]=p[h]&255;return e}function a(p){if(b.isBuffer(p)){var c=g(p.length)|0,e=f(c);if(0===e.length)return e;p.copy(e,0,0,c);return e}if(void 0!==p.length)return(c="number"!==typeof p.length)||(c=p.length,
c=c!==c),c?f(0):A(p);if("Buffer"===p.type&&Array.isArray(p.data))return A(p.data)}function g(p){if(2147483647<=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return p|0}function v(p,c){if(b.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||y(p,ArrayBuffer))return p.byteLength;if("string"!==typeof p)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);var e=
p.length,h=2<arguments.length&&!0===arguments[2];if(!h&&0===e)return 0;for(var a=!1;;)switch(c){case "ascii":case "latin1":case "binary":return e;case "utf8":case "utf-8":return M(p).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*e;case "hex":return e>>>1;case "base64":return O.toByteArray(G(p)).length;default:if(a)return h?-1:M(p).length;c=(""+c).toLowerCase();a=!0}}function z(p,c,e){var h=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===e||e>this.length)e=
this.length;if(0>=e)return"";e>>>=0;c>>>=0;if(e<=c)return"";for(p||(p="utf8");;)switch(p){case "hex":p=c;c=e;e=this.length;if(!p||0>p)p=0;if(!c||0>c||c>e)c=e;h="";for(e=p;e<c;++e)p=h,h=this[e],h=16>h?"0"+h.toString(16):h.toString(16),h=p+h;return h;case "utf8":case "utf-8":return H(this,c,e);case "ascii":p="";for(e=Math.min(this.length,e);c<e;++c)p+=String.fromCharCode(this[c]&127);return p;case "latin1":case "binary":p="";for(e=Math.min(this.length,e);c<e;++c)p+=String.fromCharCode(this[c]);return p;
case "base64":return c=0===c&&e===this.length?O.fromByteArray(this):O.fromByteArray(this.slice(c,e)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,e);e="";for(p=0;p<c.length;p+=2)e+=String.fromCharCode(c[p]+256*c[p+1]);return e;default:if(h)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase();h=!0}}function D(p,c,e){var h=p[c];p[c]=p[e];p[e]=h}function u(p,c,e,h,a){if(0===p.length)return-1;"string"===typeof e?(h=e,e=0):2147483647<e?e=2147483647:-2147483648>
e&&(e=-2147483648);e=+e;e!==e&&(e=a?0:p.length-1);0>e&&(e=p.length+e);if(e>=p.length){if(a)return-1;e=p.length-1}else if(0>e)if(a)e=0;else return-1;"string"===typeof c&&(c=b.from(c,h));if(b.isBuffer(c))return 0===c.length?-1:r(p,c,e,h,a);if("number"===typeof c)return c&=255,"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(p,c,e):Uint8Array.prototype.lastIndexOf.call(p,c,e):r(p,[c],e,h,a);throw new TypeError("val must be string, number or Buffer");}function r(p,
c,e,h,a){function b(p,e){return 1===J?p[e]:p.readUInt16BE(e*J)}var J=1,l=p.length,n=c.length;if(void 0!==h&&(h=String(h).toLowerCase(),"ucs2"===h||"ucs-2"===h||"utf16le"===h||"utf-16le"===h)){if(2>p.length||2>c.length)return-1;J=2;l/=2;n/=2;e/=2}if(a)for(h=-1;e<l;e++)if(b(p,e)===b(c,-1===h?0:e-h)){if(-1===h&&(h=e),e-h+1===n)return h*J}else-1!==h&&(e-=e-h),h=-1;else for(e+n>l&&(e=l-n);0<=e;e--){l=!0;for(h=0;h<n;h++)if(b(p,e+h)!==b(c,h)){l=!1;break}if(l)return e}return-1}function H(p,c,e){e=Math.min(p.length,
e);for(var h=[];c<e;){var a=p[c],b=null,l=239<a?4:223<a?3:191<a?2:1;if(c+l<=e)switch(l){case 1:128>a&&(b=a);break;case 2:var J=p[c+1];128===(J&192)&&(a=(a&31)<<6|J&63,127<a&&(b=a));break;case 3:J=p[c+1];var n=p[c+2];128===(J&192)&&128===(n&192)&&(a=(a&15)<<12|(J&63)<<6|n&63,2047<a&&(55296>a||57343<a)&&(b=a));break;case 4:J=p[c+1];n=p[c+2];var f=p[c+3];128===(J&192)&&128===(n&192)&&128===(f&192)&&(a=(a&15)<<18|(J&63)<<12|(n&63)<<6|f&63,65535<a&&1114112>a&&(b=a))}null===b?(b=65533,l=1):65535<b&&(b-=
65536,h.push(b>>>10&1023|55296),b=56320|b&1023);h.push(b);c+=l}p=h.length;if(p<=B)h=String.fromCharCode.apply(String,h);else{e="";for(c=0;c<p;)e+=String.fromCharCode.apply(String,h.slice(c,c+=B));h=e}return h}function C(p,c,e){if(0!==p%1||0>p)throw new RangeError("offset is not uint");if(p+c>e)throw new RangeError("Trying to access beyond buffer length");}function c(p,c,e,a,l,n){if(!b.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>l||c<n)throw new RangeError('"value" argument is out of bounds');
if(e+a>p.length)throw new RangeError("Index out of range");}function l(p,c,e,a,b,l){if(e+a>p.length)throw new RangeError("Index out of range");if(0>e)throw new RangeError("Index out of range");}function n(p,c,e,a,b){c=+c;e>>>=0;b||l(p,c,e,4,3.4028234663852886E38,-3.4028234663852886E38);I.write(p,c,e,a,23,4);return e+4}function K(p,c,e,a,b){c=+c;e>>>=0;b||l(p,c,e,8,1.7976931348623157E308,-1.7976931348623157E308);I.write(p,c,e,a,52,8);return e+8}function G(p){p=p.split("=")[0];p=p.trim().replace(T,
"");if(2>p.length)return"";for(;0!==p.length%4;)p+="=";return p}function M(p,c){c=c||Infinity;for(var e,a=p.length,b=null,l=[],n=0;n<a;++n){e=p.charCodeAt(n);if(55295<e&&57344>e){if(!b){if(56319<e){-1<(c-=3)&&l.push(239,191,189);continue}else if(n+1===a){-1<(c-=3)&&l.push(239,191,189);continue}b=e;continue}if(56320>e){-1<(c-=3)&&l.push(239,191,189);b=e;continue}e=(b-55296<<10|e-56320)+65536}else b&&-1<(c-=3)&&l.push(239,191,189);b=null;if(128>e){if(0>--c)break;l.push(e)}else if(2048>e){if(0>(c-=2))break;
l.push(e>>6|192,e&63|128)}else if(65536>e){if(0>(c-=3))break;l.push(e>>12|224,e>>6&63|128,e&63|128)}else if(1114112>e){if(0>(c-=4))break;l.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw Error("Invalid code point");}return l}function N(c){for(var p=[],e=0;e<c.length;++e)p.push(c.charCodeAt(e)&255);return p}function x(c,a,e,h){for(var p=0;p<h&&!(p+e>=a.length||p>=c.length);++p)a[p+e]=c[p];return p}function y(c,a){return c instanceof a||null!=c&&null!=c.constructor&&null!=c.constructor.name&&
c.constructor.name===a.name}var O=d("base64-js"),I=d("ieee754");k.Buffer=b;k.SlowBuffer=function(c){+c!=c&&(c=0);return b.alloc(+c)};k.INSPECT_MAX_BYTES=50;k.kMaxLength=2147483647;b.TYPED_ARRAY_SUPPORT=function(){try{var c=new Uint8Array(1);c.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===c.foo()}catch(J){return!1}}();b.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}});Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});b.poolSize=8192;b.from=function(c,a,e){return m(c,a,e)};b.prototype.__proto__=Uint8Array.prototype;
b.__proto__=Uint8Array;b.alloc=function(c,a,e){q(c);c=0>=c?f(c):void 0!==a?"string"===typeof e?f(c).fill(a,e):f(c).fill(a):f(c);return c};b.allocUnsafe=function(c){return w(c)};b.allocUnsafeSlow=function(c){return w(c)};b.isBuffer=function(c){return null!=c&&!0===c._isBuffer&&c!==b.prototype};b.compare=function(c,a){y(c,Uint8Array)&&(c=b.from(c,c.offset,c.byteLength));y(a,Uint8Array)&&(a=b.from(a,a.offset,a.byteLength));if(!b.isBuffer(c)||!b.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(c===a)return 0;for(var e=c.length,p=a.length,l=0,n=Math.min(e,p);l<n;++l)if(c[l]!==a[l]){e=c[l];p=a[l];break}return e<p?-1:p<e?1:0};b.isEncoding=function(c){switch(String(c).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};b.concat=function(c,a){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(0===c.length)return b.alloc(0);
var e;if(void 0===a)for(e=a=0;e<c.length;++e)a+=c[e].length;a=b.allocUnsafe(a);var p=0;for(e=0;e<c.length;++e){var l=c[e];y(l,Uint8Array)&&(l=b.from(l));if(!b.isBuffer(l))throw new TypeError('"list" argument must be an Array of Buffers');l.copy(a,p);p+=l.length}return a};b.byteLength=v;b.prototype._isBuffer=!0;b.prototype.swap16=function(){var c=this.length;if(0!==c%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<c;a+=2)D(this,a,a+1);return this};b.prototype.swap32=
function(){var c=this.length;if(0!==c%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<c;a+=4)D(this,a,a+3),D(this,a+1,a+2);return this};b.prototype.swap64=function(){var c=this.length;if(0!==c%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<c;a+=8)D(this,a,a+7),D(this,a+1,a+6),D(this,a+2,a+5),D(this,a+3,a+4);return this};b.prototype.toString=function(){var c=this.length;return 0===c?"":0===arguments.length?H(this,0,c):z.apply(this,
arguments)};b.prototype.toLocaleString=b.prototype.toString;b.prototype.equals=function(c){if(!b.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:0===b.compare(this,c)};b.prototype.inspect=function(){var c=k.INSPECT_MAX_BYTES;var a=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim();this.length>c&&(a+=" ... ");return"<Buffer "+a+">"};b.prototype.compare=function(c,a,e,h,l){y(c,Uint8Array)&&(c=b.from(c,c.offset,c.byteLength));if(!b.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof c);void 0===a&&(a=0);void 0===e&&(e=c?c.length:0);void 0===h&&(h=0);void 0===l&&(l=this.length);if(0>a||e>c.length||0>h||l>this.length)throw new RangeError("out of range index");if(h>=l&&a>=e)return 0;if(h>=l)return-1;if(a>=e)return 1;a>>>=0;e>>>=0;h>>>=0;l>>>=0;if(this===c)return 0;var p=l-h,n=e-a,f=Math.min(p,n);h=this.slice(h,l);c=c.slice(a,e);for(a=0;a<f;++a)if(h[a]!==c[a]){p=h[a];n=c[a];break}return p<n?-1:n<p?1:0};b.prototype.includes=function(c,a,e){return-1!==this.indexOf(c,a,e)};b.prototype.indexOf=
function(c,a,e){return u(this,c,a,e,!0)};b.prototype.lastIndexOf=function(c,a,e){return u(this,c,a,e,!1)};b.prototype.write=function(c,a,e,h){if(void 0===a)h="utf8",e=this.length,a=0;else if(void 0===e&&"string"===typeof a)h=a,e=this.length,a=0;else if(isFinite(a))a>>>=0,isFinite(e)?(e>>>=0,void 0===h&&(h="utf8")):(h=e,e=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var p=this.length-a;if(void 0===e||e>p)e=p;if(0<c.length&&(0>e||0>a)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");
h||(h="utf8");for(p=!1;;)switch(h){case "hex":a:{a=Number(a)||0;h=this.length-a;e?(e=Number(e),e>h&&(e=h)):e=h;h=c.length;e>h/2&&(e=h/2);for(h=0;h<e;++h){p=parseInt(c.substr(2*h,2),16);if(p!==p){c=h;break a}this[a+h]=p}c=h}return c;case "utf8":case "utf-8":return x(M(c,this.length-a),this,a,e);case "ascii":return x(N(c),this,a,e);case "latin1":case "binary":return x(N(c),this,a,e);case "base64":return x(O.toByteArray(G(c)),this,a,e);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":h=c;p=this.length-
a;for(var b=[],l=0;l<h.length&&!(0>(p-=2));++l){var n=h.charCodeAt(l);c=n>>8;n%=256;b.push(n);b.push(c)}return x(b,this,a,e);default:if(p)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase();p=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var B=4096;b.prototype.slice=function(c,a){var e=this.length;c=~~c;a=void 0===a?e:~~a;0>c?(c+=e,0>c&&(c=0)):c>e&&(c=e);0>a?(a+=e,0>a&&(a=0)):a>e&&(a=e);a<c&&(a=c);c=this.subarray(c,a);c.__proto__=
b.prototype;return c};b.prototype.readUIntLE=function(c,a,e){c>>>=0;a>>>=0;e||C(c,a,this.length);e=this[c];for(var p=1,b=0;++b<a&&(p*=256);)e+=this[c+b]*p;return e};b.prototype.readUIntBE=function(c,a,e){c>>>=0;a>>>=0;e||C(c,a,this.length);e=this[c+--a];for(var p=1;0<a&&(p*=256);)e+=this[c+--a]*p;return e};b.prototype.readUInt8=function(c,a){c>>>=0;a||C(c,1,this.length);return this[c]};b.prototype.readUInt16LE=function(c,a){c>>>=0;a||C(c,2,this.length);return this[c]|this[c+1]<<8};b.prototype.readUInt16BE=
function(c,a){c>>>=0;a||C(c,2,this.length);return this[c]<<8|this[c+1]};b.prototype.readUInt32LE=function(c,a){c>>>=0;a||C(c,4,this.length);return(this[c]|this[c+1]<<8|this[c+2]<<16)+16777216*this[c+3]};b.prototype.readUInt32BE=function(c,a){c>>>=0;a||C(c,4,this.length);return 16777216*this[c]+(this[c+1]<<16|this[c+2]<<8|this[c+3])};b.prototype.readIntLE=function(c,a,e){c>>>=0;a>>>=0;e||C(c,a,this.length);e=this[c];for(var p=1,b=0;++b<a&&(p*=256);)e+=this[c+b]*p;e>=128*p&&(e-=Math.pow(2,8*a));return e};
b.prototype.readIntBE=function(c,a,e){c>>>=0;a>>>=0;e||C(c,a,this.length);e=a;for(var p=1,b=this[c+--e];0<e&&(p*=256);)b+=this[c+--e]*p;b>=128*p&&(b-=Math.pow(2,8*a));return b};b.prototype.readInt8=function(c,a){c>>>=0;a||C(c,1,this.length);return this[c]&128?-1*(255-this[c]+1):this[c]};b.prototype.readInt16LE=function(c,a){c>>>=0;a||C(c,2,this.length);c=this[c]|this[c+1]<<8;return c&32768?c|4294901760:c};b.prototype.readInt16BE=function(c,a){c>>>=0;a||C(c,2,this.length);c=this[c+1]|this[c]<<8;return c&
32768?c|4294901760:c};b.prototype.readInt32LE=function(c,a){c>>>=0;a||C(c,4,this.length);return this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24};b.prototype.readInt32BE=function(c,a){c>>>=0;a||C(c,4,this.length);return this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]};b.prototype.readFloatLE=function(c,a){c>>>=0;a||C(c,4,this.length);return I.read(this,c,!0,23,4)};b.prototype.readFloatBE=function(c,a){c>>>=0;a||C(c,4,this.length);return I.read(this,c,!1,23,4)};b.prototype.readDoubleLE=function(c,
a){c>>>=0;a||C(c,8,this.length);return I.read(this,c,!0,52,8)};b.prototype.readDoubleBE=function(c,a){c>>>=0;a||C(c,8,this.length);return I.read(this,c,!1,52,8)};b.prototype.writeUIntLE=function(a,b,e,h){a=+a;b>>>=0;e>>>=0;h||c(this,a,b,e,Math.pow(2,8*e)-1,0);h=1;var l=0;for(this[b]=a&255;++l<e&&(h*=256);)this[b+l]=a/h&255;return b+e};b.prototype.writeUIntBE=function(a,b,e,h){a=+a;b>>>=0;e>>>=0;h||c(this,a,b,e,Math.pow(2,8*e)-1,0);h=e-1;var l=1;for(this[b+h]=a&255;0<=--h&&(l*=256);)this[b+h]=a/l&
255;return b+e};b.prototype.writeUInt8=function(a,b,e){a=+a;b>>>=0;e||c(this,a,b,1,255,0);this[b]=a&255;return b+1};b.prototype.writeUInt16LE=function(a,b,e){a=+a;b>>>=0;e||c(this,a,b,2,65535,0);this[b]=a&255;this[b+1]=a>>>8;return b+2};b.prototype.writeUInt16BE=function(a,b,e){a=+a;b>>>=0;e||c(this,a,b,2,65535,0);this[b]=a>>>8;this[b+1]=a&255;return b+2};b.prototype.writeUInt32LE=function(a,b,e){a=+a;b>>>=0;e||c(this,a,b,4,4294967295,0);this[b+3]=a>>>24;this[b+2]=a>>>16;this[b+1]=a>>>8;this[b]=a&
255;return b+4};b.prototype.writeUInt32BE=function(a,b,e){a=+a;b>>>=0;e||c(this,a,b,4,4294967295,0);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=a>>>8;this[b+3]=a&255;return b+4};b.prototype.writeIntLE=function(a,b,e,h){a=+a;b>>>=0;h||(h=Math.pow(2,8*e-1),c(this,a,b,e,h-1,-h));h=0;var l=1,n=0;for(this[b]=a&255;++h<e&&(l*=256);)0>a&&0===n&&0!==this[b+h-1]&&(n=1),this[b+h]=(a/l>>0)-n&255;return b+e};b.prototype.writeIntBE=function(a,b,e,h){a=+a;b>>>=0;h||(h=Math.pow(2,8*e-1),c(this,a,b,e,h-1,-h));h=e-
1;var l=1,n=0;for(this[b+h]=a&255;0<=--h&&(l*=256);)0>a&&0===n&&0!==this[b+h+1]&&(n=1),this[b+h]=(a/l>>0)-n&255;return b+e};b.prototype.writeInt8=function(a,b,e){a=+a;b>>>=0;e||c(this,a,b,1,127,-128);0>a&&(a=255+a+1);this[b]=a&255;return b+1};b.prototype.writeInt16LE=function(a,b,e){a=+a;b>>>=0;e||c(this,a,b,2,32767,-32768);this[b]=a&255;this[b+1]=a>>>8;return b+2};b.prototype.writeInt16BE=function(a,b,e){a=+a;b>>>=0;e||c(this,a,b,2,32767,-32768);this[b]=a>>>8;this[b+1]=a&255;return b+2};b.prototype.writeInt32LE=
function(a,b,e){a=+a;b>>>=0;e||c(this,a,b,4,2147483647,-2147483648);this[b]=a&255;this[b+1]=a>>>8;this[b+2]=a>>>16;this[b+3]=a>>>24;return b+4};b.prototype.writeInt32BE=function(a,b,e){a=+a;b>>>=0;e||c(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=a>>>8;this[b+3]=a&255;return b+4};b.prototype.writeFloatLE=function(c,a,e){return n(this,c,a,!0,e)};b.prototype.writeFloatBE=function(c,a,e){return n(this,c,a,!1,e)};b.prototype.writeDoubleLE=function(c,
a,e){return K(this,c,a,!0,e)};b.prototype.writeDoubleBE=function(c,a,e){return K(this,c,a,!1,e)};b.prototype.copy=function(c,a,e,h){if(!b.isBuffer(c))throw new TypeError("argument should be a Buffer");e||(e=0);h||0===h||(h=this.length);a>=c.length&&(a=c.length);a||(a=0);0<h&&h<e&&(h=e);if(h===e||0===c.length||0===this.length)return 0;if(0>a)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("sourceEnd out of bounds");
h>this.length&&(h=this.length);c.length-a<h-e&&(h=c.length-a+e);var l=h-e;if(this===c&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(a,e,h);else if(this===c&&e<a&&a<h)for(h=l-1;0<=h;--h)c[h+a]=this[h+e];else Uint8Array.prototype.set.call(c,this.subarray(e,h),a);return l};b.prototype.fill=function(c,a,e,h){if("string"===typeof c){"string"===typeof a?(h=a,a=0,e=this.length):"string"===typeof e&&(h=e,e=this.length);if(void 0!==h&&"string"!==typeof h)throw new TypeError("encoding must be a string");
if("string"===typeof h&&!b.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(1===c.length){var l=c.charCodeAt(0);if("utf8"===h&&128>l||"latin1"===h)c=l}}else"number"===typeof c&&(c&=255);if(0>a||this.length<a||this.length<e)throw new RangeError("Out of range index");if(e<=a)return this;a>>>=0;e=void 0===e?this.length:e>>>0;c||(c=0);if("number"===typeof c)for(h=a;h<e;++h)this[h]=c;else{l=b.isBuffer(c)?c:b.from(c,h);var n=l.length;if(0===n)throw new TypeError('The value "'+c+'" is invalid for argument "value"');
for(h=0;h<e-a;++h)this[h+a]=l[h%n]}return this};var T=/[^+/0-9A-Za-z-_]/g}).call(this,d("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:6}],4:[function(d,r,k){(function(b){k.isArray=function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)};k.isBoolean=function(b){return"boolean"===typeof b};k.isNull=function(b){return null===b};k.isNullOrUndefined=function(b){return null==b};k.isNumber=function(b){return"number"===typeof b};k.isString=function(b){return"string"===
typeof b};k.isSymbol=function(b){return"symbol"===typeof b};k.isUndefined=function(b){return void 0===b};k.isRegExp=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)};k.isObject=function(b){return"object"===typeof b&&null!==b};k.isDate=function(b){return"[object Date]"===Object.prototype.toString.call(b)};k.isError=function(b){return"[object Error]"===Object.prototype.toString.call(b)||b instanceof Error};k.isFunction=function(b){return"function"===typeof b};k.isPrimitive=function(b){return null===
b||"boolean"===typeof b||"number"===typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b};k.isBuffer=b.isBuffer}).call(this,{isBuffer:d("../../is-buffer/index.js")})},{"../../is-buffer/index.js":8}],5:[function(d,r,k){function b(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=D(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function f(c,a,n,d){var l;if("function"!==typeof n)throw new TypeError('"listener" argument must be a function');
if(l=c._events){l.newListener&&(c.emit("newListener",a,n.listener?n.listener:n),l=c._events);var g=l[a]}else l=c._events=D(null),c._eventsCount=0;g?("function"===typeof g?g=l[a]=d?[n,g]:[g,n]:d?g.unshift(n):g.push(n),g.warned||(n=void 0===c._maxListeners?b.defaultMaxListeners:c._maxListeners)&&0<n&&g.length>n&&(g.warned=!0,n=Error("Possible EventEmitter memory leak detected. "+g.length+' "'+String(a)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),n.name="MaxListenersExceededWarning",
n.emitter=c,n.type=a,n.count=g.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",n.name,n.message))):(l[a]=n,++c._eventsCount);return c}function m(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],
arguments[1],arguments[2]);default:for(var c=Array(arguments.length),a=0;a<c.length;++a)c[a]=arguments[a];this.listener.apply(this.target,c)}}function q(c,a,b){c={fired:!1,wrapFn:void 0,target:c,type:a,listener:b};a=F.call(m,c);a.listener=b;return c.wrapFn=a}function w(c,b,n){c=c._events;if(!c)return[];b=c[b];if(!b)return[];if("function"===typeof b)return n?[b.listener||b]:[b];if(n)for(n=Array(b.length),c=0;c<n.length;++c)n[c]=b[c].listener||b[c];else n=a(b,b.length);return n}function A(c){var a=
this._events;if(a){c=a[c];if("function"===typeof c)return 1;if(c)return c.length}return 0}function a(c,a){for(var b=Array(a),l=0;l<a;++l)b[l]=c[l];return b}function g(c){var a=function(){};a.prototype=c;return new a}function v(c){var a=[],b;for(b in c)Object.prototype.hasOwnProperty.call(c,b)&&a.push(b);return b}function z(c){var a=this;return function(){return a.apply(c,arguments)}}var D=Object.create||g,u=Object.keys||v,F=Function.prototype.bind||z;r.exports=b;b.EventEmitter=b;b.prototype._events=
void 0;b.prototype._maxListeners=void 0;var H=10;try{d={};Object.defineProperty&&Object.defineProperty(d,"x",{value:0});var C=0===d.x}catch(c){C=!1}C?Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return H},set:function(c){if("number"!==typeof c||0>c||c!==c)throw new TypeError('"defaultMaxListeners" must be a positive number');H=c}}):b.defaultMaxListeners=H;b.prototype.setMaxListeners=function(c){if("number"!==typeof c||0>c||isNaN(c))throw new TypeError('"n" argument must be a positive number');
this._maxListeners=c;return this};b.prototype.getMaxListeners=function(){return void 0===this._maxListeners?b.defaultMaxListeners:this._maxListeners};b.prototype.emit=function(c){var b,n,d;var g="error"===c;if(d=this._events)g=g&&null==d.error;else if(!g)return!1;if(g){1<arguments.length&&(b=arguments[1]);if(b instanceof Error)throw b;d=Error('Unhandled "error" event. ('+b+")");d.context=b;throw d;}b=d[c];if(!b)return!1;d="function"===typeof b;var f=arguments.length;switch(f){case 1:if(d)b.call(this);
else for(d=b.length,b=a(b,d),g=0;g<d;++g)b[g].call(this);break;case 2:g=arguments[1];if(d)b.call(this,g);else for(d=b.length,b=a(b,d),f=0;f<d;++f)b[f].call(this,g);break;case 3:g=arguments[1];f=arguments[2];if(d)b.call(this,g,f);else for(d=b.length,b=a(b,d),n=0;n<d;++n)b[n].call(this,g,f);break;case 4:g=arguments[1];f=arguments[2];n=arguments[3];if(d)b.call(this,g,f,n);else{d=b.length;b=a(b,d);for(var m=0;m<d;++m)b[m].call(this,g,f,n)}break;default:g=Array(f-1);for(n=1;n<f;n++)g[n-1]=arguments[n];
if(d)b.apply(this,g);else for(d=b.length,b=a(b,d),f=0;f<d;++f)b[f].apply(this,g)}return!0};b.prototype.addListener=function(c,a){return f(this,c,a,!1)};b.prototype.on=b.prototype.addListener;b.prototype.prependListener=function(c,a){return f(this,c,a,!0)};b.prototype.once=function(c,a){if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');this.on(c,q(this,c,a));return this};b.prototype.prependOnceListener=function(c,a){if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');
this.prependListener(c,q(this,c,a));return this};b.prototype.removeListener=function(c,a){var b;if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');var l=this._events;if(!l)return this;var d=l[c];if(!d)return this;if(d===a||d.listener===a)0===--this._eventsCount?this._events=D(null):(delete l[c],l.removeListener&&this.emit("removeListener",c,d.listener||a));else if("function"!==typeof d){var g=-1;for(b=d.length-1;0<=b;b--)if(d[b]===a||d[b].listener===a){var f=d[b].listener;
g=b;break}if(0>g)return this;if(0===g)d.shift();else{b=g+1;for(var m=d.length;b<m;g+=1,b+=1)d[g]=d[b];d.pop()}1===d.length&&(l[c]=d[0]);l.removeListener&&this.emit("removeListener",c,f||a)}return this};b.prototype.removeAllListeners=function(c){var a=this._events;if(!a)return this;if(!a.removeListener)return 0===arguments.length?(this._events=D(null),this._eventsCount=0):a[c]&&(0===--this._eventsCount?this._events=D(null):delete a[c]),this;if(0===arguments.length){var b=u(a);for(a=0;a<b.length;++a){var d=
b[a];"removeListener"!==d&&this.removeAllListeners(d)}this.removeAllListeners("removeListener");this._events=D(null);this._eventsCount=0;return this}b=a[c];if("function"===typeof b)this.removeListener(c,b);else if(b)for(a=b.length-1;0<=a;a--)this.removeListener(c,b[a]);return this};b.prototype.listeners=function(c){return w(this,c,!0)};b.prototype.rawListeners=function(c){return w(this,c,!1)};b.listenerCount=function(c,a){return"function"===typeof c.listenerCount?c.listenerCount(a):A.call(c,a)};b.prototype.listenerCount=
A;b.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],6:[function(d,r,k){k.read=function(b,d,m,q,w){var f=8*w-q-1;var a=(1<<f)-1,g=a>>1,v=-7;w=m?w-1:0;var z=m?-1:1,k=b[d+w];w+=z;m=k&(1<<-v)-1;k>>=-v;for(v+=f;0<v;m=256*m+b[d+w],w+=z,v-=8);f=m&(1<<-v)-1;m>>=-v;for(v+=q;0<v;f=256*f+b[d+w],w+=z,v-=8);if(0===m)m=1-g;else{if(m===a)return f?NaN:Infinity*(k?-1:1);f+=Math.pow(2,q);m-=g}return(k?-1:1)*f*Math.pow(2,m-q)};k.write=function(b,d,m,q,w,A){var a,g=8*
A-w-1,f=(1<<g)-1,z=f>>1,k=23===w?Math.pow(2,-24)-Math.pow(2,-77):0;A=q?0:A-1;var u=q?1:-1,r=0>d||0===d&&0>1/d?1:0;d=Math.abs(d);isNaN(d)||Infinity===d?(d=isNaN(d)?1:0,q=f):(q=Math.floor(Math.log(d)/Math.LN2),1>d*(a=Math.pow(2,-q))&&(q--,a*=2),d=1<=q+z?d+k/a:d+k*Math.pow(2,1-z),2<=d*a&&(q++,a/=2),q+z>=f?(d=0,q=f):1<=q+z?(d=(d*a-1)*Math.pow(2,w),q+=z):(d=d*Math.pow(2,z-1)*Math.pow(2,w),q=0));for(;8<=w;b[m+A]=d&255,A+=u,d/=256,w-=8);q=q<<w|d;for(g+=w;0<g;b[m+A]=q&255,A+=u,q/=256,g-=8);b[m+A-u]|=128*
r}},{}],7:[function(d,r,k){r.exports="function"===typeof Object.create?function(b,d){d&&(b.super_=d,b.prototype=Object.create(d.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}))}:function(b,d){if(d){b.super_=d;var m=function(){};m.prototype=d.prototype;b.prototype=new m;b.prototype.constructor=b}}},{}],8:[function(d,r,k){function b(b){return!!b.constructor&&"function"===typeof b.constructor.isBuffer&&b.constructor.isBuffer(b)}r.exports=function(d){return null!=d&&(b(d)||
"function"===typeof d.readFloatLE&&"function"===typeof d.slice&&b(d.slice(0,0))||!!d._isBuffer)}},{}],9:[function(d,r,k){var b={}.toString;r.exports=Array.isArray||function(d){return"[object Array]"==b.call(d)}},{}],10:[function(d,r,k){(function(b){function d(d,f,w,A){if("function"!==typeof d)throw new TypeError('"callback" argument must be a function');var a=arguments.length;switch(a){case 0:case 1:return b.nextTick(d);case 2:return b.nextTick(function(){d.call(null,f)});case 3:return b.nextTick(function(){d.call(null,
f,w)});case 4:return b.nextTick(function(){d.call(null,f,w,A)});default:var g=Array(a-1);for(a=0;a<g.length;)g[a++]=arguments[a];return b.nextTick(function(){d.apply(null,g)})}}"undefined"===typeof b||!b.version||0===b.version.indexOf("v0.")||0===b.version.indexOf("v1.")&&0!==b.version.indexOf("v1.8.")?r.exports={nextTick:d}:r.exports=b}).call(this,d("_process"))},{_process:11}],11:[function(d,r,k){function b(){throw Error("setTimeout has not been defined");}function f(){throw Error("clearTimeout has not been defined");
}function m(a){if(v===setTimeout)return setTimeout(a,0);if((v===b||!v)&&setTimeout)return v=setTimeout,setTimeout(a,0);try{return v(a,0)}catch(c){try{return v.call(null,a,0)}catch(l){return v.call(this,a,0)}}}function q(a){if(z===clearTimeout)return clearTimeout(a);if((z===f||!z)&&clearTimeout)return z=clearTimeout,clearTimeout(a);try{return z(a)}catch(c){try{return z.call(null,a)}catch(l){return z.call(this,a)}}}function w(){u&&F&&(u=!1,F.length?D=F.concat(D):H=-1,D.length&&A())}function A(){if(!u){var a=
m(w);u=!0;for(var c=D.length;c;){F=D;for(D=[];++H<c;)F&&F[H].run();H=-1;c=D.length}F=null;u=!1;q(a)}}function a(a,c){this.fun=a;this.array=c}function g(){}d=r.exports={};try{var v="function"===typeof setTimeout?setTimeout:b}catch(C){v=b}try{var z="function"===typeof clearTimeout?clearTimeout:f}catch(C){z=f}var D=[],u=!1,F,H=-1;d.nextTick=function(b){var c=Array(arguments.length-1);if(1<arguments.length)for(var d=1;d<arguments.length;d++)c[d-1]=arguments[d];D.push(new a(b,c));1!==D.length||u||m(A)};
a.prototype.run=function(){this.fun.apply(null,this.array)};d.title="browser";d.browser=!0;d.env={};d.argv=[];d.version="";d.versions={};d.on=g;d.addListener=g;d.once=g;d.off=g;d.removeListener=g;d.removeAllListeners=g;d.emit=g;d.prependListener=g;d.prependOnceListener=g;d.listeners=function(a){return[]};d.binding=function(a){throw Error("process.binding is not supported");};d.cwd=function(){return"/"};d.chdir=function(a){throw Error("process.chdir is not supported");};d.umask=function(){return 0}},
{}],12:[function(d,r,k){r.exports=d("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":13}],13:[function(d,r,k){function b(a){if(!(this instanceof b))return new b(a);w.call(this,a);A.call(this,a);a&&!1===a.readable&&(this.readable=!1);a&&!1===a.writable&&(this.writable=!1);this.allowHalfOpen=!0;a&&!1===a.allowHalfOpen&&(this.allowHalfOpen=!1);this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||q.nextTick(m,this)}function m(a){a.end()}var q=d("process-nextick-args");
k=Object.keys||function(a){var b=[],d;for(d in a)b.push(d);return b};r.exports=b;r=Object.create(d("core-util-is"));r.inherits=d("inherits");var w=d("./_stream_readable"),A=d("./_stream_writable");r.inherits(b,w);d=k(A.prototype);for(r=0;r<d.length;r++)k=d[r],b.prototype[k]||(b.prototype[k]=A.prototype[k]);Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0===
this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}});b.prototype._destroy=function(a,b){this.push(null);this.end();q.nextTick(b,a)}},{"./_stream_readable":15,"./_stream_writable":17,"core-util-is":4,inherits:7,"process-nextick-args":10}],14:[function(d,r,k){function b(d){if(!(this instanceof b))return new b(d);
f.call(this,d)}r.exports=b;var f=d("./_stream_transform");r=Object.create(d("core-util-is"));r.inherits=d("inherits");r.inherits(b,f);b.prototype._transform=function(b,d,f){f(null,b)}},{"./_stream_transform":16,"core-util-is":4,inherits:7}],15:[function(d,r,k){(function(b,f){function m(a,c,b){if("function"===typeof a.prependListener)return a.prependListener(c,b);if(a._events&&a._events[c])M(a._events[c])?a._events[c].unshift(b):a._events[c]=[b,a._events[c]];else a.on(c,b)}function q(a,c){N=N||d("./_stream_duplex");
a=a||{};c=c instanceof N;this.objectMode=!!a.objectMode;c&&(this.objectMode=this.objectMode||!!a.readableObjectMode);var b=a.highWaterMark,e=a.readableHighWaterMark,h=this.objectMode?16:16384;this.highWaterMark=b||0===b?b:c&&(e||0===e)?e:h;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new T;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.destroyed=this.resumeScheduled=this.readableListening=this.emittedReadable=
this.needReadable=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;a.encoding&&(p||(p=d("string_decoder/").StringDecoder),this.decoder=new p(a.encoding),this.encoding=a.encoding)}function w(a){N=N||d("./_stream_duplex");if(!(this instanceof w))return new w(a);this._readableState=new q(a,this);this.readable=!0;a&&("function"===typeof a.read&&(this._read=a.read),"function"===typeof a.destroy&&(this._destroy=a.destroy));x.call(this)}
function A(c,b,d,n,l){var e=c._readableState;if(null===b)e.reading=!1,e.ended||(e.decoder&&(b=e.decoder.end())&&b.length&&(e.buffer.push(b),e.length+=e.objectMode?1:b.length),e.ended=!0,v(c));else{if(!l){l=b;var h;y.isBuffer(l)||l instanceof O||"string"===typeof l||void 0===l||e.objectMode||(h=new TypeError("Invalid non-string/buffer chunk"));var g=h}g?c.emit("error",g):e.objectMode||b&&0<b.length?("string"===typeof b||e.objectMode||Object.getPrototypeOf(b)===y.prototype||(b=y.from(b)),n?e.endEmitted?
c.emit("error",Error("stream.unshift() after end event")):a(c,e,b,!0):e.ended?c.emit("error",Error("stream.push() after EOF")):(e.reading=!1,e.decoder&&!d?(b=e.decoder.write(b),e.objectMode||0!==b.length?a(c,e,b,!1):e.readingMore||(e.readingMore=!0,G.nextTick(k,c,e))):a(c,e,b,!1))):n||(e.reading=!1)}return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(a,c,b,d){c.flowing&&0===c.length&&!c.sync?(a.emit("data",b),a.read(0)):(c.length+=c.objectMode?1:b.length,d?c.buffer.unshift(b):
c.buffer.push(b),c.needReadable&&v(a));c.readingMore||(c.readingMore=!0,G.nextTick(k,a,c))}function g(a,c){if(0>=a||0===c.length&&c.ended)return 0;if(c.objectMode)return 1;if(a!==a)return c.flowing&&c.length?c.buffer.head.data.length:c.length;if(a>c.highWaterMark){var b=a;8388608<=b?b=8388608:(b--,b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,b|=b>>>16,b++);c.highWaterMark=b}return a<=c.length?a:c.ended?c.length:(c.needReadable=!0,0)}function v(a){var c=a._readableState;c.needReadable=!1;c.emittedReadable||
(B("emitReadable",c.flowing),c.emittedReadable=!0,c.sync?G.nextTick(z,a):z(a))}function z(a){B("emit readable");a.emit("readable");C(a)}function k(a,c){for(var b=c.length;!c.reading&&!c.flowing&&!c.ended&&c.length<c.highWaterMark&&(B("maybeReadMore read 0"),a.read(0),b!==c.length);)b=c.length;c.readingMore=!1}function u(c){return function(){var a=c._readableState;B("pipeOnDrain",a.awaitDrain);a.awaitDrain&&a.awaitDrain--;0===a.awaitDrain&&c.listeners("data").length&&(a.flowing=!0,C(c))}}function F(c){B("readable nexttick read 0");
c.read(0)}function H(c,a){a.reading||(B("resume read 0"),c.read(0));a.resumeScheduled=!1;a.awaitDrain=0;c.emit("resume");C(c);a.flowing&&!a.reading&&c.read(0)}function C(c){var a=c._readableState;for(B("flow",a.flowing);a.flowing&&null!==c.read(););}function c(c,a){if(0===a.length)return null;if(a.objectMode)var b=a.buffer.shift();else if(!c||c>=a.length)b=a.decoder?a.buffer.join(""):1===a.buffer.length?a.buffer.head.data:a.buffer.concat(a.length),a.buffer.clear();else{b=a.buffer;a=a.decoder;if(c<
b.head.data.length)a=b.head.data.slice(0,c),b.head.data=b.head.data.slice(c);else{if(c===b.head.data.length)b=b.shift();else if(a){a=b.head;var e=1,d=a.data;for(c-=d.length;a=a.next;){var n=a.data,l=c>n.length?n.length:c;d=l===n.length?d+n:d+n.slice(0,c);c-=l;if(0===c){l===n.length?(++e,b.head=a.next?a.next:b.tail=null):(b.head=a,a.data=n.slice(l));break}++e}b.length-=e;b=d}else{a=y.allocUnsafe(c);e=b.head;d=1;e.data.copy(a);for(c-=e.data.length;e=e.next;){n=e.data;l=c>n.length?n.length:c;n.copy(a,
a.length-c,0,l);c-=l;if(0===c){l===n.length?(++d,b.head=e.next?e.next:b.tail=null):(b.head=e,e.data=n.slice(l));break}++d}b.length-=d;b=a}a=b}b=a}return b}function l(a){var c=a._readableState;if(0<c.length)throw Error('"endReadable()" called on non-empty stream');c.endEmitted||(c.ended=!0,G.nextTick(n,c,a))}function n(a,c){a.endEmitted||0!==a.length||(a.endEmitted=!0,c.readable=!1,c.emit("end"))}function K(a,c){for(var b=0,e=a.length;b<e;b++)if(a[b]===c)return b;return-1}var G=d("process-nextick-args");
r.exports=w;var M=d("isarray"),N;w.ReadableState=q;d("events");var x=d("./internal/streams/stream"),y=d("safe-buffer").Buffer,O=f.Uint8Array||function(){};f=Object.create(d("core-util-is"));f.inherits=d("inherits");var I=d("util"),B=void 0;B=I&&I.debuglog?I.debuglog("stream"):function(){};var T=d("./internal/streams/BufferList");I=d("./internal/streams/destroy");var p;f.inherits(w,x);var J=["error","close","destroy","pause","resume"];Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0===
this._readableState?!1:this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}});w.prototype.destroy=I.destroy;w.prototype._undestroy=I.undestroy;w.prototype._destroy=function(a,c){this.push(null);c(a)};w.prototype.push=function(a,c){var b=this._readableState;if(b.objectMode)var e=!0;else"string"===typeof a&&(c=c||b.defaultEncoding,c!==b.encoding&&(a=y.from(a,c),c=""),e=!0);return A(this,a,c,!1,e)};w.prototype.unshift=function(a){return A(this,a,null,
!0,!1)};w.prototype.isPaused=function(){return!1===this._readableState.flowing};w.prototype.setEncoding=function(a){p||(p=d("string_decoder/").StringDecoder);this._readableState.decoder=new p(a);this._readableState.encoding=a;return this};w.prototype.read=function(a){B("read",a);a=parseInt(a,10);var b=this._readableState,e=a;0!==a&&(b.emittedReadable=!1);if(0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return B("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?l(this):v(this),
null;a=g(a,b);if(0===a&&b.ended)return 0===b.length&&l(this),null;var d=b.needReadable;B("need readable",d);if(0===b.length||b.length-a<b.highWaterMark)d=!0,B("length less than watermark",d);b.ended||b.reading?B("reading or ended",!1):d&&(B("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=g(e,b)));d=0<a?c(a,b):null;null===d?(b.needReadable=!0,a=0):b.length-=a;0===b.length&&(b.ended||(b.needReadable=!0),e!==a&&b.ended&&l(this));
null!==d&&this.emit("data",d);return d};w.prototype._read=function(a){this.emit("error",Error("_read() is not implemented"))};w.prototype.pipe=function(a,c){function e(c,b){B("onunpipe");c===h&&b&&!1===b.hasUnpiped&&(b.hasUnpiped=!0,B("cleanup"),a.removeListener("close",g),a.removeListener("finish",p),a.removeListener("drain",v),a.removeListener("error",l),a.removeListener("unpipe",e),h.removeListener("end",d),h.removeListener("end",f),h.removeListener("data",n),z=!0,!L.awaitDrain||a._writableState&&
!a._writableState.needDrain||v())}function d(){B("onend");a.end()}function n(c){B("ondata");E=!1;!1!==a.write(c)||E||((1===L.pipesCount&&L.pipes===a||1<L.pipesCount&&-1!==K(L.pipes,a))&&!z&&(B("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,E=!0),h.pause())}function l(c){B("onerror",c);f();a.removeListener("error",l);0===a.listeners("error").length&&a.emit("error",c)}function g(){a.removeListener("finish",p);f()}function p(){B("onfinish");a.removeListener("close",
g);f()}function f(){B("unpipe");h.unpipe(a)}var h=this,L=this._readableState;switch(L.pipesCount){case 0:L.pipes=a;break;case 1:L.pipes=[L.pipes,a];break;default:L.pipes.push(a)}L.pipesCount+=1;B("pipe count=%d opts=%j",L.pipesCount,c);c=c&&!1===c.end||a===b.stdout||a===b.stderr?f:d;if(L.endEmitted)G.nextTick(c);else h.once("end",c);a.on("unpipe",e);var v=u(h);a.on("drain",v);var z=!1,E=!1;h.on("data",n);m(a,"error",l);a.once("close",g);a.once("finish",p);a.emit("pipe",h);L.flowing||(B("pipe resume"),
h.resume());return a};w.prototype.unpipe=function(a){var c=this._readableState,b={hasUnpiped:!1};if(0===c.pipesCount)return this;if(1===c.pipesCount){if(a&&a!==c.pipes)return this;a||(a=c.pipes);c.pipes=null;c.pipesCount=0;c.flowing=!1;a&&a.emit("unpipe",this,b);return this}if(!a){a=c.pipes;var e=c.pipesCount;c.pipes=null;c.pipesCount=0;c.flowing=!1;for(c=0;c<e;c++)a[c].emit("unpipe",this,b);return this}e=K(c.pipes,a);if(-1===e)return this;c.pipes.splice(e,1);--c.pipesCount;1===c.pipesCount&&(c.pipes=
c.pipes[0]);a.emit("unpipe",this,b);return this};w.prototype.on=function(a,c){c=x.prototype.on.call(this,a,c);"data"===a?!1!==this._readableState.flowing&&this.resume():"readable"===a&&(a=this._readableState,a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,a.reading?a.length&&v(this):G.nextTick(F,this)));return c};w.prototype.addListener=w.prototype.on;w.prototype.resume=function(){var a=this._readableState;a.flowing||(B("resume"),a.flowing=!0,a.resumeScheduled||
(a.resumeScheduled=!0,G.nextTick(H,this,a)));return this};w.prototype.pause=function(){B("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(B("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};w.prototype.wrap=function(a){var c=this,b=this._readableState,d=!1;a.on("end",function(){B("wrapped end");if(b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&c.push(a)}c.push(null)});a.on("data",function(e){B("wrapped data");b.decoder&&(e=b.decoder.write(e));
b.objectMode&&(null===e||void 0===e)||!(b.objectMode||e&&e.length)||c.push(e)||(d=!0,a.pause())});for(var e in a)void 0===this[e]&&"function"===typeof a[e]&&(this[e]=function(c){return function(){return a[c].apply(a,arguments)}}(e));for(e=0;e<J.length;e++)a.on(J[e],this.emit.bind(this,J[e]));this._read=function(c){B("wrapped _read",c);d&&(d=!1,a.resume())};return this};Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});
w._fromList=c}).call(this,d("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./_stream_duplex":13,"./internal/streams/BufferList":18,"./internal/streams/destroy":19,"./internal/streams/stream":20,_process:11,"core-util-is":4,events:5,inherits:7,isarray:9,"process-nextick-args":10,"safe-buffer":21,"string_decoder/":22,util:2}],16:[function(d,r,k){function b(b,a){var d=this._transformState;d.transforming=!1;var f=d.writecb;if(!f)return this.emit("error",
Error("write callback called multiple times"));d.writechunk=null;d.writecb=null;null!=a&&this.push(a);f(b);b=this._readableState;b.reading=!1;(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function f(d){if(!(this instanceof f))return new f(d);w.call(this,d);this._transformState={afterTransform:b.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;d&&("function"===typeof d.transform&&
(this._transform=d.transform),"function"===typeof d.flush&&(this._flush=d.flush));this.on("prefinish",m)}function m(){var b=this;"function"===typeof this._flush?this._flush(function(a,d){q(b,a,d)}):q(this,null,null)}function q(b,a,d){if(a)return b.emit("error",a);null!=d&&b.push(d);if(b._writableState.length)throw Error("Calling transform done when ws.length != 0");if(b._transformState.transforming)throw Error("Calling transform done when still transforming");return b.push(null)}r.exports=f;var w=
d("./_stream_duplex");r=Object.create(d("core-util-is"));r.inherits=d("inherits");r.inherits(f,w);f.prototype.push=function(b,a){this._transformState.needTransform=!1;return w.prototype.push.call(this,b,a)};f.prototype._transform=function(b,a,d){throw Error("_transform() is not implemented");};f.prototype._write=function(b,a,d){var g=this._transformState;g.writecb=d;g.writechunk=b;g.writeencoding=a;g.transforming||(b=this._readableState,(g.needTransform||b.needReadable||b.length<b.highWaterMark)&&
this._read(b.highWaterMark))};f.prototype._read=function(b){b=this._transformState;null!==b.writechunk&&b.writecb&&!b.transforming?(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0};f.prototype._destroy=function(b,a){var d=this;w.prototype._destroy.call(this,b,function(b){a(b);d.emit("close")})}},{"./_stream_duplex":13,"core-util-is":4,inherits:7}],17:[function(d,r,k){(function(b,f,m){function q(a){var c=this;this.entry=this.next=null;this.finish=
function(){var b=c.entry;for(c.entry=null;b;){var d=b.callback;a.pendingcb--;d(void 0);b=b.next}a.corkedRequestsFree?a.corkedRequestsFree.next=c:a.corkedRequestsFree=c}}function w(){}function k(a,b){c=c||d("./_stream_duplex");a=a||{};var n=b instanceof c;this.objectMode=!!a.objectMode;n&&(this.objectMode=this.objectMode||!!a.writableObjectMode);var l=a.highWaterMark,g=a.writableHighWaterMark,f=this.objectMode?16:16384;this.highWaterMark=l||0===l?l:n&&(g||0===g)?g:f;this.highWaterMark=Math.floor(this.highWaterMark);
this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==a.decodeStrings;this.defaultEncoding=a.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){var c=b._writableState,d=c.sync,e=c.writecb;c.writing=!1;c.writecb=null;c.length-=c.writelen;c.writelen=0;a?(--c.pendingcb,d?(H.nextTick(e,a),H.nextTick(F,b,c),b._writableState.errorEmitted=!0,b.emit("error",a)):(e(a),b._writableState.errorEmitted=
!0,b.emit("error",a),F(b,c))):((a=D(c))||c.corked||c.bufferProcessing||!c.bufferedRequest||z(b,c),d?C(v,b,c,a,e):v(b,c,a,e))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.bufferedRequestCount=0;this.corkedRequestsFree=new q(this)}function a(b){c=c||d("./_stream_duplex");if(!(M.call(a,this)||this instanceof c))return new a(b);this._writableState=new k(b,this);this.writable=!0;b&&("function"===typeof b.write&&
(this._write=b.write),"function"===typeof b.writev&&(this._writev=b.writev),"function"===typeof b.destroy&&(this._destroy=b.destroy),"function"===typeof b.final&&(this._final=b.final));n.call(this)}function g(a,c,b,d,n,l,g){c.writelen=d;c.writecb=g;c.writing=!0;c.sync=!0;b?a._writev(n,c.onwrite):a._write(n,l,c.onwrite);c.sync=!1}function v(a,c,b,d){!b&&0===c.length&&c.needDrain&&(c.needDrain=!1,a.emit("drain"));c.pendingcb--;d();F(a,c)}function z(a,c){c.bufferProcessing=!0;var b=c.bufferedRequest;
if(a._writev&&b&&b.next){var d=Array(c.bufferedRequestCount),n=c.corkedRequestsFree;n.entry=b;for(var l=0,f=!0;b;)d[l]=b,b.isBuf||(f=!1),b=b.next,l+=1;d.allBuffers=f;g(a,c,!0,c.length,d,"",n.finish);c.pendingcb++;c.lastBufferedRequest=null;n.next?(c.corkedRequestsFree=n.next,n.next=null):c.corkedRequestsFree=new q(c);c.bufferedRequestCount=0}else{for(;b&&(d=b.chunk,g(a,c,!1,c.objectMode?1:d.length,d,b.encoding,b.callback),b=b.next,c.bufferedRequestCount--,!c.writing););null===b&&(c.lastBufferedRequest=
null)}c.bufferedRequest=b;c.bufferProcessing=!1}function D(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function u(a,c){a._final(function(b){c.pendingcb--;b&&a.emit("error",b);c.prefinished=!0;a.emit("prefinish");F(a,c)})}function F(a,c){var b=D(c);b&&(c.prefinished||c.finalCalled||("function"===typeof a._final?(c.pendingcb++,c.finalCalled=!0,H.nextTick(u,a,c)):(c.prefinished=!0,a.emit("prefinish"))),0===c.pendingcb&&(c.finished=!0,a.emit("finish")));return b}
var H=d("process-nextick-args");r.exports=a;var C=!b.browser&&-1<["v0.10","v0.9."].indexOf(b.version.slice(0,5))?m:H.nextTick,c;a.WritableState=k;b=Object.create(d("core-util-is"));b.inherits=d("inherits");var l={deprecate:d("util-deprecate")},n=d("./internal/streams/stream"),K=d("safe-buffer").Buffer,G=f.Uint8Array||function(){};f=d("./internal/streams/destroy");b.inherits(a,n);k.prototype.getBuffer=function(){for(var a=this.bufferedRequest,c=[];a;)c.push(a),a=a.next;return c};(function(){try{Object.defineProperty(k.prototype,
"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(N){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var M=Function.prototype[Symbol.hasInstance];Object.defineProperty(a,Symbol.hasInstance,{value:function(c){return M.call(this,c)?!0:this!==a?!1:c&&c._writableState instanceof k}})}else M=function(a){return a instanceof this};
a.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))};a.prototype.write=function(a,c,b){var d=this._writableState,n=!1,l;if(l=!d.objectMode)l=a,l=K.isBuffer(l)||l instanceof G;l&&!K.isBuffer(a)&&(a=K.from(a));"function"===typeof c&&(b=c,c=null);l?c="buffer":c||(c=d.defaultEncoding);"function"!==typeof b&&(b=w);if(d.ended)d=b,b=Error("write after end"),this.emit("error",b),H.nextTick(d,b);else{var f;if(!(f=l)){f=a;var m=b,z=!0,e=!1;null===f?e=new TypeError("May not write null values to stream"):
"string"===typeof f||void 0===f||d.objectMode||(e=new TypeError("Invalid non-string/buffer chunk"));e&&(this.emit("error",e),H.nextTick(m,e),z=!1);f=z}f&&(d.pendingcb++,n=l,n||(l=a,d.objectMode||!1===d.decodeStrings||"string"!==typeof l||(l=K.from(l,c)),a!==l&&(n=!0,c="buffer",a=l)),f=d.objectMode?1:a.length,d.length+=f,l=d.length<d.highWaterMark,l||(d.needDrain=!0),d.writing||d.corked?(f=d.lastBufferedRequest,d.lastBufferedRequest={chunk:a,encoding:c,isBuf:n,callback:b,next:null},f?f.next=d.lastBufferedRequest:
d.bufferedRequest=d.lastBufferedRequest,d.bufferedRequestCount+=1):g(this,d,!1,f,a,c,b),n=l)}return n};a.prototype.cork=function(){this._writableState.corked++};a.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||z(this,a))};a.prototype.setDefaultEncoding=function(a){"string"===typeof a&&(a=a.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((a+
"").toLowerCase())))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a;return this};Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});a.prototype._write=function(a,c,b){b(Error("_write() is not implemented"))};a.prototype._writev=null;a.prototype.end=function(a,c,b){var d=this._writableState;"function"===typeof a?(b=a,c=a=null):"function"===typeof c&&(b=c,c=null);null!==a&&void 0!==a&&
this.write(a,c);d.corked&&(d.corked=1,this.uncork());if(!d.ending&&!d.finished){a=b;d.ending=!0;F(this,d);if(a)if(d.finished)H.nextTick(a);else this.once("finish",a);d.ended=!0;this.writable=!1}};Object.defineProperty(a.prototype,"destroyed",{get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(a){this._writableState&&(this._writableState.destroyed=a)}});a.prototype.destroy=f.destroy;a.prototype._undestroy=f.undestroy;a.prototype._destroy=function(a,c){this.end();
c(a)}}).call(this,d("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("timers").setImmediate)},{"./_stream_duplex":13,"./internal/streams/destroy":19,"./internal/streams/stream":20,_process:11,"core-util-is":4,inherits:7,"process-nextick-args":10,"safe-buffer":21,timers:31,"util-deprecate":32}],18:[function(d,r,k){var b=d("safe-buffer").Buffer,f=d("util");r.exports=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");
this.tail=this.head=null;this.length=0}d.prototype.push=function(b){b={data:b,next:null};0<this.length?this.tail.next=b:this.head=b;this.tail=b;++this.length};d.prototype.unshift=function(b){b={data:b,next:this.head};0===this.length&&(this.tail=b);this.head=b;++this.length};d.prototype.shift=function(){if(0!==this.length){var b=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return b}};d.prototype.clear=function(){this.head=this.tail=null;this.length=0};d.prototype.join=
function(b){if(0===this.length)return"";for(var d=this.head,f=""+d.data;d=d.next;)f+=b+d.data;return f};d.prototype.concat=function(d){if(0===this.length)return b.alloc(0);if(1===this.length)return this.head.data;d=b.allocUnsafe(d>>>0);for(var f=this.head,m=0;f;)f.data.copy(d,m),m+=f.data.length,f=f.next;return d};return d}();f&&f.inspect&&f.inspect.custom&&(r.exports.prototype[f.inspect.custom]=function(){var b=f.inspect({length:this.length});return this.constructor.name+" "+b})},{"safe-buffer":21,
util:2}],19:[function(d,r,k){function b(b,d){b.emit("error",d)}var f=d("process-nextick-args");r.exports={destroy:function(d,q){var m=this,k=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||k)return q?q(d):!d||this._writableState&&this._writableState.errorEmitted||f.nextTick(b,this,d),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(d||null,function(a){!q&&a?(f.nextTick(b,
m,a),m._writableState&&(m._writableState.errorEmitted=!0)):q&&q(a)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":10}],20:[function(d,r,k){r.exports=d("events").EventEmitter},
{events:5}],21:[function(d,r,k){function b(b,d){for(var a in b)d[a]=b[a]}function f(b,d,a){return q(b,d,a)}var m=d("buffer"),q=m.Buffer;q.from&&q.alloc&&q.allocUnsafe&&q.allocUnsafeSlow?r.exports=m:(b(m,k),k.Buffer=f);b(q,f);f.from=function(b,d,a){if("number"===typeof b)throw new TypeError("Argument must not be a number");return q(b,d,a)};f.alloc=function(b,d,a){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=q(b);void 0!==d?"string"===typeof a?b.fill(d,a):b.fill(d):b.fill(0);
return b};f.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return q(b)};f.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return m.SlowBuffer(b)}},{buffer:3}],22:[function(d,r,k){function b(a){if(!a)return"utf8";for(var b;;)switch(a){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return a;
default:if(b)return;a=(""+a).toLowerCase();b=!0}}function f(d){var f=b(d);if("string"!==typeof f&&(u.isEncoding===F||!F(d)))throw Error("Unknown encoding: "+d);this.encoding=f||d;switch(this.encoding){case "utf16le":this.text=A;this.end=a;d=4;break;case "utf8":this.fillLast=w;d=4;break;case "base64":this.text=g;this.end=v;d=3;break;default:this.write=z;this.end=D;return}this.lastTotal=this.lastNeed=0;this.lastChar=u.allocUnsafe(d)}function m(a){return 127>=a?0:6===a>>5?2:14===a>>4?3:30===a>>3?4:2===
a>>6?-1:-2}function q(a,b,c){var d=b.length-1;if(d<c)return 0;var n=m(b[d]);if(0<=n)return 0<n&&(a.lastNeed=n-1),n;if(--d<c||-2===n)return 0;n=m(b[d]);if(0<=n)return 0<n&&(a.lastNeed=n-2),n;if(--d<c||-2===n)return 0;n=m(b[d]);return 0<=n?(0<n&&(2===n?n=0:a.lastNeed=n-3),n):0}function w(a){var b=this.lastTotal-this.lastNeed;a:if(128!==(a[0]&192)){this.lastNeed=0;var c="\ufffd"}else{if(1<this.lastNeed&&1<a.length){if(128!==(a[1]&192)){this.lastNeed=1;c="\ufffd";break a}if(2<this.lastNeed&&2<a.length&&
128!==(a[2]&192)){this.lastNeed=2;c="\ufffd";break a}}c=void 0}if(void 0!==c)return c;if(this.lastNeed<=a.length)return a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,b,0,a.length);this.lastNeed-=a.length}function A(a,b){if(0===(a.length-b)%2){if(b=a.toString("utf16le",b)){var c=b.charCodeAt(b.length-1);if(55296<=c&&56319>=c)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],b.slice(0,
-1)}return b}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",b,a.length-1)}function a(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):a}function g(a,b){var c=(a.length-b)%3;if(0===c)return a.toString("base64",b);this.lastNeed=3-c;this.lastTotal=3;1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",b,a.length-
c)}function v(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function z(a){return a.toString(this.encoding)}function D(a){return a&&a.length?this.write(a):""}var u=d("safe-buffer").Buffer,F=u.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};k.StringDecoder=
f;f.prototype.write=function(a){if(0===a.length)return"";if(this.lastNeed){var b=this.fillLast(a);if(void 0===b)return"";var c=this.lastNeed;this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):b||""};f.prototype.end=function(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a};f.prototype.text=function(a,b){var c=q(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;c=a.length-(c-this.lastNeed);a.copy(this.lastChar,0,c);return a.toString("utf8",
b,c)};f.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length}},{"safe-buffer":21}],23:[function(d,r,k){r.exports=d("./readable").PassThrough},{"./readable":24}],24:[function(d,r,k){k=r.exports=d("./lib/_stream_readable.js");k.Stream=k;k.Readable=k;k.Writable=d("./lib/_stream_writable.js");
k.Duplex=d("./lib/_stream_duplex.js");k.Transform=d("./lib/_stream_transform.js");k.PassThrough=d("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":13,"./lib/_stream_passthrough.js":14,"./lib/_stream_readable.js":15,"./lib/_stream_transform.js":16,"./lib/_stream_writable.js":17}],25:[function(d,r,k){r.exports=d("./readable").Transform},{"./readable":24}],26:[function(d,r,k){r.exports=d("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":17}],27:[function(d,r,k){function b(b,d){for(var a in b)d[a]=
b[a]}function f(b,d,a){return q(b,d,a)}var m=d("buffer"),q=m.Buffer;q.from&&q.alloc&&q.allocUnsafe&&q.allocUnsafeSlow?r.exports=m:(b(m,k),k.Buffer=f);f.prototype=Object.create(q.prototype);b(q,f);f.from=function(b,d,a){if("number"===typeof b)throw new TypeError("Argument must not be a number");return q(b,d,a)};f.alloc=function(b,d,a){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=q(b);void 0!==d?"string"===typeof a?b.fill(d,a):b.fill(d):b.fill(0);return b};f.allocUnsafe=
function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return q(b)};f.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return m.SlowBuffer(b)}},{buffer:3}],28:[function(d,r,k){(function(b){(function(f){function m(a,c){if(!(this instanceof m))return new m(a,c);for(var b=0,d=G.length;b<d;b++)this[G[b]]="";this.q=this.c="";this.bufferCheckPosition=f.MAX_BUFFER_LENGTH;this.opt=c||{};this.opt.lowercase=this.opt.lowercase||
this.opt.lowercasetags;this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase";this.tags=[];this.closed=this.closedRoot=this.sawRoot=!1;this.tag=this.error=null;this.strict=!!a;this.noscript=!(!a&&!this.opt.noscript);this.state=t.BEGIN;this.ENTITIES=(this.strictEntities=this.opt.strictEntities)?Object.create(f.XML_ENTITIES):Object.create(f.ENTITIES);this.attribList=[];this.opt.xmlns&&(this.ns=Object.create(h));if(this.trackPosition=!1!==this.opt.position)this.position=this.line=this.column=
0;this.onready&&this.onready(void 0)}function q(a,c){if(!(this instanceof q))return new q(a,c);M.apply(this);this._parser=new m(a,c);this.readable=this.writable=!0;var b=this;this._parser.onend=function(){b.emit("end")};this._parser.onerror=function(a){b.emit("error",a);b._parser.error=null};this._decoder=null;N.forEach(function(a){Object.defineProperty(b,"on"+a,{get:function(){return b._parser["on"+a]},set:function(c){if(!c)return b.removeAllListeners(a),b._parser["on"+a]=c;b.on(a,c)},enumerable:!0,
configurable:!1})})}function k(a){return a.split("").reduce(function(a,c){a[c]=!0;return a},{})}function r(a,c){return"[object RegExp]"===Object.prototype.toString.call(a)?!!c.match(a):a[c]}function a(a,c,b){a.textNode&&g(a);a[c]&&a[c](b)}function g(a){a.textNode=v(a.opt,a.textNode);a.textNode&&a.ontext&&a.ontext(a.textNode);a.textNode=""}function v(a,c){a.trim&&(c=c.trim());a.normalize&&(c=c.replace(/\s+/g," "));return c}function z(a,c){g(a);a.trackPosition&&(c+="\nLine: "+a.line+"\nColumn: "+a.column+
"\nChar: "+a.c);c=Error(c);a.error=c;a.onerror&&a.onerror(c);return a}function D(a){a.sawRoot&&!a.closedRoot&&u(a,"Unclosed root tag");a.state!==t.BEGIN&&a.state!==t.BEGIN_WHITESPACE&&a.state!==t.TEXT&&z(a,"Unexpected end");g(a);a.c="";a.closed=!0;a.onend&&a.onend(void 0);m.call(a,a.strict,a.opt);return a}function u(a,c){if("object"!==typeof a||!(a instanceof m))throw Error("bad call to strictFail");a.strict&&z(a,c)}function F(a,c){var b=0>a.indexOf(":")?["",a]:a.split(":"),d=b[0];b=b[1];c&&"xmlns"===
a&&(d="xmlns",b="");return{prefix:d,local:b}}function H(c){c.strict||(c.attribName=c.attribName[c.looseCase]());if(-1===c.attribList.indexOf(c.attribName)&&!c.tag.attributes.hasOwnProperty(c.attribName))if(c.opt.xmlns){var b=F(c.attribName,!0),d=b.local;if("xmlns"===b.prefix)if("xml"===d&&c.attribValue!==J)u(c,"xml: prefix must be bound to "+J+"\nActual: "+c.attribValue);else if("xmlns"===d&&c.attribValue!==e)u(c,"xmlns: prefix must be bound to "+e+"\nActual: "+c.attribValue);else{b=c.tag;var n=c.tags[c.tags.length-
1]||c;b.ns===n.ns&&(b.ns=Object.create(n.ns));b.ns[d]=c.attribValue}c.attribList.push([c.attribName,c.attribValue])}else c.tag.attributes[c.attribName]=c.attribValue,a(c,"onattribute",{name:c.attribName,value:c.attribValue});c.attribName=c.attribValue=""}function C(c,b){if(c.opt.xmlns){var d=c.tag,e=F(c.tagName);d.prefix=e.prefix;d.local=e.local;d.uri=d.ns[e.prefix]||"";d.prefix&&!d.uri&&(u(c,"Unbound namespace prefix: "+JSON.stringify(c.tagName)),d.uri=e.prefix);e=c.tags[c.tags.length-1]||c;d.ns&&
e.ns!==d.ns&&Object.keys(d.ns).forEach(function(b){a(c,"onopennamespace",{prefix:b,uri:d.ns[b]})});e=0;for(var n=c.attribList.length;e<n;e++){var l=c.attribList[e],g=l[0],f=l[1],m=F(g,!0);l=m.prefix;var p=""===l?"":d.ns[l]||"";f={name:g,value:f,prefix:l,local:m.local,uri:p};l&&"xmlns"!==l&&!p&&(u(c,"Unbound namespace prefix: "+JSON.stringify(l)),f.uri=l);c.tag.attributes[g]=f;a(c,"onattribute",f)}c.attribList.length=0}c.tag.isSelfClosing=!!b;c.sawRoot=!0;c.tags.push(c.tag);a(c,"onopentag",c.tag);
b||(c.noscript||"script"!==c.tagName.toLowerCase()?c.state=t.TEXT:c.state=t.SCRIPT,c.tag=null,c.tagName="");c.attribName=c.attribValue="";c.attribList.length=0}function c(c){if(c.tagName){if(c.script){if("script"!==c.tagName){c.script+="</"+c.tagName+">";c.tagName="";c.state=t.SCRIPT;return}a(c,"onscript",c.script);c.script=""}var b=c.tags.length,d=c.tagName;c.strict||(d=d[c.looseCase]());for(var e=d;b--;)if(c.tags[b].name!==e)u(c,"Unexpected close tag");else break;if(0>b)u(c,"Unmatched closing tag: "+
c.tagName),c.textNode+="</"+c.tagName+">";else{c.tagName=d;for(d=c.tags.length;d-- >b;){var n=c.tag=c.tags.pop();c.tagName=c.tag.name;a(c,"onclosetag",c.tagName);for(var l in n.ns);e=c.tags[c.tags.length-1]||c;c.opt.xmlns&&n.ns!==e.ns&&Object.keys(n.ns).forEach(function(b){a(c,"onclosenamespace",{prefix:b,uri:n.ns[b]})})}0===b&&(c.closedRoot=!0);c.tagName=c.attribValue=c.attribName="";c.attribList.length=0}}else u(c,"Weird empty close tag."),c.textNode+="</>";c.state=t.TEXT}function l(a){var c=a.entity,
b=c.toLowerCase(),d="";if(a.ENTITIES[c])return a.ENTITIES[c];if(a.ENTITIES[b])return a.ENTITIES[b];c=b;if("#"===c.charAt(0))if("x"===c.charAt(1)){c=c.slice(2);var e=parseInt(c,16);d=e.toString(16)}else c=c.slice(1),e=parseInt(c,10),d=e.toString(10);c=c.replace(/^0+/,"");return d.toLowerCase()!==c?(u(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCodePoint(e)}function n(a,c){"<"===c?(a.state=t.OPEN_WAKA,a.startTagPosition=a.position):r(x,c)||(u(a,"Non-whitespace before first tag."),a.textNode=
c,a.state=t.TEXT)}function K(a,c){var b="";c<a.length&&(b=a.charAt(c));return b}f.parser=function(a,c){return new m(a,c)};f.SAXParser=m;f.SAXStream=q;f.createStream=function(a,c){return new q(a,c)};f.MAX_BUFFER_LENGTH=65536;var G="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" ");f.EVENTS="text processinginstruction sgmldeclaration doctype comment opentagstart attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" ");
Object.create||(Object.create=function(a){function c(){}c.prototype=a;return new c});Object.keys||(Object.keys=function(a){var c=[],b;for(b in a)a.hasOwnProperty(b)&&c.push(b);return c});m.prototype={end:function(){D(this)},write:function(b){if(this.error)throw this.error;if(this.closed)return z(this,"Cannot write after close. Assign an onready handler.");if(null===b)return D(this);"object"===typeof b&&(b=b.toString());for(var d=0,e;;){this.c=e=K(b,d++);if(!e)break;this.trackPosition&&(this.position++,
"\n"===e?(this.line++,this.column=0):this.column++);switch(this.state){case t.BEGIN:this.state=t.BEGIN_WHITESPACE;if("\ufeff"===e)continue;n(this,e);continue;case t.BEGIN_WHITESPACE:n(this,e);continue;case t.TEXT:if(this.sawRoot&&!this.closedRoot){for(var m=d-1;e&&"<"!==e&&"&"!==e;)(e=K(b,d++))&&this.trackPosition&&(this.position++,"\n"===e?(this.line++,this.column=0):this.column++);this.textNode+=b.substring(m,d-1)}"<"!==e||this.sawRoot&&this.closedRoot&&!this.strict?(r(x,e)||this.sawRoot&&!this.closedRoot||
u(this,"Text data outside of root node."),"&"===e?this.state=t.TEXT_ENTITY:this.textNode+=e):(this.state=t.OPEN_WAKA,this.startTagPosition=this.position);continue;case t.SCRIPT:"<"===e?this.state=t.SCRIPT_ENDING:this.script+=e;continue;case t.SCRIPT_ENDING:"/"===e?this.state=t.CLOSE_TAG:(this.script+="<"+e,this.state=t.SCRIPT);continue;case t.OPEN_WAKA:"!"===e?(this.state=t.SGML_DECL,this.sgmlDecl=""):r(x,e)||(r(R,e)?(this.state=t.OPEN_TAG,this.tagName=e):"/"===e?(this.state=t.CLOSE_TAG,this.tagName=
""):"?"===e?(this.state=t.PROC_INST,this.procInstName=this.procInstBody=""):(u(this,"Unencoded <"),this.startTagPosition+1<this.position&&(e=Array(this.position-this.startTagPosition).join(" ")+e),this.textNode+="<"+e,this.state=t.TEXT));continue;case t.SGML_DECL:(this.sgmlDecl+e).toUpperCase()===T?(a(this,"onopencdata"),this.state=t.CDATA,this.cdata=this.sgmlDecl=""):"--"===this.sgmlDecl+e?(this.state=t.COMMENT,this.sgmlDecl=this.comment=""):(this.sgmlDecl+e).toUpperCase()===p?(this.state=t.DOCTYPE,
(this.doctype||this.sawRoot)&&u(this,"Inappropriately located doctype declaration"),this.sgmlDecl=this.doctype=""):">"===e?(a(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=t.TEXT):(r(I,e)&&(this.state=t.SGML_DECL_QUOTED),this.sgmlDecl+=e);continue;case t.SGML_DECL_QUOTED:e===this.q&&(this.state=t.SGML_DECL,this.q="");this.sgmlDecl+=e;continue;case t.DOCTYPE:">"===e?(this.state=t.TEXT,a(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=e,"["===e?this.state=t.DOCTYPE_DTD:
r(I,e)&&(this.state=t.DOCTYPE_QUOTED,this.q=e));continue;case t.DOCTYPE_QUOTED:this.doctype+=e;e===this.q&&(this.q="",this.state=t.DOCTYPE);continue;case t.DOCTYPE_DTD:this.doctype+=e;"]"===e?this.state=t.DOCTYPE:r(I,e)&&(this.state=t.DOCTYPE_DTD_QUOTED,this.q=e);continue;case t.DOCTYPE_DTD_QUOTED:this.doctype+=e;e===this.q&&(this.state=t.DOCTYPE_DTD,this.q="");continue;case t.COMMENT:"-"===e?this.state=t.COMMENT_ENDING:this.comment+=e;continue;case t.COMMENT_ENDING:"-"===e?(this.state=t.COMMENT_ENDED,
(this.comment=v(this.opt,this.comment))&&a(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+e,this.state=t.COMMENT);continue;case t.COMMENT_ENDED:">"!==e?(u(this,"Malformed comment"),this.comment+="--"+e,this.state=t.COMMENT):this.state=t.TEXT;continue;case t.CDATA:"]"===e?this.state=t.CDATA_ENDING:this.cdata+=e;continue;case t.CDATA_ENDING:"]"===e?this.state=t.CDATA_ENDING_2:(this.cdata+="]"+e,this.state=t.CDATA);continue;case t.CDATA_ENDING_2:">"===e?(this.cdata&&a(this,"oncdata",
this.cdata),a(this,"onclosecdata"),this.cdata="",this.state=t.TEXT):"]"===e?this.cdata+="]":(this.cdata+="]]"+e,this.state=t.CDATA);continue;case t.PROC_INST:"?"===e?this.state=t.PROC_INST_ENDING:r(x,e)?this.state=t.PROC_INST_BODY:this.procInstName+=e;continue;case t.PROC_INST_BODY:if(!this.procInstBody&&r(x,e))continue;else"?"===e?this.state=t.PROC_INST_ENDING:this.procInstBody+=e;continue;case t.PROC_INST_ENDING:">"===e?(a(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),
this.procInstName=this.procInstBody="",this.state=t.TEXT):(this.procInstBody+="?"+e,this.state=t.PROC_INST_BODY);continue;case t.OPEN_TAG:if(r(Q,e))this.tagName+=e;else{this.strict||(this.tagName=this.tagName[this.looseCase]());m=this.tags[this.tags.length-1]||this;var h=this.tag={name:this.tagName,attributes:{}};this.opt.xmlns&&(h.ns=m.ns);this.attribList.length=0;a(this,"onopentagstart",h);">"===e?C(this):"/"===e?this.state=t.OPEN_TAG_SLASH:(r(x,e)||u(this,"Invalid character in tag name"),this.state=
t.ATTRIB)}continue;case t.OPEN_TAG_SLASH:">"===e?(C(this,!0),c(this)):(u(this,"Forward-slash in opening tag not followed by >"),this.state=t.ATTRIB);continue;case t.ATTRIB:if(r(x,e))continue;else">"===e?C(this):"/"===e?this.state=t.OPEN_TAG_SLASH:r(R,e)?(this.attribName=e,this.attribValue="",this.state=t.ATTRIB_NAME):u(this,"Invalid attribute name");continue;case t.ATTRIB_NAME:"="===e?this.state=t.ATTRIB_VALUE:">"===e?(u(this,"Attribute without value"),this.attribValue=this.attribName,H(this),C(this)):
r(x,e)?this.state=t.ATTRIB_NAME_SAW_WHITE:r(Q,e)?this.attribName+=e:u(this,"Invalid attribute name");continue;case t.ATTRIB_NAME_SAW_WHITE:if("="===e)this.state=t.ATTRIB_VALUE;else if(r(x,e))continue;else u(this,"Attribute without value"),this.attribValue=this.tag.attributes[this.attribName]="",a(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===e?C(this):r(R,e)?(this.attribName=e,this.state=t.ATTRIB_NAME):(u(this,"Invalid attribute name"),this.state=t.ATTRIB);continue;
case t.ATTRIB_VALUE:if(r(x,e))continue;else r(I,e)?(this.q=e,this.state=t.ATTRIB_VALUE_QUOTED):(u(this,"Unquoted attribute value"),this.state=t.ATTRIB_VALUE_UNQUOTED,this.attribValue=e);continue;case t.ATTRIB_VALUE_QUOTED:if(e!==this.q){"&"===e?this.state=t.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=e;continue}H(this);this.q="";this.state=t.ATTRIB_VALUE_CLOSED;continue;case t.ATTRIB_VALUE_CLOSED:r(x,e)?this.state=t.ATTRIB:">"===e?C(this):"/"===e?this.state=t.OPEN_TAG_SLASH:r(R,e)?(u(this,"No whitespace between attributes"),
this.attribName=e,this.attribValue="",this.state=t.ATTRIB_NAME):u(this,"Invalid attribute name");continue;case t.ATTRIB_VALUE_UNQUOTED:if(!r(B,e)){"&"===e?this.state=t.ATTRIB_VALUE_ENTITY_U:this.attribValue+=e;continue}H(this);">"===e?C(this):this.state=t.ATTRIB;continue;case t.CLOSE_TAG:if(this.tagName)">"===e?c(this):r(Q,e)?this.tagName+=e:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=t.SCRIPT):(r(x,e)||u(this,"Invalid tagname in closing tag"),this.state=t.CLOSE_TAG_SAW_WHITE);
else if(r(x,e))continue;else r(R,e)?this.tagName=e:this.script?(this.script+="</"+e,this.state=t.SCRIPT):u(this,"Invalid tagname in closing tag.");continue;case t.CLOSE_TAG_SAW_WHITE:if(r(x,e))continue;">"===e?c(this):u(this,"Invalid characters in closing tag");continue;case t.TEXT_ENTITY:case t.ATTRIB_VALUE_ENTITY_Q:case t.ATTRIB_VALUE_ENTITY_U:switch(this.state){case t.TEXT_ENTITY:var E=t.TEXT;var U="textNode";break;case t.ATTRIB_VALUE_ENTITY_Q:E=t.ATTRIB_VALUE_QUOTED;U="attribValue";break;case t.ATTRIB_VALUE_ENTITY_U:E=
t.ATTRIB_VALUE_UNQUOTED,U="attribValue"}";"===e?(this[U]+=l(this),this.entity="",this.state=E):r(this.entity.length?W:Y,e)?this.entity+=e:(u(this,"Invalid character in entity name"),this[U]+="&"+this.entity+e,this.entity="",this.state=E);continue;default:throw Error(this,"Unknown state: "+this.state);}}if(this.position>=this.bufferCheckPosition){b=Math.max(f.MAX_BUFFER_LENGTH,10);e=d=0;for(E=G.length;e<E;e++){U=this[G[e]].length;if(U>b)switch(G[e]){case "textNode":g(this);break;case "cdata":a(this,
"oncdata",this.cdata);this.cdata="";break;case "script":a(this,"onscript",this.script);this.script="";break;default:z(this,"Max buffer length exceeded: "+G[e])}d=Math.max(d,U)}this.bufferCheckPosition=f.MAX_BUFFER_LENGTH-d+this.position}return this},resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){g(this);""!==this.cdata&&(a(this,"oncdata",this.cdata),this.cdata="");""!==this.script&&(a(this,"onscript",this.script),this.script="")}};try{var M=
d("stream").Stream}catch(X){M=function(){}}var N=f.EVENTS.filter(function(a){return"error"!==a&&"end"!==a});q.prototype=Object.create(M.prototype,{constructor:{value:q}});q.prototype.write=function(a){"function"===typeof b&&"function"===typeof b.isBuffer&&b.isBuffer(a)&&(this._decoder||(this._decoder=new (d("string_decoder").StringDecoder)("utf8")),a=this._decoder.write(a));this._parser.write(a.toString());this.emit("data",a);return!0};q.prototype.end=function(a){a&&a.length&&this.write(a);this._parser.end();
return!0};q.prototype.on=function(a,c){var b=this;b._parser["on"+a]||-1===N.indexOf(a)||(b._parser["on"+a]=function(){var c=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);c.splice(0,0,a);b.emit.apply(b,c)});return M.prototype.on.call(b,a,c)};var x="\r\n\t ",y="0124356789",O="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",I="'\"",B=x+">",T="[CDATA[",p="DOCTYPE",J="http://www.w3.org/XML/1998/namespace",e="http://www.w3.org/2000/xmlns/",h={xml:J,xmlns:e};x=k(x);y=k(y);O=k(O);
var R=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Q=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,Y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
W=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;I=k(I);B=k(B);var t=0;f.STATE={BEGIN:t++,BEGIN_WHITESPACE:t++,TEXT:t++,TEXT_ENTITY:t++,OPEN_WAKA:t++,SGML_DECL:t++,SGML_DECL_QUOTED:t++,DOCTYPE:t++,DOCTYPE_QUOTED:t++,DOCTYPE_DTD:t++,DOCTYPE_DTD_QUOTED:t++,COMMENT_STARTING:t++,COMMENT:t++,COMMENT_ENDING:t++,COMMENT_ENDED:t++,CDATA:t++,CDATA_ENDING:t++,CDATA_ENDING_2:t++,
PROC_INST:t++,PROC_INST_BODY:t++,PROC_INST_ENDING:t++,OPEN_TAG:t++,OPEN_TAG_SLASH:t++,ATTRIB:t++,ATTRIB_NAME:t++,ATTRIB_NAME_SAW_WHITE:t++,ATTRIB_VALUE:t++,ATTRIB_VALUE_QUOTED:t++,ATTRIB_VALUE_CLOSED:t++,ATTRIB_VALUE_UNQUOTED:t++,ATTRIB_VALUE_ENTITY_Q:t++,ATTRIB_VALUE_ENTITY_U:t++,CLOSE_TAG:t++,CLOSE_TAG_SAW_WHITE:t++,SCRIPT:t++,SCRIPT_ENDING:t++};f.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};f.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,
Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,
ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,
Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,
zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,
ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(f.ENTITIES).forEach(function(a){var c=f.ENTITIES[a];c="number"===
typeof c?String.fromCharCode(c):c;f.ENTITIES[a]=c});for(var V in f.STATE)f.STATE[f.STATE[V]]=V;t=f.STATE;String.fromCodePoint||function(){var a=String.fromCharCode,c=Math.floor,b=function(){var b=[],d=-1,e=arguments.length;if(!e)return"";for(var n="";++d<e;){var l=Number(arguments[d]);if(!isFinite(l)||0>l||1114111<l||c(l)!==l)throw RangeError("Invalid code point: "+l);if(65535>=l)b.push(l);else{l-=65536;var g=(l>>10)+55296;l=l%1024+56320;b.push(g,l)}if(d+1===e||16384<b.length)n+=a.apply(null,b),b.length=
0}return n};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:b,configurable:!0,writable:!0}):String.fromCodePoint=b}()})("undefined"===typeof k?this.sax={}:k)}).call(this,d("buffer").Buffer)},{buffer:3,stream:29,string_decoder:30}],29:[function(d,r,k){function b(){f.call(this)}r.exports=b;var f=d("events").EventEmitter;d("inherits")(b,f);b.Readable=d("readable-stream/readable.js");b.Writable=d("readable-stream/writable.js");b.Duplex=d("readable-stream/duplex.js");b.Transform=
d("readable-stream/transform.js");b.PassThrough=d("readable-stream/passthrough.js");b.Stream=b;b.prototype.pipe=function(b,d){function m(a){b.writable&&!1===b.write(a)&&k.pause&&k.pause()}function q(){k.readable&&k.resume&&k.resume()}function a(){u||(u=!0,b.end())}function g(){u||(u=!0,"function"===typeof b.destroy&&b.destroy())}function v(a){z();if(0===f.listenerCount(this,"error"))throw a;}function z(){k.removeListener("data",m);b.removeListener("drain",q);k.removeListener("end",a);k.removeListener("close",
g);k.removeListener("error",v);b.removeListener("error",v);k.removeListener("end",z);k.removeListener("close",z);b.removeListener("close",z)}var k=this;k.on("data",m);b.on("drain",q);b._isStdio||d&&!1===d.end||(k.on("end",a),k.on("close",g));var u=!1;k.on("error",v);b.on("error",v);k.on("end",z);k.on("close",z);b.on("close",z);b.emit("pipe",k);return b}},{events:5,inherits:7,"readable-stream/duplex.js":12,"readable-stream/passthrough.js":23,"readable-stream/readable.js":24,"readable-stream/transform.js":25,
"readable-stream/writable.js":26}],30:[function(d,r,k){arguments[4][22][0].apply(k,arguments)},{dup:22,"safe-buffer":27}],31:[function(d,r,k){(function(b,f){function m(a,b){this._id=a;this._clearFn=b}var q=d("process/browser.js").nextTick,r=Function.prototype.apply,A=Array.prototype.slice,a={},g=0;k.setTimeout=function(){return new m(r.call(setTimeout,window,arguments),clearTimeout)};k.setInterval=function(){return new m(r.call(setInterval,window,arguments),clearInterval)};k.clearTimeout=k.clearInterval=
function(a){a.close()};m.prototype.unref=m.prototype.ref=function(){};m.prototype.close=function(){this._clearFn.call(window,this._id)};k.enroll=function(a,b){clearTimeout(a._idleTimeoutId);a._idleTimeout=b};k.unenroll=function(a){clearTimeout(a._idleTimeoutId);a._idleTimeout=-1};k._unrefActive=k.active=function(a){clearTimeout(a._idleTimeoutId);var b=a._idleTimeout;0<=b&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},b))};k.setImmediate="function"===typeof b?b:function(b){var d=
g++,f=2>arguments.length?!1:A.call(arguments,1);a[d]=!0;q(function(){a[d]&&(f?b.apply(null,f):b.call(null),k.clearImmediate(d))});return d};k.clearImmediate="function"===typeof f?f:function(b){delete a[b]}}).call(this,d("timers").setImmediate,d("timers").clearImmediate)},{"process/browser.js":11,timers:31}],32:[function(d,r,k){(function(b){function d(d){try{if(!b.localStorage)return!1}catch(q){return!1}d=b.localStorage[d];return null==d?!1:"true"===String(d).toLowerCase()}r.exports=function(b,f){if(d("noDeprecation"))return b;
var m=!1;return function(){if(!m){if(d("throwDeprecation"))throw Error(f);d("traceDeprecation")?console.trace(f):console.warn(f);m=!0}return b.apply(this,arguments)}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],33:[function(d,r,k){(function(b,d,m,k,r){function f(a,c){var b=a.styleAttrs&&a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===a.kind)!b&&c&&(a.styleAttrs||(a.styleAttrs={}),a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=
c);else if(b&&delete a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],a.contents)for(var d=0;d<a.contents.length;d++)f(a.contents[d],b||c)}function a(c){if("contents"in c){var b="styleAttrs"in c?c.styleAttrs[k.byName.ruby.qname]:null;b="span"===c.kind&&("container"===b||"textContainer"===b||"baseContainer"===b);for(var d=c.contents.length-1;0<=d;d--)!b||"styleAttrs"in c.contents[d]&&k.byName.ruby.qname in c.contents[d].styleAttrs?a(c.contents[d]):delete c.contents[d]}}function g(a,
c,b,d){var e=d&&"seq"===d.timeContainer,n=0;d&&(n=e&&b?b.end:d.begin);c.begin=c.explicit_begin?c.explicit_begin+n:n;b=c.begin;d=null;for(var l in c.sets)g(a,c.sets[l],d,c),b="seq"===c.timeContainer?c.sets[l].end:Math.max(b,c.sets[l].end),d=c.sets[l];if("contents"in c)for(var f in c.contents)g(a,c.contents[f],d,c),b="seq"===c.timeContainer?c.contents[f].end:Math.max(b,c.contents[f].end),d=c.contents[f];else b=e?c.begin:Number.POSITIVE_INFINITY;c.end=null!==c.explicit_end&&null!==c.explicit_dur?Math.min(c.begin+
c.explicit_dur,n+c.explicit_end):null===c.explicit_end&&null!==c.explicit_dur?c.begin+c.explicit_dur:null!==c.explicit_end&&null===c.explicit_dur?n+c.explicit_end:b;delete c.explicit_begin;delete c.explicit_dur;delete c.explicit_end;a._registerEvent(c)}function v(a){this.node=a}function z(){this.events=[];this.head=new q;this.body=null}function q(){this.styling=new u;this.layout=new C}function u(){this.styles={};this.initials={}}function w(){this.styleRefs=this.styleAttrs=this.id=null}function H(){this.styleAttrs=
null}function C(){this.regions={}}function c(a,c){this.kind="image";this.src=a;this.type=c}function l(a){this.id=a}function n(a){this.regionID=a}function K(a){this.styleAttrs=a}function G(a){this.sets=a}function M(a){this.contents=a}function N(a,c,b){this.explicit_begin=a;this.explicit_end=c;this.explicit_dur=b}function x(){this.kind="body"}function y(){this.kind="div"}function O(){this.kind="p"}function I(){this.kind="span"}function B(){this.kind="span"}function T(){this.kind="br"}function p(){}
function J(){}function e(a){var c=null;a&&(a=a.attributes["xml:id"]||a.attributes.id)&&(c=a.value||null);return c}function h(a){return a&&"style"in a.attributes?a.attributes.style.value.split(" "):[]}function R(a,c){var b={};if(null!==a)for(var d in a.attributes){var e=a.attributes[d].uri+" "+a.attributes[d].local,n=k.byQName[e];if(void 0!==n){var l=n.parse(a.attributes[d].value);null!==l?(b[e]=l,n===k.byName.zIndex&&S(c,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):
L(c,"Cannot parse styling attribute "+e+" --\x3e "+a.attributes[d].value)}}return b}function Q(a,c,b){for(var d in a.attributes)if(a.attributes[d].uri===c&&a.attributes[d].local===b)return a.attributes[d].value;return null}function Y(a,c){a=Q(a,m.ns_tts,"extent");if(null===a)return null;var b=a.split(" ");if(2!==b.length)return S(c,"Malformed extent (ignoring)"),null;a=r.parseLength(b[0]);b=r.parseLength(b[1]);return b&&a?{h:b,w:a}:(S(c,"Malformed extent values (ignoring)"),null)}function W(a,c,b){var d=
/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,e=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,n=/^(\d+(?:\.\d+)?)t$/,l=/^(\d+(?:\.\d+)?)ms$/,g=/^(\d+(?:\.\d+)?)s$/,f=/^(\d+(?:\.\d+)?)h$/,p=/^(\d+(?:\.\d+)?)m$/,m,h=null;null!==(m=/^(\d+(?:\.\d+)?)f$/.exec(b))?null!==c&&(h=parseFloat(m[1])/c):null!==(m=n.exec(b))?null!==a&&(h=parseFloat(m[1])/a):null!==(m=l.exec(b))?h=parseFloat(m[1])/1E3:null!==(m=g.exec(b))?h=parseFloat(m[1]):null!==(m=f.exec(b))?h=3600*parseFloat(m[1]):null!==(m=p.exec(b))?h=60*parseFloat(m[1]):null!==
(m=d.exec(b))?h=3600*parseInt(m[1])+60*parseInt(m[2])+parseFloat(m[3]):null!==(m=e.exec(b))&&null!==c&&(h=3600*parseInt(m[1])+60*parseInt(m[2])+parseInt(m[3])+(null===m[4]?0:parseInt(m[4])/c));return h}function t(a,c,b){for(;0<c.styleRefs.length;){var d=c.styleRefs.pop();d in a.styles?(t(a,a.styles[d],b),X(a.styles[d].styleAttrs,c.styleAttrs)):L(b,"Non-existant style id referenced")}}function V(a,c,b,d){for(var e=c.length-1;0<=e;e--){var n=c[e];n in a.styles?X(a.styles[n].styleAttrs,b):L(d,"Non-existant style id referenced")}}
function X(a,c){for(var b in a)b in c||(c[b]=a[b])}function S(a,c){if(a&&a.warn&&a.warn(c))throw c;}function L(a,c){if(a&&a.error&&a.error(c))throw c;}function P(a,c){a&&a.fatal&&a.fatal(c);throw c;}function Z(a,c){for(var b=0,d=a.length-1,e;b<=d;){e=Math.floor((b+d)/2);var n=a[e];if(n<c)b=e+1;else if(n>c)d=e-1;else return{found:!0,index:e}}return{found:!1,index:b}}b.fromXML=function(b,e,n){var l=d.parser(!0,{xmlns:!0}),h=[],K=[],r=[],G=0,E=null;l.onclosetag=function(a){if(h[0]instanceof p)null!==
E.head&&null!==E.head.styling&&V(E.head.styling,h[0].styleRefs,h[0].styleAttrs,e),delete h[0].styleRefs;else if(h[0]instanceof u)for(var c in h[0].styles)t(h[0],h[0].styles[c],e);else if(h[0]instanceof O||h[0]instanceof I){if(1<h[0].contents.length){a=[h[0].contents[0]];for(c=1;c<h[0].contents.length;c++)h[0].contents[c]instanceof B&&a[a.length-1]instanceof B?a[a.length-1].text+=h[0].contents[c].text:a.push(h[0].contents[c]);h[0].contents=a}h[0]instanceof I&&1===h[0].contents.length&&h[0].contents[0]instanceof
B&&(h[0].text=h[0].contents[0].text,delete h[0].contents)}else if(h[0]instanceof v)if(h[0].node.uri===m.ns_tt&&"metadata"===h[0].node.local)G--;else if(0<G&&n&&"onCloseTag"in n)n.onCloseTag();r.shift();K.shift();h.shift()};l.ontext=function(a){if(void 0!==h[0])if(h[0]instanceof I||h[0]instanceof O){if(h[0]instanceof I){var c=h[0].styleAttrs[k.byName.ruby.qname];if("container"===c||"textContainer"===c||"baseContainer"===c)return}c=new B;c.initFromText(E,h[0],a,r[0],e);h[0].contents.push(c)}else if(h[0]instanceof
v&&0<G&&n&&"onText"in n)n.onText(a)};l.onopentag=function(a){function b(a){m.ttaf_map[a.uri]&&(a.uri=m.ttaf_map[a.uri])}var d=a.attributes["xml:space"];d?r.unshift(d.value):0===r.length?r.unshift("default"):r.unshift(r[0]);(d=a.attributes["xml:lang"])?K.unshift(d.value):0===K.length?K.unshift(""):K.unshift(K[0]);b(a);if(a.attributes)for(var l in a.attributes)a.attributes.hasOwnProperty(l)&&b(a.attributes[l]);if(a.uri===m.ns_tt)if("tt"===a.local)null!==E&&P(e,"Two <tt> elements at ("+this.line+","+
this.column+")"),E=new z,E.initFromNode(a,e),h.unshift(E);else if("head"===a.local)h[0]instanceof z||P(e,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),h.unshift(E.head);else if("styling"===a.local)h[0]instanceof q||P(e,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),h.unshift(E.head.styling);else if("style"===a.local)if(h[0]instanceof u){var g=new w;g.initFromNode(a,e);g.id?E.head.styling.styles[g.id]=g:L(e,"<style> element missing @id attribute");
h.unshift(g)}else h[0]instanceof p?(g=new w,g.initFromNode(a,e),X(g.styleAttrs,h[0].styleAttrs),h.unshift(g)):P(e,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===a.local)if(h[0]instanceof u){l=new H;l.initFromNode(a,e);for(g in l.styleAttrs)E.head.styling.initials[g]=l.styleAttrs[g];h.unshift(l)}else P(e,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===a.local)h[0]instanceof q||P(e,
"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),h.unshift(E.head.layout);else if("region"===a.local)h[0]instanceof C||P(e,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),g=new p,g.initFromNode(E,a,e),!g.id||g.id in E.head.layout.regions?L(e,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):E.head.layout.regions[g.id]=g,h.unshift(g);else if("body"===a.local)h[0]instanceof z||P(e,"Parent of <body> element is not <tt> at "+
this.line+","+this.column+")"),null!==E.body&&P(e,"Second <body> element at "+this.line+","+this.column+")"),g=new x,g.initFromNode(E,a,e),E.body=g,h.unshift(g);else if("div"===a.local){h[0]instanceof y||h[0]instanceof x||P(e,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");g=new y;g.initFromNode(E,h[0],a,e);if(l=g.styleAttrs[k.byName.backgroundImage.qname])g.contents.push(new c(l)),delete g.styleAttrs[k.byName.backgroundImage.qname];h[0].contents.push(g);h.unshift(g)}else"image"===
a.local?(h[0]instanceof y||P(e,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),g=new c,g.initFromNode(E,h[0],a,e),h[0].contents.push(g),h.unshift(g)):"p"===a.local?(h[0]instanceof y||P(e,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),g=new O,g.initFromNode(E,h[0],a,e),h[0].contents.push(g),h.unshift(g)):"span"===a.local?(h[0]instanceof I||h[0]instanceof O||P(e,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),g=
new I,g.initFromNode(E,h[0],a,r[0],e),h[0].contents.push(g),h.unshift(g)):"br"===a.local?(h[0]instanceof I||h[0]instanceof O||P(e,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),g=new T,g.initFromNode(E,h[0],a,e),h[0].contents.push(g),h.unshift(g)):"set"===a.local?(h[0]instanceof I||h[0]instanceof O||h[0]instanceof y||h[0]instanceof x||h[0]instanceof p||h[0]instanceof T||P(e,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+
")"),g=new J,g.initFromNode(E,h[0],a,e),h[0].sets.push(g),h.unshift(g)):h.unshift(new v(a));else h.unshift(new v(a));if(h[0]instanceof v)if(a.uri===m.ns_tt&&"metadata"===a.local)G++;else if(0<G&&n&&"onOpenTag"in n){g=[];for(var f in a.attributes)g[a.attributes[f].uri+" "+a.attributes[f].local]={uri:a.attributes[f].uri,local:a.attributes[f].local,value:a.attributes[f].value};n.onOpenTag(a.uri,a.local,g)}};l.write(b).close();delete E.head.styling.styles;b=!1;for(var M in E.head.layout.regions){b=!0;
break}b||(M=p.prototype.createDefaultRegion(E,e),E.head.layout.regions[M.id]=M);for(var aa in E.head.layout.regions)g(E,E.head.layout.regions[aa],null,null);E.body&&g(E,E.body,null,null);E.body&&a(E.body);E.body&&f(E.body);return E};z.prototype.initFromNode=function(a,c){var b=Q(a,m.ns_ttp,"cellResolution"),d=15;var e=32;null!==b&&(b=/(\d+) (\d+)/.exec(b),null!==b?(e=parseInt(b[1]),d=parseInt(b[2])):S(c,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new r.ComputedLength(0,
1/d),w:new r.ComputedLength(1/e,0)};d=Q(a,m.ns_ttp,"frameRate");b=30;null!==d&&(e=/(\d+)/.exec(d),null!==e?b=parseInt(e[1]):S(c,"Malformed frame rate attribute (using initial value instead)"));e=Q(a,m.ns_ttp,"frameRateMultiplier");var n=1;null!==e&&(e=/(\d+) (\d+)/.exec(e),null!==e?n=parseInt(e[1])/parseInt(e[2]):S(c,"Malformed frame rate multiplier attribute (using initial value instead)"));b*=n;n=1;e=Q(a,m.ns_ttp,"tickRate");null===e?null!==d&&(n=b):(e=/(\d+)/.exec(e),null!==e?n=parseInt(e[1]):
S(c,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=b;this.tickRate=n;e=Q(a,m.ns_ittp,"aspectRatio");null===e&&(e=Q(a,m.ns_ttp,"displayAspectRatio"));d=null;null!==e&&(b=/(\d+)\s+(\d+)/.exec(e),null!==b?(e=parseInt(b[1]),b=parseInt(b[2]),0!==e&&0!==b?d=e/b:L(c,"Illegal aspectRatio values (ignoring)")):L(c,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=d;d=Q(a,m.ns_ttp,"timeBase");null!==d&&"media"!==d&&P(c,"Unsupported time base");a=Y(a,c);
null===a?this.pxLength={h:null,w:null}:("px"===a.h.unit&&"px"===a.w.unit||P(c,"Extent on TT must be in px or absent"),this.pxLength={h:new r.ComputedLength(0,1/a.h.value),w:new r.ComputedLength(1/a.w.value,0)});this.dimensions={h:new r.ComputedLength(0,1),w:new r.ComputedLength(1,0)}};z.prototype._registerEvent=function(a){if(!(a.end<=a.begin)){var c=Z(this.events,a.begin);c.found||this.events.splice(c.index,0,a.begin);a.end!==Number.POSITIVE_INFINITY&&(c=Z(this.events,a.end),c.found||this.events.splice(c.index,
0,a.end))}};z.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]};z.prototype.getMediaTimeEvents=function(){return this.events};w.prototype.initFromNode=function(a,c){this.id=e(a);this.styleAttrs=R(a,c);this.styleRefs=h(a)};H.prototype.initFromNode=function(a,c){this.styleAttrs={};for(var b in a.attributes)if(a.attributes[b].uri===m.ns_itts||a.attributes[b].uri===m.ns_ebutts||a.attributes[b].uri===m.ns_tts)this.styleAttrs[a.attributes[b].uri+" "+a.attributes[b].local]=
a.attributes[b].value};c.prototype.initFromNode=function(a,c,b,d){(this.src="src"in b.attributes?b.attributes.src.value:null)||L(d,"Invalid image@src attribute");(this.type="type"in b.attributes?b.attributes.type.value:null)||L(d,"Invalid image@type attribute");K.prototype.initFromNode.call(this,a,c,b,d);N.prototype.initFromNode.call(this,a,c,b,d);G.prototype.initFromNode.call(this,a,c,b,d);n.prototype.initFromNode.call(this,a,c,b,d)};l.prototype.initFromNode=function(a,c,b,d){this.id=e(b)};n.prototype.initFromNode=
function(a,c,b,d){this.regionID=b&&"region"in b.attributes?b.attributes.region.value:""};K.prototype.initFromNode=function(a,c,b,d){this.styleAttrs=R(b,d);null!==a.head&&null!==a.head.styling&&V(a.head.styling,h(b),this.styleAttrs,d)};G.prototype.initFromNode=function(a,c,b,d){this.sets=[]};M.prototype.initFromNode=function(a,c,b,d){this.contents=[]};N.prototype.initFromNode=function(a,c,b,d){c=null;b&&"begin"in b.attributes&&(c=W(a.tickRate,a.effectiveFrameRate,b.attributes.begin.value),null===c&&
S(d,"Malformed begin value "+b.attributes.begin.value+" (using 0)"));var e=null;b&&"dur"in b.attributes&&(e=W(a.tickRate,a.effectiveFrameRate,b.attributes.dur.value),null===e&&S(d,"Malformed dur value "+b.attributes.dur.value+" (ignoring)"));var n=null;b&&"end"in b.attributes&&(n=W(a.tickRate,a.effectiveFrameRate,b.attributes.end.value),null===n&&S(d,"Malformed end value (ignoring)"));this.explicit_begin=c;this.explicit_end=n;this.explicit_dur=e;(a=b&&"timeContainer"in b.attributes?b.attributes.timeContainer.value:
null)&&"par"!==a?"seq"===a?d="seq":(L(d,"Illegal value of timeContainer (assuming 'par')"),d="par"):d="par";this.timeContainer=d};x.prototype.initFromNode=function(a,c,b){K.prototype.initFromNode.call(this,a,null,c,b);N.prototype.initFromNode.call(this,a,null,c,b);G.prototype.initFromNode.call(this,a,null,c,b);n.prototype.initFromNode.call(this,a,null,c,b);M.prototype.initFromNode.call(this,a,null,c,b)};y.prototype.initFromNode=function(a,c,b,d){K.prototype.initFromNode.call(this,a,c,b,d);N.prototype.initFromNode.call(this,
a,c,b,d);G.prototype.initFromNode.call(this,a,c,b,d);n.prototype.initFromNode.call(this,a,c,b,d);M.prototype.initFromNode.call(this,a,c,b,d)};O.prototype.initFromNode=function(a,c,b,d){K.prototype.initFromNode.call(this,a,c,b,d);N.prototype.initFromNode.call(this,a,c,b,d);G.prototype.initFromNode.call(this,a,c,b,d);n.prototype.initFromNode.call(this,a,c,b,d);M.prototype.initFromNode.call(this,a,c,b,d)};I.prototype.initFromNode=function(a,c,b,d,e){K.prototype.initFromNode.call(this,a,c,b,e);N.prototype.initFromNode.call(this,
a,c,b,e);G.prototype.initFromNode.call(this,a,c,b,e);n.prototype.initFromNode.call(this,a,c,b,e);M.prototype.initFromNode.call(this,a,c,b,e);this.space=d};B.prototype.initFromText=function(a,c,b,d,e){N.prototype.initFromNode.call(this,a,c,null,e);this.text=b;this.space=d};T.prototype.initFromNode=function(a,c,b,d){n.prototype.initFromNode.call(this,a,c,b,d);N.prototype.initFromNode.call(this,a,c,b,d)};p.prototype.createDefaultRegion=function(a,c){var b=new p;b.id="";K.prototype.initFromNode.call(b,
a,null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",value:"after",prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},"tts:overflow":{name:"tts:overflow",value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},
ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",ebutts:"urn:ebu:tt:style",ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",local:"region",uri:"http://www.w3.org/ns/ttml",isSelfClosing:!0},c);b.sets=[];N.call(b,0,Number.POSITIVE_INFINITY,null);return b};
p.prototype.initFromNode=function(a,c,b){l.prototype.initFromNode.call(this,a,null,c,b);N.prototype.initFromNode.call(this,a,null,c,b);G.prototype.initFromNode.call(this,a,null,c,b);this.styleAttrs=R(c,b);this.styleRefs=h(c)};J.prototype.initFromNode=function(a,c,b,d){N.prototype.initFromNode.call(this,a,c,b,d);a=R(b,d);this.value=this.qname=null;for(var e in a){if(this.qname){L(d,"More than one style specified on set");break}this.qname=e;this.value=a[e]}}})("undefined"===typeof k?this.imscDoc={}:
k,"undefined"===typeof sax?d("sax"):sax,"undefined"===typeof imscNames?d("./names"):imscNames,"undefined"===typeof imscStyles?d("./styles"):imscStyles,"undefined"===typeof imscUtils?d("./utils"):imscUtils)},{"./names":37,"./styles":38,"./utils":39,sax:28}],34:[function(d,r,k){(function(b,d,m){function f(c,b,d){if("region"===d.kind){var n=document.createElement("div");n.style.position="absolute"}else if("body"===d.kind)n=document.createElement("div");else if("div"===d.kind)n=document.createElement("div");
else if("image"===d.kind){if(n=document.createElement("img"),null!==c.imgResolver&&null!==d.src){var l=c.imgResolver(d.src,n);l&&(n.src=l);n.height=c.regionH;n.width=c.regionW}}else if("p"===d.kind)n=document.createElement("p");else if("span"===d.kind)if("container"===d.styleAttrs[m.byName.ruby.qname])n=document.createElement("ruby"),c.ruby=!0;else if("base"===d.styleAttrs[m.byName.ruby.qname])n=document.createElement("rb");else if("text"===d.styleAttrs[m.byName.ruby.qname])n=document.createElement("rt");
else if("baseContainer"===d.styleAttrs[m.byName.ruby.qname])n=document.createElement("rbc");else if("textContainer"===d.styleAttrs[m.byName.ruby.qname])n=document.createElement("rtc");else{if("delimiter"===d.styleAttrs[m.byName.ruby.qname])return;n=document.createElement("span")}else"br"===d.kind&&(n=document.createElement("br"));if(n){b.appendChild(n);n.style.margin="0";if("region"===d.kind)if(b=d.styleAttrs[m.byName.writingMode.qname],"lrtb"===b||"lr"===b)c.ipd="lr",c.bpd="tb";else if("rltb"===
b||"rl"===b)c.ipd="rl",c.bpd="tb";else if("tblr"===b)c.ipd="tb",c.bpd="lr";else{if("tbrl"===b||"tb"===b)c.ipd="tb",c.bpd="rl"}else"p"===d.kind&&"tb"===c.bpd&&(c.ipd="ltr"===d.styleAttrs[m.byName.direction.qname]?"lr":"rl");for(var v in z)b=z[v],l=d.styleAttrs[b.qname],void 0!==l&&null!==b.map&&b.map(c,n,d,l);v=n;(b=d.styleAttrs[m.byName.linePadding.qname])&&!b.isZero()&&(l=b.multiply(b.toUsedLength(c.w,c.h),c.options.sizeAdjust),0<l&&(l=Math.ceil(l)+"px","tb"===c.bpd?(v.style.paddingLeft=l,v.style.paddingRight=
l):(v.style.paddingTop=l,v.style.paddingBottom=l),c.lp=b));(b=d.styleAttrs[m.byName.multiRowAlign.qname])&&"auto"!==b&&(v=document.createElement("span"),v.style.display="inline-block",v.style.textAlign=b,n.appendChild(v),c.mra=b);(b=d.styleAttrs[m.byName.rubyReserve.qname])&&"none"!==b[0]&&(c.rubyReserve=b);d.styleAttrs[m.byName.fillLineGap.qname]&&(c.flg=!0);if("span"===d.kind&&d.text)if((b=d.styleAttrs[m.byName.textEmphasis.qname])&&"none"!==b.style&&(c.textEmphasis=!0),m.byName.textCombine.qname in
d.styleAttrs&&"all"===d.styleAttrs[m.byName.textCombine.qname][0])n.textContent=d.text,b&&g(c,n,d,b);else{l="";for(var q=0;q<d.text.length;q++){l+=d.text.charAt(q);var x=d.text.charCodeAt(q);if(55296>x||56319<x||q===d.text.length)x=document.createElement("span"),x.textContent=l,b&&g(c,x,d,b),n.appendChild(x),l=""}}for(var y in d.contents)f(c,v,d.contents[y]);y=[];if((c.lp||c.mra||c.flg||c.ruby||c.textEmphasis||c.rubyReserve)&&"p"===d.kind){a(c,v,y,null);if(c.rubyReserve){for(b=0;b<y.length;b++){l=
document.createElement("ruby");q=document.createElement("rb");q.textContent="\u200b";l.appendChild(q);var w=c.rubyReserve[1].toUsedLength(c.w,c.h)+"px";"both"===c.rubyReserve[0]||"outside"===c.rubyReserve[0]&&1==y.length?(q=document.createElement("rtc"),q.style[F]=u?"after":"under",q.textContent="\u200b",q.style.fontSize=w,x=document.createElement("rtc"),x.style[F]=u?"before":"over",x.textContent="\u200b",x.style.fontSize=w,l.appendChild(q),l.appendChild(x)):(q=document.createElement("rtc"),q.textContent=
"\u200b",q.style.fontSize=w,q.style[F]="after"===c.rubyReserve[0]||"outside"===c.rubyReserve[0]&&0<b?u?"after":"tb"===c.bpd||"rl"===c.bpd?"under":"over":u?"before":"tb"===c.bpd||"rl"===c.bpd?"over":"under",l.appendChild(q));q=null;for(x=0;x<y[b].rbc.length;x++)if("ruby"===y[b].rbc[x].localName){q=y[b].rbc[x];for(x=0;x<q.style.length;x++)l.style.setProperty(q.style.item(x),q.style.getPropertyValue(q.style.item(x)));break}q=q||y[b].elements[0].node;q.parentElement.insertBefore(l,q)}c.rubyReserve=null}if(c.ruby||
c.rubyReserve){for(b=0;b<y.length;b++)for(l=0;l<y[b].rbc.length;l++)y[b].rbc[l].style[F]||(y[b].rbc[l].style[F]=u?0===b?"before":"after":"tb"===c.bpd?0===b?"over":"under":"rl"===c.bpd?0===b?"over":"under":0===b?"under":"over");c.ruby=null}if(c.textEmphasis){for(b=0;b<y.length;b++)for(l=0;l<y[b].te.length;l++)y[b].te[l].style[C]&&"none"!==y[b].te[l].style[C]||(y[b].te[l].style[C]="tb"===c.bpd?0===b?"left over":"left under":"rl"===c.bpd?0===b?"right under":"left under":0===b?"left under":"right under");
c.textEmphasis=null}if(c.mra){for(b=0;b<y.length-1;b++)q=y[b].elements.length,0!==q&&!1===y[b].br&&(l=document.createElement("br"),q=y[b].elements[q-1].node,q.parentElement.insertBefore(l,q.nextSibling));c.mra=null}if(c.lp){b=c.lp.multiply(c.lp.toUsedLength(c.w,c.h),c.options.sizeAdjust);for(var D in y)l=y[D].elements[y[D].start_elem],q=y[D].elements[y[D].end_elem],x=Math.ceil(b)+"px",w="-"+Math.ceil(b)+"px",0!==y[D].elements.length&&("lr"===c.ipd?(l.node.style.borderLeftColor=l.bgcolor||"#00000000",
l.node.style.borderLeftStyle="solid",l.node.style.borderLeftWidth=x,l.node.style.marginLeft=w):"rl"===c.ipd?(l.node.style.borderRightColor=l.bgcolor||"#00000000",l.node.style.borderRightStyle="solid",l.node.style.borderRightWidth=x,l.node.style.marginRight=w):"tb"===c.ipd&&(l.node.style.borderTopColor=l.bgcolor||"#00000000",l.node.style.borderTopStyle="solid",l.node.style.borderTopWidth=x,l.node.style.marginTop=w),"lr"===c.ipd?(q.node.style.borderRightColor=q.bgcolor||"#00000000",q.node.style.borderRightStyle=
"solid",q.node.style.borderRightWidth=x,q.node.style.marginRight=w):"rl"===c.ipd?(q.node.style.borderLeftColor=q.bgcolor||"#00000000",q.node.style.borderLeftStyle="solid",q.node.style.borderLeftWidth=x,q.node.style.marginLeft=w):"tb"===c.ipd&&(q.node.style.borderBottomColor=q.bgcolor||"#00000000",q.node.style.borderBottomStyle="solid",q.node.style.borderBottomWidth=x,q.node.style.marginBottom=w));c.lp=null}if(c.flg){b=r(v.getBoundingClientRect(),c);D=b.before;b=b.after;l=Math.sign(b-D);for(q=0;q<=
y.length;q++){x=0===q?D:q===y.length?b:(y[q].before+y[q-1].after)/2;if(0<q)for(var B=0;B<y[q-1].elements.length;B++)if(null!==y[q-1].elements[B].bgcolor){var A=y[q-1].elements[B];0>l*(A.after-x)&&(w=Math.ceil(Math.abs(x-A.after))+"px",A.node.style.backgroundColor=A.bgcolor,"lr"===c.bpd?A.node.style.paddingRight=w:"rl"===c.bpd?A.node.style.paddingLeft=w:"tb"===c.bpd&&(A.node.style.paddingBottom=w))}if(q<y.length)for(B=0;B<y[q].elements.length;B++)A=y[q].elements[B],null!==A.bgcolor&&0<l*(A.before-
x)&&(w=Math.ceil(Math.abs(A.before-x))+"px",A.node.style.backgroundColor=A.bgcolor,"lr"===c.bpd?A.node.style.paddingLeft=w:"rl"===c.bpd?A.node.style.paddingRight=w:"tb"===c.bpd&&(A.node.style.paddingTop=w))}c.flg=null}}"region"===d.kind&&(a(c,v,y),"tb"===c.bpd&&c.enableRollUp&&0<d.contents.length&&"after"===d.styleAttrs[m.byName.displayAlign.qname]&&(d=new k(""===d.id?"_":d.id,y),c.currentISDState[d.id]=d,c.previousISDState&&d.id in c.previousISDState&&0<c.previousISDState[d.id].plist.length&&1<d.plist.length&&
d.plist[d.plist.length-2].text===c.previousISDState[d.id].plist[c.previousISDState[d.id].plist.length-1].text&&(c=n.firstElementChild,d=d.plist[d.plist.length-1].after-d.plist[d.plist.length-1].before,c.style.bottom="-"+d+"px",c.style.transition="transform 0.4s",c.style.position="relative",c.style.transform="translateY(-"+d+"px)")))}else if(c=c.errorHandler,d="Error processing ISD element kind: "+d.kind,c&&c.error&&c.error(d))throw d;}function k(a,b){this.id=a;this.plist=b}function r(a,b){var c={before:null,
after:null,start:null,end:null};"tb"===b.bpd?(c.before=a.top,c.after=a.bottom,"lr"===b.ipd?(c.start=a.left,c.end=a.right):(c.start=a.right,c.end=a.left)):"lr"===b.bpd?(c.before=a.left,c.after=a.right,c.start=a.top,c.end=a.bottom):"rl"===b.bpd&&(c.before=a.right,c.after=a.left,c.start=a.top,c.end=a.bottom);return c}function a(c,b,d,g){if("rt"!==b.localName&&"rtc"!==b.localName)if(g=b.style.backgroundColor||g,0===b.childElementCount)if("span"===b.localName||"rb"===b.localName){var l=b.getBoundingClientRect();
if(0!==l.height&&0!==l.width){c=r(l,c);if(!(l=0===d.length)){l=c.before;var n=c.after,f=d[d.length-1].before,m=d[d.length-1].after;l=!(n<m&&l>f||m<=n&&f>=l)}l?d.push({before:c.before,after:c.after,start:c.start,end:c.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(l=Math.sign(c.after-c.before),n=Math.sign(c.end-c.start),0>l*(c.before-d[d.length-1].before)&&(d[d.length-1].before=c.before),0<l*(c.after-d[d.length-1].after)&&(d[d.length-1].after=c.after),0>n*(c.start-d[d.length-
1].start)&&(d[d.length-1].start=c.start,d[d.length-1].start_elem=d[d.length-1].elements.length),0<n*(c.end-d[d.length-1].end)&&(d[d.length-1].end=c.end,d[d.length-1].end_elem=d[d.length-1].elements.length));d[d.length-1].text+=b.textContent;d[d.length-1].elements.push({node:b,bgcolor:g,before:c.before,after:c.after})}}else"br"===b.localName&&0!==d.length&&(d[d.length-1].br=!0);else for(b=b.firstChild;b;)b.nodeType===Node.ELEMENT_NODE&&(a(c,b,d,g),"ruby"===b.localName||"rtc"===b.localName?0<d.length&&
d[d.length-1].rbc.push(b):"span"===b.localName&&b.style[H]&&"none"!==b.style[H]&&0<d.length&&d[d.length-1].te.push(b)),b=b.nextSibling}function g(a,b,d,g){if("none"===g.style)b.style[H]="none";else if(b.style[H]="auto"===g.style?"filled":g.style+" "+g.symbol,"before"===g.position||"after"===g.position)b.style[C]="tb"===a.bpd?"before"===g.position?"left over":"left under":"rl"===a.bpd?"before"===g.position?"right under":"left under":"before"===g.position?"left under":"right under"}function v(a,b){this.qname=
a;this.map=b}b.render=function(a,b,d,g,m,q,z,v,k,u){g=g||b.clientHeight;m=m||b.clientWidth;if(null!==a.aspectRatio){var c=g*a.aspectRatio;c>m?g=Math.round(m/a.aspectRatio):m=c}c=document.createElement("div");c.style.position="relative";c.style.width=m+"px";c.style.height=g+"px";c.style.margin="auto";c.style.top=0;c.style.bottom=0;c.style.left=0;c.style.right=0;c.style.zIndex=0;d={h:g,w:m,regionH:null,regionW:null,imgResolver:d,displayForcedOnlyMode:q||!1,isd:a,errorHandler:z,previousISDState:v,enableRollUp:k||
!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null,options:u?u:{}};b.appendChild(c);for(var l in a.contents)f(d,c,a.contents[l]);return d.currentISDState};var z=[new v("http://www.w3.org/ns/ttml#styling backgroundColor",function(a,b,d,g){0!==g[3]&&(b.style.backgroundColor="rgba("+g[0].toString()+","+g[1].toString()+","+g[2].toString()+","+(g[3]/255).toString()+")")}),new v("http://www.w3.org/ns/ttml#styling color",function(a,b,d,g){b.style.color=
"rgba("+g[0].toString()+","+g[1].toString()+","+g[2].toString()+","+(g[3]/255).toString()+")"}),new v("http://www.w3.org/ns/ttml#styling direction",function(a,b,d,g){b.style.direction=g}),new v("http://www.w3.org/ns/ttml#styling display",function(a,b,d,g){}),new v("http://www.w3.org/ns/ttml#styling displayAlign",function(a,b,d,g){b.style.display="flex";b.style.flexDirection="column";"before"===g?b.style.justifyContent="flex-start":"center"===g?b.style.justifyContent="center":"after"===g&&(b.style.justifyContent=
"flex-end")}),new v("http://www.w3.org/ns/ttml#styling extent",function(a,b,d,g){a.regionH=g.h.toUsedLength(a.w,a.h);a.regionW=g.w.toUsedLength(a.w,a.h);var c=g=0;if(d=d.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])g=d[0].toUsedLength(a.w,a.h)+d[2].toUsedLength(a.w,a.h),c=d[1].toUsedLength(a.w,a.h)+d[3].toUsedLength(a.w,a.h);b.style.height=a.regionH-g+"px";b.style.width=a.regionW-c+"px"}),new v("http://www.w3.org/ns/ttml#styling fontFamily",function(a,b,d,g){a=[];for(var c in g)g[c]=g[c].trim(),
"monospaceSerif"===g[c]?(a.push("Courier New"),a.push('"Liberation Mono"'),a.push("Courier"),a.push("monospace")):"proportionalSansSerif"===g[c]||"default"===g[c]?(a.push("Arial"),a.push("Helvetica"),a.push('"Liberation Sans"'),a.push("sans-serif")):"monospace"===g[c]?a.push("monospace"):"sansSerif"===g[c]?a.push("sans-serif"):"serif"===g[c]?a.push("serif"):"monospaceSansSerif"===g[c]?(a.push("Consolas"),a.push("monospace")):"proportionalSerif"===g[c]?a.push("serif"):a.push(g[c]);b.style.fontFamily=
a.join(",")}),new v("http://www.w3.org/ns/ttml#styling shear",function(a,b,d,g){0!==g&&(d=-.9*g,b.style.transform="tb"===a.bpd?"skewX("+d+"deg)":"skewY("+d+"deg)")}),new v("http://www.w3.org/ns/ttml#styling fontSize",function(a,b,d,g){b.style.fontSize=g.multiply(g.toUsedLength(a.w,a.h),a.options.sizeAdjust)+"px"}),new v("http://www.w3.org/ns/ttml#styling fontStyle",function(a,b,d,g){b.style.fontStyle=g}),new v("http://www.w3.org/ns/ttml#styling fontWeight",function(a,b,d,g){b.style.fontWeight=g}),
new v("http://www.w3.org/ns/ttml#styling lineHeight",function(a,b,d,g){b.style.lineHeight="normal"===g?"normal":g.multiply(g.toUsedLength(a.w,a.h),a.options.sizeAdjust)+"px"}),new v("http://www.w3.org/ns/ttml#styling opacity",function(a,b,d,g){b.style.opacity=g}),new v("http://www.w3.org/ns/ttml#styling origin",function(a,b,d,g){b.style.top=g.h.toUsedLength(a.w,a.h)+"px";b.style.left=g.w.toUsedLength(a.w,a.h)+"px"}),new v("http://www.w3.org/ns/ttml#styling overflow",function(a,b,d,g){b.style.overflow=
g}),new v("http://www.w3.org/ns/ttml#styling padding",function(a,b,d,g){d=[];d[0]=g[0].toUsedLength(a.w,a.h)+"px";d[1]=g[3].toUsedLength(a.w,a.h)+"px";d[2]=g[2].toUsedLength(a.w,a.h)+"px";d[3]=g[1].toUsedLength(a.w,a.h)+"px";b.style.padding=d.join(" ")}),new v("http://www.w3.org/ns/ttml#styling position",function(a,b,d,g){b.style.top=g.h.toUsedLength(a.w,a.h)+"px";b.style.left=g.w.toUsedLength(a.w,a.h)+"px"}),new v("http://www.w3.org/ns/ttml#styling rubyAlign",function(a,b,d,g){b.style.rubyAlign=
"spaceAround"===g?"space-around":"center"}),new v("http://www.w3.org/ns/ttml#styling rubyPosition",function(a,b,d,g){if("before"===g||"after"===g)b.parentElement.style[F]=u?g:"tb"===a.bpd?"before"===g?"over":"under":"rl"===a.bpd?"before"===g?"over":"under":"before"===g?"under":"over"}),new v("http://www.w3.org/ns/ttml#styling showBackground",null),new v("http://www.w3.org/ns/ttml#styling textAlign",function(a,b,d,g){b.style.textAlign="start"===g?"rl"===a.ipd?"right":"left":"end"===g?"rl"===a.ipd?
"left":"right":g}),new v("http://www.w3.org/ns/ttml#styling textDecoration",function(a,b,d,g){b.style.textDecoration=g.join(" ").replace("lineThrough","line-through")}),new v("http://www.w3.org/ns/ttml#styling textOutline",function(a,b,d,g){}),new v("http://www.w3.org/ns/ttml#styling textShadow",function(a,b,d,g){var c=d.styleAttrs[m.byName.textOutline.qname];if("none"===g&&"none"===c)b.style.textShadow="";else{d=[];"none"!==c&&(c="rgba("+c.color[0].toString()+","+c.color[1].toString()+","+c.color[2].toString()+
","+(c.color[3]/255).toString()+")",d.push("1px 1px 1px "+c),d.push("-1px 1px 1px "+c),d.push("1px -1px 1px "+c),d.push("-1px -1px 1px "+c));if("none"!==g)for(var l in g)d.push(g[l].x_off.toUsedLength(a.w,a.h)+"px "+g[l].y_off.toUsedLength(a.w,a.h)+"px "+g[l].b_radius.toUsedLength(a.w,a.h)+"px rgba("+g[l].color[0].toString()+","+g[l].color[1].toString()+","+g[l].color[2].toString()+","+(g[l].color[3]/255).toString()+")");b.style.textShadow=d.join(",")}}),new v("http://www.w3.org/ns/ttml#styling textCombine",
function(a,b,d,g){b.style.textCombineUpright=g.join(" ")}),new v("http://www.w3.org/ns/ttml#styling textEmphasis",function(a,b,d,g){}),new v("http://www.w3.org/ns/ttml#styling unicodeBidi",function(a,b,d,g){b.style.unicodeBidi="bidiOverride"===g?"bidi-override":g}),new v("http://www.w3.org/ns/ttml#styling visibility",function(a,b,d,g){b.style.visibility=g}),new v("http://www.w3.org/ns/ttml#styling wrapOption",function(a,b,d,g){b.style.whiteSpace="wrap"===g?"preserve"===d.space?"pre-wrap":"normal":
"preserve"===d.space?"pre":"noWrap"}),new v("http://www.w3.org/ns/ttml#styling writingMode",function(a,b,d,g){if("lrtb"===g||"lr"===g)b.style.writingMode="horizontal-tb";else if("rltb"===g||"rl"===g)b.style.writingMode="horizontal-tb";else if("tblr"===g)b.style.writingMode="vertical-lr";else if("tbrl"===g||"tb"===g)b.style.writingMode="vertical-rl"}),new v("http://www.w3.org/ns/ttml#styling zIndex",function(a,b,d,g){b.style.zIndex=g}),new v("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",
function(a,b,d,g){a.displayForcedOnlyMode&&!1===g&&(b.style.visibility="hidden")})],D;for(D in z);var u="webkitRubyPosition"in window.getComputedStyle(document.documentElement),F=u?"webkitRubyPosition":"rubyPosition",H="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",C="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition"})("undefined"===typeof k?
this.imscHTML={}:k,"undefined"===typeof imscNames?d("./names"):imscNames,"undefined"===typeof imscStyles?d("./styles"):imscStyles,"undefined"===typeof imscUtils?d("./utils"):imscUtils)},{"./names":37,"./styles":38,"./utils":39}],35:[function(d,r,k){(function(b,d,m,q){function f(b,d,v,w,c,l,n,D,A){if(d<n.begin||d>=n.end)return null;l="regionID"in n&&""!==n.regionID?n.regionID:l;if(null!==c&&l!==v.id&&(!("contents"in n)||"contents"in n&&0===n.contents.length||""!==l))return null;var u=new z(n);for(C in n.sets)d<
n.sets[C].begin||d>=n.sets[C].end||(u.styleAttrs[n.sets[C].qname]=n.sets[C].value);var C={};for(var x in u.styleAttrs)if(C[x]=!0,"region"===u.kind&&x===m.byName.writingMode.qname&&!(m.byName.direction.qname in u.styleAttrs)){var y=u.styleAttrs[x];if("lrtb"===y||"lr"===y)u.styleAttrs[m.byName.direction.qname]="ltr";else if("rltb"===y||"rl"===y)u.styleAttrs[m.byName.direction.qname]="rtl"}if(null!==c)for(var F in m.all)if(x=m.all[F],x.qname===m.byName.textDecoration.qname){y=c.styleAttrs[x.qname];var H=
u.styleAttrs[x.qname],B=[];void 0===H?B=y:-1===H.indexOf("none")?((-1===H.indexOf("noUnderline")&&-1!==y.indexOf("underline")||-1!==H.indexOf("underline"))&&B.push("underline"),(-1===H.indexOf("noLineThrough")&&-1!==y.indexOf("lineThrough")||-1!==H.indexOf("lineThrough"))&&B.push("lineThrough"),(-1===H.indexOf("noOverline")&&-1!==y.indexOf("overline")||-1!==H.indexOf("overline"))&&B.push("overline")):B.push("none");u.styleAttrs[x.qname]=B}else x.qname!==m.byName.fontSize.qname||x.qname in u.styleAttrs||
"span"!==u.kind||"textContainer"!==u.styleAttrs[m.byName.ruby.qname]?x.qname!==m.byName.fontSize.qname||x.qname in u.styleAttrs||"span"!==u.kind||"text"!==u.styleAttrs[m.byName.ruby.qname]?x.inherit&&x.qname in c.styleAttrs&&!(x.qname in u.styleAttrs)&&(u.styleAttrs[x.qname]=c.styleAttrs[x.qname]):(y=c.styleAttrs[m.byName.fontSize.qname],u.styleAttrs[x.qname]="textContainer"===c.styleAttrs[m.byName.ruby.qname]?y:new q.ComputedLength(.5*y.rw,.5*y.rh)):(y=c.styleAttrs[m.byName.fontSize.qname],u.styleAttrs[x.qname]=
new q.ComputedLength(.5*y.rw,.5*y.rh));for(var G in m.all)if(F=m.all[G],!(F.qname in u.styleAttrs||F.qname===m.byName.position.qname&&m.byName.origin.qname in u.styleAttrs||F.qname===m.byName.origin.qname&&m.byName.position.qname in u.styleAttrs)&&(x=b.head.styling.initials[F.qname]||F.initial,null!==x&&("region"===u.kind||!1===F.inherit&&null!==x)))if(x=F.parse(x),null!==x)u.styleAttrs[F.qname]=x,C[F.qname]=!0;else if(F="Invalid initial value for '"+F.qname+"' on element '"+u.kind,D&&D.error&&D.error(F))throw F;
for(var p in m.all)if(G=m.all[p],G.qname in C&&null!==G.compute)if(F=G.compute(b,c,u,u.styleAttrs[G.qname],A),null!==F)u.styleAttrs[G.qname]=F;else if(u.styleAttrs[G.qname]=G.compute(b,c,u,G.parse(G.initial),A),G="Style '"+G.qname+"' on element '"+u.kind+"' cannot be computed",D&&D.error&&D.error(G))throw G;if("none"===u.styleAttrs[m.byName.display.qname])return null;if(null===c)var J=null===w?[]:[w];else"contents"in n&&(J=n.contents);for(var e in J)c=f(b,d,v,w,u,l,J[e],D,A),null!==c&&u.contents.push(c.element);
for(var h in u.styleAttrs)b=!1,"span"===u.kind&&(d=u.styleAttrs[m.byName.ruby.qname],(b=("container"===d||"textContainer"===d||"baseContainer"===d)&&-1!==r.indexOf(h))||(b="container"!==d&&h===m.byName.rubyAlign.qname),b||(b=!("textContainer"===d||"text"===d)&&h===m.byName.rubyPosition.qname)),b||(b=-1===m.byQName[h].applies.indexOf(u.kind)),b&&delete u.styleAttrs[h];h=u.styleAttrs[m.byName.ruby.qname];if("p"===u.kind||"span"===u.kind&&("textContainer"===h||"text"===h))h=[],a(u,h),k(h),g(u);return"div"===
u.kind&&m.byName.backgroundImage.qname in u.styleAttrs||"br"===u.kind||"image"===u.kind||"contents"in u&&0<u.contents.length||"span"===u.kind&&null!==u.text||"region"===u.kind&&"always"===u.styleAttrs[m.byName.showBackground.qname]?{region_id:l,element:u}:null}function k(a){function b(a){return"br"===a.kind||/[\r\n\t ]$/.test(a.text)}function d(a){return"br"===a.kind||"preserve"===a.space&&/^[\r\n]/.test(a.text)}for(var g,c=0;c<a.length;)if(g=a[c],"br"===g.kind||"preserve"===g.space)c++;else{var f=
g.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(f)&&(0===c||b(a[c-1]))&&(f=f.substring(1));g.text=f;0===f.length?a.splice(c,1):c++}for(c=0;c<a.length;c++)g=a[c],"br"===g.kind||"preserve"===g.space?c++:/[ ]$/.test(g.text)&&(c===a.length-1||d(a[c+1]))&&(g.text=g.text.slice(0,-1))}function a(b,d){for(var g in b.contents){var f=b.contents[g],c=f.styleAttrs[m.byName.ruby.qname];if("span"!==f.kind||"textContainer"!==c&&"text"!==c)"contents"in f?a(f,d):("span"===f.kind&&0!==f.text.length||"br"===f.kind)&&
d.push(f)}}function g(a){if("br"===a.kind)return!1;if("text"in a)return 0===a.text.length;if("contents"in a){for(var b=a.contents.length;b--;)g(a.contents[b])&&a.contents.splice(b,1);return 0===a.contents.length}}function v(a){this.contents=[];this.aspectRatio=a.aspectRatio}function z(a){this.kind=a.kind||"region";a.id&&(this.id=a.id);this.styleAttrs={};for(var b in a.styleAttrs)this.styleAttrs[b]=a.styleAttrs[b];"src"in a&&(this.src=a.src);"type"in a&&(this.type=a.type);if("text"in a)this.text=a.text;
else if("region"===this.kind||"contents"in a)this.contents=[];"space"in a&&(this.space=a.space)}b.generateISD=function(a,b,d){var g=new v(a),c={},l;for(l in a.head.layout.regions){var m=f(a,b,a.head.layout.regions[l],a.body,null,"",a.head.layout.regions[l],d,c);null!==m&&g.contents.push(m.element)}return g};var r=[m.byName.color.qname,m.byName.textCombine.qname,m.byName.textDecoration.qname,m.byName.textEmphasis.qname,m.byName.textOutline.qname,m.byName.textShadow.qname]})("undefined"===typeof k?
this.imscISD={}:k,"undefined"===typeof imscNames?d("./names"):imscNames,"undefined"===typeof imscStyles?d("./styles"):imscStyles,"undefined"===typeof imscUtils?d("./utils"):imscUtils)},{"./names":37,"./styles":38,"./utils":39}],36:[function(d,r,k){k.generateISD=d("./isd").generateISD;k.fromXML=d("./doc").fromXML;k.renderHTML=d("./html").render},{"./doc":33,"./html":34,"./isd":35}],37:[function(d,r,k){d="undefined"===typeof k?this.imscNames={}:k;d.ns_tt="http://www.w3.org/ns/ttml";d.ns_tts="http://www.w3.org/ns/ttml#styling";
d.ns_ttp="http://www.w3.org/ns/ttml#parameter";d.ns_xml="http://www.w3.org/XML/1998/namespace";d.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";d.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";d.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";d.ns_ebutts="urn:ebu:tt:style";d.ttaf_map={"http://www.w3.org/2006/10/ttaf1":d.ns_tt,"http://www.w3.org/2006/10/ttaf1#style":d.ns_tts,"http://www.w3.org/2006/10/ttaf1#parameter":d.ns_ttp}},{}],38:[function(d,r,k){(function(b,
d,m){function f(a,b,d,f,m,k,q,r){this.name=b;this.ns=a;this.qname=a+" "+b;this.inherit=m;this.animatable=k;this.initial=d;this.applies=f;this.parse=q;this.compute=r}b.all=[new f(d.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,m.parseColor,null),new f(d.ns_tts,"color","white",["span"],!0,!0,m.parseColor,null),new f(d.ns_tts,"direction","ltr",["p","span"],!0,!0,function(a){return a},null),new f(d.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(a){return a},
null),new f(d.ns_tts,"displayAlign","before",["region"],!1,!0,function(a){return a},null),new f(d.ns_tts,"extent","auto",["tt","region"],!1,!0,function(a){if("auto"===a)return a;var b=a.split(" ");if(2!==b.length)return null;a=m.parseLength(b[0]);return(b=m.parseLength(b[1]))&&a?{h:b,w:a}:null},function(a,b,d,f,k){if("auto"===f)b=new m.ComputedLength(0,1);else if(b=m.toComputedLength(f.h.value,f.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===b)return null;if("auto"===f)a=new m.ComputedLength(1,
0);else if(a=m.toComputedLength(f.w.value,f.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:b,w:a}}),new f(d.ns_tts,"fontFamily","default",["span"],!0,!0,function(a){a=a.split(",");var b=[],d;for(d in a)"'"!==a[d].charAt(0)&&'"'!==a[d].charAt(0)?"default"===a[d]?b.push("monospaceSerif"):b.push(a[d]):b.push(a[d]);return b},null),new f(d.ns_tts,"shear","0%",["p"],!0,!0,m.parseLength,function(a,b,d,f){if("%"===f.unit)a=100<Math.abs(f.value)?100*Math.sign(f.value):f.value;
else return null;return a}),new f(d.ns_tts,"fontSize","1c",["span"],!0,!0,m.parseLength,function(a,d,f,k,q){return m.toComputedLength(k.value,k.unit,null!==d?d.styleAttrs[b.byName.fontSize.qname]:a.cellLength.h,null!==d?d.styleAttrs[b.byName.fontSize.qname]:a.cellLength.h,a.cellLength.h,a.pxLength.h)}),new f(d.ns_tts,"fontStyle","normal",["span"],!0,!0,function(a){return a},null),new f(d.ns_tts,"fontWeight","normal",["span"],!0,!0,function(a){return a},null),new f(d.ns_tts,"lineHeight","normal",["p"],
!0,!0,function(a){return"normal"===a?a:m.parseLength(a)},function(a,d,f,k,q){if("normal"===k)a=k;else if(a=m.toComputedLength(k.value,k.unit,f.styleAttrs[b.byName.fontSize.qname],f.styleAttrs[b.byName.fontSize.qname],a.cellLength.h,a.pxLength.h),null===a)return null;return a}),new f(d.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new f(d.ns_tts,"origin","auto",["region"],!1,!0,function(a){if("auto"===a)return a;var b=a.split(" ");if(2!==b.length)return null;a=m.parseLength(b[0]);return(b=m.parseLength(b[1]))&&
a?{h:b,w:a}:null},function(a,b,d,f,k){if("auto"===f)b=new m.ComputedLength(0,0);else if(b=m.toComputedLength(f.h.value,f.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===b)return null;if("auto"===f)a=new m.ComputedLength(0,0);else if(a=m.toComputedLength(f.w.value,f.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:b,w:a}}),new f(d.ns_tts,"overflow","hidden",["region"],!1,!0,function(a){return a},null),new f(d.ns_tts,"padding","0px",["region"],!1,!0,function(a){a=a.split(" ");
if(4<a.length)return null;var b=[],d;for(d in a){var f=m.parseLength(a[d]);if(!f)return null;b.push(f)}return b},function(a,d,f,k,q){if(1===k.length)d=[k[0],k[0],k[0],k[0]];else if(2===k.length)d=[k[0],k[1],k[0],k[1]];else if(3===k.length)d=[k[0],k[1],k[2],k[1]];else if(4===k.length)d=[k[0],k[1],k[2],k[3]];else return null;k=f.styleAttrs[b.byName.writingMode.qname];if("lrtb"===k||"lr"===k)d=[d[0],d[3],d[2],d[1]];else if("rltb"===k||"rl"===k)d=[d[0],d[1],d[2],d[3]];else if("tblr"===k)d=[d[3],d[0],
d[1],d[2]];else if("tbrl"===k||"tb"===k)d=[d[3],d[2],d[1],d[0]];else return null;k=[];for(var g in d)if(0===d[g].value)k[g]=new m.ComputedLength(0,0);else if(k[g]=m.toComputedLength(d[g].value,d[g].unit,f.styleAttrs[b.byName.fontSize.qname],"0"===g||"2"===g?f.styleAttrs[b.byName.extent.qname].h:f.styleAttrs[b.byName.extent.qname].w,"0"===g||"2"===g?a.cellLength.h:a.cellLength.w,"0"===g||"2"===g?a.pxLength.h:a.pxLength.w),null===k[g])return null;return k}),new f(d.ns_tts,"position","top left",["region"],
!1,!0,function(a){return m.parsePosition(a)},function(a,d,f,k){d=m.toComputedLength(k.v.offset.value,k.v.offset.unit,null,new m.ComputedLength(-f.styleAttrs[b.byName.extent.qname].h.rw,a.dimensions.h.rh-f.styleAttrs[b.byName.extent.qname].h.rh),null,a.pxLength.h);if(null===d)return null;"bottom"===k.v.edge&&(d=new m.ComputedLength(-d.rw-f.styleAttrs[b.byName.extent.qname].h.rw,a.dimensions.h.rh-d.rh-f.styleAttrs[b.byName.extent.qname].h.rh));var g=m.toComputedLength(k.h.offset.value,k.h.offset.unit,
null,new m.ComputedLength(a.dimensions.w.rw-f.styleAttrs[b.byName.extent.qname].w.rw,-f.styleAttrs[b.byName.extent.qname].w.rh),null,a.pxLength.w);if(null===d)return null;"right"===k.h.edge&&(g=new m.ComputedLength(a.dimensions.w.rw-g.rw-f.styleAttrs[b.byName.extent.qname].w.rw,-g.rh-f.styleAttrs[b.byName.extent.qname].w.rh));return{h:d,w:g}}),new f(d.ns_tts,"ruby","none",["span"],!1,!0,function(a){return a},null),new f(d.ns_tts,"rubyAlign","center",["span"],!0,!0,function(a){return"center"!==a&&
"spaceAround"!==a?null:a},null),new f(d.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(a){return a},null),new f(d.ns_tts,"rubyReserve","none",["p"],!0,!0,function(a){var b=a.split(" ");a=[null,null];if(0===b.length||2<b.length||"none"!==b[0]&&"both"!==b[0]&&"after"!==b[0]&&"before"!==b[0]&&"outside"!==b[0])return null;a[0]=b[0];if(2===b.length&&"none"!==b[0])if(b=m.parseLength(b[1]))a[1]=b;else return null;return a},function(a,d,f,k,q){if("none"===k[0])return k;a=null===k[1]?new m.ComputedLength(.5*
f.styleAttrs[b.byName.fontSize.qname].rw,.5*f.styleAttrs[b.byName.fontSize.qname].rh):m.toComputedLength(k[1].value,k[1].unit,f.styleAttrs[b.byName.fontSize.qname],f.styleAttrs[b.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===a?null:[k[0],a]}),new f(d.ns_tts,"showBackground","whenActive",["region"],!1,!0,function(a){return a},null),new f(d.ns_tts,"textAlign","start",["p"],!0,!0,function(a){return a},function(a,b,d,f,m){return"left"===f?"start":"right"===f?"end":f}),new f(d.ns_tts,
"textCombine","none",["span"],!0,!0,function(a){a=a.split(" ");return 1!==a.length||"none"!==a[0]&&"all"!==a[0]?null:[a[0]]},null),new f(d.ns_tts,"textDecoration","none",["span"],!0,!0,function(a){return a.split(" ")},null),new f(d.ns_tts,"textEmphasis","none",["span"],!0,!0,function(a){a=a.split(" ");var b={style:null,symbol:null,color:null,position:null},d;for(d in a)if("none"===a[d]||"auto"===a[d])b.style=a[d];else if("filled"===a[d]||"open"===a[d])b.style=a[d];else if("circle"===a[d]||"dot"===
a[d]||"sesame"===a[d])b.symbol=a[d];else if("current"===a[d])b.color=a[d];else if("outside"===a[d]||"before"===a[d]||"after"===a[d])b.position=a[d];else if(b.color=m.parseColor(a[d]),null===b.color)return null;null==b.style&&null==b.symbol?b.style="auto":(b.symbol=b.symbol||"circle",b.style=b.style||"filled");b.position=b.position||"outside";b.color=b.color||"current";return b},null),new f(d.ns_tts,"textOutline","none",["span"],!0,!0,function(a){if("none"===a)return a;var b={};a=a.split(" ");if(0===
a.length||2<a.length)return null;var d=m.parseColor(a[0]);b.color=d;null!==d&&a.shift();if(1!==a.length)return null;a=m.parseLength(a[0]);if(!a)return null;b.thickness=a;return b},function(a,d,f,k,q){if("none"===k)return k;d={};d.color=null===k.color?f.styleAttrs[b.byName.color.qname]:k.color;d.thickness=m.toComputedLength(k.thickness.value,k.thickness.unit,f.styleAttrs[b.byName.fontSize.qname],f.styleAttrs[b.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===d.thickness?null:d}),new f(d.ns_tts,
"textShadow","none",["span"],!0,!0,m.parseTextShadow,function(a,d,f,k){if("none"===k)return k;d=[];for(var g in k){var q={};q.x_off=m.toComputedLength(k[g][0].value,k[g][0].unit,null,f.styleAttrs[b.byName.fontSize.qname],null,a.pxLength.w);if(null===q.x_off)return null;q.y_off=m.toComputedLength(k[g][1].value,k[g][1].unit,null,f.styleAttrs[b.byName.fontSize.qname],null,a.pxLength.h);if(null===q.y_off)return null;if(null===k[g][2])q.b_radius=0;else if(q.b_radius=m.toComputedLength(k[g][2].value,k[g][2].unit,
null,f.styleAttrs[b.byName.fontSize.qname],null,a.pxLength.h),null===q.b_radius)return null;q.color=null===k[g][3]?f.styleAttrs[b.byName.color.qname]:k[g][3];d.push(q)}return d}),new f(d.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(a){return a},null),new f(d.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(a){return a},null),new f(d.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(a){return a},null),new f(d.ns_tts,"writingMode","lrtb",["region"],!1,!0,
function(a){return a},null),new f(d.ns_tts,"zIndex","auto",["region"],!1,!0,function(a){"auto"!==a&&(a=parseInt(a),isNaN(a)&&(a=null));return a},null),new f(d.ns_ebutts,"linePadding","0c",["p"],!0,!1,m.parseLength,function(a,b,d,f,k){return m.toComputedLength(f.value,f.unit,null,null,a.cellLength.w,null)}),new f(d.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(a){return a},null),new f(d.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(a){return a},null),new f(d.ns_itts,"forcedDisplay",
"false",["body","div","p","region","span"],!0,!0,function(a){return"true"===a?!0:!1},null),new f(d.ns_itts,"fillLineGap","true",["p"],!0,!0,function(a){return"true"===a?!0:!1},null)];b.byQName={};for(var k in b.all)b.byQName[b.all[k].qname]=b.all[k];b.byName={};for(var r in b.all)b.byName[b.all[r].name]=b.all[r]})("undefined"===typeof k?this.imscStyles={}:k,"undefined"===typeof imscNames?d("./names"):imscNames,"undefined"===typeof imscUtils?d("./utils"):imscUtils)},{"./names":37,"./utils":39}],39:[function(d,
r,k){(function(b){var d=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,k=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,q=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,
255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};b.parseColor=function(a){var b,f=null,m=r[a.toLowerCase()];void 0!==m?f=m:null!==(b=d.exec(a))?f=[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),void 0!==b[4]?parseInt(b[4],16):255]:null!==(b=k.exec(a))?f=[parseInt(b[1]),parseInt(b[2]),parseInt(b[3]),255]:null!==(b=q.exec(a))&&(f=[parseInt(b[1]),parseInt(b[2]),parseInt(b[3]),parseInt(b[4])]);return f};var A=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;
b.parseLength=function(a){var b,d=null;null!==(b=A.exec(a))&&(d={value:parseFloat(b[1]),unit:b[2]});return d};b.parseTextShadow=function(a){a=a.split(",");var d=[],f;for(f in a){var k=a[f].split(" ");if(1===k.length&&"none"===k[0])return"none";if(1<k.length&&5>k.length){var m=[null,null,null,null],q=b.parseLength(k.shift());if(null===q)return null;m[0]=q;q=b.parseLength(k.shift());if(null===q)return null;m[1]=q;if(0!==k.length&&(q=b.parseLength(k[0]),null!==q&&(m[2]=q,k.shift()),0!==k.length)){k=
b.parseColor(k[0]);if(null===k)return null;m[3]=k}d.push(m)}}return d};b.parsePosition=function(a){a=a.split(" ");var d=function(a){return"center"===a||"left"===a||"top"===a||"bottom"===a||"right"===a};if(4<a.length)return null;for(var f in a)if(!d(a[f])){var k=b.parseLength(a[f]);if(null===k)return null;a[f]=k}f={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(k=0;k<a.length;){var m=a[k++];if(d(m)){var q={value:0,unit:"%"};2!==a.length&&k<a.length&&!d(a[k])&&
(q=a[k++]);"right"===m?(f.h.edge=m,f.h.offset=q):"bottom"===m?(f.v.edge=m,f.v.offset=q):"left"===m?f.h.offset=q:"top"===m&&(f.v.offset=q)}else if(1===a.length||2===a.length)1===k?f.h.offset=m:f.v.offset=m;else return null}return f};b.ComputedLength=function(a,b){this.rw=a;this.rh=b};b.ComputedLength.prototype.toUsedLength=function(a,b){return a*this.rw+b*this.rh};b.ComputedLength.prototype.multiply=function(a,b){return b?a*b:a};b.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===
this.rh};b.toComputedLength=function(a,d,f,k,m,q){return"%"===d&&k?new b.ComputedLength(k.rw*a/100,k.rh*a/100):"em"===d&&f?new b.ComputedLength(f.rw*a,f.rh*a):"c"===d&&m?new b.ComputedLength(a*m.rw,a*m.rh):"px"===d&&q?new b.ComputedLength(a*q.rw,a*q.rh):"rh"===d?new b.ComputedLength(0,a/100):"rw"===d?new b.ComputedLength(a/100,0):null}})("undefined"===typeof k?this.imscUtils={}:k)},{}]},{},[36])(36)});
