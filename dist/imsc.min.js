var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(g,q,n){g!=Array.prototype&&g!=Object.prototype&&(g[q]=n.value)};$jscomp.getGlobal=function(g){return"undefined"!=typeof window&&window===g?g:"undefined"!=typeof global&&null!=global?global:g};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(g,q,n,f){if(q){n=$jscomp.global;g=g.split(".");for(f=0;f<g.length-1;f++){var t=g[f];t in n||(n[t]={});n=n[t]}g=g[g.length-1];f=n[g];q=q(f);q!=f&&null!=q&&$jscomp.defineProperty(n,g,{configurable:!0,writable:!0,value:q})}};$jscomp.polyfill("Math.sign",function(g){return g?g:function(g){g=Number(g);return 0===g||isNaN(g)?g:0<g?1:-1}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var g={},q=Object.create(new $jscomp.global.Proxy(g,{get:function(n,f,t){return n==g&&"q"==f&&t==q}}));return!0===q.q}catch(n){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.Symbol=function(){var g=0;return function(q){return $jscomp.SYMBOL_PREFIX+(q||"")+g++}}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var g=$jscomp.global.Symbol.iterator;g||(g=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[g]&&$jscomp.defineProperty(Array.prototype,g,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var g=$jscomp.global.Symbol.asyncIterator;g||(g=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(g){var q=0;return $jscomp.iteratorPrototype(function(){return q<g.length?{done:!1,value:g[q++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(g){$jscomp.initSymbolIterator();g={next:g};g[$jscomp.global.Symbol.iterator]=function(){return this};return g};$jscomp.makeIterator=function(g){$jscomp.initSymbolIterator();var q=g[Symbol.iterator];return q?q.call(g):$jscomp.arrayIterator(g)};$jscomp.owns=function(g,q){return Object.prototype.hasOwnProperty.call(g,q)};
$jscomp.polyfill("WeakMap",function(g){function q(){if(!g||!Object.seal)return!1;try{var e=Object.seal({}),f=Object.seal({}),a=new g([[e,2],[f,3]]);if(2!=a.get(e)||3!=a.get(f))return!1;a.delete(e);a.set(f,4);return!a.has(e)&&4==a.get(f)}catch(c){return!1}}function n(e){$jscomp.owns(e,t)||$jscomp.defineProperty(e,t,{value:{}})}function f(e){var f=Object[e];f&&(Object[e]=function(a){n(a);return f(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(g&&$jscomp.ES6_CONFORMANCE)return g}else if(q())return g;
var t="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var e=0,k=function(f){this.id_=(e+=Math.random()+1).toString();if(f){$jscomp.initSymbol();$jscomp.initSymbolIterator();f=$jscomp.makeIterator(f);for(var g;!(g=f.next()).done;)g=g.value,this.set(g[0],g[1])}};k.prototype.set=function(e,f){n(e);if(!$jscomp.owns(e,t))throw Error("WeakMap key fail: "+e);e[t][this.id_]=f;return this};k.prototype.get=function(e){return $jscomp.owns(e,t)?e[t][this.id_]:void 0};k.prototype.has=
function(e){return $jscomp.owns(e,t)&&$jscomp.owns(e[t],this.id_)};k.prototype.delete=function(e){return $jscomp.owns(e,t)&&$jscomp.owns(e[t],this.id_)?delete e[t][this.id_]:!1};return k},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(g){function q(){if($jscomp.ASSUME_NO_NATIVE_MAP||!g||"function"!=typeof g||!g.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),a=new g($jscomp.makeIterator([[e,"s"]]));if("s"!=a.get(e)||1!=a.size||a.get({x:4})||a.set({x:4},"t")!=a||2!=a.size)return!1;var c=a.entries(),f=c.next();if(f.done||f.value[0]!=e||"s"!=f.value[1])return!1;f=c.next();return f.done||4!=f.value[0].x||"t"!=f.value[1]||!c.next().done?!1:!0}catch(h){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(g&&$jscomp.ES6_CONFORMANCE)return g}else if(q())return g;$jscomp.initSymbol();$jscomp.initSymbolIterator();var n=new WeakMap,f=function(e){this.data_={};this.head_=k();this.size=0;if(e){e=$jscomp.makeIterator(e);for(var a;!(a=e.next()).done;)a=a.value,this.set(a[0],a[1])}};f.prototype.set=function(e,a){e=0===e?0:e;var c=t(this,e);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=a:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,
key:e,value:a},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};f.prototype.delete=function(e){e=t(this,e);return e.entry&&e.list?(e.list.splice(e.index,1),e.list.length||delete this.data_[e.id],e.entry.previous.next=e.entry.next,e.entry.next.previous=e.entry.previous,e.entry.head=null,this.size--,!0):!1};f.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=k();this.size=0};f.prototype.has=function(e){return!!t(this,e).entry};
f.prototype.get=function(e){return(e=t(this,e).entry)&&e.value};f.prototype.entries=function(){return e(this,function(e){return[e.key,e.value]})};f.prototype.keys=function(){return e(this,function(e){return e.key})};f.prototype.values=function(){return e(this,function(e){return e.value})};f.prototype.forEach=function(e,a){for(var c=this.entries(),f;!(f=c.next()).done;)f=f.value,e.call(a,f[1],f[0],this)};f.prototype[Symbol.iterator]=f.prototype.entries;var t=function(e,a){var c=a&&typeof a;"object"==
c||"function"==c?n.has(a)?c=n.get(a):(c=""+ ++M,n.set(a,c)):c="p_"+a;var f=e.data_[c];if(f&&$jscomp.owns(e.data_,c))for(e=0;e<f.length;e++){var h=f[e];if(a!==a&&h.key!==h.key||a===h.key)return{id:c,list:f,index:e,entry:h}}return{id:c,list:f,index:-1,entry:void 0}},e=function(e,a){var c=e.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=e.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:a(c)};c=null}return{done:!0,value:void 0}})},k=function(){var e={};return e.previous=
e.next=e.head=e},M=0;return f},"es6","es3");
$jscomp.polyfill("Set",function(g){function q(){if($jscomp.ASSUME_NO_NATIVE_SET||!g||"function"!=typeof g||!g.prototype.entries||"function"!=typeof Object.seal)return!1;try{var f=Object.seal({x:4}),t=new g($jscomp.makeIterator([f]));if(!t.has(f)||1!=t.size||t.add(f)!=t||1!=t.size||t.add({x:4})!=t||2!=t.size)return!1;var e=t.entries(),k=e.next();if(k.done||k.value[0]!=f||k.value[1]!=f)return!1;k=e.next();return k.done||k.value[0]==f||4!=k.value[0].x||k.value[1]!=k.value[0]?!1:e.next().done}catch(M){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(g&&$jscomp.ES6_CONFORMANCE)return g}else if(q())return g;$jscomp.initSymbol();$jscomp.initSymbolIterator();var n=function(f){this.map_=new Map;if(f){f=$jscomp.makeIterator(f);for(var g;!(g=f.next()).done;)this.add(g.value)}this.size=this.map_.size};n.prototype.add=function(f){f=0===f?0:f;this.map_.set(f,f);this.size=this.map_.size;return this};n.prototype.delete=function(f){f=this.map_.delete(f);this.size=this.map_.size;return f};n.prototype.clear=
function(){this.map_.clear();this.size=0};n.prototype.has=function(f){return this.map_.has(f)};n.prototype.entries=function(){return this.map_.entries()};n.prototype.values=function(){return this.map_.values()};n.prototype.keys=n.prototype.values;n.prototype[Symbol.iterator]=n.prototype.values;n.prototype.forEach=function(f,g){var e=this;this.map_.forEach(function(t){return f.call(g,t,t,e)})};return n},"es6","es3");
(function(g){"object"===typeof exports&&"undefined"!==typeof module?module.exports=g():"function"===typeof define&&define.amd?define([],g):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=g()})(function(){return function(){function g(q,n,f){function t(k,H){if(!n[k]){if(!q[k]){var a="function"==typeof require&&require;if(!H&&a)return a(k,!0);if(e)return e(k,!0);H=Error("Cannot find module '"+k+"'");throw H.code="MODULE_NOT_FOUND",H;}H=
n[k]={exports:{}};q[k][0].call(H.exports,function(a){return t(q[k][1][a]||a)},H,H.exports,g,q,n,f)}return n[k].exports}for(var e="function"==typeof require&&require,k=0;k<f.length;k++)t(f[k]);return t}return g}()({1:[function(g,q,n){(function(f,g,e,k,n){function t(b,a){var d=b.styleAttrs&&b.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===b.kind)!d&&a&&(b.styleAttrs||(b.styleAttrs={}),b.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=a);else if(d&&delete b.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],
b.contents)for(var c=0;c<b.contents.length;c++)t(b.contents[c],d||a)}function a(b){if("contents"in b){var d="styleAttrs"in b?b.styleAttrs[k.byName.ruby.qname]:null;d="span"===b.kind&&("container"===d||"textContainer"===d||"baseContainer"===d);for(var c=b.contents.length-1;0<=c;c--)!d||"styleAttrs"in b.contents[c]&&k.byName.ruby.qname in b.contents[c].styleAttrs?a(b.contents[c]):delete b.contents[c]}}function c(b,a,d,e){var l=e&&"seq"===e.timeContainer,r=0;e&&(r=l&&d?d.end:e.begin);a.begin=a.explicit_begin?
a.explicit_begin+r:r;d=a.begin;e=null;for(var z in a.sets)c(b,a.sets[z],e,a),d="seq"===a.timeContainer?a.sets[z].end:Math.max(d,a.sets[z].end),e=a.sets[z];if("contents"in a)for(var f in a.contents)c(b,a.contents[f],e,a),d="seq"===a.timeContainer?a.contents[f].end:Math.max(d,a.contents[f].end),e=a.contents[f];else d=l?a.begin:Number.POSITIVE_INFINITY;a.end=null!==a.explicit_end&&null!==a.explicit_dur?Math.min(a.begin+a.explicit_dur,r+a.explicit_end):null===a.explicit_end&&null!==a.explicit_dur?a.begin+
a.explicit_dur:null!==a.explicit_end&&null===a.explicit_dur?r+a.explicit_end:d;delete a.explicit_begin;delete a.explicit_dur;delete a.explicit_end;b._registerEvent(a)}function F(b){this.node=b}function h(){this.events=[];this.head=new b;this.body=null}function b(){this.styling=new d;this.layout=new Q}function d(){this.styles={};this.initials={}}function l(){this.styleRefs=this.styleAttrs=this.id=null}function z(){this.styleAttrs=null}function Q(){this.regions={}}function R(b,a){this.kind="image";
this.src=b;this.type=a}function A(b){this.id=b}function m(b){this.regionID=b}function I(b){this.styleAttrs=b}function x(b){this.sets=b}function q(b){this.contents=b}function u(b,a,d){this.explicit_begin=b;this.explicit_end=a;this.explicit_dur=d}function v(){this.kind="body"}function B(){this.kind="div"}function P(){this.kind="p"}function G(){this.kind="span"}function C(){this.kind="span"}function M(){this.kind="br"}function J(){}function W(){}function y(b){var a=null;b&&(b=b.attributes["xml:id"]||
b.attributes.id)&&(a=b.value||null);return a}function S(b){return b&&"style"in b.attributes?b.attributes.style.value.split(" "):[]}function T(b,a){var d={};if(null!==b)for(var c in b.attributes){var e=b.attributes[c].uri+" "+b.attributes[c].local,l=k.byQName[e];if(void 0!==l){var z=l.parse(b.attributes[c].value);null!==z?(d[e]=z,l===k.byName.zIndex&&L(a,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):K(a,"Cannot parse styling attribute "+e+" --\x3e "+b.attributes[c].value)}}return d}
function O(b,a,d){for(var c in b.attributes)if(b.attributes[c].uri===a&&b.attributes[c].local===d)return b.attributes[c].value;return null}function aa(b,a){b=O(b,e.ns_tts,"extent");if(null===b)return null;var d=b.split(" ");if(2!==d.length)return L(a,"Malformed extent (ignoring)"),null;b=n.parseLength(d[0]);d=n.parseLength(d[1]);return d&&b?{h:d,w:b}:(L(a,"Malformed extent values (ignoring)"),null)}function U(b,a,d){var c=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,e=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,
l=/^(\d+(?:\.\d+)?)t$/,z=/^(\d+(?:\.\d+)?)ms$/,f=/^(\d+(?:\.\d+)?)s$/,h=/^(\d+(?:\.\d+)?)h$/,r=/^(\d+(?:\.\d+)?)m$/,g,D=null;null!==(g=/^(\d+(?:\.\d+)?)f$/.exec(d))?null!==a&&(D=parseFloat(g[1])/a):null!==(g=l.exec(d))?null!==b&&(D=parseFloat(g[1])/b):null!==(g=z.exec(d))?D=parseFloat(g[1])/1E3:null!==(g=f.exec(d))?D=parseFloat(g[1]):null!==(g=h.exec(d))?D=3600*parseFloat(g[1]):null!==(g=r.exec(d))?D=60*parseFloat(g[1]):null!==(g=c.exec(d))?D=3600*parseInt(g[1])+60*parseInt(g[2])+parseFloat(g[3]):
null!==(g=e.exec(d))&&null!==a&&(D=3600*parseInt(g[1])+60*parseInt(g[2])+parseInt(g[3])+(null===g[4]?0:parseInt(g[4])/a));return D}function X(b,a,d){for(;0<a.styleRefs.length;){var c=a.styleRefs.pop();c in b.styles?(X(b,b.styles[c],d),V(b.styles[c].styleAttrs,a.styleAttrs)):K(d,"Non-existant style id referenced")}}function Y(b,a,d,c){for(var e=a.length-1;0<=e;e--){var l=a[e];l in b.styles?V(b.styles[l].styleAttrs,d):K(c,"Non-existant style id referenced")}}function V(b,a){for(var d in b)d in a||(a[d]=
b[d])}function L(b,a){if(b&&b.warn&&b.warn(a))throw a;}function K(b,a){if(b&&b.error&&b.error(a))throw a;}function E(b,a){b&&b.fatal&&b.fatal(a);throw a;}function Z(b,a){for(var d=0,c=b.length-1,e;d<=c;){e=Math.floor((d+c)/2);var l=b[e];if(l<a)d=e+1;else if(l>a)c=e-1;else return{found:!0,index:e}}return{found:!1,index:d}}f.fromXML=function(f,w,D){var r=g.parser(!0,{xmlns:!0}),p=[],x=[],A=[],n=0,m=null;r.onclosetag=function(b){if(p[0]instanceof d)for(var a in p[0].styles)X(p[0],p[0].styles[a],w);else if(p[0]instanceof
P||p[0]instanceof G){if(1<p[0].contents.length){b=[p[0].contents[0]];for(a=1;a<p[0].contents.length;a++)p[0].contents[a]instanceof C&&b[b.length-1]instanceof C?b[b.length-1].text+=p[0].contents[a].text:b.push(p[0].contents[a]);p[0].contents=b}p[0]instanceof G&&1===p[0].contents.length&&p[0].contents[0]instanceof C&&(p[0].text=p[0].contents[0].text,delete p[0].contents)}else if(p[0]instanceof F)if(p[0].node.uri===e.ns_tt&&"metadata"===p[0].node.local)n--;else if(0<n&&D&&"onCloseTag"in D)D.onCloseTag();
A.shift();x.shift();p.shift()};r.ontext=function(b){if(void 0!==p[0])if(p[0]instanceof G||p[0]instanceof P){if(p[0]instanceof G){var a=p[0].styleAttrs[k.byName.ruby.qname];if("container"===a||"textContainer"===a||"baseContainer"===a)return}a=new C;a.initFromText(m,p[0],b,A[0],w);p[0].contents.push(a)}else if(p[0]instanceof F&&0<n&&D&&"onText"in D)D.onText(b)};r.onopentag=function(a){function c(b){e.ttaf_map[b.uri]&&(b.uri=e.ttaf_map[b.uri])}var f=a.attributes["xml:space"];f?A.unshift(f.value):0===
A.length?A.unshift("default"):A.unshift(A[0]);(f=a.attributes["xml:lang"])?x.unshift(f.value):0===x.length?x.unshift(""):x.unshift(x[0]);c(a);if(a.attributes)for(var g in a.attributes)a.attributes.hasOwnProperty(g)&&c(a.attributes[g]);if(a.uri===e.ns_tt)if("tt"===a.local)null!==m&&E(w,"Two <tt> elements at ("+this.line+","+this.column+")"),m=new h,m.initFromNode(a,w),p.unshift(m);else if("head"===a.local)p[0]instanceof h||E(w,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),
p.unshift(m.head);else if("styling"===a.local)p[0]instanceof b||E(w,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),p.unshift(m.head.styling);else if("style"===a.local)if(p[0]instanceof d){var r=new l;r.initFromNode(a,w);r.id?m.head.styling.styles[r.id]=r:K(w,"<style> element missing @id attribute");p.unshift(r)}else p[0]instanceof J?(r=new l,r.initFromNode(a,w),V(r.styleAttrs,p[0].styleAttrs),p.unshift(r)):E(w,"Parent of <style> element is not <styling> or <region> at ("+
this.line+","+this.column+")");else if("initial"===a.local)if(p[0]instanceof d){g=new z;g.initFromNode(a,w);for(r in g.styleAttrs)m.head.styling.initials[r]=g.styleAttrs[r];p.unshift(g)}else E(w,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===a.local)p[0]instanceof b||E(w,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),p.unshift(m.head.layout);else if("region"===a.local)p[0]instanceof Q||E(w,"Parent of <region> element is not <layout> at "+
this.line+","+this.column+")"),r=new J,r.initFromNode(m,a,w),!r.id||r.id in m.head.layout.regions?K(w,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):m.head.layout.regions[r.id]=r,p.unshift(r);else if("body"===a.local)p[0]instanceof h||E(w,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==m.body&&E(w,"Second <body> element at "+this.line+","+this.column+")"),r=new v,r.initFromNode(m,a,w),m.body=r,p.unshift(r);else if("div"===a.local){p[0]instanceof
B||p[0]instanceof v||E(w,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");r=new B;r.initFromNode(m,p[0],a,w);if(g=r.styleAttrs[k.byName.backgroundImage.qname])r.contents.push(new R(g)),delete r.styleAttrs[k.byName.backgroundImage.qname];p[0].contents.push(r);p.unshift(r)}else"image"===a.local?(p[0]instanceof B||E(w,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),r=new R,r.initFromNode(m,p[0],a,w),p[0].contents.push(r),p.unshift(r)):"p"===
a.local?(p[0]instanceof B||E(w,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),r=new P,r.initFromNode(m,p[0],a,w),p[0].contents.push(r),p.unshift(r)):"span"===a.local?(p[0]instanceof G||p[0]instanceof P||E(w,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),r=new G,r.initFromNode(m,p[0],a,A[0],w),p[0].contents.push(r),p.unshift(r)):"br"===a.local?(p[0]instanceof G||p[0]instanceof P||E(w,"Parent of <br> element is not <span> or <p> at "+this.line+
","+this.column+")"),r=new M,r.initFromNode(m,p[0],a,w),p[0].contents.push(r),p.unshift(r)):"set"===a.local?(p[0]instanceof G||p[0]instanceof P||p[0]instanceof B||p[0]instanceof v||p[0]instanceof J||p[0]instanceof M||E(w,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),r=new W,r.initFromNode(m,p[0],a,w),p[0].sets.push(r),p.unshift(r)):p.unshift(new F(a));else p.unshift(new F(a));if(p[0]instanceof F)if(a.uri===e.ns_tt&&"metadata"===a.local)n++;else if(0<
n&&D&&"onOpenTag"in D){r=[];for(var t in a.attributes)r[a.attributes[t].uri+" "+a.attributes[t].local]={uri:a.attributes[t].uri,local:a.attributes[t].local,value:a.attributes[t].value};D.onOpenTag(a.uri,a.local,r)}};r.write(f).close();delete m.head.styling.styles;f=!1;for(var u in m.head.layout.regions){f=!0;break}f||(u=J.prototype.createDefaultRegion(m,w),m.head.layout.regions[u.id]=u);for(var q in m.head.layout.regions)c(m,m.head.layout.regions[q],null,null);m.body&&c(m,m.body,null,null);m.body&&
a(m.body);m.body&&t(m.body);return m};h.prototype.initFromNode=function(b,a){var d=O(b,e.ns_ttp,"cellResolution"),c=15;var l=32;null!==d&&(d=/(\d+) (\d+)/.exec(d),null!==d?(l=parseInt(d[1]),c=parseInt(d[2])):L(a,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new n.ComputedLength(0,1/c),w:new n.ComputedLength(1/l,0)};c=O(b,e.ns_ttp,"frameRate");d=30;null!==c&&(l=/(\d+)/.exec(c),null!==l?d=parseInt(l[1]):L(a,"Malformed frame rate attribute (using initial value instead)"));
l=O(b,e.ns_ttp,"frameRateMultiplier");var z=1;null!==l&&(l=/(\d+) (\d+)/.exec(l),null!==l?z=parseInt(l[1])/parseInt(l[2]):L(a,"Malformed frame rate multiplier attribute (using initial value instead)"));d*=z;z=1;l=O(b,e.ns_ttp,"tickRate");null===l?null!==c&&(z=d):(l=/(\d+)/.exec(l),null!==l?z=parseInt(l[1]):L(a,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=d;this.tickRate=z;l=O(b,e.ns_ittp,"aspectRatio");null===l&&(l=O(b,e.ns_ttp,"displayAspectRatio"));c=null;
null!==l&&(d=/(\d+)\s+(\d+)/.exec(l),null!==d?(l=parseInt(d[1]),d=parseInt(d[2]),0!==l&&0!==d?c=l/d:K(a,"Illegal aspectRatio values (ignoring)")):K(a,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=c;c=O(b,e.ns_ttp,"timeBase");null!==c&&"media"!==c&&E(a,"Unsupported time base");b=aa(b,a);null===b?this.pxLength={h:null,w:null}:("px"===b.h.unit&&"px"===b.w.unit||E(a,"Extent on TT must be in px or absent"),this.pxLength={h:new n.ComputedLength(0,1/b.h.value),w:new n.ComputedLength(1/
b.w.value,0)});this.dimensions={h:new n.ComputedLength(0,1),w:new n.ComputedLength(1,0)}};h.prototype._registerEvent=function(b){if(!(b.end<=b.begin)){var a=Z(this.events,b.begin);a.found||this.events.splice(a.index,0,b.begin);b.end!==Number.POSITIVE_INFINITY&&(a=Z(this.events,b.end),a.found||this.events.splice(a.index,0,b.end))}};h.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]};h.prototype.getMediaTimeEvents=function(){return this.events};l.prototype.initFromNode=
function(b,a){this.id=y(b);this.styleAttrs=T(b,a);this.styleRefs=S(b)};z.prototype.initFromNode=function(b,a){this.styleAttrs={};for(var d in b.attributes)if(b.attributes[d].uri===e.ns_itts||b.attributes[d].uri===e.ns_ebutts||b.attributes[d].uri===e.ns_tts)this.styleAttrs[b.attributes[d].uri+" "+b.attributes[d].local]=b.attributes[d].value};R.prototype.initFromNode=function(b,a,d,c){(this.src="src"in d.attributes?d.attributes.src.value:null)||K(c,"Invalid image@src attribute");(this.type="type"in
d.attributes?d.attributes.type.value:null)||K(c,"Invalid image@type attribute");I.prototype.initFromNode.call(this,b,a,d,c);u.prototype.initFromNode.call(this,b,a,d,c);x.prototype.initFromNode.call(this,b,a,d,c);m.prototype.initFromNode.call(this,b,a,d,c)};A.prototype.initFromNode=function(b,a,d,c){this.id=y(d)};m.prototype.initFromNode=function(b,a,d,c){this.regionID=d&&"region"in d.attributes?d.attributes.region.value:""};I.prototype.initFromNode=function(b,a,d,c){this.styleAttrs=T(d,c);null!==
b.head&&null!==b.head.styling&&Y(b.head.styling,S(d),this.styleAttrs,c)};x.prototype.initFromNode=function(b,a,d,c){this.sets=[]};q.prototype.initFromNode=function(b,a,d,c){this.contents=[]};u.prototype.initFromNode=function(b,a,d,c){a=null;d&&"begin"in d.attributes&&(a=U(b.tickRate,b.effectiveFrameRate,d.attributes.begin.value),null===a&&L(c,"Malformed begin value "+d.attributes.begin.value+" (using 0)"));var l=null;d&&"dur"in d.attributes&&(l=U(b.tickRate,b.effectiveFrameRate,d.attributes.dur.value),
null===l&&L(c,"Malformed dur value "+d.attributes.dur.value+" (ignoring)"));var e=null;d&&"end"in d.attributes&&(e=U(b.tickRate,b.effectiveFrameRate,d.attributes.end.value),null===e&&L(c,"Malformed end value (ignoring)"));this.explicit_begin=a;this.explicit_end=e;this.explicit_dur=l;(b=d&&"timeContainer"in d.attributes?d.attributes.timeContainer.value:null)&&"par"!==b?"seq"===b?c="seq":(K(c,"Illegal value of timeContainer (assuming 'par')"),c="par"):c="par";this.timeContainer=c};v.prototype.initFromNode=
function(b,a,d){I.prototype.initFromNode.call(this,b,null,a,d);u.prototype.initFromNode.call(this,b,null,a,d);x.prototype.initFromNode.call(this,b,null,a,d);m.prototype.initFromNode.call(this,b,null,a,d);q.prototype.initFromNode.call(this,b,null,a,d)};B.prototype.initFromNode=function(b,a,d,c){I.prototype.initFromNode.call(this,b,a,d,c);u.prototype.initFromNode.call(this,b,a,d,c);x.prototype.initFromNode.call(this,b,a,d,c);m.prototype.initFromNode.call(this,b,a,d,c);q.prototype.initFromNode.call(this,
b,a,d,c)};P.prototype.initFromNode=function(b,a,d,c){I.prototype.initFromNode.call(this,b,a,d,c);u.prototype.initFromNode.call(this,b,a,d,c);x.prototype.initFromNode.call(this,b,a,d,c);m.prototype.initFromNode.call(this,b,a,d,c);q.prototype.initFromNode.call(this,b,a,d,c)};G.prototype.initFromNode=function(b,a,d,c,l){I.prototype.initFromNode.call(this,b,a,d,l);u.prototype.initFromNode.call(this,b,a,d,l);x.prototype.initFromNode.call(this,b,a,d,l);m.prototype.initFromNode.call(this,b,a,d,l);q.prototype.initFromNode.call(this,
b,a,d,l);this.space=c};C.prototype.initFromText=function(b,a,d,c,l){u.prototype.initFromNode.call(this,b,a,null,l);this.text=d;this.space=c};M.prototype.initFromNode=function(b,a,d,c){m.prototype.initFromNode.call(this,b,a,d,c);u.prototype.initFromNode.call(this,b,a,d,c)};J.prototype.createDefaultRegion=function(b,a){var d=new J;d.id="";I.prototype.initFromNode.call(d,b,null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",value:"after",prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},
"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},"tts:overflow":{name:"tts:overflow",value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",ebutts:"urn:ebu:tt:style",ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",
itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",local:"region",uri:"http://www.w3.org/ns/ttml",isSelfClosing:!0},a);d.sets=[];u.call(d,0,Number.POSITIVE_INFINITY,null);return d};J.prototype.initFromNode=function(b,a,d){A.prototype.initFromNode.call(this,b,null,a,d);I.prototype.initFromNode.call(this,b,null,a,d);u.prototype.initFromNode.call(this,
b,null,a,d);x.prototype.initFromNode.call(this,b,null,a,d);null!==b.head&&null!==b.head.styling&&Y(b.head.styling,S(a),this.styleAttrs,d)};W.prototype.initFromNode=function(b,a,d,c){u.prototype.initFromNode.call(this,b,a,d,c);b=T(d,c);this.value=this.qname=null;for(var l in b){if(this.qname){K(c,"More than one style specified on set");break}this.qname=l;this.value=b[l]}}})("undefined"===typeof n?this.imscDoc={}:n,"undefined"===typeof sax?g("sax"):sax,"undefined"===typeof imscNames?g("./names"):imscNames,
"undefined"===typeof imscStyles?g("./styles"):imscStyles,"undefined"===typeof imscUtils?g("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7,sax:void 0}],2:[function(g,q,n){(function(f,g,e){function t(b,d,c){if("region"===c.kind){var l=document.createElement("div");l.style.position="absolute"}else if("body"===c.kind)l=document.createElement("div");else if("div"===c.kind)l=document.createElement("div");else if("image"===c.kind){if(l=document.createElement("img"),null!==b.imgResolver&&null!==
c.src){var f=b.imgResolver(c.src,l);f&&(l.src=f);l.height=b.regionH;l.width=b.regionW}}else if("p"===c.kind)l=document.createElement("p");else if("span"===c.kind){if("container"===c.styleAttrs[e.byName.ruby.qname])l=document.createElement("ruby"),b.ruby=!0;else if("base"===c.styleAttrs[e.byName.ruby.qname])l=document.createElement("rb");else if("text"===c.styleAttrs[e.byName.ruby.qname])l=document.createElement("rt");else if("baseContainer"===c.styleAttrs[e.byName.ruby.qname])l=document.createElement("rbc");
else if("textContainer"===c.styleAttrs[e.byName.ruby.qname])l=document.createElement("rtc");else{if("delimiter"===c.styleAttrs[e.byName.ruby.qname])return;l=document.createElement("span")}(f=c.styleAttrs[e.byName.textEmphasis.qname])&&"none"!==f.style&&(b.textEmphasis=!0)}else"br"===c.kind&&(l=document.createElement("br"));if(l){d.appendChild(l);l.style.margin="0";for(var g in F)d=F[g],f=c.styleAttrs[d.qname],void 0!==f&&null!==d.map&&d.map(b,l,c,f);g=l;if("region"===c.kind)if(d=c.styleAttrs[e.byName.writingMode.qname],
"lrtb"===d||"lr"===d)b.ipd="lr",b.bpd="tb";else if("rltb"===d||"rl"===d)b.ipd="rl",b.bpd="tb";else if("tblr"===d)b.ipd="tb",b.bpd="lr";else if("tbrl"===d||"tb"===d)b.ipd="tb",b.bpd="rl";(d=c.styleAttrs[e.byName.linePadding.qname])&&!d.isZero()&&(f=d.toUsedLength(b.w,b.h),0<f&&(f=Math.ceil(f)+"px","tb"===b.bpd?(g.style.paddingLeft=f,g.style.paddingRight=f):(g.style.paddingTop=f,g.style.paddingBottom=f),b.lp=d));(d=c.styleAttrs[e.byName.multiRowAlign.qname])&&"auto"!==d&&(g=document.createElement("span"),
g.style.display="inline-block",g.style.textAlign=d,l.appendChild(g),b.mra=d);(d=c.styleAttrs[e.byName.rubyReserve.qname])&&"none"!==d[0]&&(b.rubyReserve=d);c.styleAttrs[e.byName.fillLineGap.qname]&&(b.flg=!0);if("span"===c.kind&&c.text)if(e.byName.textCombine.qname in c.styleAttrs&&"all"===c.styleAttrs[e.byName.textCombine.qname][0])l.textContent=c.text;else for(d="",f=0;f<c.text.length;f++){d+=c.text.charAt(f);var h=c.text.charCodeAt(f);if(55296>h||56319<h||f===c.text.length)h=document.createElement("span"),
h.textContent=d,l.appendChild(h),d=""}for(var m in c.contents)t(b,g,c.contents[m]);m=[];if((b.lp||b.mra||b.flg||b.ruby||b.textEmphasis||b.rubyReserve)&&"p"===c.kind){a(b,g,m,null);if(b.rubyReserve){for(d=0;d<m.length;d++){f=document.createElement("ruby");h=document.createElement("rb");h.textContent="\u200b";f.appendChild(h);var k=b.rubyReserve[1].toUsedLength(b.w,b.h)+"px";if("both"===b.rubyReserve[0]){h=document.createElement("rtc");h.style.rubyPosition="under";h.textContent="\u200b";h.style.fontSize=
k;var x=document.createElement("rtc");x.style.rubyPosition="over";x.textContent="\u200b";x.style.fontSize=k;f.appendChild(h);f.appendChild(x)}else h=document.createElement("rtc"),h.textContent="\u200b",h.style.fontSize=k,h.style.rubyPosition="after"===b.rubyReserve[0]||"outside"===b.rubyReserve[0]&&0<d?"tb"===b.bpd||"rl"===b.bpd?"under":"over":"tb"===b.bpd||"rl"===b.bpd?"over":"under",f.appendChild(h);m[d].elements[0].node.parentElement.insertBefore(f,m[d].elements[0].node)}b.rubyReserve=null}if(b.ruby||
b.rubyReserve){for(d=0;d<m.length;d++)for(f=0;f<m[d].rbc.length;f++)m[d].rbc[f].style.rubyPosition||(m[d].rbc[f].style.rubyPosition="tb"===b.bpd?0===d?"over":"under":"rl"===b.bpd?0===d?"over":"under":0===d?"under":"over");b.ruby=null}if(b.textEmphasis){for(d=0;d<m.length;d++)for(f=0;f<m[d].te.length;f++)m[d].te[f].style.textEmphasisPosition&&"none"!==m[d].te[f].style.textEmphasisPosition||(m[d].te[f].style.textEmphasisPosition="tb"===b.bpd?0===d?"left over":"left under":"rl"===b.bpd?0===d?"right under":
"left under":0===d?"left under":"right under");b.textEmphasis=null}if(b.mra){for(d=0;d<m.length-1;d++)h=m[d].elements.length,0!==h&&!1===m[d].br&&(f=document.createElement("br"),h=m[d].elements[h-1].node,h.parentElement.insertBefore(f,h.nextSibling));b.mra=null}if(b.lp){d=b.lp.toUsedLength(b.w,b.h);for(var N in m)f=m[N].elements[m[N].start_elem],h=m[N].elements[m[N].end_elem],x=Math.ceil(d)+"px",k="-"+Math.ceil(d)+"px",0!==m[N].elements.length&&("lr"===b.ipd?(f.node.style.borderLeftColor=f.bgcolor||
"#00000000",f.node.style.borderLeftStyle="solid",f.node.style.borderLeftWidth=x,f.node.style.marginLeft=k):"rl"===b.ipd?(f.node.style.borderRightColor=f.bgcolor||"#00000000",f.node.style.borderRightStyle="solid",f.node.style.borderRightWidth=x,f.node.style.marginRight=k):"tb"===b.ipd&&(f.node.style.borderTopColor=f.bgcolor||"#00000000",f.node.style.borderTopStyle="solid",f.node.style.borderTopWidth=x,f.node.style.marginTop=k),"lr"===b.ipd?(h.node.style.borderRightColor=h.bgcolor||"#00000000",h.node.style.borderRightStyle=
"solid",h.node.style.borderRightWidth=x,h.node.style.marginRight=k):"rl"===b.ipd?(h.node.style.borderLeftColor=h.bgcolor||"#00000000",h.node.style.borderLeftStyle="solid",h.node.style.borderLeftWidth=x,h.node.style.marginLeft=k):"tb"===b.ipd&&(h.node.style.borderBottomColor=h.bgcolor||"#00000000",h.node.style.borderBottomStyle="solid",h.node.style.borderBottomWidth=x,h.node.style.marginBottom=k));b.lp=null}if(b.flg){d=q(g.getBoundingClientRect(),b);N=d.before;d=d.after;f=Math.sign(d-N);for(h=0;h<=
m.length;h++){x=0===h?N:h===m.length?d:(m[h].before+m[h-1].after)/2;if(0<h)for(var u=0;u<m[h-1].elements.length;u++)if(null!==m[h-1].elements[u].bgcolor){var v=m[h-1].elements[u];0>f*(v.after-x)&&(k=Math.ceil(Math.abs(x-v.after))+"px",v.node.style.backgroundColor=v.bgcolor,"lr"===b.bpd?v.node.style.paddingRight=k:"rl"===b.bpd?v.node.style.paddingLeft=k:"tb"===b.bpd&&(v.node.style.paddingBottom=k))}if(h<m.length)for(u=0;u<m[h].elements.length;u++)v=m[h].elements[u],null!==v.bgcolor&&0<f*(v.before-
x)&&(k=Math.ceil(Math.abs(v.before-x))+"px",v.node.style.backgroundColor=v.bgcolor,"lr"===b.bpd?v.node.style.paddingLeft=k:"rl"===b.bpd?v.node.style.paddingRight=k:"tb"===b.bpd&&(v.node.style.paddingTop=k))}b.flg=null}}"region"===c.kind&&(a(b,g,m),"tb"===b.bpd&&b.enableRollUp&&0<c.contents.length&&"after"===c.styleAttrs[e.byName.displayAlign.qname]&&(c=new n(""===c.id?"_":c.id,m),b.currentISDState[c.id]=c,b.previousISDState&&c.id in b.previousISDState&&0<b.previousISDState[c.id].plist.length&&1<c.plist.length&&
c.plist[c.plist.length-2].text===b.previousISDState[c.id].plist[b.previousISDState[c.id].plist.length-1].text&&(b=l.firstElementChild,c=c.plist[c.plist.length-1].after-c.plist[c.plist.length-1].before,b.style.bottom="-"+c+"px",b.style.transition="transform 0.4s",b.style.position="relative",b.style.transform="translateY(-"+c+"px)")))}else if(b=b.errorHandler,c="Error processing ISD element kind: "+c.kind,b&&b.error&&b.error(c))throw c;}function n(b,a){this.id=b;this.plist=a}function q(b,a){var d={before:null,
after:null,start:null,end:null};"tb"===a.bpd?(d.before=b.top,d.after=b.bottom,"lr"===a.ipd?(d.start=b.left,d.end=b.right):(d.start=b.right,d.end=b.left)):"lr"===a.bpd?(d.before=b.left,d.after=b.right,d.start=b.top,d.end=b.bottom):"rl"===a.bpd&&(d.before=b.right,d.after=b.left,d.start=b.top,d.end=b.bottom);return d}function a(b,d,c,e){if("rt"!==d.localName&&"rtc"!==d.localName)if(e=d.style.backgroundColor||e,0===d.childElementCount)if("span"===d.localName||"rb"===d.localName){var f=d.getBoundingClientRect();
if(0!==f.height&&0!==f.width){b=q(f,b);if(!(f=0===c.length)){f=b.before;var h=b.after,g=c[c.length-1].before,l=c[c.length-1].after;f=!(h<l&&f>g||l<=h&&g>=f)}f?c.push({before:b.before,after:b.after,start:b.start,end:b.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(f=Math.sign(b.after-b.before),h=Math.sign(b.end-b.start),0>f*(b.before-c[c.length-1].before)&&(c[c.length-1].before=b.before),0<f*(b.after-c[c.length-1].after)&&(c[c.length-1].after=b.after),0>h*(b.start-c[c.length-
1].start)&&(c[c.length-1].start=b.start,c[c.length-1].start_elem=c[c.length-1].elements.length),0<h*(b.end-c[c.length-1].end)&&(c[c.length-1].end=b.end,c[c.length-1].end_elem=c[c.length-1].elements.length));c[c.length-1].text+=d.textContent;c[c.length-1].elements.push({node:d,bgcolor:e,before:b.before,after:b.after})}}else"br"===d.localName&&0!==c.length&&(c[c.length-1].br=!0);else for(d=d.firstChild;d;)d.nodeType===Node.ELEMENT_NODE&&(a(b,d,c,e),"ruby"===d.localName||"rtc"===d.localName?0<c.length&&
c[c.length-1].rbc.push(d):"span"===d.localName&&d.style.textEmphasisStyle&&"none"!==d.style.textEmphasisStyle&&0<c.length&&c[c.length-1].te.push(d)),d=d.nextSibling}function c(b,a){this.qname=b;this.map=a}f.render=function(b,a,c,e,f,h,g,F,k){e=e||a.clientHeight;f=f||a.clientWidth;if(null!==b.aspectRatio){var d=e*b.aspectRatio;d>f?e=Math.round(f/b.aspectRatio):f=d}d=document.createElement("div");d.style.position="relative";d.style.width=f+"px";d.style.height=e+"px";d.style.margin="auto";d.style.top=
0;d.style.bottom=0;d.style.left=0;d.style.right=0;d.style.zIndex=0;c={h:e,w:f,regionH:null,regionW:null,imgResolver:c,displayForcedOnlyMode:h||!1,isd:b,errorHandler:g,previousISDState:F,enableRollUp:k||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};a.appendChild(d);for(var l in b.contents)t(c,d,b.contents[l]);return c.currentISDState};var F=[new c("http://www.w3.org/ns/ttml#styling backgroundColor",function(b,a,c,e){0!==e[3]&&(a.style.backgroundColor=
"rgba("+e[0].toString()+","+e[1].toString()+","+e[2].toString()+","+(e[3]/255).toString()+")")}),new c("http://www.w3.org/ns/ttml#styling color",function(b,a,c,e){a.style.color="rgba("+e[0].toString()+","+e[1].toString()+","+e[2].toString()+","+(e[3]/255).toString()+")"}),new c("http://www.w3.org/ns/ttml#styling direction",function(b,a,c,e){a.style.direction=e}),new c("http://www.w3.org/ns/ttml#styling display",function(b,a,c,e){}),new c("http://www.w3.org/ns/ttml#styling displayAlign",function(b,
a,c,e){a.style.display="flex";a.style.flexDirection="column";"before"===e?a.style.justifyContent="flex-start":"center"===e?a.style.justifyContent="center":"after"===e&&(a.style.justifyContent="flex-end")}),new c("http://www.w3.org/ns/ttml#styling extent",function(b,a,c,e){b.regionH=e.h.toUsedLength(b.w,b.h);b.regionW=e.w.toUsedLength(b.w,b.h);var d=e=0;if(c=c.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])e=c[0].toUsedLength(b.w,b.h)+c[2].toUsedLength(b.w,b.h),d=c[1].toUsedLength(b.w,b.h)+
c[3].toUsedLength(b.w,b.h);a.style.height=b.regionH-e+"px";a.style.width=b.regionW-d+"px"}),new c("http://www.w3.org/ns/ttml#styling fontFamily",function(b,a,c,e){b=[];for(var d in e)e[d]=e[d].trim(),"monospaceSerif"===e[d]?(b.push("Courier New"),b.push('"Liberation Mono"'),b.push("Courier"),b.push("monospace")):"proportionalSansSerif"===e[d]||"default"===e[d]?(b.push("Arial"),b.push("Helvetica"),b.push('"Liberation Sans"'),b.push("sans-serif")):"monospace"===e[d]?b.push("monospace"):"sansSerif"===
e[d]?b.push("sans-serif"):"serif"===e[d]?b.push("serif"):"monospaceSansSerif"===e[d]?(b.push("Consolas"),b.push("monospace")):"proportionalSerif"===e[d]?b.push("serif"):b.push(e[d]);a.style.fontFamily=b.join(",")}),new c("http://www.w3.org/ns/ttml#styling shear",function(b,a,c,e){0!==e&&(c=-.9*e,a.style.transform="tb"===b.bpd?"skewX("+c+"deg)":"skewY("+c+"deg)")}),new c("http://www.w3.org/ns/ttml#styling fontSize",function(b,a,c,e){a.style.fontSize=e.toUsedLength(b.w,b.h)+"px"}),new c("http://www.w3.org/ns/ttml#styling fontStyle",
function(b,a,c,e){a.style.fontStyle=e}),new c("http://www.w3.org/ns/ttml#styling fontWeight",function(b,a,c,e){a.style.fontWeight=e}),new c("http://www.w3.org/ns/ttml#styling lineHeight",function(b,a,c,e){a.style.lineHeight="normal"===e?"normal":e.toUsedLength(b.w,b.h)+"px"}),new c("http://www.w3.org/ns/ttml#styling opacity",function(b,a,c,e){a.style.opacity=e}),new c("http://www.w3.org/ns/ttml#styling origin",function(b,a,c,e){a.style.top=e.h.toUsedLength(b.w,b.h)+"px";a.style.left=e.w.toUsedLength(b.w,
b.h)+"px"}),new c("http://www.w3.org/ns/ttml#styling overflow",function(b,a,c,e){a.style.overflow=e}),new c("http://www.w3.org/ns/ttml#styling padding",function(b,a,c,e){c=[];c[0]=e[0].toUsedLength(b.w,b.h)+"px";c[1]=e[3].toUsedLength(b.w,b.h)+"px";c[2]=e[2].toUsedLength(b.w,b.h)+"px";c[3]=e[1].toUsedLength(b.w,b.h)+"px";a.style.padding=c.join(" ")}),new c("http://www.w3.org/ns/ttml#styling position",function(b,a,c,e){a.style.top=e.h.toUsedLength(b.w,b.h)+"px";a.style.left=e.w.toUsedLength(b.w,b.h)+
"px"}),new c("http://www.w3.org/ns/ttml#styling rubyAlign",function(b,a,c,e){a.style.rubyAlign=e}),new c("http://www.w3.org/ns/ttml#styling rubyPosition",function(b,a,c,e){if("before"===e||"after"===e)a.parentElement.style.rubyPosition="tb"===b.bpd?"before"===e?"over":"under":"rl"===b.bpd?"before"===e?"over":"under":"before"===e?"under":"over"}),new c("http://www.w3.org/ns/ttml#styling showBackground",null),new c("http://www.w3.org/ns/ttml#styling textAlign",function(b,a,c,f){b=c.styleAttrs[e.byName.direction.qname];
a.style.textAlign="start"===f?"rtl"===b?"right":"left":"end"===f?"rtl"===b?"left":"right":f}),new c("http://www.w3.org/ns/ttml#styling textDecoration",function(b,a,c,e){a.style.textDecoration=e.join(" ").replace("lineThrough","line-through")}),new c("http://www.w3.org/ns/ttml#styling textOutline",function(b,a,c,e){}),new c("http://www.w3.org/ns/ttml#styling textShadow",function(b,a,c,f){c=c.styleAttrs[e.byName.textOutline.qname];if("none"===f&&"none"===c)a.style.textShadow="";else{var d=[];"none"!==
c&&d.push("rgba("+c.color[0].toString()+","+c.color[1].toString()+","+c.color[2].toString()+","+(c.color[3]/255).toString()+") 0px 0px "+c.thickness.toUsedLength(b.w,b.h)+"px");if("none"!==f)for(var h in f)d.push(f[h].x_off.toUsedLength(b.w,b.h)+"px "+f[h].y_off.toUsedLength(b.w,b.h)+"px "+f[h].b_radius.toUsedLength(b.w,b.h)+"px rgba("+f[h].color[0].toString()+","+f[h].color[1].toString()+","+f[h].color[2].toString()+","+(f[h].color[3]/255).toString()+")");a.style.textShadow=d.join(",")}}),new c("http://www.w3.org/ns/ttml#styling textCombine",
function(b,a,c,e){a.style.textCombineUpright=e.join(" ")}),new c("http://www.w3.org/ns/ttml#styling textEmphasis",function(b,a,c,e){if("none"===e.style)a.style.textEmphasisStyle="none";else if(a.style.textEmphasisStyle="auto"===e.style?"filled":e.style+" "+e.symbol,"before"===e.position||"after"===e.position)a.style.textEmphasisPosition="tb"===b.bpd?"before"===e.position?"left over":"left under":"rl"===b.bpd?"before"===e.position?"right under":"left under":"before"===e.position?"left under":"right under"}),
new c("http://www.w3.org/ns/ttml#styling unicodeBidi",function(b,a,c,e){a.style.unicodeBidi="bidiOverride"===e?"bidi-override":e}),new c("http://www.w3.org/ns/ttml#styling visibility",function(b,a,c,e){a.style.visibility=e}),new c("http://www.w3.org/ns/ttml#styling wrapOption",function(b,a,c,e){a.style.whiteSpace="wrap"===e?"preserve"===c.space?"pre-wrap":"normal":"preserve"===c.space?"pre":"noWrap"}),new c("http://www.w3.org/ns/ttml#styling writingMode",function(b,a,c,e){if("lrtb"===e||"lr"===e)b.writingMode=
"horizontal-tb";else if("rltb"===e||"rl"===e)b.writingMode="horizontal-tb";else if("tblr"===e)b.writingMode="vertical-lr";else if("tbrl"===e||"tb"===e)b.writingMode="vertical-rl";a.style.writingMode=b.writingMode}),new c("http://www.w3.org/ns/ttml#styling zIndex",function(b,a,c,e){a.style.zIndex=e}),new c("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(b,a,c,e){b.displayForcedOnlyMode&&!1===e&&(a.style.visibility="hidden")})],h;for(h in F);})("undefined"===typeof n?this.imscHTML=
{}:n,"undefined"===typeof imscNames?g("./names"):imscNames,"undefined"===typeof imscStyles?g("./styles"):imscStyles,"undefined"===typeof imscUtils?g("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7}],3:[function(g,q,n){(function(f,g,e,k){function t(b,c,f,g,q,H,A,m,I){if(c<A.begin||c>=A.end)return null;H="regionID"in A&&""!==A.regionID?A.regionID:H;if(null!==q&&H!==f.id&&(!("contents"in A)||"contents"in A&&0===A.contents.length||""!==H))return null;var d=new F(A);for(l in A.sets)c<A.sets[l].begin||
c>=A.sets[l].end||(d.styleAttrs[A.sets[l].qname]=A.sets[l].value);var l={};for(var u in d.styleAttrs)if(l[u]=!0,u===e.byName.writingMode.qname&&!(e.byName.direction.qname in d.styleAttrs)){var v=d.styleAttrs[u];if("lrtb"===v||"lr"===v)d.styleAttrs[e.byName.direction.qname]="ltr";else if("rltb"===v||"rl"===v)d.styleAttrs[e.byName.direction.qname]="rtl"}if(null!==q)for(var B in e.all)if(u=e.all[B],u.qname===e.byName.textDecoration.qname){v=q.styleAttrs[u.qname];var z=d.styleAttrs[u.qname],G=[];void 0===
z?G=v:-1===z.indexOf("none")?((-1===z.indexOf("noUnderline")&&-1!==v.indexOf("underline")||-1!==z.indexOf("underline"))&&G.push("underline"),(-1===z.indexOf("noLineThrough")&&-1!==v.indexOf("lineThrough")||-1!==z.indexOf("lineThrough"))&&G.push("lineThrough"),(-1===z.indexOf("noOverline")&&-1!==v.indexOf("overline")||-1!==z.indexOf("overline"))&&G.push("overline")):G.push("none");d.styleAttrs[u.qname]=G}else u.qname!==e.byName.fontSize.qname||u.qname in d.styleAttrs||"span"!==d.kind||"textContainer"!==
d.styleAttrs[e.byName.ruby.qname]?u.qname!==e.byName.fontSize.qname||u.qname in d.styleAttrs||"span"!==d.kind||"text"!==d.styleAttrs[e.byName.ruby.qname]?u.inherit&&u.qname in q.styleAttrs&&!(u.qname in d.styleAttrs)&&(d.styleAttrs[u.qname]=q.styleAttrs[u.qname]):(v=q.styleAttrs[e.byName.fontSize.qname],d.styleAttrs[u.qname]="textContainer"===q.styleAttrs[e.byName.ruby.qname]?v:new k.ComputedLength(.5*v.rw,.5*v.rh)):(v=q.styleAttrs[e.byName.fontSize.qname],d.styleAttrs[u.qname]=new k.ComputedLength(.5*
v.rw,.5*v.rh));for(var C in e.all)(B=e.all[C],B.qname in d.styleAttrs||B.qname===e.byName.position.qname&&e.byName.origin.qname in d.styleAttrs||B.qname===e.byName.origin.qname&&e.byName.position.qname in d.styleAttrs||(u=b.head.styling.initials[B.qname]||B.initial,"region"!==d.kind&&(!1!==B.inherit||null===u)))||(d.styleAttrs[B.qname]=B.parse(u),l[B.qname]=!0);for(var M in e.all)if(C=e.all[M],C.qname in l&&null!==C.compute)if(B=C.compute(b,q,d,d.styleAttrs[C.qname],I),null!==B)d.styleAttrs[C.qname]=
B;else if(d.styleAttrs[C.qname]=C.compute(b,q,d,C.parse(C.initial),I),C="Style '"+C.qname+"' on element '"+d.kind+"' cannot be computed",m&&m.error&&m.error(C))throw C;if("none"===d.styleAttrs[e.byName.display.qname])return null;if(null===q)var J=null===g?[]:[g];else"contents"in A&&(J=A.contents);for(var Q in J)q=t(b,c,f,g,d,H,J[Q],m,I),null!==q&&d.contents.push(q.element);for(var y in d.styleAttrs)b=!1,"span"===d.kind&&(c=d.styleAttrs[e.byName.ruby.qname],(b=("container"===c||"textContainer"===c||
"baseContainer"===c)&&-1!==h.indexOf(y))||(b="container"!==c&&y===e.byName.rubyAlign.qname),b||(b=!("textContainer"===c||"text"===c)&&y===e.byName.rubyPosition.qname)),b||(b=-1===e.byQName[y].applies.indexOf(d.kind)),b&&delete d.styleAttrs[y];"span"===d.kind&&d.text&&"default"===d.space&&(y=d.text.replace(/[\t\r\n ]+/g," "),d.text=y);if("p"===d.kind){y=[];n(d,y);b=0;c="after_br";for(f=0;;)if("after_br"===c)b>=y.length||"br"===y[b].kind?(c="before_br",f=b,b--):("preserve"!==y[b].space&&(y[b].text=
y[b].text.replace(/^[\t\r\n ]+/g,"")),0<y[b].text.length?(c="looking_br",b++):y.splice(b,1));else if("before_br"===c)if(0>b||"br"===y[b].kind){if(c="after_br",b=f+1,b>=y.length)break}else if("preserve"!==y[b].space&&(y[b].text=y[b].text.replace(/[\t\r\n ]+$/g,"")),0<y[b].text.length){if(c="after_br",b=f+1,b>=y.length)break}else y.splice(b,1),b--;else b>=y.length||"br"===y[b].kind?(c="before_br",f=b,b--):b++;a(d)}return"div"===d.kind&&e.byName.backgroundImage.qname in d.styleAttrs||"br"===d.kind||
"image"===d.kind||"contents"in d&&0<d.contents.length||"span"===d.kind&&null!==d.text||"region"===d.kind&&"always"===d.styleAttrs[e.byName.showBackground.qname]?{region_id:H,element:d}:null}function n(a,c){if("contents"in a)for(var b in a.contents)n(a.contents[b],c);else"span"!==a.kind&&"br"!==a.kind||c.push(a)}function a(b){if("br"===b.kind)return!1;if("text"in b)return 0===b.text.length;if("contents"in b){for(var c=b.contents.length;c--;)a(b.contents[c])&&b.contents.splice(c,1);return 0===b.contents.length}}
function c(a){this.contents=[];this.aspectRatio=a.aspectRatio}function F(a){this.kind=a.kind||"region";a.id&&(this.id=a.id);this.styleAttrs={};for(var b in a.styleAttrs)this.styleAttrs[b]=a.styleAttrs[b];"src"in a&&(this.src=a.src);"type"in a&&(this.type=a.type);if("text"in a)this.text=a.text;else if("region"===this.kind||"contents"in a)this.contents=[];"space"in a&&(this.space=a.space)}f.generateISD=function(a,d,e){function b(a,c){function d(b){return!(a<b.begin||a>=b.end)}if(c.contents){var e={},
f;for(f in c)e[f]=c[f];e.contents=[];c.contents.filter(d).forEach(function(c){c=b(a,c);c.regionID&&F.add(c.regionID);null!==c&&e.contents.push(c)});return e}return c}var f=new c(a),h={},g={},F=new Set;g=b(d,a.body);F.forEach(function(b){b=t(a,d,a.head.layout.regions[b],g,null,"",a.head.layout.regions[b],e,h);null!==b&&f.contents.push(b.element)});return f};var h=[e.byName.color.qname,e.byName.textCombine.qname,e.byName.textDecoration.qname,e.byName.textEmphasis.qname,e.byName.textOutline.qname,e.byName.textShadow.qname]})("undefined"===
typeof n?this.imscISD={}:n,"undefined"===typeof imscNames?g("./names"):imscNames,"undefined"===typeof imscStyles?g("./styles"):imscStyles,"undefined"===typeof imscUtils?g("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7}],4:[function(g,q,n){n.generateISD=g("./isd").generateISD;n.fromXML=g("./doc").fromXML;n.renderHTML=g("./html").render},{"./doc":1,"./html":2,"./isd":3}],5:[function(g,q,n){g="undefined"===typeof n?this.imscNames={}:n;g.ns_tt="http://www.w3.org/ns/ttml";g.ns_tts="http://www.w3.org/ns/ttml#styling";
g.ns_ttp="http://www.w3.org/ns/ttml#parameter";g.ns_xml="http://www.w3.org/XML/1998/namespace";g.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";g.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";g.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";g.ns_ebutts="urn:ebu:tt:style";g.ttaf_map={"http://www.w3.org/2006/10/ttaf1":g.ns_tt,"http://www.w3.org/2006/10/ttaf1#style":g.ns_tts,"http://www.w3.org/2006/10/ttaf1#parameter":g.ns_ttp}},{}],6:[function(g,q,n){(function(f,
g,e){function k(a,c,e,f,b,d,g,k){this.name=c;this.ns=a;this.qname=a+" "+c;this.inherit=b;this.animatable=d;this.initial=e;this.applies=f;this.parse=g;this.compute=k}f.all=[new k(g.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,e.parseColor,null),new k(g.ns_tts,"color","white",["span"],!0,!0,e.parseColor,null),new k(g.ns_tts,"direction","ltr",["p","span"],!0,!0,function(a){return a},null),new k(g.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(a){return a},
null),new k(g.ns_tts,"displayAlign","before",["region"],!1,!0,function(a){return a},null),new k(g.ns_tts,"extent","auto",["tt","region"],!1,!0,function(a){if("auto"===a)return a;var c=a.split(" ");if(2!==c.length)return null;a=e.parseLength(c[0]);return(c=e.parseLength(c[1]))&&a?{h:c,w:a}:null},function(a,c,f,g,b){if("auto"===g)c=new e.ComputedLength(0,1);else if(c=e.toComputedLength(g.h.value,g.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===c)return null;if("auto"===g)a=new e.ComputedLength(1,
0);else if(a=e.toComputedLength(g.w.value,g.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:c,w:a}}),new k(g.ns_tts,"fontFamily","default",["span"],!0,!0,function(a){a=a.split(",");var c=[],e;for(e in a)"'"!==a[e].charAt(0)&&'"'!==a[e].charAt(0)?"default"===a[e]?c.push("monospaceSerif"):c.push(a[e]):c.push(a[e]);return c},null),new k(g.ns_tts,"shear","0%",["p"],!0,!0,e.parseLength,function(a,c,e,f){if("%"===f.unit)a=100<Math.abs(f.value)?100*Math.sign(f.value):f.value;
else return null;return a}),new k(g.ns_tts,"fontSize","1c",["span"],!0,!0,e.parseLength,function(a,c,g,h,b){return e.toComputedLength(h.value,h.unit,null!==c?c.styleAttrs[f.byName.fontSize.qname]:a.cellLength.h,null!==c?c.styleAttrs[f.byName.fontSize.qname]:a.cellLength.h,a.cellLength.h,a.pxLength.h)}),new k(g.ns_tts,"fontStyle","normal",["span"],!0,!0,function(a){return a},null),new k(g.ns_tts,"fontWeight","normal",["span"],!0,!0,function(a){return a},null),new k(g.ns_tts,"lineHeight","normal",["p"],
!0,!0,function(a){return"normal"===a?a:e.parseLength(a)},function(a,c,g,h,b){if("normal"===h)a=h;else if(a=e.toComputedLength(h.value,h.unit,g.styleAttrs[f.byName.fontSize.qname],g.styleAttrs[f.byName.fontSize.qname],a.cellLength.h,a.pxLength.h),null===a)return null;return a}),new k(g.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new k(g.ns_tts,"origin","auto",["region"],!1,!0,function(a){if("auto"===a)return a;var c=a.split(" ");if(2!==c.length)return null;a=e.parseLength(c[0]);return(c=e.parseLength(c[1]))&&
a?{h:c,w:a}:null},function(a,c,f,g,b){if("auto"===g)c=new e.ComputedLength(0,0);else if(c=e.toComputedLength(g.h.value,g.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===c)return null;if("auto"===g)a=new e.ComputedLength(0,0);else if(a=e.toComputedLength(g.w.value,g.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:c,w:a}}),new k(g.ns_tts,"overflow","hidden",["region"],!1,!0,function(a){return a},null),new k(g.ns_tts,"padding","0px",["region"],!1,!0,function(a){a=a.split(" ");
if(4<a.length)return null;var c=[],f;for(f in a){var g=e.parseLength(a[f]);if(!g)return null;c.push(g)}return c},function(a,c,g,h,b){if(1===h.length)c=[h[0],h[0],h[0],h[0]];else if(2===h.length)c=[h[0],h[1],h[0],h[1]];else if(3===h.length)c=[h[0],h[1],h[2],h[1]];else if(4===h.length)c=[h[0],h[1],h[2],h[3]];else return null;h=g.styleAttrs[f.byName.writingMode.qname];if("lrtb"===h||"lr"===h)c=[c[0],c[3],c[2],c[1]];else if("rltb"===h||"rl"===h)c=[c[0],c[1],c[2],c[3]];else if("tblr"===h)c=[c[3],c[0],
c[1],c[2]];else if("tbrl"===h||"tb"===h)c=[c[3],c[2],c[1],c[0]];else return null;h=[];for(var d in c)if(0===c[d].value)h[d]=new e.ComputedLength(0,0);else if(h[d]=e.toComputedLength(c[d].value,c[d].unit,g.styleAttrs[f.byName.fontSize.qname],"0"===d||"2"===d?g.styleAttrs[f.byName.extent.qname].h:g.styleAttrs[f.byName.extent.qname].w,"0"===d||"2"===d?a.cellLength.h:a.cellLength.w,"0"===d||"2"===d?a.pxLength.h:a.pxLength.w),null===h[d])return null;return h}),new k(g.ns_tts,"position","top left",["region"],
!1,!0,function(a){return e.parsePosition(a)},function(a,c,g,h){c=e.toComputedLength(h.v.offset.value,h.v.offset.unit,null,new e.ComputedLength(-g.styleAttrs[f.byName.extent.qname].h.rw,a.dimensions.h.rh-g.styleAttrs[f.byName.extent.qname].h.rh),null,a.pxLength.h);if(null===c)return null;"bottom"===h.v.edge&&(c=new e.ComputedLength(-c.rw-g.styleAttrs[f.byName.extent.qname].h.rw,a.dimensions.h.rh-c.rh-g.styleAttrs[f.byName.extent.qname].h.rh));var b=e.toComputedLength(h.h.offset.value,h.h.offset.unit,
null,new e.ComputedLength(a.dimensions.w.rw-g.styleAttrs[f.byName.extent.qname].w.rw,-g.styleAttrs[f.byName.extent.qname].w.rh),null,a.pxLength.w);if(null===c)return null;"right"===h.h.edge&&(b=new e.ComputedLength(a.dimensions.w.rw-b.rw-g.styleAttrs[f.byName.extent.qname].w.rw,-b.rh-g.styleAttrs[f.byName.extent.qname].w.rh));return{h:c,w:b}}),new k(g.ns_tts,"ruby","none",["span"],!1,!0,function(a){return a},null),new k(g.ns_tts,"rubyAlign","center",["span"],!0,!0,function(a){return"center"!==a&&
"spaceAround"!==a?null:a},null),new k(g.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(a){return a},null),new k(g.ns_tts,"rubyReserve","none",["p"],!0,!0,function(a){var c=a.split(" ");a=[null,null];if(0===c.length||2<c.length||"none"!==c[0]&&"both"!==c[0]&&"after"!==c[0]&&"before"!==c[0]&&"outside"!==c[0])return null;a[0]=c[0];if(2===c.length&&"none"!==c[0])if(c=e.parseLength(c[1]))a[1]=c;else return null;return a},function(a,c,g,h,b){if("none"===h[0])return h;a=null===h[1]?new e.ComputedLength(.5*
g.styleAttrs[f.byName.fontSize.qname].rw,.5*g.styleAttrs[f.byName.fontSize.qname].rh):e.toComputedLength(h[1].value,h[1].unit,g.styleAttrs[f.byName.fontSize.qname],g.styleAttrs[f.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===a?null:[h[0],a]}),new k(g.ns_tts,"showBackground","whenActive",["region"],!1,!0,function(a){return a},null),new k(g.ns_tts,"textAlign","start",["p"],!0,!0,function(a){return a},function(a,c,e,f,b){return"left"===f?"start":"right"===f?"end":f}),new k(g.ns_tts,
"textCombine","none",["span"],!0,!0,function(a){a=a.split(" ");return 1!==a.length||"none"!==a[0]&&"all"!==a[0]?null:[a[0]]},null),new k(g.ns_tts,"textDecoration","none",["span"],!0,!0,function(a){return a.split(" ")},null),new k(g.ns_tts,"textEmphasis","none",["span"],!0,!0,function(a){a=a.split(" ");var c={style:null,symbol:null,color:null,position:null},f;for(f in a)if("none"===a[f]||"auto"===a[f])c.style=a[f];else if("filled"===a[f]||"open"===a[f])c.style=a[f];else if("circle"===a[f]||"dot"===
a[f]||"sesame"===a[f])c.symbol=a[f];else if("current"===a[f])c.color=a[f];else if("outside"===a[f]||"before"===a[f]||"after"===a[f])c.position=a[f];else if(c.color=e.parseColor(a[f]),null===c.color)return null;null==c.style&&null==c.symbol?c.style="auto":(c.symbol=c.symbol||"circle",c.style=c.style||"filled");c.position=c.position||"outside";c.color=c.color||"current";return c},null),new k(g.ns_tts,"textOutline","none",["span"],!0,!0,function(a){if("none"===a)return a;var c={};a=a.split(" ");if(0===
a.length||2<a.length)return null;var f=e.parseColor(a[0]);c.color=f;null!==f&&a.shift();if(1!==a.length)return null;a=e.parseLength(a[0]);if(!a)return null;c.thickness=a;return c},function(a,c,g,h,b){if("none"===h)return h;c={};c.color=null===h.color?g.styleAttrs[f.byName.color.qname]:h.color;c.thickness=e.toComputedLength(h.thickness.value,h.thickness.unit,g.styleAttrs[f.byName.fontSize.qname],g.styleAttrs[f.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===c.thickness?null:c}),new k(g.ns_tts,
"textShadow","none",["span"],!0,!0,e.parseTextShadow,function(a,c,g,h){if("none"===h)return h;c=[];for(var b in h){var d={};d.x_off=e.toComputedLength(h[b][0].value,h[b][0].unit,null,g.styleAttrs[f.byName.fontSize.qname],null,a.pxLength.w);if(null===d.x_off)return null;d.y_off=e.toComputedLength(h[b][1].value,h[b][1].unit,null,g.styleAttrs[f.byName.fontSize.qname],null,a.pxLength.h);if(null===d.y_off)return null;if(null===h[b][2])d.b_radius=0;else if(d.b_radius=e.toComputedLength(h[b][2].value,h[b][2].unit,
null,g.styleAttrs[f.byName.fontSize.qname],null,a.pxLength.h),null===d.b_radius)return null;d.color=null===h[b][3]?g.styleAttrs[f.byName.color.qname]:h[b][3];c.push(d)}return c}),new k(g.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(a){return a},null),new k(g.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(a){return a},null),new k(g.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(a){return a},null),new k(g.ns_tts,"writingMode","lrtb",["region"],!1,!0,
function(a){return a},null),new k(g.ns_tts,"zIndex","auto",["region"],!1,!0,function(a){"auto"!==a&&(a=parseInt(a),isNaN(a)&&(a=null));return a},null),new k(g.ns_ebutts,"linePadding","0c",["p"],!0,!1,e.parseLength,function(a,c,f,g,b){return e.toComputedLength(g.value,g.unit,null,null,a.cellLength.w,null)}),new k(g.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(a){return a},null),new k(g.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(a){return a},null),new k(g.ns_itts,"forcedDisplay",
"false",["body","div","p","region","span"],!0,!0,function(a){return"true"===a?!0:!1},null),new k(g.ns_itts,"fillLineGap","true",["p"],!0,!0,function(a){return"true"===a?!0:!1},null)];f.byQName={};for(var n in f.all)f.byQName[f.all[n].qname]=f.all[n];f.byName={};for(var q in f.all)f.byName[f.all[q].name]=f.all[q]})("undefined"===typeof n?this.imscStyles={}:n,"undefined"===typeof imscNames?g("./names"):imscNames,"undefined"===typeof imscUtils?g("./utils"):imscUtils)},{"./names":5,"./utils":7}],7:[function(g,
q,n){(function(f){var g=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,e=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,k=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,n={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,
255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};f.parseColor=function(a){var c,f=null,h=n[a.toLowerCase()];void 0!==h?f=h:null!==(c=g.exec(a))?f=[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16),void 0!==c[4]?parseInt(c[4],16):255]:null!==(c=e.exec(a))?f=[parseInt(c[1]),parseInt(c[2]),parseInt(c[3]),255]:null!==(c=k.exec(a))&&(f=[parseInt(c[1]),parseInt(c[2]),parseInt(c[3]),parseInt(c[4])]);return f};var q=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;
f.parseLength=function(a){var c,e=null;null!==(c=q.exec(a))&&(e={value:parseFloat(c[1]),unit:c[2]});return e};f.parseTextShadow=function(a){a=a.split(",");var c=[],e;for(e in a){var g=a[e].split(" ");if(1===g.length&&"none"===g[0])return"none";if(1<g.length&&5>g.length){var b=[null,null,null,null],d=f.parseLength(g.shift());if(null===d)return null;b[0]=d;d=f.parseLength(g.shift());if(null===d)return null;b[1]=d;if(0!==g.length&&(d=f.parseLength(g[0]),null!==d&&(b[2]=d,g.shift()),0!==g.length)){g=
f.parseColor(g[0]);if(null===g)return null;b[3]=g}c.push(b)}}return c};f.parsePosition=function(a){a=a.split(" ");var c=function(a){return"center"===a||"left"===a||"top"===a||"bottom"===a||"right"===a};if(4<a.length)return null;for(var e in a)if(!c(a[e])){var g=f.parseLength(a[e]);if(null===g)return null;a[e]=g}e={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(g=0;g<a.length;){var b=a[g++];if(c(b)){var d={value:0,unit:"%"};2!==a.length&&g<a.length&&!c(a[g])&&
(d=a[g++]);"right"===b?(e.h.edge=b,e.h.offset=d):"bottom"===b?(e.v.edge=b,e.v.offset=d):"left"===b?e.h.offset=d:"top"===b&&(e.v.offset=d)}else if(1===a.length||2===a.length)1===g?e.h.offset=b:e.v.offset=b;else return null}return e};f.ComputedLength=function(a,c){this.rw=a;this.rh=c};f.ComputedLength.prototype.toUsedLength=function(a,c){return a*this.rw+c*this.rh};f.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh};f.toComputedLength=function(a,c,e,g,b,d){return"%"===c&&g?
new f.ComputedLength(g.rw*a/100,g.rh*a/100):"em"===c&&e?new f.ComputedLength(e.rw*a,e.rh*a):"c"===c&&b?new f.ComputedLength(a*b.rw,a*b.rh):"px"===c&&d?new f.ComputedLength(a*d.rw,a*d.rh):"rh"===c?new f.ComputedLength(0,a/100):"rw"===c?new f.ComputedLength(a/100,0):null}})("undefined"===typeof n?this.imscUtils={}:n)},{}]},{},[4])(4)});
