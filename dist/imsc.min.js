var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(d,r){return Object.prototype.hasOwnProperty.call(d,r)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(d,r){for(var q=1;q<arguments.length;q++){var f=arguments[q];if(f)for(var t in f)$jscomp.owns(f,t)&&(d[t]=f[t])}return d};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,r,q){d!=Array.prototype&&d!=Object.prototype&&(d[r]=q.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(d,r,q,f){if(r){q=$jscomp.global;d=d.split(".");for(f=0;f<d.length-1;f++){var t=d[f];t in q||(q[t]={});q=q[t]}d=d[d.length-1];f=q[d];r=r(f);r!=f&&null!=r&&$jscomp.defineProperty(q,d,{configurable:!0,writable:!0,value:r})}};$jscomp.polyfill("Object.assign",function(d){return d||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.entries",function(d){return d?d:function(d){var q=[],f;for(f in d)$jscomp.owns(d,f)&&q.push([f,d[f]]);return q}},"es8","es3");
$jscomp.polyfill("Math.sign",function(d){return d?d:function(d){d=Number(d);return 0===d||isNaN(d)?d:0<d?1:-1}},"es6","es3");
(function(d){"object"===typeof exports&&"undefined"!==typeof module?module.exports=d():"function"===typeof define&&define.amd?define([],d):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=d()})(function(){return function(){function d(r,q,f){function t(n,F){if(!q[n]){if(!r[n]){var a="function"==typeof require&&require;if(!F&&a)return a(n,!0);if(m)return m(n,!0);F=Error("Cannot find module '"+n+"'");throw F.code="MODULE_NOT_FOUND",F;}F=
q[n]={exports:{}};r[n][0].call(F.exports,function(a){return t(r[n][1][a]||a)},F,F.exports,d,r,q,f)}return q[n].exports}for(var m="function"==typeof require&&require,n=0;n<f.length;n++)t(f[n]);return t}return d}()({1:[function(d,r,q){(function(f,d,m,n,q){function t(b,a){var c=b.styleAttrs&&b.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===b.kind)!c&&a&&(b.styleAttrs||(b.styleAttrs={}),b.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=a);else if(c&&delete b.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],
b.contents)for(var e=0;e<b.contents.length;e++)t(b.contents[e],c||a)}function a(b){if("contents"in b){var c="styleAttrs"in b?b.styleAttrs[n.byName.ruby.qname]:null;c="span"===b.kind&&("container"===c||"textContainer"===c||"baseContainer"===c);for(var e=b.contents.length-1;0<=e;e--)!c||"styleAttrs"in b.contents[e]&&n.byName.ruby.qname in b.contents[e].styleAttrs?a(b.contents[e]):delete b.contents[e]}}function g(b,a,c,e){var k=e&&"seq"===e.timeContainer,D=0;e&&(D=k&&c?c.end:e.begin);a.begin=a.explicit_begin?
a.explicit_begin+D:D;c=a.begin;e=null;for(var H in a.sets)g(b,a.sets[H],e,a),c="seq"===a.timeContainer?a.sets[H].end:Math.max(c,a.sets[H].end),e=a.sets[H];if("contents"in a)for(var h in a.contents)g(b,a.contents[h],e,a),c="seq"===a.timeContainer?a.contents[h].end:Math.max(c,a.contents[h].end),e=a.contents[h];else c=k?a.begin:Number.POSITIVE_INFINITY;a.end=null!==a.explicit_end&&null!==a.explicit_dur?Math.min(a.begin+a.explicit_dur,D+a.explicit_end):null===a.explicit_end&&null!==a.explicit_dur?a.begin+
a.explicit_dur:null!==a.explicit_end&&null===a.explicit_dur?D+a.explicit_end:c;delete a.explicit_begin;delete a.explicit_dur;delete a.explicit_end;b._registerEvent(a)}function E(b){this.node=b}function h(){this.events=[];this.head=new p;this.body=null}function p(){this.styling=new u;this.layout=new I}function u(){this.styles={};this.initials={}}function w(){this.styleRefs=this.styleAttrs=this.id=null}function r(){this.styleAttrs=null}function I(){this.regions={}}function v(b,a){this.kind="image";
this.src=b;this.type=a}function B(b){this.id=b}function b(b){this.regionID=b}function k(b){this.styleAttrs=b}function c(b){this.sets=b}function e(b){this.contents=b}function l(b,a,c){this.explicit_begin=b;this.explicit_end=a;this.explicit_dur=c}function S(){this.kind="body"}function O(){this.kind="div"}function y(){this.kind="p"}function M(){this.kind="span"}function Q(){this.kind="span"}function A(){this.kind="br"}function K(){}function z(){}function R(b){var a=null;b&&(b=b.attributes["xml:id"]||
b.attributes.id)&&(a=b.value||null);return a}function G(b){return b&&"style"in b.attributes?b.attributes.style.value.split(" "):[]}function T(b,a){var c={};if(null!==b)for(var e in b.attributes){var k=b.attributes[e].uri+" "+b.attributes[e].local,g=n.byQName[k];if(void 0!==g){var h=g.parse(b.attributes[e].value);null!==h?(c[k]=h,g===n.byName.zIndex&&L(a,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):J(a,"Cannot parse styling attribute "+k+" --\x3e "+b.attributes[e].value)}}return c}
function N(b,a,c){for(var e in b.attributes)if(b.attributes[e].uri===a&&b.attributes[e].local===c)return b.attributes[e].value;return null}function Z(b,a){b=N(b,m.ns_tts,"extent");if(null===b)return null;var c=b.split(" ");if(2!==c.length)return L(a,"Malformed extent (ignoring)"),null;b=q.parseLength(c[0]);c=q.parseLength(c[1]);return c&&b?{h:c,w:b}:(L(a,"Malformed extent values (ignoring)"),null)}function U(b,a,c){var e=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,k=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,g=
/^(\d+(?:\.\d+)?)t$/,h=/^(\d+(?:\.\d+)?)ms$/,l=/^(\d+(?:\.\d+)?)s$/,D=/^(\d+(?:\.\d+)?)h$/,H=/^(\d+(?:\.\d+)?)m$/,x,m=null;null!==(x=/^(\d+(?:\.\d+)?)f$/.exec(c))?null!==a&&(m=parseFloat(x[1])/a):null!==(x=g.exec(c))?null!==b&&(m=parseFloat(x[1])/b):null!==(x=h.exec(c))?m=parseFloat(x[1])/1E3:null!==(x=l.exec(c))?m=parseFloat(x[1]):null!==(x=D.exec(c))?m=3600*parseFloat(x[1]):null!==(x=H.exec(c))?m=60*parseFloat(x[1]):null!==(x=e.exec(c))?m=3600*parseInt(x[1])+60*parseInt(x[2])+parseFloat(x[3]):null!==
(x=k.exec(c))&&null!==a&&(m=3600*parseInt(x[1])+60*parseInt(x[2])+parseInt(x[3])+(null===x[4]?0:parseInt(x[4])/a));return m}function W(b,a,c){for(;0<a.styleRefs.length;){var e=a.styleRefs.pop();e in b.styles?(W(b,b.styles[e],c),V(b.styles[e].styleAttrs,a.styleAttrs)):J(c,"Non-existant style id referenced")}}function X(b,a,c,e){for(var k=a.length-1;0<=k;k--){var g=a[k];g in b.styles?V(b.styles[g].styleAttrs,c):J(e,"Non-existant style id referenced")}}function V(b,a){for(var c in b)c in a||(a[c]=b[c])}
function L(b,a){if(b&&b.warn&&b.warn(a))throw a;}function J(b,a){if(b&&b.error&&b.error(a))throw a;}function C(b,a){b&&b.fatal&&b.fatal(a);throw a;}function Y(b,a){for(var c=0,e=b.length-1,k;c<=e;){k=Math.floor((c+e)/2);var g=b[k];if(g<a)c=k+1;else if(g>a)e=k-1;else return{found:!0,index:k}}return{found:!1,index:c}}f.fromXML=function(b,c,e){var k=d.parser(!0,{xmlns:!0}),l=[],H=[],D=[],x=0,f=null;k.onclosetag=function(b){if(l[0]instanceof K)null!==f.head&&null!==f.head.styling&&X(f.head.styling,l[0].styleRefs,
l[0].styleAttrs,c),delete l[0].styleRefs;else if(l[0]instanceof u)for(var a in l[0].styles)W(l[0],l[0].styles[a],c);else if(l[0]instanceof y||l[0]instanceof M){if(1<l[0].contents.length){b=[l[0].contents[0]];for(a=1;a<l[0].contents.length;a++)l[0].contents[a]instanceof Q&&b[b.length-1]instanceof Q?b[b.length-1].text+=l[0].contents[a].text:b.push(l[0].contents[a]);l[0].contents=b}l[0]instanceof M&&1===l[0].contents.length&&l[0].contents[0]instanceof Q&&(l[0].text=l[0].contents[0].text,delete l[0].contents)}else if(l[0]instanceof
E)if(l[0].node.uri===m.ns_tt&&"metadata"===l[0].node.local)x--;else if(0<x&&e&&"onCloseTag"in e)e.onCloseTag();D.shift();H.shift();l.shift()};k.ontext=function(b){if(void 0!==l[0])if(l[0]instanceof M||l[0]instanceof y){if(l[0]instanceof M){var a=l[0].styleAttrs[n.byName.ruby.qname];if("container"===a||"textContainer"===a||"baseContainer"===a)return}a=new Q;a.initFromText(f,l[0],b,D[0],c);l[0].contents.push(a)}else if(l[0]instanceof E&&0<x&&e&&"onText"in e)e.onText(b)};k.onopentag=function(b){function a(b){m.ttaf_map[b.uri]&&
(b.uri=m.ttaf_map[b.uri])}var k=b.attributes["xml:space"];k?D.unshift(k.value):0===D.length?D.unshift("default"):D.unshift(D[0]);(k=b.attributes["xml:lang"])?H.unshift(k.value):0===H.length?H.unshift(""):H.unshift(H[0]);a(b);if(b.attributes)for(var g in b.attributes)b.attributes.hasOwnProperty(g)&&a(b.attributes[g]);if(b.uri===m.ns_tt)if("tt"===b.local)null!==f&&C(c,"Two <tt> elements at ("+this.line+","+this.column+")"),f=new h,f.initFromNode(b,c),l.unshift(f);else if("head"===b.local)l[0]instanceof
h||C(c,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),l.unshift(f.head);else if("styling"===b.local)l[0]instanceof p||C(c,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),l.unshift(f.head.styling);else if("style"===b.local)if(l[0]instanceof u){var d=new w;d.initFromNode(b,c);d.id?f.head.styling.styles[d.id]=d:J(c,"<style> element missing @id attribute");l.unshift(d)}else l[0]instanceof K?(d=new w,d.initFromNode(b,c),V(d.styleAttrs,l[0].styleAttrs),
l.unshift(d)):C(c,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===b.local)if(l[0]instanceof u){g=new r;g.initFromNode(b,c);for(d in g.styleAttrs)f.head.styling.initials[d]=g.styleAttrs[d];l.unshift(g)}else C(c,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===b.local)l[0]instanceof p||C(c,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),l.unshift(f.head.layout);
else if("region"===b.local)l[0]instanceof I||C(c,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),d=new K,d.initFromNode(f,b,c),!d.id||d.id in f.head.layout.regions?J(c,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):f.head.layout.regions[d.id]=d,l.unshift(d);else if("body"===b.local)l[0]instanceof h||C(c,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==f.body&&C(c,"Second <body> element at "+this.line+
","+this.column+")"),d=new S,d.initFromNode(f,b,c),f.body=d,l.unshift(d);else if("div"===b.local){l[0]instanceof O||l[0]instanceof S||C(c,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");d=new O;d.initFromNode(f,l[0],b,c);if(g=d.styleAttrs[n.byName.backgroundImage.qname])d.contents.push(new v(g)),delete d.styleAttrs[n.byName.backgroundImage.qname];l[0].contents.push(d);l.unshift(d)}else"image"===b.local?(l[0]instanceof O||C(c,"Parent of <image> element is not <div> at "+
this.line+","+this.column+")"),d=new v,d.initFromNode(f,l[0],b,c),l[0].contents.push(d),l.unshift(d)):"p"===b.local?(l[0]instanceof O||C(c,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),d=new y,d.initFromNode(f,l[0],b,c),l[0].contents.push(d),l.unshift(d)):"span"===b.local?(l[0]instanceof M||l[0]instanceof y||C(c,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),d=new M,d.initFromNode(f,l[0],b,D[0],c),l[0].contents.push(d),l.unshift(d)):"br"===
b.local?(l[0]instanceof M||l[0]instanceof y||C(c,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),d=new A,d.initFromNode(f,l[0],b,c),l[0].contents.push(d),l.unshift(d)):"set"===b.local?(l[0]instanceof M||l[0]instanceof y||l[0]instanceof O||l[0]instanceof S||l[0]instanceof K||l[0]instanceof A||C(c,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),d=new z,d.initFromNode(f,l[0],b,c),l[0].sets.push(d),l.unshift(d)):l.unshift(new E(b));
else l.unshift(new E(b));if(l[0]instanceof E)if(b.uri===m.ns_tt&&"metadata"===b.local)x++;else if(0<x&&e&&"onOpenTag"in e){d=[];for(var P in b.attributes)d[b.attributes[P].uri+" "+b.attributes[P].local]={uri:b.attributes[P].uri,local:b.attributes[P].local,value:b.attributes[P].value};e.onOpenTag(b.uri,b.local,d)}};k.write(b).close();delete f.head.styling.styles;b=!1;for(var q in f.head.layout.regions){b=!0;break}b||(q=K.prototype.createDefaultRegion(f,c),f.head.layout.regions[q.id]=q);for(var B in f.head.layout.regions)g(f,
f.head.layout.regions[B],null,null);f.body&&g(f,f.body,null,null);f.body&&a(f.body);f.body&&t(f.body);return f};h.prototype.initFromNode=function(b,a){var c=N(b,m.ns_ttp,"cellResolution"),e=15;var k=32;null!==c&&(c=/(\d+) (\d+)/.exec(c),null!==c?(k=parseInt(c[1]),e=parseInt(c[2])):L(a,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new q.ComputedLength(0,1/e),w:new q.ComputedLength(1/k,0)};e=N(b,m.ns_ttp,"frameRate");c=30;null!==e&&(k=/(\d+)/.exec(e),null!==k?c=
parseInt(k[1]):L(a,"Malformed frame rate attribute (using initial value instead)"));k=N(b,m.ns_ttp,"frameRateMultiplier");var l=1;null!==k&&(k=/(\d+) (\d+)/.exec(k),null!==k?l=parseInt(k[1])/parseInt(k[2]):L(a,"Malformed frame rate multiplier attribute (using initial value instead)"));c*=l;l=1;k=N(b,m.ns_ttp,"tickRate");null===k?null!==e&&(l=c):(k=/(\d+)/.exec(k),null!==k?l=parseInt(k[1]):L(a,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=c;this.tickRate=l;
k=N(b,m.ns_ittp,"aspectRatio");null===k&&(k=N(b,m.ns_ttp,"displayAspectRatio"));e=null;null!==k&&(c=/(\d+)\s+(\d+)/.exec(k),null!==c?(k=parseInt(c[1]),c=parseInt(c[2]),0!==k&&0!==c?e=k/c:J(a,"Illegal aspectRatio values (ignoring)")):J(a,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=e;e=N(b,m.ns_ttp,"timeBase");null!==e&&"media"!==e&&C(a,"Unsupported time base");b=Z(b,a);null===b?this.pxLength={h:null,w:null}:("px"===b.h.unit&&"px"===b.w.unit||C(a,"Extent on TT must be in px or absent"),
this.pxLength={h:new q.ComputedLength(0,1/b.h.value),w:new q.ComputedLength(1/b.w.value,0)});this.dimensions={h:new q.ComputedLength(0,1),w:new q.ComputedLength(1,0)}};h.prototype._registerEvent=function(b){if(!(b.end<=b.begin)){var a=Y(this.events,b.begin);a.found||this.events.splice(a.index,0,b.begin);b.end!==Number.POSITIVE_INFINITY&&(a=Y(this.events,b.end),a.found||this.events.splice(a.index,0,b.end))}};h.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-
1]]};h.prototype.getMediaTimeEvents=function(){return this.events};w.prototype.initFromNode=function(b,a){this.id=R(b);this.styleAttrs=T(b,a);this.styleRefs=G(b)};r.prototype.initFromNode=function(b,a){this.styleAttrs={};for(var c in b.attributes)if(b.attributes[c].uri===m.ns_itts||b.attributes[c].uri===m.ns_ebutts||b.attributes[c].uri===m.ns_tts)this.styleAttrs[b.attributes[c].uri+" "+b.attributes[c].local]=b.attributes[c].value};v.prototype.initFromNode=function(a,e,g,h){(this.src="src"in g.attributes?
g.attributes.src.value:null)||J(h,"Invalid image@src attribute");(this.type="type"in g.attributes?g.attributes.type.value:null)||J(h,"Invalid image@type attribute");k.prototype.initFromNode.call(this,a,e,g,h);l.prototype.initFromNode.call(this,a,e,g,h);c.prototype.initFromNode.call(this,a,e,g,h);b.prototype.initFromNode.call(this,a,e,g,h)};B.prototype.initFromNode=function(b,a,c,e){this.id=R(c)};b.prototype.initFromNode=function(b,a,c,e){this.regionID=c&&"region"in c.attributes?c.attributes.region.value:
""};k.prototype.initFromNode=function(b,a,c,e){this.styleAttrs=T(c,e);null!==b.head&&null!==b.head.styling&&X(b.head.styling,G(c),this.styleAttrs,e)};c.prototype.initFromNode=function(b,a,c,e){this.sets=[]};e.prototype.initFromNode=function(b,a,c,e){this.contents=[]};l.prototype.initFromNode=function(b,a,c,e){a=null;c&&"begin"in c.attributes&&(a=U(b.tickRate,b.effectiveFrameRate,c.attributes.begin.value),null===a&&L(e,"Malformed begin value "+c.attributes.begin.value+" (using 0)"));var k=null;c&&
"dur"in c.attributes&&(k=U(b.tickRate,b.effectiveFrameRate,c.attributes.dur.value),null===k&&L(e,"Malformed dur value "+c.attributes.dur.value+" (ignoring)"));var l=null;c&&"end"in c.attributes&&(l=U(b.tickRate,b.effectiveFrameRate,c.attributes.end.value),null===l&&L(e,"Malformed end value (ignoring)"));this.explicit_begin=a;this.explicit_end=l;this.explicit_dur=k;(b=c&&"timeContainer"in c.attributes?c.attributes.timeContainer.value:null)&&"par"!==b?"seq"===b?e="seq":(J(e,"Illegal value of timeContainer (assuming 'par')"),
e="par"):e="par";this.timeContainer=e};S.prototype.initFromNode=function(a,g,h){k.prototype.initFromNode.call(this,a,null,g,h);l.prototype.initFromNode.call(this,a,null,g,h);c.prototype.initFromNode.call(this,a,null,g,h);b.prototype.initFromNode.call(this,a,null,g,h);e.prototype.initFromNode.call(this,a,null,g,h)};O.prototype.initFromNode=function(a,g,h,d){k.prototype.initFromNode.call(this,a,g,h,d);l.prototype.initFromNode.call(this,a,g,h,d);c.prototype.initFromNode.call(this,a,g,h,d);b.prototype.initFromNode.call(this,
a,g,h,d);e.prototype.initFromNode.call(this,a,g,h,d)};y.prototype.initFromNode=function(a,g,h,d){k.prototype.initFromNode.call(this,a,g,h,d);l.prototype.initFromNode.call(this,a,g,h,d);c.prototype.initFromNode.call(this,a,g,h,d);b.prototype.initFromNode.call(this,a,g,h,d);e.prototype.initFromNode.call(this,a,g,h,d)};M.prototype.initFromNode=function(a,g,h,d,m){k.prototype.initFromNode.call(this,a,g,h,m);l.prototype.initFromNode.call(this,a,g,h,m);c.prototype.initFromNode.call(this,a,g,h,m);b.prototype.initFromNode.call(this,
a,g,h,m);e.prototype.initFromNode.call(this,a,g,h,m);this.space=d};Q.prototype.initFromText=function(b,a,c,e,k){l.prototype.initFromNode.call(this,b,a,null,k);this.text=c;this.space=e};A.prototype.initFromNode=function(a,c,e,k){b.prototype.initFromNode.call(this,a,c,e,k);l.prototype.initFromNode.call(this,a,c,e,k)};K.prototype.createDefaultRegion=function(b,a){var c=new K;c.id="";k.prototype.initFromNode.call(c,b,null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",value:"after",
prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},"tts:overflow":{name:"tts:overflow",value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",ebutts:"urn:ebu:tt:style",
ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",local:"region",uri:"http://www.w3.org/ns/ttml",isSelfClosing:!0},a);c.sets=[];l.call(c,0,Number.POSITIVE_INFINITY,null);return c};K.prototype.initFromNode=function(b,a,e){B.prototype.initFromNode.call(this,b,null,
a,e);l.prototype.initFromNode.call(this,b,null,a,e);c.prototype.initFromNode.call(this,b,null,a,e);this.styleAttrs=T(a,e);this.styleRefs=G(a)};z.prototype.initFromNode=function(b,a,c,e){l.prototype.initFromNode.call(this,b,a,c,e);b=T(c,e);this.value=this.qname=null;for(var k in b){if(this.qname){J(e,"More than one style specified on set");break}this.qname=k;this.value=b[k]}}})("undefined"===typeof q?this.imscDoc={}:q,"undefined"===typeof sax?d("sax"):sax,"undefined"===typeof imscNames?d("./names"):
imscNames,"undefined"===typeof imscStyles?d("./styles"):imscStyles,"undefined"===typeof imscUtils?d("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7,sax:void 0}],2:[function(d,r,q){backgroundColorAdjustSuffix="BackgroundColorAdjust";(function(d,t,m,n){function f(b){var a={};colorAdjustMapEntries=Object.entries(b);for(var c in colorAdjustMapEntries)fromColor=n.parseColor(colorAdjustMapEntries[c][0]),toColor=n.parseColor(colorAdjustMapEntries[c][1]),fromColor&&toColor&&(a[fromColor.toString()]=
toColor);return a}function q(b,k,c){if("region"===c.kind){var e=document.createElement("div");e.style.position="absolute"}else if("body"===c.kind)e=document.createElement("div");else if("div"===c.kind)e=document.createElement("div");else if("image"===c.kind){if(e=document.createElement("img"),null!==b.imgResolver&&null!==c.src){var l=b.imgResolver(c.src,e);l&&(e.src=l);e.height=b.regionH;e.width=b.regionW}}else if("p"===c.kind)e=document.createElement("p");else if("span"===c.kind)if("container"===
c.styleAttrs[m.byName.ruby.qname])e=document.createElement("ruby"),b.ruby=!0;else if("base"===c.styleAttrs[m.byName.ruby.qname])e=document.createElement("rb");else if("text"===c.styleAttrs[m.byName.ruby.qname])e=document.createElement("rt");else if("baseContainer"===c.styleAttrs[m.byName.ruby.qname])e=document.createElement("rbc");else if("textContainer"===c.styleAttrs[m.byName.ruby.qname])e=document.createElement("rtc");else{if("delimiter"===c.styleAttrs[m.byName.ruby.qname])return;e=document.createElement("span")}else"br"===
c.kind&&(e=document.createElement("br"));if(e){k.appendChild(e);e.style.margin="0";if("region"===c.kind)if(k=c.styleAttrs[m.byName.writingMode.qname],"lrtb"===k||"lr"===k)b.ipd="lr",b.bpd="tb";else if("rltb"===k||"rl"===k)b.ipd="rl",b.bpd="tb";else if("tblr"===k)b.ipd="tb",b.bpd="lr";else{if("tbrl"===k||"tb"===k)b.ipd="tb",b.bpd="rl"}else"p"===c.kind&&"tb"===b.bpd&&(b.ipd="ltr"===c.styleAttrs[m.byName.direction.qname]?"lr":"rl");for(var d in u)k=u[d],l=c.styleAttrs[k.qname],void 0!==l&&null!==k.map&&
k.map(b,e,c,l);d=e;(k=c.styleAttrs[m.byName.linePadding.qname])&&!k.isZero()&&(l=k.multiply(k.toUsedLength(b.w,b.h),b.options.sizeAdjust),0<l&&(l=Math.ceil(l)+"px","tb"===b.bpd?(d.style.paddingLeft=l,d.style.paddingRight=l):(d.style.paddingTop=l,d.style.paddingBottom=l),b.lp=k));(k=c.styleAttrs[m.byName.multiRowAlign.qname])&&"auto"!==k&&(d=document.createElement("span"),d.style.display="inline-block",d.style.textAlign=k,e.appendChild(d),b.mra=k);(k=c.styleAttrs[m.byName.rubyReserve.qname])&&"none"!==
k[0]&&(b.rubyReserve=k);c.styleAttrs[m.byName.fillLineGap.qname]&&(b.flg=!0);if("span"===c.kind&&c.text)if((k=c.styleAttrs[m.byName.textEmphasis.qname])&&"none"!==k.style&&(b.textEmphasis=!0),m.byName.textCombine.qname in c.styleAttrs&&"all"===c.styleAttrs[m.byName.textCombine.qname][0])e.textContent=c.text,k&&h(b,e,c,k);else{l="";for(var f=0;f<c.text.length;f++){l+=c.text.charAt(f);var p=c.text.charCodeAt(f);if(55296>p||56319<p||f===c.text.length)p=document.createElement("span"),p.textContent=l,
k&&h(b,p,c,k),e.appendChild(p),l=""}}for(var n in c.contents)q(b,d,c.contents[n]);n=[];if((b.lp||b.mra||b.flg||b.ruby||b.textEmphasis||b.rubyReserve)&&"p"===c.kind){E(b,d,n,null);if(b.rubyReserve){for(k=0;k<n.length;k++){l=document.createElement("ruby");f=document.createElement("rb");f.textContent="\u200b";l.appendChild(f);var t=b.rubyReserve[1].toUsedLength(b.w,b.h)+"px";"both"===b.rubyReserve[0]||"outside"===b.rubyReserve[0]&&1==n.length?(f=document.createElement("rtc"),f.style[I]=r?"after":"under",
f.textContent="\u200b",f.style.fontSize=t,p=document.createElement("rtc"),p.style[I]=r?"before":"over",p.textContent="\u200b",p.style.fontSize=t,l.appendChild(f),l.appendChild(p)):(f=document.createElement("rtc"),f.textContent="\u200b",f.style.fontSize=t,f.style[I]="after"===b.rubyReserve[0]||"outside"===b.rubyReserve[0]&&0<k?r?"after":"tb"===b.bpd||"rl"===b.bpd?"under":"over":r?"before":"tb"===b.bpd||"rl"===b.bpd?"over":"under",l.appendChild(f));f=null;for(p=0;p<n[k].rbc.length;p++)if("ruby"===n[k].rbc[p].localName){f=
n[k].rbc[p];for(p=0;p<f.style.length;p++)l.style.setProperty(f.style.item(p),f.style.getPropertyValue(f.style.item(p)));break}f=f||n[k].elements[0].node;f.parentElement.insertBefore(l,f)}b.rubyReserve=null}if(b.ruby||b.rubyReserve){for(k=0;k<n.length;k++)for(l=0;l<n[k].rbc.length;l++)n[k].rbc[l].style[I]||(n[k].rbc[l].style[I]=r?0===k?"before":"after":"tb"===b.bpd?0===k?"over":"under":"rl"===b.bpd?0===k?"over":"under":0===k?"under":"over");b.ruby=null}if(b.textEmphasis){for(k=0;k<n.length;k++)for(l=
0;l<n[k].te.length;l++)n[k].te[l].style[B]&&"none"!==n[k].te[l].style[B]||(n[k].te[l].style[B]="tb"===b.bpd?0===k?"left over":"left under":"rl"===b.bpd?0===k?"right under":"left under":0===k?"left under":"right under");b.textEmphasis=null}if(b.mra){for(k=0;k<n.length-1;k++)f=n[k].elements.length,0!==f&&!1===n[k].br&&(l=document.createElement("br"),f=n[k].elements[f-1].node,f.parentElement.insertBefore(l,f.nextSibling));b.mra=null}if(b.lp){k=b.lp.multiply(b.lp.toUsedLength(b.w,b.h),b.options.sizeAdjust);
for(var v in n)l=n[v].elements[n[v].start_elem],f=n[v].elements[n[v].end_elem],p=Math.ceil(k)+"px",t="-"+Math.ceil(k)+"px",0!==n[v].elements.length&&("lr"===b.ipd?(l.node.style.borderLeftColor=l.bgcolor||"#00000000",l.node.style.borderLeftStyle="solid",l.node.style.borderLeftWidth=p,l.node.style.marginLeft=t):"rl"===b.ipd?(l.node.style.borderRightColor=l.bgcolor||"#00000000",l.node.style.borderRightStyle="solid",l.node.style.borderRightWidth=p,l.node.style.marginRight=t):"tb"===b.ipd&&(l.node.style.borderTopColor=
l.bgcolor||"#00000000",l.node.style.borderTopStyle="solid",l.node.style.borderTopWidth=p,l.node.style.marginTop=t),"lr"===b.ipd?(f.node.style.borderRightColor=f.bgcolor||"#00000000",f.node.style.borderRightStyle="solid",f.node.style.borderRightWidth=p,f.node.style.marginRight=t):"rl"===b.ipd?(f.node.style.borderLeftColor=f.bgcolor||"#00000000",f.node.style.borderLeftStyle="solid",f.node.style.borderLeftWidth=p,f.node.style.marginLeft=t):"tb"===b.ipd&&(f.node.style.borderBottomColor=f.bgcolor||"#00000000",
f.node.style.borderBottomStyle="solid",f.node.style.borderBottomWidth=p,f.node.style.marginBottom=t));b.lp=null}if(b.flg){k=g(d.getBoundingClientRect(),b);v=k.before;k=k.after;l=Math.sign(k-v);for(f=0;f<=n.length;f++){p=0===f?v:f===n.length?k:(n[f].before+n[f-1].after)/2;if(0<f)for(var w=0;w<n[f-1].elements.length;w++)if(null!==n[f-1].elements[w].bgcolor){var z=n[f-1].elements[w];0>l*(z.after-p)&&(t=Math.ceil(Math.abs(p-z.after))+"px",z.node.style.backgroundColor=z.bgcolor,"lr"===b.bpd?z.node.style.paddingRight=
t:"rl"===b.bpd?z.node.style.paddingLeft=t:"tb"===b.bpd&&(z.node.style.paddingBottom=t))}if(f<n.length)for(w=0;w<n[f].elements.length;w++)z=n[f].elements[w],null!==z.bgcolor&&0<l*(z.before-p)&&(t=Math.ceil(Math.abs(z.before-p))+"px",z.node.style.backgroundColor=z.bgcolor,"lr"===b.bpd?z.node.style.paddingLeft=t:"rl"===b.bpd?z.node.style.paddingRight=t:"tb"===b.bpd&&(z.node.style.paddingTop=t))}b.flg=null}}"region"===c.kind&&(E(b,d,n),"tb"===b.bpd&&b.enableRollUp&&0<c.contents.length&&"after"===c.styleAttrs[m.byName.displayAlign.qname]&&
(c=new a(""===c.id?"_":c.id,n),b.currentISDState[c.id]=c,b.previousISDState&&c.id in b.previousISDState&&0<b.previousISDState[c.id].plist.length&&1<c.plist.length&&c.plist[c.plist.length-2].text===b.previousISDState[c.id].plist[b.previousISDState[c.id].plist.length-1].text&&(b=e.firstElementChild,c=c.plist[c.plist.length-1].after-c.plist[c.plist.length-1].before,b.style.bottom="-"+c+"px",b.style.transition="transform 0.4s",b.style.position="relative",b.style.transform="translateY(-"+c+"px)")))}else if(b=
b.errorHandler,c="Error processing ISD element kind: "+c.kind,b&&b.error&&b.error(c))throw c;}function a(b,a){this.id=b;this.plist=a}function g(b,a){var c={before:null,after:null,start:null,end:null};"tb"===a.bpd?(c.before=b.top,c.after=b.bottom,"lr"===a.ipd?(c.start=b.left,c.end=b.right):(c.start=b.right,c.end=b.left)):"lr"===a.bpd?(c.before=b.left,c.after=b.right,c.start=b.top,c.end=b.bottom):"rl"===a.bpd&&(c.before=b.right,c.after=b.left,c.start=b.top,c.end=b.bottom);return c}function E(b,a,c,
e){if("rt"!==a.localName&&"rtc"!==a.localName)if(e=a.style.backgroundColor||e,0===a.childElementCount)if("span"===a.localName||"rb"===a.localName){var k=a.getBoundingClientRect();if(0!==k.height&&0!==k.width){b=g(k,b);if(!(k=0===c.length)){k=b.before;var f=b.after,h=c[c.length-1].before,d=c[c.length-1].after;k=!(f<d&&k>h||d<=f&&h>=k)}k?c.push({before:b.before,after:b.after,start:b.start,end:b.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(k=Math.sign(b.after-b.before),f=Math.sign(b.end-
b.start),0>k*(b.before-c[c.length-1].before)&&(c[c.length-1].before=b.before),0<k*(b.after-c[c.length-1].after)&&(c[c.length-1].after=b.after),0>f*(b.start-c[c.length-1].start)&&(c[c.length-1].start=b.start,c[c.length-1].start_elem=c[c.length-1].elements.length),0<f*(b.end-c[c.length-1].end)&&(c[c.length-1].end=b.end,c[c.length-1].end_elem=c[c.length-1].elements.length));c[c.length-1].text+=a.textContent;c[c.length-1].elements.push({node:a,bgcolor:e,before:b.before,after:b.after})}}else"br"===a.localName&&
0!==c.length&&(c[c.length-1].br=!0);else for(a=a.firstChild;a;)a.nodeType===Node.ELEMENT_NODE&&(E(b,a,c,e),"ruby"===a.localName||"rtc"===a.localName?0<c.length&&c[c.length-1].rbc.push(a):"span"===a.localName&&a.style[v]&&"none"!==a.style[v]&&0<c.length&&c[c.length-1].te.push(a)),a=a.nextSibling}function h(b,a,c,e){if("none"===e.style)a.style[v]="none";else if(a.style[v]="auto"===e.style?"filled":e.style+" "+e.symbol,"before"===e.position||"after"===e.position)a.style[B]="tb"===b.bpd?"before"===e.position?
"left over":"left under":"rl"===b.bpd?"before"===e.position?"right under":"left under":"before"===e.position?"left under":"right under"}function p(b,a){this.qname=b;this.map=a}d.render=function(b,a,c,e,g,h,d,m,p,E){e=e||a.clientHeight;var k=g||a.clientWidth;null!==b.aspectRatio&&(g=e*b.aspectRatio,g>k?e=Math.round(k/b.aspectRatio):k=g);g=document.createElement("div");g.style.position="relative";g.style.width=k+"px";g.style.height=e+"px";g.style.margin="auto";g.style.top=0;g.style.bottom=0;g.style.left=
0;g.style.right=0;g.style.zIndex=0;c={h:e,w:k,regionH:null,regionW:null,imgResolver:c,displayForcedOnlyMode:h||!1,isd:b,errorHandler:d,previousISDState:m,enableRollUp:p||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null,options:Object.assign({},E)||{}};c.options.colorAdjust&&(c.options.colorAdjust=f(c.options.colorAdjust));h=["region","body","div","p","span"];for(var l in h)d=h[l]+backgroundColorAdjustSuffix,c.options[d]&&(c.options[d]=
f(c.options[d]));a.appendChild(g);for(var n in b.contents)q(c,g,b.contents[n]);return c.currentISDState};var u=[new p("http://www.w3.org/ns/ttml#styling backgroundColor",function(b,a,c,e){(map_attr=(backgroundColorAdjustMap=b.options[c.kind+backgroundColorAdjustSuffix])&&backgroundColorAdjustMap[e.toString()])&&(e=map_attr);c=e[3];0!==c&&(void 0!=b.options.backgroundOpacityScale&&(c*=b.options.backgroundOpacityScale),a.style.backgroundColor="rgba("+e[0].toString()+","+e[1].toString()+","+e[2].toString()+
","+(c/255).toString()+")")}),new p("http://www.w3.org/ns/ttml#styling color",function(b,a,c,e){opacityMultiplier=b.options.colorOpacityScale||1;colorAdjustMap=b.options.colorAdjust;void 0!=colorAdjustMap&&(map_attr=colorAdjustMap[e.toString()])&&(e=map_attr);a.style.color="rgba("+e[0].toString()+","+e[1].toString()+","+e[2].toString()+","+(opacityMultiplier*e[3]/255).toString()+")"}),new p("http://www.w3.org/ns/ttml#styling direction",function(b,a,c,e){a.style.direction=e}),new p("http://www.w3.org/ns/ttml#styling display",
function(b,a,c,e){}),new p("http://www.w3.org/ns/ttml#styling displayAlign",function(b,a,c,e){a.style.display="flex";a.style.flexDirection="column";"before"===e?a.style.justifyContent="flex-start":"center"===e?a.style.justifyContent="center":"after"===e&&(a.style.justifyContent="flex-end")}),new p("http://www.w3.org/ns/ttml#styling extent",function(b,a,c,e){b.regionH=e.h.toUsedLength(b.w,b.h);b.regionW=e.w.toUsedLength(b.w,b.h);var g=e=0;if(c=c.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])e=
c[0].toUsedLength(b.w,b.h)+c[2].toUsedLength(b.w,b.h),g=c[1].toUsedLength(b.w,b.h)+c[3].toUsedLength(b.w,b.h);a.style.height=b.regionH-e+"px";a.style.width=b.regionW-g+"px"}),new p("http://www.w3.org/ns/ttml#styling fontFamily",function(b,a,c,e){c=[];b.options.fontFamily&&(e=b.options.fontFamily.split(","));for(var g in e)e[g]=e[g].trim(),"monospaceSerif"===e[g]?(c.push("Courier New"),c.push('"Liberation Mono"'),c.push("Courier"),c.push("monospace")):"proportionalSansSerif"===e[g]||"default"===e[g]?
(c.push("Arial"),c.push("Helvetica"),c.push('"Liberation Sans"'),c.push("sans-serif")):"monospace"===e[g]?c.push("monospace"):"sansSerif"===e[g]?c.push("sans-serif"):"serif"===e[g]?c.push("serif"):"monospaceSansSerif"===e[g]?(c.push("Consolas"),c.push("monospace")):"proportionalSerif"===e[g]?c.push("serif"):c.push(e[g]);a.style.fontFamily=c.join(",")}),new p("http://www.w3.org/ns/ttml#styling shear",function(b,a,c,e){0!==e&&(c=-.9*e,a.style.transform="tb"===b.bpd?"skewX("+c+"deg)":"skewY("+c+"deg)")}),
new p("http://www.w3.org/ns/ttml#styling fontSize",function(b,a,c,e){a.style.fontSize=e.multiply(e.toUsedLength(b.w,b.h),b.options.sizeAdjust)+"px"}),new p("http://www.w3.org/ns/ttml#styling fontStyle",function(b,a,c,e){a.style.fontStyle=e}),new p("http://www.w3.org/ns/ttml#styling fontWeight",function(b,a,c,e){a.style.fontWeight=e}),new p("http://www.w3.org/ns/ttml#styling lineHeight",function(b,a,c,e){a.style.lineHeight="normal"===e?"normal":e.multiply(e.multiply(e.toUsedLength(b.w,b.h),b.options.sizeAdjust),
b.options.lineHeightAdjust)+"px"}),new p("http://www.w3.org/ns/ttml#styling opacity",function(b,a,c,e){c=e;void 0!=b.options.regionOpacityScale&&(c*=b.options.regionOpacityScale);a.style.opacity=c}),new p("http://www.w3.org/ns/ttml#styling origin",function(b,a,c,e){a.style.top=e.h.toUsedLength(b.w,b.h)+"px";a.style.left=e.w.toUsedLength(b.w,b.h)+"px"}),new p("http://www.w3.org/ns/ttml#styling overflow",function(b,a,c,e){a.style.overflow=e}),new p("http://www.w3.org/ns/ttml#styling padding",function(b,
a,c,e){c=[];c[0]=e[0].toUsedLength(b.w,b.h)+"px";c[1]=e[3].toUsedLength(b.w,b.h)+"px";c[2]=e[2].toUsedLength(b.w,b.h)+"px";c[3]=e[1].toUsedLength(b.w,b.h)+"px";a.style.padding=c.join(" ")}),new p("http://www.w3.org/ns/ttml#styling position",function(b,a,c,e){a.style.top=e.h.toUsedLength(b.w,b.h)+"px";a.style.left=e.w.toUsedLength(b.w,b.h)+"px"}),new p("http://www.w3.org/ns/ttml#styling rubyAlign",function(b,a,c,e){a.style.rubyAlign="spaceAround"===e?"space-around":"center"}),new p("http://www.w3.org/ns/ttml#styling rubyPosition",
function(a,g,c,e){if("before"===e||"after"===e)g.parentElement.style[I]=r?e:"tb"===a.bpd?"before"===e?"over":"under":"rl"===a.bpd?"before"===e?"over":"under":"before"===e?"under":"over"}),new p("http://www.w3.org/ns/ttml#styling showBackground",null),new p("http://www.w3.org/ns/ttml#styling textAlign",function(a,g,c,e){g.style.textAlign="start"===e?"rl"===a.ipd?"right":"left":"end"===e?"rl"===a.ipd?"left":"right":e}),new p("http://www.w3.org/ns/ttml#styling textDecoration",function(a,g,c,e){g.style.textDecoration=
e.join(" ").replace("lineThrough","line-through")}),new p("http://www.w3.org/ns/ttml#styling textOutline",function(a,g,c,e){}),new p("http://www.w3.org/ns/ttml#styling textShadow",function(a,g,c,e){c=c.styleAttrs[m.byName.textOutline.qname];var b=a.options.textOutline;if(b)if("none"===b)c=b;else{var f={};b=b.split(" ");if(0!==b.length&&2>=b.length){var h=n.parseColor(b[0]);f.color=h;null!==h&&b.shift();1===b.length&&(b=n.parseLength(b[0]))&&(f.thickness=b,c=f)}}if("none"===e&&"none"===c)g.style.textShadow=
"";else{f=[];"none"!==c&&(c="rgba("+c.color[0].toString()+","+c.color[1].toString()+","+c.color[2].toString()+","+(c.color[3]/255).toString()+")",f.push("1px 1px 1px "+c),f.push("-1px 1px 1px "+c),f.push("1px -1px 1px "+c),f.push("-1px -1px 1px "+c));if("none"!==e)for(var k in e)f.push(e[k].x_off.toUsedLength(a.w,a.h)+"px "+e[k].y_off.toUsedLength(a.w,a.h)+"px "+e[k].b_radius.toUsedLength(a.w,a.h)+"px rgba("+e[k].color[0].toString()+","+e[k].color[1].toString()+","+e[k].color[2].toString()+","+(e[k].color[3]/
255).toString()+")");g.style.textShadow=f.join(",")}}),new p("http://www.w3.org/ns/ttml#styling textCombine",function(a,g,c,e){g.style.textCombineUpright=e.join(" ")}),new p("http://www.w3.org/ns/ttml#styling textEmphasis",function(a,g,c,e){}),new p("http://www.w3.org/ns/ttml#styling unicodeBidi",function(a,g,c,e){g.style.unicodeBidi="bidiOverride"===e?"bidi-override":e}),new p("http://www.w3.org/ns/ttml#styling visibility",function(a,g,c,e){g.style.visibility=e}),new p("http://www.w3.org/ns/ttml#styling wrapOption",
function(a,g,c,e){g.style.whiteSpace="wrap"===e?"preserve"===c.space?"pre-wrap":"normal":"preserve"===c.space?"pre":"noWrap"}),new p("http://www.w3.org/ns/ttml#styling writingMode",function(a,g,c,e){if("lrtb"===e||"lr"===e)g.style.writingMode="horizontal-tb";else if("rltb"===e||"rl"===e)g.style.writingMode="horizontal-tb";else if("tblr"===e)g.style.writingMode="vertical-lr";else if("tbrl"===e||"tb"===e)g.style.writingMode="vertical-rl"}),new p("http://www.w3.org/ns/ttml#styling zIndex",function(a,
g,c,e){g.style.zIndex=e}),new p("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(a,g,c,e){a.displayForcedOnlyMode&&!1===e&&(g.style.visibility="hidden")})],w;for(w in u);var r="webkitRubyPosition"in window.getComputedStyle(document.documentElement),I=r?"webkitRubyPosition":"rubyPosition",v="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",B="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?
"webkitTextEmphasisPosition":"textEmphasisPosition"})("undefined"===typeof q?this.imscHTML={}:q,"undefined"===typeof imscNames?d("./names"):imscNames,"undefined"===typeof imscStyles?d("./styles"):imscStyles,"undefined"===typeof imscUtils?d("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7}],3:[function(d,r,q){(function(f,d,m,n){function t(f,d,E,I,v,r,b,k,c){if(d<b.begin||d>=b.end)return null;r="regionID"in b&&""!==b.regionID?b.regionID:r;if(null!==v&&r!==E.id&&(!("contents"in b)||"contents"in
b&&0===b.contents.length||""!==r))return null;var e=new h(b);for(l in b.sets)d<b.sets[l].begin||d>=b.sets[l].end||(e.styleAttrs[b.sets[l].qname]=b.sets[l].value);var l={};for(var u in e.styleAttrs)if(l[u]=!0,"region"===e.kind&&u===m.byName.writingMode.qname&&!(m.byName.direction.qname in e.styleAttrs)){var w=e.styleAttrs[u];if("lrtb"===w||"lr"===w)e.styleAttrs[m.byName.direction.qname]="ltr";else if("rltb"===w||"rl"===w)e.styleAttrs[m.byName.direction.qname]="rtl"}if(null!==v)for(var y in m.all)if(u=
m.all[y],u.qname===m.byName.textDecoration.qname){w=v.styleAttrs[u.qname];var B=e.styleAttrs[u.qname],F=[];void 0===B?F=w:-1===B.indexOf("none")?((-1===B.indexOf("noUnderline")&&-1!==w.indexOf("underline")||-1!==B.indexOf("underline"))&&F.push("underline"),(-1===B.indexOf("noLineThrough")&&-1!==w.indexOf("lineThrough")||-1!==B.indexOf("lineThrough"))&&F.push("lineThrough"),(-1===B.indexOf("noOverline")&&-1!==w.indexOf("overline")||-1!==B.indexOf("overline"))&&F.push("overline")):F.push("none");e.styleAttrs[u.qname]=
F}else u.qname!==m.byName.fontSize.qname||u.qname in e.styleAttrs||"span"!==e.kind||"textContainer"!==e.styleAttrs[m.byName.ruby.qname]?u.qname!==m.byName.fontSize.qname||u.qname in e.styleAttrs||"span"!==e.kind||"text"!==e.styleAttrs[m.byName.ruby.qname]?u.inherit&&u.qname in v.styleAttrs&&!(u.qname in e.styleAttrs)&&(e.styleAttrs[u.qname]=v.styleAttrs[u.qname]):(w=v.styleAttrs[m.byName.fontSize.qname],e.styleAttrs[u.qname]="textContainer"===v.styleAttrs[m.byName.ruby.qname]?w:new n.ComputedLength(.5*
w.rw,.5*w.rh)):(w=v.styleAttrs[m.byName.fontSize.qname],e.styleAttrs[u.qname]=new n.ComputedLength(.5*w.rw,.5*w.rh));for(var A in m.all)if(y=m.all[A],!(y.qname in e.styleAttrs||y.qname===m.byName.position.qname&&m.byName.origin.qname in e.styleAttrs||y.qname===m.byName.origin.qname&&m.byName.position.qname in e.styleAttrs)&&(u=f.head.styling.initials[y.qname]||y.initial,null!==u&&("region"===e.kind||!1===y.inherit&&null!==u)))if(u=y.parse(u),null!==u)e.styleAttrs[y.qname]=u,l[y.qname]=!0;else if(y=
"Invalid initial value for '"+y.qname+"' on element '"+e.kind,k&&k.error&&k.error(y))throw y;for(var K in m.all)if(A=m.all[K],A.qname in l&&null!==A.compute)if(y=A.compute(f,v,e,e.styleAttrs[A.qname],c),null!==y)e.styleAttrs[A.qname]=y;else if(e.styleAttrs[A.qname]=A.compute(f,v,e,A.parse(A.initial),c),A="Style '"+A.qname+"' on element '"+e.kind+"' cannot be computed",k&&k.error&&k.error(A))throw A;if("none"===e.styleAttrs[m.byName.display.qname])return null;if(null===v)var z=null===I?[]:[I];else"contents"in
b&&(z=b.contents);for(var R in z)v=t(f,d,E,I,e,r,z[R],k,c),null!==v&&e.contents.push(v.element);for(var G in e.styleAttrs)f=!1,"span"===e.kind&&(d=e.styleAttrs[m.byName.ruby.qname],(f=("container"===d||"textContainer"===d||"baseContainer"===d)&&-1!==p.indexOf(G))||(f="container"!==d&&G===m.byName.rubyAlign.qname),f||(f=!("textContainer"===d||"text"===d)&&G===m.byName.rubyPosition.qname)),f||(f=-1===m.byQName[G].applies.indexOf(e.kind)),f&&delete e.styleAttrs[G];G=e.styleAttrs[m.byName.ruby.qname];
if("p"===e.kind||"span"===e.kind&&("textContainer"===G||"text"===G))G=[],a(e,G),q(G),g(e);return"div"===e.kind&&m.byName.backgroundImage.qname in e.styleAttrs||"br"===e.kind||"image"===e.kind||"contents"in e&&0<e.contents.length||"span"===e.kind&&null!==e.text||"region"===e.kind&&"always"===e.styleAttrs[m.byName.showBackground.qname]?{region_id:r,element:e}:null}function q(a){function g(a){return"br"===a.kind||/[\r\n\t ]$/.test(a.text)}function f(a){return"br"===a.kind||"preserve"===a.space&&/^[\r\n]/.test(a.text)}
for(var h,d=0;d<a.length;)if(h=a[d],"br"===h.kind||"preserve"===h.space)d++;else{var m=h.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(m)&&(0===d||g(a[d-1]))&&(m=m.substring(1));h.text=m;0===m.length?a.splice(d,1):d++}for(d=0;d<a.length;d++)h=a[d],"br"===h.kind||"preserve"===h.space?d++:/[ ]$/.test(h.text)&&(d===a.length-1||f(a[d+1]))&&(h.text=h.text.slice(0,-1))}function a(g,f){for(var h in g.contents){var d=g.contents[h],p=d.styleAttrs[m.byName.ruby.qname];if("span"!==d.kind||"textContainer"!==p&&
"text"!==p)"contents"in d?a(d,f):("span"===d.kind&&0!==d.text.length||"br"===d.kind)&&f.push(d)}}function g(a){if("br"===a.kind)return!1;if("text"in a)return 0===a.text.length;if("contents"in a){for(var f=a.contents.length;f--;)g(a.contents[f])&&a.contents.splice(f,1);return 0===a.contents.length}}function E(a){this.contents=[];this.aspectRatio=a.aspectRatio}function h(a){this.kind=a.kind||"region";a.id&&(this.id=a.id);this.styleAttrs={};for(var g in a.styleAttrs)this.styleAttrs[g]=a.styleAttrs[g];
"src"in a&&(this.src=a.src);"type"in a&&(this.type=a.type);if("text"in a)this.text=a.text;else if("region"===this.kind||"contents"in a)this.contents=[];"space"in a&&(this.space=a.space)}f.generateISD=function(a,g,f){var d=new E(a),h={},m;for(m in a.head.layout.regions){var b=t(a,g,a.head.layout.regions[m],a.body,null,"",a.head.layout.regions[m],f,h);null!==b&&d.contents.push(b.element)}return d};var p=[m.byName.color.qname,m.byName.textCombine.qname,m.byName.textDecoration.qname,m.byName.textEmphasis.qname,
m.byName.textOutline.qname,m.byName.textShadow.qname]})("undefined"===typeof q?this.imscISD={}:q,"undefined"===typeof imscNames?d("./names"):imscNames,"undefined"===typeof imscStyles?d("./styles"):imscStyles,"undefined"===typeof imscUtils?d("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7}],4:[function(d,r,q){q.generateISD=d("./isd").generateISD;q.fromXML=d("./doc").fromXML;q.renderHTML=d("./html").render},{"./doc":1,"./html":2,"./isd":3}],5:[function(d,r,q){d="undefined"===typeof q?this.imscNames=
{}:q;d.ns_tt="http://www.w3.org/ns/ttml";d.ns_tts="http://www.w3.org/ns/ttml#styling";d.ns_ttp="http://www.w3.org/ns/ttml#parameter";d.ns_xml="http://www.w3.org/XML/1998/namespace";d.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";d.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";d.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";d.ns_ebutts="urn:ebu:tt:style";d.ttaf_map={"http://www.w3.org/2006/10/ttaf1":d.ns_tt,"http://www.w3.org/2006/10/ttaf1#style":d.ns_tts,
"http://www.w3.org/2006/10/ttaf1#parameter":d.ns_ttp}},{}],6:[function(d,r,q){(function(f,d,m){function n(a,g,d,f,m,n,q,r){this.name=g;this.ns=a;this.qname=a+" "+g;this.inherit=m;this.animatable=n;this.initial=d;this.applies=f;this.parse=q;this.compute=r}f.all=[new n(d.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,m.parseColor,null),new n(d.ns_tts,"color","white",["span"],!0,!0,m.parseColor,null),new n(d.ns_tts,"direction","ltr",["p","span"],!0,!0,function(a){return a},
null),new n(d.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(a){return a},null),new n(d.ns_tts,"displayAlign","before",["region"],!1,!0,function(a){return a},null),new n(d.ns_tts,"extent","auto",["tt","region"],!1,!0,function(a){if("auto"===a)return a;var g=a.split(" ");if(2!==g.length)return null;a=m.parseLength(g[0]);return(g=m.parseLength(g[1]))&&a?{h:g,w:a}:null},function(a,g,d,f,p){if("auto"===f)g=new m.ComputedLength(0,1);else if(g=m.toComputedLength(f.h.value,f.h.unit,
null,a.dimensions.h,null,a.pxLength.h),null===g)return null;if("auto"===f)a=new m.ComputedLength(1,0);else if(a=m.toComputedLength(f.w.value,f.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:g,w:a}}),new n(d.ns_tts,"fontFamily","default",["p","span"],!0,!0,function(a){a=a.split(",");var g=[],d;for(d in a)"'"!==a[d].charAt(0)&&'"'!==a[d].charAt(0)?"default"===a[d]?g.push("monospaceSerif"):g.push(a[d]):g.push(a[d]);return g},null),new n(d.ns_tts,"shear","0%",["p"],!0,!0,
m.parseLength,function(a,g,d,f){if("%"===f.unit)a=100<Math.abs(f.value)?100*Math.sign(f.value):f.value;else return null;return a}),new n(d.ns_tts,"fontSize","1c",["p","span"],!0,!0,m.parseLength,function(a,g,d,h,p){return m.toComputedLength(h.value,h.unit,null!==g?g.styleAttrs[f.byName.fontSize.qname]:a.cellLength.h,null!==g?g.styleAttrs[f.byName.fontSize.qname]:a.cellLength.h,a.cellLength.h,a.pxLength.h)}),new n(d.ns_tts,"fontStyle","normal",["span"],!0,!0,function(a){return a},null),new n(d.ns_tts,
"fontWeight","normal",["span"],!0,!0,function(a){return a},null),new n(d.ns_tts,"lineHeight","normal",["p"],!0,!0,function(a){return"normal"===a?a:m.parseLength(a)},function(a,g,d,h,p){if("normal"===h)a=h;else if(a=m.toComputedLength(h.value,h.unit,d.styleAttrs[f.byName.fontSize.qname],d.styleAttrs[f.byName.fontSize.qname],a.cellLength.h,a.pxLength.h),null===a)return null;return a}),new n(d.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new n(d.ns_tts,"origin","auto",["region"],!1,!0,function(a){if("auto"===
a)return a;var g=a.split(" ");if(2!==g.length)return null;a=m.parseLength(g[0]);return(g=m.parseLength(g[1]))&&a?{h:g,w:a}:null},function(a,g,d,f,p){if("auto"===f)g=new m.ComputedLength(0,0);else if(g=m.toComputedLength(f.h.value,f.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===g)return null;if("auto"===f)a=new m.ComputedLength(0,0);else if(a=m.toComputedLength(f.w.value,f.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:g,w:a}}),new n(d.ns_tts,"overflow","hidden",
["region"],!1,!0,function(a){return a},null),new n(d.ns_tts,"padding","0px",["region"],!1,!0,function(a){a=a.split(" ");if(4<a.length)return null;var g=[],d;for(d in a){var f=m.parseLength(a[d]);if(!f)return null;g.push(f)}return g},function(a,g,d,h,p){if(1===h.length)g=[h[0],h[0],h[0],h[0]];else if(2===h.length)g=[h[0],h[1],h[0],h[1]];else if(3===h.length)g=[h[0],h[1],h[2],h[1]];else if(4===h.length)g=[h[0],h[1],h[2],h[3]];else return null;h=d.styleAttrs[f.byName.writingMode.qname];if("lrtb"===h||
"lr"===h)g=[g[0],g[3],g[2],g[1]];else if("rltb"===h||"rl"===h)g=[g[0],g[1],g[2],g[3]];else if("tblr"===h)g=[g[3],g[0],g[1],g[2]];else if("tbrl"===h||"tb"===h)g=[g[3],g[2],g[1],g[0]];else return null;h=[];for(var n in g)if(0===g[n].value)h[n]=new m.ComputedLength(0,0);else if(h[n]=m.toComputedLength(g[n].value,g[n].unit,d.styleAttrs[f.byName.fontSize.qname],"0"===n||"2"===n?d.styleAttrs[f.byName.extent.qname].h:d.styleAttrs[f.byName.extent.qname].w,"0"===n||"2"===n?a.cellLength.h:a.cellLength.w,"0"===
n||"2"===n?a.pxLength.h:a.pxLength.w),null===h[n])return null;return h}),new n(d.ns_tts,"position","top left",["region"],!1,!0,function(a){return m.parsePosition(a)},function(a,g,d,h){g=m.toComputedLength(h.v.offset.value,h.v.offset.unit,null,new m.ComputedLength(-d.styleAttrs[f.byName.extent.qname].h.rw,a.dimensions.h.rh-d.styleAttrs[f.byName.extent.qname].h.rh),null,a.pxLength.h);if(null===g)return null;"bottom"===h.v.edge&&(g=new m.ComputedLength(-g.rw-d.styleAttrs[f.byName.extent.qname].h.rw,
a.dimensions.h.rh-g.rh-d.styleAttrs[f.byName.extent.qname].h.rh));var n=m.toComputedLength(h.h.offset.value,h.h.offset.unit,null,new m.ComputedLength(a.dimensions.w.rw-d.styleAttrs[f.byName.extent.qname].w.rw,-d.styleAttrs[f.byName.extent.qname].w.rh),null,a.pxLength.w);if(null===g)return null;"right"===h.h.edge&&(n=new m.ComputedLength(a.dimensions.w.rw-n.rw-d.styleAttrs[f.byName.extent.qname].w.rw,-n.rh-d.styleAttrs[f.byName.extent.qname].w.rh));return{h:g,w:n}}),new n(d.ns_tts,"ruby","none",["span"],
!1,!0,function(a){return a},null),new n(d.ns_tts,"rubyAlign","center",["span"],!0,!0,function(a){return"center"!==a&&"spaceAround"!==a?null:a},null),new n(d.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(a){return a},null),new n(d.ns_tts,"rubyReserve","none",["p"],!0,!0,function(a){var g=a.split(" ");a=[null,null];if(0===g.length||2<g.length||"none"!==g[0]&&"both"!==g[0]&&"after"!==g[0]&&"before"!==g[0]&&"outside"!==g[0])return null;a[0]=g[0];if(2===g.length&&"none"!==g[0])if(g=m.parseLength(g[1]))a[1]=
g;else return null;return a},function(a,g,d,h,n){if("none"===h[0])return h;a=null===h[1]?new m.ComputedLength(.5*d.styleAttrs[f.byName.fontSize.qname].rw,.5*d.styleAttrs[f.byName.fontSize.qname].rh):m.toComputedLength(h[1].value,h[1].unit,d.styleAttrs[f.byName.fontSize.qname],d.styleAttrs[f.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===a?null:[h[0],a]}),new n(d.ns_tts,"showBackground","whenActive",["region"],!1,!0,function(a){return a},null),new n(d.ns_tts,"textAlign","start",
["p"],!0,!0,function(a){return a},function(a,g,d,f,m){return"left"===f?"start":"right"===f?"end":f}),new n(d.ns_tts,"textCombine","none",["span"],!0,!0,function(a){a=a.split(" ");return 1!==a.length||"none"!==a[0]&&"all"!==a[0]?null:[a[0]]},null),new n(d.ns_tts,"textDecoration","none",["span"],!0,!0,function(a){return a.split(" ")},null),new n(d.ns_tts,"textEmphasis","none",["span"],!0,!0,function(a){a=a.split(" ");var g={style:null,symbol:null,color:null,position:null},d;for(d in a)if("none"===a[d]||
"auto"===a[d])g.style=a[d];else if("filled"===a[d]||"open"===a[d])g.style=a[d];else if("circle"===a[d]||"dot"===a[d]||"sesame"===a[d])g.symbol=a[d];else if("current"===a[d])g.color=a[d];else if("outside"===a[d]||"before"===a[d]||"after"===a[d])g.position=a[d];else if(g.color=m.parseColor(a[d]),null===g.color)return null;null==g.style&&null==g.symbol?g.style="auto":(g.symbol=g.symbol||"circle",g.style=g.style||"filled");g.position=g.position||"outside";g.color=g.color||"current";return g},null),new n(d.ns_tts,
"textOutline","none",["span"],!0,!0,function(a){if("none"===a)return a;var d={};a=a.split(" ");if(0===a.length||2<a.length)return null;var f=m.parseColor(a[0]);d.color=f;null!==f&&a.shift();if(1!==a.length)return null;a=m.parseLength(a[0]);if(!a)return null;d.thickness=a;return d},function(a,d,n,h,p){if("none"===h)return h;d={};d.color=null===h.color?n.styleAttrs[f.byName.color.qname]:h.color;d.thickness=m.toComputedLength(h.thickness.value,h.thickness.unit,n.styleAttrs[f.byName.fontSize.qname],n.styleAttrs[f.byName.fontSize.qname],
a.cellLength.h,a.pxLength.h);return null===d.thickness?null:d}),new n(d.ns_tts,"textShadow","none",["span"],!0,!0,m.parseTextShadow,function(a,d,n,h){if("none"===h)return h;d=[];for(var g in h){var q={};q.x_off=m.toComputedLength(h[g][0].value,h[g][0].unit,null,n.styleAttrs[f.byName.fontSize.qname],null,a.pxLength.w);if(null===q.x_off)return null;q.y_off=m.toComputedLength(h[g][1].value,h[g][1].unit,null,n.styleAttrs[f.byName.fontSize.qname],null,a.pxLength.h);if(null===q.y_off)return null;if(null===
h[g][2])q.b_radius=0;else if(q.b_radius=m.toComputedLength(h[g][2].value,h[g][2].unit,null,n.styleAttrs[f.byName.fontSize.qname],null,a.pxLength.h),null===q.b_radius)return null;q.color=null===h[g][3]?n.styleAttrs[f.byName.color.qname]:h[g][3];d.push(q)}return d}),new n(d.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(a){return a},null),new n(d.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(a){return a},null),new n(d.ns_tts,"wrapOption","wrap",["span"],
!0,!0,function(a){return a},null),new n(d.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(a){return a},null),new n(d.ns_tts,"zIndex","auto",["region"],!1,!0,function(a){"auto"!==a&&(a=parseInt(a),isNaN(a)&&(a=null));return a},null),new n(d.ns_ebutts,"linePadding","0c",["p"],!0,!1,m.parseLength,function(a,d,f,h,n){return m.toComputedLength(h.value,h.unit,null,null,a.cellLength.w,null)}),new n(d.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(a){return a},null),new n(d.ns_smpte,"backgroundImage",
null,["div"],!1,!1,function(a){return a},null),new n(d.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(a){return"true"===a?!0:!1},null),new n(d.ns_itts,"fillLineGap","true",["p"],!0,!0,function(a){return"true"===a?!0:!1},null)];f.byQName={};for(var q in f.all)f.byQName[f.all[q].qname]=f.all[q];f.byName={};for(var r in f.all)f.byName[f.all[r].name]=f.all[r]})("undefined"===typeof q?this.imscStyles={}:q,"undefined"===typeof imscNames?d("./names"):imscNames,"undefined"===
typeof imscUtils?d("./utils"):imscUtils)},{"./names":5,"./utils":7}],7:[function(d,r,q){(function(d){var f=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,m=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,n=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,q={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],
green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};d.parseColor=function(a){var d,r=null,h=q[a.toLowerCase()];void 0!==h?r=h:null!==(d=f.exec(a))?r=[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16),void 0!==d[4]?parseInt(d[4],16):255]:null!==(d=m.exec(a))?r=[parseInt(d[1]),parseInt(d[2]),parseInt(d[3]),255]:null!==(d=n.exec(a))&&(r=[parseInt(d[1]),parseInt(d[2]),
parseInt(d[3]),parseInt(d[4])]);return r};var r=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;d.parseLength=function(a){var d,f=null;null!==(d=r.exec(a))&&(f={value:parseFloat(d[1]),unit:d[2]});return f};d.parseTextShadow=function(a){a=a.split(",");var g=[],f;for(f in a){var h=a[f].split(" ");if(1===h.length&&"none"===h[0])return"none";if(1<h.length&&5>h.length){var m=[null,null,null,null],n=d.parseLength(h.shift());if(null===n)return null;m[0]=n;n=d.parseLength(h.shift());if(null===n)return null;
m[1]=n;if(0!==h.length&&(n=d.parseLength(h[0]),null!==n&&(m[2]=n,h.shift()),0!==h.length)){h=d.parseColor(h[0]);if(null===h)return null;m[3]=h}g.push(m)}}return g};d.parsePosition=function(a){a=a.split(" ");var g=function(a){return"center"===a||"left"===a||"top"===a||"bottom"===a||"right"===a};if(4<a.length)return null;for(var f in a)if(!g(a[f])){var h=d.parseLength(a[f]);if(null===h)return null;a[f]=h}f={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(h=
0;h<a.length;){var m=a[h++];if(g(m)){var n={value:0,unit:"%"};2!==a.length&&h<a.length&&!g(a[h])&&(n=a[h++]);"right"===m?(f.h.edge=m,f.h.offset=n):"bottom"===m?(f.v.edge=m,f.v.offset=n):"left"===m?f.h.offset=n:"top"===m&&(f.v.offset=n)}else if(1===a.length||2===a.length)1===h?f.h.offset=m:f.v.offset=m;else return null}return f};d.ComputedLength=function(a,d){this.rw=a;this.rh=d};d.ComputedLength.prototype.toUsedLength=function(a,d){return a*this.rw+d*this.rh};d.ComputedLength.prototype.multiply=function(a,
d){return d?a*d:a};d.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh};d.toComputedLength=function(a,g,f,h,m,n){return"%"===g&&h?new d.ComputedLength(h.rw*a/100,h.rh*a/100):"em"===g&&f?new d.ComputedLength(f.rw*a,f.rh*a):"c"===g&&m?new d.ComputedLength(a*m.rw,a*m.rh):"px"===g&&n?new d.ComputedLength(a*n.rw,a*n.rh):"rh"===g?new d.ComputedLength(0,a/100):"rw"===g?new d.ComputedLength(a/100,0):null}})("undefined"===typeof q?this.imscUtils={}:q)},{}]},{},[4])(4)});
